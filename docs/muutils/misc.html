<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="pdoc 14.7.0"/>
    <title>muutils.misc API documentation</title>
<link rel="stylesheet" href="../resources/bootstrap-reboot.min.css"><link rel="stylesheet" href="../resources/syntax-highlighting.css"><link rel="stylesheet" href="../resources/theme.css"><link rel="stylesheet" href="../resources/layout.css"><link rel="stylesheet" href="../resources/content.css"><link rel="stylesheet" href="../resources/custom.css"><script>
    window.MathJax = {
        tex: {
            inlineMath: [['$', '$'], ['\\(', '\\)']]
        }
    };
</script>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
<script>
    /* Re-invoke MathJax when DOM content changes, for example during search. */
    document.addEventListener("DOMContentLoaded", () => {
        new MutationObserver(() => MathJax.typeset()).observe(
            document.querySelector("main.pdoc").parentNode,
            {childList: true}
        );
    })
</script>
<style>
    mjx-container {
        overflow-x: auto;
        overflow-y: hidden;
    }
</style><style>
    .pdoc .mermaid-pre {
        border: none;
        background: none;
    }
</style>
<script type="module" defer>
    import mermaid from "https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs";

    /* Re-invoke Mermaid when DOM content changes, for example during search. */
    document.addEventListener("DOMContentLoaded", () => {
        new MutationObserver(() => mermaid.run()).observe(
            document.querySelector("main.pdoc").parentNode,
            {childList: true}
        );
    })
</script></head>
<body>
<div class="package-version">
    docs for <a href="https://github.com/mivanit/muutils">muutils</a> v0.6.20<br>
</div>
    <nav class="pdoc">
        <label id="navtoggle" for="togglestate" class="pdoc-button">
            <img src="../resources/svg/navtoggle.svg" alt="Toggle navigation"> 
        </label>
        <input id="togglestate" type="checkbox" aria-hidden="true" tabindex="-1">
        <div>            <a class="pdoc-button module-list-button" href="../muutils.html">
                <img src="../resources/svg/box-arrow-in-left.svg" alt="Back to parent module"/>
                &nbsp;muutils</a>


            <input type="search" placeholder="Search..." role="searchbox" aria-label="search"
                   pattern=".+" required>


            <h2>Submodules</h2>
            <ul>
                    <li><a href="misc/classes.html">classes</a></li>
                    <li><a href="misc/freezing.html">freezing</a></li>
                    <li><a href="misc/hashing.html">hashing</a></li>
                    <li><a href="misc/numerical.html">numerical</a></li>
                    <li><a href="misc/sequence.html">sequence</a></li>
                    <li><a href="misc/string.html">string</a></li>
            </ul>

            <h2>API Documentation</h2>
                <ul class="memberlist">
            <li>
                    <a class="function" href="#stable_hash">stable_hash</a>
            </li>
            <li>
                    <a class="variable" href="#WhenMissing">WhenMissing</a>
            </li>
            <li>
                    <a class="function" href="#empty_sequence_if_attr_false">empty_sequence_if_attr_false</a>
            </li>
            <li>
                    <a class="function" href="#flatten">flatten</a>
            </li>
            <li>
                    <a class="function" href="#list_split">list_split</a>
            </li>
            <li>
                    <a class="function" href="#list_join">list_join</a>
            </li>
            <li>
                    <a class="function" href="#apply_mapping">apply_mapping</a>
            </li>
            <li>
                    <a class="function" href="#apply_mapping_chain">apply_mapping_chain</a>
            </li>
            <li>
                    <a class="function" href="#sanitize_name">sanitize_name</a>
            </li>
            <li>
                    <a class="function" href="#sanitize_fname">sanitize_fname</a>
            </li>
            <li>
                    <a class="function" href="#sanitize_identifier">sanitize_identifier</a>
            </li>
            <li>
                    <a class="function" href="#dict_to_filename">dict_to_filename</a>
            </li>
            <li>
                    <a class="function" href="#dynamic_docstring">dynamic_docstring</a>
            </li>
            <li>
                    <a class="function" href="#shorten_numerical_to_str">shorten_numerical_to_str</a>
            </li>
            <li>
                    <a class="function" href="#str_to_numeric">str_to_numeric</a>
            </li>
            <li>
                    <a class="variable" href="#_SHORTEN_MAP">_SHORTEN_MAP</a>
            </li>
            <li>
                    <a class="class" href="#FrozenDict">FrozenDict</a>
                            <ul class="memberlist">
                </ul>

            </li>
            <li>
                    <a class="class" href="#FrozenList">FrozenList</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#FrozenList.append">append</a>
                        </li>
                        <li>
                                <a class="function" href="#FrozenList.extend">extend</a>
                        </li>
                        <li>
                                <a class="function" href="#FrozenList.insert">insert</a>
                        </li>
                        <li>
                                <a class="function" href="#FrozenList.remove">remove</a>
                        </li>
                        <li>
                                <a class="function" href="#FrozenList.pop">pop</a>
                        </li>
                        <li>
                                <a class="function" href="#FrozenList.clear">clear</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="function" href="#freeze">freeze</a>
            </li>
            <li>
                    <a class="function" href="#is_abstract">is_abstract</a>
            </li>
            <li>
                    <a class="function" href="#get_all_subclasses">get_all_subclasses</a>
            </li>
            <li>
                    <a class="function" href="#isinstance_by_type_name">isinstance_by_type_name</a>
            </li>
            <li>
                    <a class="class" href="#IsDataclass">IsDataclass</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#IsDataclass.__init__">IsDataclass</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="function" href="#get_hashable_eq_attrs">get_hashable_eq_attrs</a>
            </li>
            <li>
                    <a class="function" href="#dataclass_set_equals">dataclass_set_equals</a>
            </li>
    </ul>



        <a class="attribution" title="pdoc: Python API documentation generator" href="https://pdoc.dev" target="_blank">
            built with <span class="visually-hidden">pdoc</span>
            <img src="../resources/svg/pdoc-logo.svg" alt="pdoc logo"/>
        </a>
</div>
    </nav>
    <main class="pdoc">
            <section class="module-info">
                        <a class="pdoc-button git-button" href="https://github.com/mivanit/muutils/blob/0.6.20/misc/__init__.py">View Source on GitHub</a>
                    <h1 class="modulename">
<a href="./../muutils.html">muutils</a><wbr>.misc    </h1>

                        <div class="docstring"><p>miscellaneous utilities</p>

<ul>
<li><code><a href="#stable_hash">stable_hash</a></code> for hashing that is stable across runs</li>
<li><code><a href="misc/sequence.html">muutils.misc.sequence</a></code> for sequence manipulation, applying mappings, and string-like operations on lists</li>
<li><code><a href="misc/string.html">muutils.misc.string</a></code> for sanitizing things for filenames, adjusting docstrings, and converting dicts to filenames</li>
<li><code><a href="misc/numerical.html">muutils.misc.numerical</a></code> for turning numbers into nice strings and back</li>
<li><code><a href="misc/freezing.html">muutils.misc.freezing</a></code> for freezing things</li>
<li><code><a href="misc/classes.html">muutils.misc.classes</a></code> for some weird class utilities</li>
</ul>
</div>

                        <input id="mod-misc-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">

                        <div class="source-button-container">
            <label class="pdoc-button view-source-button" for="mod-misc-view-source"><span>View Source</span></label>
            <div class="github-button-wrapper">
                <a class="pdoc-button github-link-button" href="https://github.com/mivanit/muutils/blob/0.6.20/misc/__init__.py#L0-L81" target="_blank">
                    <span>View on GitHub</span>
                </a>
            </div>
        </div>

                <br/>
                        <div class="pdoc-code codehilite"><pre><span></span><span id="L-1"><a href="#L-1"><span class="linenos"> 1</span></a><span class="sd">&quot;&quot;&quot;miscellaneous utilities</span>
</span><span id="L-2"><a href="#L-2"><span class="linenos"> 2</span></a>
</span><span id="L-3"><a href="#L-3"><span class="linenos"> 3</span></a><span class="sd">- `stable_hash` for hashing that is stable across runs</span>
</span><span id="L-4"><a href="#L-4"><span class="linenos"> 4</span></a><span class="sd">- `muutils.misc.sequence` for sequence manipulation, applying mappings, and string-like operations on lists</span>
</span><span id="L-5"><a href="#L-5"><span class="linenos"> 5</span></a><span class="sd">- `muutils.misc.string` for sanitizing things for filenames, adjusting docstrings, and converting dicts to filenames</span>
</span><span id="L-6"><a href="#L-6"><span class="linenos"> 6</span></a><span class="sd">- `muutils.misc.numerical` for turning numbers into nice strings and back</span>
</span><span id="L-7"><a href="#L-7"><span class="linenos"> 7</span></a><span class="sd">- `muutils.misc.freezing` for freezing things</span>
</span><span id="L-8"><a href="#L-8"><span class="linenos"> 8</span></a><span class="sd">- `muutils.misc.classes` for some weird class utilities</span>
</span><span id="L-9"><a href="#L-9"><span class="linenos"> 9</span></a><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-10"><a href="#L-10"><span class="linenos">10</span></a>
</span><span id="L-11"><a href="#L-11"><span class="linenos">11</span></a><span class="kn">from</span> <span class="nn">muutils.misc.hashing</span> <span class="kn">import</span> <span class="n">stable_hash</span>
</span><span id="L-12"><a href="#L-12"><span class="linenos">12</span></a><span class="kn">from</span> <span class="nn">muutils.misc.sequence</span> <span class="kn">import</span> <span class="p">(</span>
</span><span id="L-13"><a href="#L-13"><span class="linenos">13</span></a>    <span class="n">WhenMissing</span><span class="p">,</span>
</span><span id="L-14"><a href="#L-14"><span class="linenos">14</span></a>    <span class="n">empty_sequence_if_attr_false</span><span class="p">,</span>
</span><span id="L-15"><a href="#L-15"><span class="linenos">15</span></a>    <span class="n">flatten</span><span class="p">,</span>
</span><span id="L-16"><a href="#L-16"><span class="linenos">16</span></a>    <span class="n">list_split</span><span class="p">,</span>
</span><span id="L-17"><a href="#L-17"><span class="linenos">17</span></a>    <span class="n">list_join</span><span class="p">,</span>
</span><span id="L-18"><a href="#L-18"><span class="linenos">18</span></a>    <span class="n">apply_mapping</span><span class="p">,</span>
</span><span id="L-19"><a href="#L-19"><span class="linenos">19</span></a>    <span class="n">apply_mapping_chain</span><span class="p">,</span>
</span><span id="L-20"><a href="#L-20"><span class="linenos">20</span></a><span class="p">)</span>
</span><span id="L-21"><a href="#L-21"><span class="linenos">21</span></a><span class="kn">from</span> <span class="nn">muutils.misc.string</span> <span class="kn">import</span> <span class="p">(</span>
</span><span id="L-22"><a href="#L-22"><span class="linenos">22</span></a>    <span class="n">sanitize_name</span><span class="p">,</span>
</span><span id="L-23"><a href="#L-23"><span class="linenos">23</span></a>    <span class="n">sanitize_fname</span><span class="p">,</span>
</span><span id="L-24"><a href="#L-24"><span class="linenos">24</span></a>    <span class="n">sanitize_identifier</span><span class="p">,</span>
</span><span id="L-25"><a href="#L-25"><span class="linenos">25</span></a>    <span class="n">dict_to_filename</span><span class="p">,</span>
</span><span id="L-26"><a href="#L-26"><span class="linenos">26</span></a>    <span class="n">dynamic_docstring</span><span class="p">,</span>
</span><span id="L-27"><a href="#L-27"><span class="linenos">27</span></a><span class="p">)</span>
</span><span id="L-28"><a href="#L-28"><span class="linenos">28</span></a><span class="kn">from</span> <span class="nn">muutils.misc.numerical</span> <span class="kn">import</span> <span class="p">(</span>
</span><span id="L-29"><a href="#L-29"><span class="linenos">29</span></a>    <span class="n">shorten_numerical_to_str</span><span class="p">,</span>
</span><span id="L-30"><a href="#L-30"><span class="linenos">30</span></a>    <span class="n">str_to_numeric</span><span class="p">,</span>
</span><span id="L-31"><a href="#L-31"><span class="linenos">31</span></a>    <span class="n">_SHORTEN_MAP</span><span class="p">,</span>
</span><span id="L-32"><a href="#L-32"><span class="linenos">32</span></a><span class="p">)</span>
</span><span id="L-33"><a href="#L-33"><span class="linenos">33</span></a><span class="kn">from</span> <span class="nn">muutils.misc.freezing</span> <span class="kn">import</span> <span class="p">(</span>
</span><span id="L-34"><a href="#L-34"><span class="linenos">34</span></a>    <span class="n">FrozenDict</span><span class="p">,</span>
</span><span id="L-35"><a href="#L-35"><span class="linenos">35</span></a>    <span class="n">FrozenList</span><span class="p">,</span>
</span><span id="L-36"><a href="#L-36"><span class="linenos">36</span></a>    <span class="n">freeze</span><span class="p">,</span>
</span><span id="L-37"><a href="#L-37"><span class="linenos">37</span></a><span class="p">)</span>
</span><span id="L-38"><a href="#L-38"><span class="linenos">38</span></a><span class="kn">from</span> <span class="nn">muutils.misc.classes</span> <span class="kn">import</span> <span class="p">(</span>
</span><span id="L-39"><a href="#L-39"><span class="linenos">39</span></a>    <span class="n">is_abstract</span><span class="p">,</span>
</span><span id="L-40"><a href="#L-40"><span class="linenos">40</span></a>    <span class="n">get_all_subclasses</span><span class="p">,</span>
</span><span id="L-41"><a href="#L-41"><span class="linenos">41</span></a>    <span class="n">isinstance_by_type_name</span><span class="p">,</span>
</span><span id="L-42"><a href="#L-42"><span class="linenos">42</span></a>    <span class="n">IsDataclass</span><span class="p">,</span>
</span><span id="L-43"><a href="#L-43"><span class="linenos">43</span></a>    <span class="n">get_hashable_eq_attrs</span><span class="p">,</span>
</span><span id="L-44"><a href="#L-44"><span class="linenos">44</span></a>    <span class="n">dataclass_set_equals</span><span class="p">,</span>
</span><span id="L-45"><a href="#L-45"><span class="linenos">45</span></a><span class="p">)</span>
</span><span id="L-46"><a href="#L-46"><span class="linenos">46</span></a>
</span><span id="L-47"><a href="#L-47"><span class="linenos">47</span></a>
</span><span id="L-48"><a href="#L-48"><span class="linenos">48</span></a><span class="n">__all__</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="L-49"><a href="#L-49"><span class="linenos">49</span></a>    <span class="c1"># submodules</span>
</span><span id="L-50"><a href="#L-50"><span class="linenos">50</span></a>    <span class="s2">&quot;classes&quot;</span><span class="p">,</span>
</span><span id="L-51"><a href="#L-51"><span class="linenos">51</span></a>    <span class="s2">&quot;freezing&quot;</span><span class="p">,</span>
</span><span id="L-52"><a href="#L-52"><span class="linenos">52</span></a>    <span class="s2">&quot;hashing&quot;</span><span class="p">,</span>
</span><span id="L-53"><a href="#L-53"><span class="linenos">53</span></a>    <span class="s2">&quot;numerical&quot;</span><span class="p">,</span>
</span><span id="L-54"><a href="#L-54"><span class="linenos">54</span></a>    <span class="s2">&quot;sequence&quot;</span><span class="p">,</span>
</span><span id="L-55"><a href="#L-55"><span class="linenos">55</span></a>    <span class="s2">&quot;string&quot;</span><span class="p">,</span>
</span><span id="L-56"><a href="#L-56"><span class="linenos">56</span></a>    <span class="c1"># imports</span>
</span><span id="L-57"><a href="#L-57"><span class="linenos">57</span></a>    <span class="s2">&quot;stable_hash&quot;</span><span class="p">,</span>
</span><span id="L-58"><a href="#L-58"><span class="linenos">58</span></a>    <span class="s2">&quot;WhenMissing&quot;</span><span class="p">,</span>
</span><span id="L-59"><a href="#L-59"><span class="linenos">59</span></a>    <span class="s2">&quot;empty_sequence_if_attr_false&quot;</span><span class="p">,</span>
</span><span id="L-60"><a href="#L-60"><span class="linenos">60</span></a>    <span class="s2">&quot;flatten&quot;</span><span class="p">,</span>
</span><span id="L-61"><a href="#L-61"><span class="linenos">61</span></a>    <span class="s2">&quot;list_split&quot;</span><span class="p">,</span>
</span><span id="L-62"><a href="#L-62"><span class="linenos">62</span></a>    <span class="s2">&quot;list_join&quot;</span><span class="p">,</span>
</span><span id="L-63"><a href="#L-63"><span class="linenos">63</span></a>    <span class="s2">&quot;apply_mapping&quot;</span><span class="p">,</span>
</span><span id="L-64"><a href="#L-64"><span class="linenos">64</span></a>    <span class="s2">&quot;apply_mapping_chain&quot;</span><span class="p">,</span>
</span><span id="L-65"><a href="#L-65"><span class="linenos">65</span></a>    <span class="s2">&quot;sanitize_name&quot;</span><span class="p">,</span>
</span><span id="L-66"><a href="#L-66"><span class="linenos">66</span></a>    <span class="s2">&quot;sanitize_fname&quot;</span><span class="p">,</span>
</span><span id="L-67"><a href="#L-67"><span class="linenos">67</span></a>    <span class="s2">&quot;sanitize_identifier&quot;</span><span class="p">,</span>
</span><span id="L-68"><a href="#L-68"><span class="linenos">68</span></a>    <span class="s2">&quot;dict_to_filename&quot;</span><span class="p">,</span>
</span><span id="L-69"><a href="#L-69"><span class="linenos">69</span></a>    <span class="s2">&quot;dynamic_docstring&quot;</span><span class="p">,</span>
</span><span id="L-70"><a href="#L-70"><span class="linenos">70</span></a>    <span class="s2">&quot;shorten_numerical_to_str&quot;</span><span class="p">,</span>
</span><span id="L-71"><a href="#L-71"><span class="linenos">71</span></a>    <span class="s2">&quot;str_to_numeric&quot;</span><span class="p">,</span>
</span><span id="L-72"><a href="#L-72"><span class="linenos">72</span></a>    <span class="s2">&quot;_SHORTEN_MAP&quot;</span><span class="p">,</span>
</span><span id="L-73"><a href="#L-73"><span class="linenos">73</span></a>    <span class="s2">&quot;FrozenDict&quot;</span><span class="p">,</span>
</span><span id="L-74"><a href="#L-74"><span class="linenos">74</span></a>    <span class="s2">&quot;FrozenList&quot;</span><span class="p">,</span>
</span><span id="L-75"><a href="#L-75"><span class="linenos">75</span></a>    <span class="s2">&quot;freeze&quot;</span><span class="p">,</span>
</span><span id="L-76"><a href="#L-76"><span class="linenos">76</span></a>    <span class="s2">&quot;is_abstract&quot;</span><span class="p">,</span>
</span><span id="L-77"><a href="#L-77"><span class="linenos">77</span></a>    <span class="s2">&quot;get_all_subclasses&quot;</span><span class="p">,</span>
</span><span id="L-78"><a href="#L-78"><span class="linenos">78</span></a>    <span class="s2">&quot;isinstance_by_type_name&quot;</span><span class="p">,</span>
</span><span id="L-79"><a href="#L-79"><span class="linenos">79</span></a>    <span class="s2">&quot;IsDataclass&quot;</span><span class="p">,</span>
</span><span id="L-80"><a href="#L-80"><span class="linenos">80</span></a>    <span class="s2">&quot;get_hashable_eq_attrs&quot;</span><span class="p">,</span>
</span><span id="L-81"><a href="#L-81"><span class="linenos">81</span></a>    <span class="s2">&quot;dataclass_set_equals&quot;</span><span class="p">,</span>
</span><span id="L-82"><a href="#L-82"><span class="linenos">82</span></a><span class="p">]</span>
</span></pre></div>


                <br/>
            </section>
                <section id="stable_hash">
                            <input id="stable_hash-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">stable_hash</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">s</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">bytes</span></span><span class="return-annotation">) -> <span class="nb">int</span>:</span></span>

                <div class="source-button-container">
            <label class="pdoc-button view-source-button" for="stable_hash-view-source"><span>View Source</span></label>
            <div class="github-button-wrapper">
                <a class="pdoc-button github-link-button" href="https://github.com/mivanit/muutils/blob/0.6.20/misc/__init__.py#L7-L17" target="_blank">
                    <span>View on GitHub</span>
                </a>
            </div>
        </div>

    </div>
    <a class="headerlink" href="#stable_hash"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="stable_hash-8"><a href="#stable_hash-8"><span class="linenos"> 8</span></a><span class="k">def</span> <span class="nf">stable_hash</span><span class="p">(</span><span class="n">s</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
</span><span id="stable_hash-9"><a href="#stable_hash-9"><span class="linenos"> 9</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns a stable hash of the given string. not cryptographically secure, but stable between runs&quot;&quot;&quot;</span>
</span><span id="stable_hash-10"><a href="#stable_hash-10"><span class="linenos">10</span></a>    <span class="c1"># init hash object and update with string</span>
</span><span id="stable_hash-11"><a href="#stable_hash-11"><span class="linenos">11</span></a>    <span class="n">s_bytes</span><span class="p">:</span> <span class="nb">bytes</span>
</span><span id="stable_hash-12"><a href="#stable_hash-12"><span class="linenos">12</span></a>    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
</span><span id="stable_hash-13"><a href="#stable_hash-13"><span class="linenos">13</span></a>        <span class="n">s_bytes</span> <span class="o">=</span> <span class="nb">bytes</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="s2">&quot;UTF-8&quot;</span><span class="p">)</span>
</span><span id="stable_hash-14"><a href="#stable_hash-14"><span class="linenos">14</span></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="stable_hash-15"><a href="#stable_hash-15"><span class="linenos">15</span></a>        <span class="n">s_bytes</span> <span class="o">=</span> <span class="n">s</span>
</span><span id="stable_hash-16"><a href="#stable_hash-16"><span class="linenos">16</span></a>    <span class="n">hash_obj</span><span class="p">:</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">_Hash</span> <span class="o">=</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">sha256</span><span class="p">(</span><span class="n">s_bytes</span><span class="p">)</span>
</span><span id="stable_hash-17"><a href="#stable_hash-17"><span class="linenos">17</span></a>    <span class="c1"># get digest and convert to int</span>
</span><span id="stable_hash-18"><a href="#stable_hash-18"><span class="linenos">18</span></a>    <span class="k">return</span> <span class="nb">int</span><span class="o">.</span><span class="n">from_bytes</span><span class="p">(</span><span class="n">hash_obj</span><span class="o">.</span><span class="n">digest</span><span class="p">(),</span> <span class="s2">&quot;big&quot;</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Returns a stable hash of the given string. not cryptographically secure, but stable between runs</p>
</div>


                </section>
                <section id="WhenMissing">
                    <div class="attr variable">
            <span class="name">WhenMissing</span>        =
<span class="default_value">typing.Literal[&#39;except&#39;, &#39;skip&#39;, &#39;include&#39;]</span>

        
    </div>
    <a class="headerlink" href="#WhenMissing"></a>
    
    

                </section>
                <section id="empty_sequence_if_attr_false">
                            <input id="empty_sequence_if_attr_false-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">empty_sequence_if_attr_false</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">itr</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">Any</span><span class="p">]</span>, </span><span class="param"><span class="n">attr_owner</span><span class="p">:</span> <span class="n">Any</span>, </span><span class="param"><span class="n">attr_name</span><span class="p">:</span> <span class="nb">str</span></span><span class="return-annotation">) -> <span class="n">Iterable</span><span class="p">[</span><span class="n">Any</span><span class="p">]</span>:</span></span>

                <div class="source-button-container">
            <label class="pdoc-button view-source-button" for="empty_sequence_if_attr_false-view-source"><span>View Source</span></label>
            <div class="github-button-wrapper">
                <a class="pdoc-button github-link-button" href="https://github.com/mivanit/muutils/blob/0.6.20/misc/__init__.py#L21-L42" target="_blank">
                    <span>View on GitHub</span>
                </a>
            </div>
        </div>

    </div>
    <a class="headerlink" href="#empty_sequence_if_attr_false"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="empty_sequence_if_attr_false-22"><a href="#empty_sequence_if_attr_false-22"><span class="linenos">22</span></a><span class="k">def</span> <span class="nf">empty_sequence_if_attr_false</span><span class="p">(</span>
</span><span id="empty_sequence_if_attr_false-23"><a href="#empty_sequence_if_attr_false-23"><span class="linenos">23</span></a>    <span class="n">itr</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">Any</span><span class="p">],</span>
</span><span id="empty_sequence_if_attr_false-24"><a href="#empty_sequence_if_attr_false-24"><span class="linenos">24</span></a>    <span class="n">attr_owner</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
</span><span id="empty_sequence_if_attr_false-25"><a href="#empty_sequence_if_attr_false-25"><span class="linenos">25</span></a>    <span class="n">attr_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="empty_sequence_if_attr_false-26"><a href="#empty_sequence_if_attr_false-26"><span class="linenos">26</span></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">Any</span><span class="p">]:</span>
</span><span id="empty_sequence_if_attr_false-27"><a href="#empty_sequence_if_attr_false-27"><span class="linenos">27</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns `itr` if `attr_owner` has the attribute `attr_name` and it boolean casts to `True`. Returns an empty sequence otherwise.</span>
</span><span id="empty_sequence_if_attr_false-28"><a href="#empty_sequence_if_attr_false-28"><span class="linenos">28</span></a>
</span><span id="empty_sequence_if_attr_false-29"><a href="#empty_sequence_if_attr_false-29"><span class="linenos">29</span></a><span class="sd">    Particularly useful for optionally inserting delimiters into a sequence depending on an `TokenizerElement` attribute.</span>
</span><span id="empty_sequence_if_attr_false-30"><a href="#empty_sequence_if_attr_false-30"><span class="linenos">30</span></a>
</span><span id="empty_sequence_if_attr_false-31"><a href="#empty_sequence_if_attr_false-31"><span class="linenos">31</span></a><span class="sd">    # Parameters:</span>
</span><span id="empty_sequence_if_attr_false-32"><a href="#empty_sequence_if_attr_false-32"><span class="linenos">32</span></a><span class="sd">    - `itr: Iterable[Any]`</span>
</span><span id="empty_sequence_if_attr_false-33"><a href="#empty_sequence_if_attr_false-33"><span class="linenos">33</span></a><span class="sd">        The iterable to return if the attribute is `True`.</span>
</span><span id="empty_sequence_if_attr_false-34"><a href="#empty_sequence_if_attr_false-34"><span class="linenos">34</span></a><span class="sd">    - `attr_owner: Any`</span>
</span><span id="empty_sequence_if_attr_false-35"><a href="#empty_sequence_if_attr_false-35"><span class="linenos">35</span></a><span class="sd">        The object to check for the attribute.</span>
</span><span id="empty_sequence_if_attr_false-36"><a href="#empty_sequence_if_attr_false-36"><span class="linenos">36</span></a><span class="sd">    - `attr_name: str`</span>
</span><span id="empty_sequence_if_attr_false-37"><a href="#empty_sequence_if_attr_false-37"><span class="linenos">37</span></a><span class="sd">        The name of the attribute to check.</span>
</span><span id="empty_sequence_if_attr_false-38"><a href="#empty_sequence_if_attr_false-38"><span class="linenos">38</span></a>
</span><span id="empty_sequence_if_attr_false-39"><a href="#empty_sequence_if_attr_false-39"><span class="linenos">39</span></a><span class="sd">    # Returns:</span>
</span><span id="empty_sequence_if_attr_false-40"><a href="#empty_sequence_if_attr_false-40"><span class="linenos">40</span></a><span class="sd">    - `itr: Iterable` if `attr_owner` has the attribute `attr_name` and it boolean casts to `True`, otherwise an empty sequence.</span>
</span><span id="empty_sequence_if_attr_false-41"><a href="#empty_sequence_if_attr_false-41"><span class="linenos">41</span></a><span class="sd">    - `()` an empty sequence if the attribute is `False` or not present.</span>
</span><span id="empty_sequence_if_attr_false-42"><a href="#empty_sequence_if_attr_false-42"><span class="linenos">42</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="empty_sequence_if_attr_false-43"><a href="#empty_sequence_if_attr_false-43"><span class="linenos">43</span></a>    <span class="k">return</span> <span class="n">itr</span> <span class="k">if</span> <span class="nb">bool</span><span class="p">(</span><span class="nb">getattr</span><span class="p">(</span><span class="n">attr_owner</span><span class="p">,</span> <span class="n">attr_name</span><span class="p">,</span> <span class="kc">False</span><span class="p">))</span> <span class="k">else</span> <span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>Returns <code>itr</code> if <code>attr_owner</code> has the attribute <code>attr_name</code> and it boolean casts to <code>True</code>. Returns an empty sequence otherwise.</p>

<p>Particularly useful for optionally inserting delimiters into a sequence depending on an <code>TokenizerElement</code> attribute.</p>

<h1 id="parameters">Parameters:</h1>

<ul>
<li><code>itr: Iterable[Any]</code>
The iterable to return if the attribute is <code>True</code>.</li>
<li><code>attr_owner: Any</code>
The object to check for the attribute.</li>
<li><code>attr_name: str</code>
The name of the attribute to check.</li>
</ul>

<h1 id="returns">Returns:</h1>

<ul>
<li><code>itr: Iterable</code> if <code>attr_owner</code> has the attribute <code>attr_name</code> and it boolean casts to <code>True</code>, otherwise an empty sequence.</li>
<li><code>()</code> an empty sequence if the attribute is <code>False</code> or not present.</li>
</ul>
</div>


                </section>
                <section id="flatten">
                            <input id="flatten-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">flatten</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">it</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">Any</span><span class="p">]</span>, </span><span class="param"><span class="n">levels_to_flatten</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span></span><span class="return-annotation">) -> <span class="n">Generator</span>:</span></span>

                <div class="source-button-container">
            <label class="pdoc-button view-source-button" for="flatten-view-source"><span>View Source</span></label>
            <div class="github-button-wrapper">
                <a class="pdoc-button github-link-button" href="https://github.com/mivanit/muutils/blob/0.6.20/misc/__init__.py#L45-L68" target="_blank">
                    <span>View on GitHub</span>
                </a>
            </div>
        </div>

    </div>
    <a class="headerlink" href="#flatten"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="flatten-46"><a href="#flatten-46"><span class="linenos">46</span></a><span class="k">def</span> <span class="nf">flatten</span><span class="p">(</span><span class="n">it</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">Any</span><span class="p">],</span> <span class="n">levels_to_flatten</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Generator</span><span class="p">:</span>
</span><span id="flatten-47"><a href="#flatten-47"><span class="linenos">47</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="flatten-48"><a href="#flatten-48"><span class="linenos">48</span></a><span class="sd">    Flattens an arbitrarily nested iterable.</span>
</span><span id="flatten-49"><a href="#flatten-49"><span class="linenos">49</span></a><span class="sd">    Flattens all iterable data types except for `str` and `bytes`.</span>
</span><span id="flatten-50"><a href="#flatten-50"><span class="linenos">50</span></a>
</span><span id="flatten-51"><a href="#flatten-51"><span class="linenos">51</span></a><span class="sd">    # Returns</span>
</span><span id="flatten-52"><a href="#flatten-52"><span class="linenos">52</span></a><span class="sd">    Generator over the flattened sequence.</span>
</span><span id="flatten-53"><a href="#flatten-53"><span class="linenos">53</span></a>
</span><span id="flatten-54"><a href="#flatten-54"><span class="linenos">54</span></a><span class="sd">    # Parameters</span>
</span><span id="flatten-55"><a href="#flatten-55"><span class="linenos">55</span></a><span class="sd">    - `it`: Any arbitrarily nested iterable.</span>
</span><span id="flatten-56"><a href="#flatten-56"><span class="linenos">56</span></a><span class="sd">    - `levels_to_flatten`: Number of levels to flatten by, starting at the outermost layer. If `None`, performs full flattening.</span>
</span><span id="flatten-57"><a href="#flatten-57"><span class="linenos">57</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="flatten-58"><a href="#flatten-58"><span class="linenos">58</span></a>    <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">it</span><span class="p">:</span>
</span><span id="flatten-59"><a href="#flatten-59"><span class="linenos">59</span></a>        <span class="c1"># TODO: swap type check with more general check for __iter__() or __next__() or whatever</span>
</span><span id="flatten-60"><a href="#flatten-60"><span class="linenos">60</span></a>        <span class="k">if</span> <span class="p">(</span>
</span><span id="flatten-61"><a href="#flatten-61"><span class="linenos">61</span></a>            <span class="nb">hasattr</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="s2">&quot;__iter__&quot;</span><span class="p">)</span>
</span><span id="flatten-62"><a href="#flatten-62"><span class="linenos">62</span></a>            <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">))</span>
</span><span id="flatten-63"><a href="#flatten-63"><span class="linenos">63</span></a>            <span class="ow">and</span> <span class="p">(</span><span class="n">levels_to_flatten</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">levels_to_flatten</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span>
</span><span id="flatten-64"><a href="#flatten-64"><span class="linenos">64</span></a>        <span class="p">):</span>
</span><span id="flatten-65"><a href="#flatten-65"><span class="linenos">65</span></a>            <span class="k">yield from</span> <span class="n">flatten</span><span class="p">(</span>
</span><span id="flatten-66"><a href="#flatten-66"><span class="linenos">66</span></a>                <span class="n">x</span><span class="p">,</span> <span class="kc">None</span> <span class="k">if</span> <span class="n">levels_to_flatten</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">levels_to_flatten</span> <span class="o">-</span> <span class="mi">1</span>
</span><span id="flatten-67"><a href="#flatten-67"><span class="linenos">67</span></a>            <span class="p">)</span>
</span><span id="flatten-68"><a href="#flatten-68"><span class="linenos">68</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="flatten-69"><a href="#flatten-69"><span class="linenos">69</span></a>            <span class="k">yield</span> <span class="n">x</span>
</span></pre></div>


            <div class="docstring"><p>Flattens an arbitrarily nested iterable.
Flattens all iterable data types except for <code>str</code> and <code>bytes</code>.</p>

<h1 id="returns">Returns</h1>

<p>Generator over the flattened sequence.</p>

<h1 id="parameters">Parameters</h1>

<ul>
<li><code>it</code>: Any arbitrarily nested iterable.</li>
<li><code>levels_to_flatten</code>: Number of levels to flatten by, starting at the outermost layer. If <code>None</code>, performs full flattening.</li>
</ul>
</div>


                </section>
                <section id="list_split">
                            <input id="list_split-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">list_split</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">lst</span><span class="p">:</span> <span class="nb">list</span>, </span><span class="param"><span class="n">val</span><span class="p">:</span> <span class="n">Any</span></span><span class="return-annotation">) -> <span class="nb">list</span><span class="p">[</span><span class="nb">list</span><span class="p">]</span>:</span></span>

                <div class="source-button-container">
            <label class="pdoc-button view-source-button" for="list_split-view-source"><span>View Source</span></label>
            <div class="github-button-wrapper">
                <a class="pdoc-button github-link-button" href="https://github.com/mivanit/muutils/blob/0.6.20/misc/__init__.py#L75-L103" target="_blank">
                    <span>View on GitHub</span>
                </a>
            </div>
        </div>

    </div>
    <a class="headerlink" href="#list_split"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="list_split-76"><a href="#list_split-76"><span class="linenos"> 76</span></a><span class="k">def</span> <span class="nf">list_split</span><span class="p">(</span><span class="n">lst</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span> <span class="n">val</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">list</span><span class="p">]:</span>
</span><span id="list_split-77"><a href="#list_split-77"><span class="linenos"> 77</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;split a list into sublists by `val`. similar to &quot;a_b_c&quot;.split(&quot;_&quot;)</span>
</span><span id="list_split-78"><a href="#list_split-78"><span class="linenos"> 78</span></a>
</span><span id="list_split-79"><a href="#list_split-79"><span class="linenos"> 79</span></a><span class="sd">    ```python</span>
</span><span id="list_split-80"><a href="#list_split-80"><span class="linenos"> 80</span></a><span class="sd">    &gt;&gt;&gt; list_split([1,2,3,0,4,5,0,6], 0)</span>
</span><span id="list_split-81"><a href="#list_split-81"><span class="linenos"> 81</span></a><span class="sd">    [[1, 2, 3], [4, 5], [6]]</span>
</span><span id="list_split-82"><a href="#list_split-82"><span class="linenos"> 82</span></a><span class="sd">    &gt;&gt;&gt; list_split([0,1,2,3], 0)</span>
</span><span id="list_split-83"><a href="#list_split-83"><span class="linenos"> 83</span></a><span class="sd">    [[], [1, 2, 3]]</span>
</span><span id="list_split-84"><a href="#list_split-84"><span class="linenos"> 84</span></a><span class="sd">    &gt;&gt;&gt; list_split([1,2,3], 0)</span>
</span><span id="list_split-85"><a href="#list_split-85"><span class="linenos"> 85</span></a><span class="sd">    [[1, 2, 3]]</span>
</span><span id="list_split-86"><a href="#list_split-86"><span class="linenos"> 86</span></a><span class="sd">    &gt;&gt;&gt; list_split([], 0)</span>
</span><span id="list_split-87"><a href="#list_split-87"><span class="linenos"> 87</span></a><span class="sd">    [[]]</span>
</span><span id="list_split-88"><a href="#list_split-88"><span class="linenos"> 88</span></a><span class="sd">    ```</span>
</span><span id="list_split-89"><a href="#list_split-89"><span class="linenos"> 89</span></a>
</span><span id="list_split-90"><a href="#list_split-90"><span class="linenos"> 90</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="list_split-91"><a href="#list_split-91"><span class="linenos"> 91</span></a>
</span><span id="list_split-92"><a href="#list_split-92"><span class="linenos"> 92</span></a>    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">lst</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="list_split-93"><a href="#list_split-93"><span class="linenos"> 93</span></a>        <span class="k">return</span> <span class="p">[[]]</span>
</span><span id="list_split-94"><a href="#list_split-94"><span class="linenos"> 94</span></a>
</span><span id="list_split-95"><a href="#list_split-95"><span class="linenos"> 95</span></a>    <span class="n">output</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">list</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="list_split-96"><a href="#list_split-96"><span class="linenos"> 96</span></a>        <span class="p">[],</span>
</span><span id="list_split-97"><a href="#list_split-97"><span class="linenos"> 97</span></a>    <span class="p">]</span>
</span><span id="list_split-98"><a href="#list_split-98"><span class="linenos"> 98</span></a>
</span><span id="list_split-99"><a href="#list_split-99"><span class="linenos"> 99</span></a>    <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">lst</span><span class="p">:</span>
</span><span id="list_split-100"><a href="#list_split-100"><span class="linenos">100</span></a>        <span class="k">if</span> <span class="n">x</span> <span class="o">==</span> <span class="n">val</span><span class="p">:</span>
</span><span id="list_split-101"><a href="#list_split-101"><span class="linenos">101</span></a>            <span class="n">output</span><span class="o">.</span><span class="n">append</span><span class="p">([])</span>
</span><span id="list_split-102"><a href="#list_split-102"><span class="linenos">102</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="list_split-103"><a href="#list_split-103"><span class="linenos">103</span></a>            <span class="n">output</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
</span><span id="list_split-104"><a href="#list_split-104"><span class="linenos">104</span></a>    <span class="k">return</span> <span class="n">output</span>
</span></pre></div>


            <div class="docstring"><p>split a list into sublists by <code>val</code>. similar to "a_b_c".split("_")</p>

<div class="pdoc-code codehilite">
<pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">list_split</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">6</span><span class="p">],</span> <span class="mi">0</span><span class="p">)</span>
<span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span> <span class="p">[</span><span class="mi">6</span><span class="p">]]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">list_split</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span> <span class="mi">0</span><span class="p">)</span>
<span class="p">[[],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">list_split</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span> <span class="mi">0</span><span class="p">)</span>
<span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">list_split</span><span class="p">([],</span> <span class="mi">0</span><span class="p">)</span>
<span class="p">[[]]</span>
</code></pre>
</div>
</div>


                </section>
                <section id="list_join">
                            <input id="list_join-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">list_join</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">lst</span><span class="p">:</span> <span class="nb">list</span>, </span><span class="param"><span class="n">factory</span><span class="p">:</span> <span class="n">Callable</span></span><span class="return-annotation">) -> <span class="nb">list</span>:</span></span>

                <div class="source-button-container">
            <label class="pdoc-button view-source-button" for="list_join-view-source"><span>View Source</span></label>
            <div class="github-button-wrapper">
                <a class="pdoc-button github-link-button" href="https://github.com/mivanit/muutils/blob/0.6.20/misc/__init__.py#L106-L128" target="_blank">
                    <span>View on GitHub</span>
                </a>
            </div>
        </div>

    </div>
    <a class="headerlink" href="#list_join"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="list_join-107"><a href="#list_join-107"><span class="linenos">107</span></a><span class="k">def</span> <span class="nf">list_join</span><span class="p">(</span><span class="n">lst</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span> <span class="n">factory</span><span class="p">:</span> <span class="n">Callable</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">:</span>
</span><span id="list_join-108"><a href="#list_join-108"><span class="linenos">108</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;add a *new* instance of `factory()` between each element of `lst`</span>
</span><span id="list_join-109"><a href="#list_join-109"><span class="linenos">109</span></a>
</span><span id="list_join-110"><a href="#list_join-110"><span class="linenos">110</span></a><span class="sd">    ```python</span>
</span><span id="list_join-111"><a href="#list_join-111"><span class="linenos">111</span></a><span class="sd">    &gt;&gt;&gt; list_join([1,2,3], lambda : 0)</span>
</span><span id="list_join-112"><a href="#list_join-112"><span class="linenos">112</span></a><span class="sd">    [1,0,2,0,3]</span>
</span><span id="list_join-113"><a href="#list_join-113"><span class="linenos">113</span></a><span class="sd">    &gt;&gt;&gt; list_join([1,2,3], lambda: [time.sleep(0.1), time.time()][1])</span>
</span><span id="list_join-114"><a href="#list_join-114"><span class="linenos">114</span></a><span class="sd">    [1, 1600000000.0, 2, 1600000000.1, 3]</span>
</span><span id="list_join-115"><a href="#list_join-115"><span class="linenos">115</span></a><span class="sd">    ```</span>
</span><span id="list_join-116"><a href="#list_join-116"><span class="linenos">116</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="list_join-117"><a href="#list_join-117"><span class="linenos">117</span></a>
</span><span id="list_join-118"><a href="#list_join-118"><span class="linenos">118</span></a>    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">lst</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="list_join-119"><a href="#list_join-119"><span class="linenos">119</span></a>        <span class="k">return</span> <span class="p">[]</span>
</span><span id="list_join-120"><a href="#list_join-120"><span class="linenos">120</span></a>
</span><span id="list_join-121"><a href="#list_join-121"><span class="linenos">121</span></a>    <span class="n">output</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="list_join-122"><a href="#list_join-122"><span class="linenos">122</span></a>        <span class="n">lst</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
</span><span id="list_join-123"><a href="#list_join-123"><span class="linenos">123</span></a>    <span class="p">]</span>
</span><span id="list_join-124"><a href="#list_join-124"><span class="linenos">124</span></a>
</span><span id="list_join-125"><a href="#list_join-125"><span class="linenos">125</span></a>    <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">lst</span><span class="p">[</span><span class="mi">1</span><span class="p">:]:</span>
</span><span id="list_join-126"><a href="#list_join-126"><span class="linenos">126</span></a>        <span class="n">output</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">factory</span><span class="p">())</span>
</span><span id="list_join-127"><a href="#list_join-127"><span class="linenos">127</span></a>        <span class="n">output</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
</span><span id="list_join-128"><a href="#list_join-128"><span class="linenos">128</span></a>
</span><span id="list_join-129"><a href="#list_join-129"><span class="linenos">129</span></a>    <span class="k">return</span> <span class="n">output</span>
</span></pre></div>


            <div class="docstring"><p>add a <em>new</em> instance of <code>factory()</code> between each element of <code>lst</code></p>

<div class="pdoc-code codehilite">
<pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">list_join</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span> <span class="k">lambda</span> <span class="p">:</span> <span class="mi">0</span><span class="p">)</span>
<span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">3</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">list_join</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span> <span class="k">lambda</span><span class="p">:</span> <span class="p">[</span><span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.1</span><span class="p">),</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()][</span><span class="mi">1</span><span class="p">])</span>
<span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mf">1600000000.0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mf">1600000000.1</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
</code></pre>
</div>
</div>


                </section>
                <section id="apply_mapping">
                            <input id="apply_mapping-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">apply_mapping</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">mapping</span><span class="p">:</span> <span class="n">Mapping</span><span class="p">[</span><span class="o">~</span><span class="n">_AM_K</span><span class="p">,</span> <span class="o">~</span><span class="n">_AM_V</span><span class="p">]</span>,</span><span class="param">	<span class="nb">iter</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="o">~</span><span class="n">_AM_K</span><span class="p">]</span>,</span><span class="param">	<span class="n">when_missing</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s1">&#39;except&#39;</span><span class="p">,</span> <span class="s1">&#39;skip&#39;</span><span class="p">,</span> <span class="s1">&#39;include&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;skip&#39;</span></span><span class="return-annotation">) -> <span class="nb">list</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="o">~</span><span class="n">_AM_K</span><span class="p">,</span> <span class="o">~</span><span class="n">_AM_V</span><span class="p">]]</span>:</span></span>

                <div class="source-button-container">
            <label class="pdoc-button view-source-button" for="apply_mapping-view-source"><span>View Source</span></label>
            <div class="github-button-wrapper">
                <a class="pdoc-button github-link-button" href="https://github.com/mivanit/muutils/blob/0.6.20/misc/__init__.py#L138-L184" target="_blank">
                    <span>View on GitHub</span>
                </a>
            </div>
        </div>

    </div>
    <a class="headerlink" href="#apply_mapping"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="apply_mapping-139"><a href="#apply_mapping-139"><span class="linenos">139</span></a><span class="k">def</span> <span class="nf">apply_mapping</span><span class="p">(</span>
</span><span id="apply_mapping-140"><a href="#apply_mapping-140"><span class="linenos">140</span></a>    <span class="n">mapping</span><span class="p">:</span> <span class="n">Mapping</span><span class="p">[</span><span class="n">_AM_K</span><span class="p">,</span> <span class="n">_AM_V</span><span class="p">],</span>
</span><span id="apply_mapping-141"><a href="#apply_mapping-141"><span class="linenos">141</span></a>    <span class="nb">iter</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">_AM_K</span><span class="p">],</span>
</span><span id="apply_mapping-142"><a href="#apply_mapping-142"><span class="linenos">142</span></a>    <span class="n">when_missing</span><span class="p">:</span> <span class="n">WhenMissing</span> <span class="o">=</span> <span class="s2">&quot;skip&quot;</span><span class="p">,</span>
</span><span id="apply_mapping-143"><a href="#apply_mapping-143"><span class="linenos">143</span></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">_AM_K</span><span class="p">,</span> <span class="n">_AM_V</span><span class="p">]]:</span>
</span><span id="apply_mapping-144"><a href="#apply_mapping-144"><span class="linenos">144</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Given an iterable and a mapping, apply the mapping to the iterable with certain options</span>
</span><span id="apply_mapping-145"><a href="#apply_mapping-145"><span class="linenos">145</span></a>
</span><span id="apply_mapping-146"><a href="#apply_mapping-146"><span class="linenos">146</span></a><span class="sd">    Gotcha: if `when_missing` is invalid, this is totally fine until a missing key is actually encountered.</span>
</span><span id="apply_mapping-147"><a href="#apply_mapping-147"><span class="linenos">147</span></a>
</span><span id="apply_mapping-148"><a href="#apply_mapping-148"><span class="linenos">148</span></a><span class="sd">    Note: you can use this with `muutils.kappa.Kappa` if you want to pass a function instead of a dict</span>
</span><span id="apply_mapping-149"><a href="#apply_mapping-149"><span class="linenos">149</span></a>
</span><span id="apply_mapping-150"><a href="#apply_mapping-150"><span class="linenos">150</span></a><span class="sd">    # Parameters:</span>
</span><span id="apply_mapping-151"><a href="#apply_mapping-151"><span class="linenos">151</span></a><span class="sd">     - `mapping : Mapping[_AM_K, _AM_V]`</span>
</span><span id="apply_mapping-152"><a href="#apply_mapping-152"><span class="linenos">152</span></a><span class="sd">        must have `__contains__` and `__getitem__`, both of which take `_AM_K` and the latter returns `_AM_V`</span>
</span><span id="apply_mapping-153"><a href="#apply_mapping-153"><span class="linenos">153</span></a><span class="sd">     - `iter : Iterable[_AM_K]`</span>
</span><span id="apply_mapping-154"><a href="#apply_mapping-154"><span class="linenos">154</span></a><span class="sd">        the iterable to apply the mapping to</span>
</span><span id="apply_mapping-155"><a href="#apply_mapping-155"><span class="linenos">155</span></a><span class="sd">     - `when_missing : WhenMissing`</span>
</span><span id="apply_mapping-156"><a href="#apply_mapping-156"><span class="linenos">156</span></a><span class="sd">        what to do when a key is missing from the mapping -- this is what distinguishes this function from `map`</span>
</span><span id="apply_mapping-157"><a href="#apply_mapping-157"><span class="linenos">157</span></a><span class="sd">        you can choose from `&quot;skip&quot;`, `&quot;include&quot;` (without converting), and `&quot;except&quot;`</span>
</span><span id="apply_mapping-158"><a href="#apply_mapping-158"><span class="linenos">158</span></a><span class="sd">       (defaults to `&quot;skip&quot;`)</span>
</span><span id="apply_mapping-159"><a href="#apply_mapping-159"><span class="linenos">159</span></a>
</span><span id="apply_mapping-160"><a href="#apply_mapping-160"><span class="linenos">160</span></a><span class="sd">    # Returns:</span>
</span><span id="apply_mapping-161"><a href="#apply_mapping-161"><span class="linenos">161</span></a><span class="sd">    return type is one of:</span>
</span><span id="apply_mapping-162"><a href="#apply_mapping-162"><span class="linenos">162</span></a><span class="sd">     - `list[_AM_V]` if `when_missing` is `&quot;skip&quot;` or `&quot;except&quot;`</span>
</span><span id="apply_mapping-163"><a href="#apply_mapping-163"><span class="linenos">163</span></a><span class="sd">     - `list[Union[_AM_K, _AM_V]]` if `when_missing` is `&quot;include&quot;`</span>
</span><span id="apply_mapping-164"><a href="#apply_mapping-164"><span class="linenos">164</span></a>
</span><span id="apply_mapping-165"><a href="#apply_mapping-165"><span class="linenos">165</span></a><span class="sd">    # Raises:</span>
</span><span id="apply_mapping-166"><a href="#apply_mapping-166"><span class="linenos">166</span></a><span class="sd">     - `KeyError` : if the item is missing from the mapping and `when_missing` is `&quot;except&quot;`</span>
</span><span id="apply_mapping-167"><a href="#apply_mapping-167"><span class="linenos">167</span></a><span class="sd">     - `ValueError` : if `when_missing` is invalid</span>
</span><span id="apply_mapping-168"><a href="#apply_mapping-168"><span class="linenos">168</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="apply_mapping-169"><a href="#apply_mapping-169"><span class="linenos">169</span></a>    <span class="n">output</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">_AM_K</span><span class="p">,</span> <span class="n">_AM_V</span><span class="p">]]</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>
</span><span id="apply_mapping-170"><a href="#apply_mapping-170"><span class="linenos">170</span></a>    <span class="n">item</span><span class="p">:</span> <span class="n">_AM_K</span>
</span><span id="apply_mapping-171"><a href="#apply_mapping-171"><span class="linenos">171</span></a>    <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="nb">iter</span><span class="p">:</span>
</span><span id="apply_mapping-172"><a href="#apply_mapping-172"><span class="linenos">172</span></a>        <span class="k">if</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">mapping</span><span class="p">:</span>
</span><span id="apply_mapping-173"><a href="#apply_mapping-173"><span class="linenos">173</span></a>            <span class="n">output</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">mapping</span><span class="p">[</span><span class="n">item</span><span class="p">])</span>
</span><span id="apply_mapping-174"><a href="#apply_mapping-174"><span class="linenos">174</span></a>            <span class="k">continue</span>
</span><span id="apply_mapping-175"><a href="#apply_mapping-175"><span class="linenos">175</span></a>        <span class="k">if</span> <span class="n">when_missing</span> <span class="o">==</span> <span class="s2">&quot;skip&quot;</span><span class="p">:</span>
</span><span id="apply_mapping-176"><a href="#apply_mapping-176"><span class="linenos">176</span></a>            <span class="k">continue</span>
</span><span id="apply_mapping-177"><a href="#apply_mapping-177"><span class="linenos">177</span></a>        <span class="k">elif</span> <span class="n">when_missing</span> <span class="o">==</span> <span class="s2">&quot;include&quot;</span><span class="p">:</span>
</span><span id="apply_mapping-178"><a href="#apply_mapping-178"><span class="linenos">178</span></a>            <span class="n">output</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
</span><span id="apply_mapping-179"><a href="#apply_mapping-179"><span class="linenos">179</span></a>        <span class="k">elif</span> <span class="n">when_missing</span> <span class="o">==</span> <span class="s2">&quot;except&quot;</span><span class="p">:</span>
</span><span id="apply_mapping-180"><a href="#apply_mapping-180"><span class="linenos">180</span></a>            <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;item </span><span class="si">{</span><span class="n">item</span><span class="si">}</span><span class="s2"> is missing from mapping </span><span class="si">{</span><span class="n">mapping</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="apply_mapping-181"><a href="#apply_mapping-181"><span class="linenos">181</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="apply_mapping-182"><a href="#apply_mapping-182"><span class="linenos">182</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="apply_mapping-183"><a href="#apply_mapping-183"><span class="linenos">183</span></a>                <span class="sa">f</span><span class="s2">&quot;invalid value for </span><span class="si">{</span><span class="n">when_missing</span><span class="w"> </span><span class="si">= }</span><span class="se">\n</span><span class="si">{</span><span class="n">item</span><span class="w"> </span><span class="si">= }</span><span class="se">\n</span><span class="si">{</span><span class="n">mapping</span><span class="w"> </span><span class="si">= }</span><span class="s2">&quot;</span>
</span><span id="apply_mapping-184"><a href="#apply_mapping-184"><span class="linenos">184</span></a>            <span class="p">)</span>
</span><span id="apply_mapping-185"><a href="#apply_mapping-185"><span class="linenos">185</span></a>    <span class="k">return</span> <span class="n">output</span>
</span></pre></div>


            <div class="docstring"><p>Given an iterable and a mapping, apply the mapping to the iterable with certain options</p>

<p>Gotcha: if <code>when_missing</code> is invalid, this is totally fine until a missing key is actually encountered.</p>

<p>Note: you can use this with <code><a href="kappa.html#Kappa">muutils.kappa.Kappa</a></code> if you want to pass a function instead of a dict</p>

<h1 id="parameters">Parameters:</h1>

<ul>
<li><code>mapping : Mapping[_AM_K, _AM_V]</code>
must have <code>__contains__</code> and <code>__getitem__</code>, both of which take <code>_AM_K</code> and the latter returns <code>_AM_V</code></li>
<li><code>iter : Iterable[_AM_K]</code>
the iterable to apply the mapping to</li>
<li><code>when_missing : WhenMissing</code>
 what to do when a key is missing from the mapping -- this is what distinguishes this function from <code>map</code>
 you can choose from <code>"skip"</code>, <code>"include"</code> (without converting), and <code>"except"</code>
(defaults to <code>"skip"</code>)</li>
</ul>

<h1 id="returns">Returns:</h1>

<p>return type is one of:</p>

<ul>
<li><code>list[_AM_V]</code> if <code>when_missing</code> is <code>"skip"</code> or <code>"except"</code></li>
<li><code>list[Union[_AM_K, _AM_V]]</code> if <code>when_missing</code> is <code>"include"</code></li>
</ul>

<h1 id="raises">Raises:</h1>

<ul>
<li><code>KeyError</code> : if the item is missing from the mapping and <code>when_missing</code> is <code>"except"</code></li>
<li><code>ValueError</code> : if <code>when_missing</code> is invalid</li>
</ul>
</div>


                </section>
                <section id="apply_mapping_chain">
                            <input id="apply_mapping_chain-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">apply_mapping_chain</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">mapping</span><span class="p">:</span> <span class="n">Mapping</span><span class="p">[</span><span class="o">~</span><span class="n">_AM_K</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">[</span><span class="o">~</span><span class="n">_AM_V</span><span class="p">]]</span>,</span><span class="param">	<span class="nb">iter</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="o">~</span><span class="n">_AM_K</span><span class="p">]</span>,</span><span class="param">	<span class="n">when_missing</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s1">&#39;except&#39;</span><span class="p">,</span> <span class="s1">&#39;skip&#39;</span><span class="p">,</span> <span class="s1">&#39;include&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;skip&#39;</span></span><span class="return-annotation">) -> <span class="nb">list</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="o">~</span><span class="n">_AM_K</span><span class="p">,</span> <span class="o">~</span><span class="n">_AM_V</span><span class="p">]]</span>:</span></span>

                <div class="source-button-container">
            <label class="pdoc-button view-source-button" for="apply_mapping_chain-view-source"><span>View Source</span></label>
            <div class="github-button-wrapper">
                <a class="pdoc-button github-link-button" href="https://github.com/mivanit/muutils/blob/0.6.20/misc/__init__.py#L187-L234" target="_blank">
                    <span>View on GitHub</span>
                </a>
            </div>
        </div>

    </div>
    <a class="headerlink" href="#apply_mapping_chain"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="apply_mapping_chain-188"><a href="#apply_mapping_chain-188"><span class="linenos">188</span></a><span class="k">def</span> <span class="nf">apply_mapping_chain</span><span class="p">(</span>
</span><span id="apply_mapping_chain-189"><a href="#apply_mapping_chain-189"><span class="linenos">189</span></a>    <span class="n">mapping</span><span class="p">:</span> <span class="n">Mapping</span><span class="p">[</span><span class="n">_AM_K</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">_AM_V</span><span class="p">]],</span>
</span><span id="apply_mapping_chain-190"><a href="#apply_mapping_chain-190"><span class="linenos">190</span></a>    <span class="nb">iter</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">_AM_K</span><span class="p">],</span>
</span><span id="apply_mapping_chain-191"><a href="#apply_mapping_chain-191"><span class="linenos">191</span></a>    <span class="n">when_missing</span><span class="p">:</span> <span class="n">WhenMissing</span> <span class="o">=</span> <span class="s2">&quot;skip&quot;</span><span class="p">,</span>
</span><span id="apply_mapping_chain-192"><a href="#apply_mapping_chain-192"><span class="linenos">192</span></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">_AM_K</span><span class="p">,</span> <span class="n">_AM_V</span><span class="p">]]:</span>
</span><span id="apply_mapping_chain-193"><a href="#apply_mapping_chain-193"><span class="linenos">193</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Given an iterable and a mapping, chain the mappings together</span>
</span><span id="apply_mapping_chain-194"><a href="#apply_mapping_chain-194"><span class="linenos">194</span></a>
</span><span id="apply_mapping_chain-195"><a href="#apply_mapping_chain-195"><span class="linenos">195</span></a><span class="sd">    Gotcha: if `when_missing` is invalid, this is totally fine until a missing key is actually encountered.</span>
</span><span id="apply_mapping_chain-196"><a href="#apply_mapping_chain-196"><span class="linenos">196</span></a>
</span><span id="apply_mapping_chain-197"><a href="#apply_mapping_chain-197"><span class="linenos">197</span></a><span class="sd">    Note: you can use this with `muutils.kappa.Kappa` if you want to pass a function instead of a dict</span>
</span><span id="apply_mapping_chain-198"><a href="#apply_mapping_chain-198"><span class="linenos">198</span></a>
</span><span id="apply_mapping_chain-199"><a href="#apply_mapping_chain-199"><span class="linenos">199</span></a><span class="sd">    # Parameters:</span>
</span><span id="apply_mapping_chain-200"><a href="#apply_mapping_chain-200"><span class="linenos">200</span></a><span class="sd">    - `mapping : Mapping[_AM_K, Iterable[_AM_V]]`</span>
</span><span id="apply_mapping_chain-201"><a href="#apply_mapping_chain-201"><span class="linenos">201</span></a><span class="sd">        must have `__contains__` and `__getitem__`, both of which take `_AM_K` and the latter returns `Iterable[_AM_V]`</span>
</span><span id="apply_mapping_chain-202"><a href="#apply_mapping_chain-202"><span class="linenos">202</span></a><span class="sd">    - `iter : Iterable[_AM_K]`</span>
</span><span id="apply_mapping_chain-203"><a href="#apply_mapping_chain-203"><span class="linenos">203</span></a><span class="sd">        the iterable to apply the mapping to</span>
</span><span id="apply_mapping_chain-204"><a href="#apply_mapping_chain-204"><span class="linenos">204</span></a><span class="sd">    - `when_missing : WhenMissing`</span>
</span><span id="apply_mapping_chain-205"><a href="#apply_mapping_chain-205"><span class="linenos">205</span></a><span class="sd">        what to do when a key is missing from the mapping -- this is what distinguishes this function from `map`</span>
</span><span id="apply_mapping_chain-206"><a href="#apply_mapping_chain-206"><span class="linenos">206</span></a><span class="sd">        you can choose from `&quot;skip&quot;`, `&quot;include&quot;` (without converting), and `&quot;except&quot;`</span>
</span><span id="apply_mapping_chain-207"><a href="#apply_mapping_chain-207"><span class="linenos">207</span></a><span class="sd">    (defaults to `&quot;skip&quot;`)</span>
</span><span id="apply_mapping_chain-208"><a href="#apply_mapping_chain-208"><span class="linenos">208</span></a>
</span><span id="apply_mapping_chain-209"><a href="#apply_mapping_chain-209"><span class="linenos">209</span></a><span class="sd">    # Returns:</span>
</span><span id="apply_mapping_chain-210"><a href="#apply_mapping_chain-210"><span class="linenos">210</span></a><span class="sd">    return type is one of:</span>
</span><span id="apply_mapping_chain-211"><a href="#apply_mapping_chain-211"><span class="linenos">211</span></a><span class="sd">     - `list[_AM_V]` if `when_missing` is `&quot;skip&quot;` or `&quot;except&quot;`</span>
</span><span id="apply_mapping_chain-212"><a href="#apply_mapping_chain-212"><span class="linenos">212</span></a><span class="sd">     - `list[Union[_AM_K, _AM_V]]` if `when_missing` is `&quot;include&quot;`</span>
</span><span id="apply_mapping_chain-213"><a href="#apply_mapping_chain-213"><span class="linenos">213</span></a>
</span><span id="apply_mapping_chain-214"><a href="#apply_mapping_chain-214"><span class="linenos">214</span></a><span class="sd">    # Raises:</span>
</span><span id="apply_mapping_chain-215"><a href="#apply_mapping_chain-215"><span class="linenos">215</span></a><span class="sd">    - `KeyError` : if the item is missing from the mapping and `when_missing` is `&quot;except&quot;`</span>
</span><span id="apply_mapping_chain-216"><a href="#apply_mapping_chain-216"><span class="linenos">216</span></a><span class="sd">    - `ValueError` : if `when_missing` is invalid</span>
</span><span id="apply_mapping_chain-217"><a href="#apply_mapping_chain-217"><span class="linenos">217</span></a>
</span><span id="apply_mapping_chain-218"><a href="#apply_mapping_chain-218"><span class="linenos">218</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="apply_mapping_chain-219"><a href="#apply_mapping_chain-219"><span class="linenos">219</span></a>    <span class="n">output</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">_AM_K</span><span class="p">,</span> <span class="n">_AM_V</span><span class="p">]]</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>
</span><span id="apply_mapping_chain-220"><a href="#apply_mapping_chain-220"><span class="linenos">220</span></a>    <span class="n">item</span><span class="p">:</span> <span class="n">_AM_K</span>
</span><span id="apply_mapping_chain-221"><a href="#apply_mapping_chain-221"><span class="linenos">221</span></a>    <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="nb">iter</span><span class="p">:</span>
</span><span id="apply_mapping_chain-222"><a href="#apply_mapping_chain-222"><span class="linenos">222</span></a>        <span class="k">if</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">mapping</span><span class="p">:</span>
</span><span id="apply_mapping_chain-223"><a href="#apply_mapping_chain-223"><span class="linenos">223</span></a>            <span class="n">output</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">mapping</span><span class="p">[</span><span class="n">item</span><span class="p">])</span>
</span><span id="apply_mapping_chain-224"><a href="#apply_mapping_chain-224"><span class="linenos">224</span></a>            <span class="k">continue</span>
</span><span id="apply_mapping_chain-225"><a href="#apply_mapping_chain-225"><span class="linenos">225</span></a>        <span class="k">if</span> <span class="n">when_missing</span> <span class="o">==</span> <span class="s2">&quot;skip&quot;</span><span class="p">:</span>
</span><span id="apply_mapping_chain-226"><a href="#apply_mapping_chain-226"><span class="linenos">226</span></a>            <span class="k">continue</span>
</span><span id="apply_mapping_chain-227"><a href="#apply_mapping_chain-227"><span class="linenos">227</span></a>        <span class="k">elif</span> <span class="n">when_missing</span> <span class="o">==</span> <span class="s2">&quot;include&quot;</span><span class="p">:</span>
</span><span id="apply_mapping_chain-228"><a href="#apply_mapping_chain-228"><span class="linenos">228</span></a>            <span class="n">output</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
</span><span id="apply_mapping_chain-229"><a href="#apply_mapping_chain-229"><span class="linenos">229</span></a>        <span class="k">elif</span> <span class="n">when_missing</span> <span class="o">==</span> <span class="s2">&quot;except&quot;</span><span class="p">:</span>
</span><span id="apply_mapping_chain-230"><a href="#apply_mapping_chain-230"><span class="linenos">230</span></a>            <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;item </span><span class="si">{</span><span class="n">item</span><span class="si">}</span><span class="s2"> is missing from mapping </span><span class="si">{</span><span class="n">mapping</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="apply_mapping_chain-231"><a href="#apply_mapping_chain-231"><span class="linenos">231</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="apply_mapping_chain-232"><a href="#apply_mapping_chain-232"><span class="linenos">232</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="apply_mapping_chain-233"><a href="#apply_mapping_chain-233"><span class="linenos">233</span></a>                <span class="sa">f</span><span class="s2">&quot;invalid value for </span><span class="si">{</span><span class="n">when_missing</span><span class="w"> </span><span class="si">= }</span><span class="se">\n</span><span class="si">{</span><span class="n">item</span><span class="w"> </span><span class="si">= }</span><span class="se">\n</span><span class="si">{</span><span class="n">mapping</span><span class="w"> </span><span class="si">= }</span><span class="s2">&quot;</span>
</span><span id="apply_mapping_chain-234"><a href="#apply_mapping_chain-234"><span class="linenos">234</span></a>            <span class="p">)</span>
</span><span id="apply_mapping_chain-235"><a href="#apply_mapping_chain-235"><span class="linenos">235</span></a>    <span class="k">return</span> <span class="n">output</span>
</span></pre></div>


            <div class="docstring"><p>Given an iterable and a mapping, chain the mappings together</p>

<p>Gotcha: if <code>when_missing</code> is invalid, this is totally fine until a missing key is actually encountered.</p>

<p>Note: you can use this with <code><a href="kappa.html#Kappa">muutils.kappa.Kappa</a></code> if you want to pass a function instead of a dict</p>

<h1 id="parameters">Parameters:</h1>

<ul>
<li><code>mapping : Mapping[_AM_K, Iterable[_AM_V]]</code>
must have <code>__contains__</code> and <code>__getitem__</code>, both of which take <code>_AM_K</code> and the latter returns <code>Iterable[_AM_V]</code></li>
<li><code>iter : Iterable[_AM_K]</code>
the iterable to apply the mapping to</li>
<li><code>when_missing : WhenMissing</code>
what to do when a key is missing from the mapping -- this is what distinguishes this function from <code>map</code>
you can choose from <code>"skip"</code>, <code>"include"</code> (without converting), and <code>"except"</code>
(defaults to <code>"skip"</code>)</li>
</ul>

<h1 id="returns">Returns:</h1>

<p>return type is one of:</p>

<ul>
<li><code>list[_AM_V]</code> if <code>when_missing</code> is <code>"skip"</code> or <code>"except"</code></li>
<li><code>list[Union[_AM_K, _AM_V]]</code> if <code>when_missing</code> is <code>"include"</code></li>
</ul>

<h1 id="raises">Raises:</h1>

<ul>
<li><code>KeyError</code> : if the item is missing from the mapping and <code>when_missing</code> is <code>"except"</code></li>
<li><code>ValueError</code> : if <code>when_missing</code> is invalid</li>
</ul>
</div>


                </section>
                <section id="sanitize_name">
                            <input id="sanitize_name-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">sanitize_name</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">additional_allowed_chars</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>,</span><span class="param">	<span class="n">replace_invalid</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>,</span><span class="param">	<span class="n">when_none</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="s1">&#39;_None_&#39;</span>,</span><span class="param">	<span class="n">leading_digit_prefix</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span></span><span class="return-annotation">) -> <span class="nb">str</span>:</span></span>

                <div class="source-button-container">
            <label class="pdoc-button view-source-button" for="sanitize_name-view-source"><span>View Source</span></label>
            <div class="github-button-wrapper">
                <a class="pdoc-button github-link-button" href="https://github.com/mivanit/muutils/blob/0.6.20/misc/__init__.py#L7-L55" target="_blank">
                    <span>View on GitHub</span>
                </a>
            </div>
        </div>

    </div>
    <a class="headerlink" href="#sanitize_name"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="sanitize_name-8"><a href="#sanitize_name-8"><span class="linenos"> 8</span></a><span class="k">def</span> <span class="nf">sanitize_name</span><span class="p">(</span>
</span><span id="sanitize_name-9"><a href="#sanitize_name-9"><span class="linenos"> 9</span></a>    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="sanitize_name-10"><a href="#sanitize_name-10"><span class="linenos">10</span></a>    <span class="n">additional_allowed_chars</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
</span><span id="sanitize_name-11"><a href="#sanitize_name-11"><span class="linenos">11</span></a>    <span class="n">replace_invalid</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
</span><span id="sanitize_name-12"><a href="#sanitize_name-12"><span class="linenos">12</span></a>    <span class="n">when_none</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="s2">&quot;_None_&quot;</span><span class="p">,</span>
</span><span id="sanitize_name-13"><a href="#sanitize_name-13"><span class="linenos">13</span></a>    <span class="n">leading_digit_prefix</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
</span><span id="sanitize_name-14"><a href="#sanitize_name-14"><span class="linenos">14</span></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="sanitize_name-15"><a href="#sanitize_name-15"><span class="linenos">15</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;sanitize a string, leaving only alphanumerics and `additional_allowed_chars`</span>
</span><span id="sanitize_name-16"><a href="#sanitize_name-16"><span class="linenos">16</span></a>
</span><span id="sanitize_name-17"><a href="#sanitize_name-17"><span class="linenos">17</span></a><span class="sd">    # Parameters:</span>
</span><span id="sanitize_name-18"><a href="#sanitize_name-18"><span class="linenos">18</span></a><span class="sd">     - `name : str | None`</span>
</span><span id="sanitize_name-19"><a href="#sanitize_name-19"><span class="linenos">19</span></a><span class="sd">       input string</span>
</span><span id="sanitize_name-20"><a href="#sanitize_name-20"><span class="linenos">20</span></a><span class="sd">     - `additional_allowed_chars : str`</span>
</span><span id="sanitize_name-21"><a href="#sanitize_name-21"><span class="linenos">21</span></a><span class="sd">       additional characters to allow, none by default</span>
</span><span id="sanitize_name-22"><a href="#sanitize_name-22"><span class="linenos">22</span></a><span class="sd">       (defaults to `&quot;&quot;`)</span>
</span><span id="sanitize_name-23"><a href="#sanitize_name-23"><span class="linenos">23</span></a><span class="sd">     - `replace_invalid : str`</span>
</span><span id="sanitize_name-24"><a href="#sanitize_name-24"><span class="linenos">24</span></a><span class="sd">        character to replace invalid characters with</span>
</span><span id="sanitize_name-25"><a href="#sanitize_name-25"><span class="linenos">25</span></a><span class="sd">       (defaults to `&quot;&quot;`)</span>
</span><span id="sanitize_name-26"><a href="#sanitize_name-26"><span class="linenos">26</span></a><span class="sd">     - `when_none : str | None`</span>
</span><span id="sanitize_name-27"><a href="#sanitize_name-27"><span class="linenos">27</span></a><span class="sd">        string to return if `name` is `None`. if `None`, raises an exception</span>
</span><span id="sanitize_name-28"><a href="#sanitize_name-28"><span class="linenos">28</span></a><span class="sd">       (defaults to `&quot;_None_&quot;`)</span>
</span><span id="sanitize_name-29"><a href="#sanitize_name-29"><span class="linenos">29</span></a><span class="sd">     - `leading_digit_prefix : str`</span>
</span><span id="sanitize_name-30"><a href="#sanitize_name-30"><span class="linenos">30</span></a><span class="sd">        character to prefix the string with if it starts with a digit</span>
</span><span id="sanitize_name-31"><a href="#sanitize_name-31"><span class="linenos">31</span></a><span class="sd">       (defaults to `&quot;&quot;`)</span>
</span><span id="sanitize_name-32"><a href="#sanitize_name-32"><span class="linenos">32</span></a>
</span><span id="sanitize_name-33"><a href="#sanitize_name-33"><span class="linenos">33</span></a><span class="sd">    # Returns:</span>
</span><span id="sanitize_name-34"><a href="#sanitize_name-34"><span class="linenos">34</span></a><span class="sd">     - `str`</span>
</span><span id="sanitize_name-35"><a href="#sanitize_name-35"><span class="linenos">35</span></a><span class="sd">        sanitized string</span>
</span><span id="sanitize_name-36"><a href="#sanitize_name-36"><span class="linenos">36</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="sanitize_name-37"><a href="#sanitize_name-37"><span class="linenos">37</span></a>
</span><span id="sanitize_name-38"><a href="#sanitize_name-38"><span class="linenos">38</span></a>    <span class="k">if</span> <span class="n">name</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="sanitize_name-39"><a href="#sanitize_name-39"><span class="linenos">39</span></a>        <span class="k">if</span> <span class="n">when_none</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="sanitize_name-40"><a href="#sanitize_name-40"><span class="linenos">40</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;name is None&quot;</span><span class="p">)</span>
</span><span id="sanitize_name-41"><a href="#sanitize_name-41"><span class="linenos">41</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="sanitize_name-42"><a href="#sanitize_name-42"><span class="linenos">42</span></a>            <span class="k">return</span> <span class="n">when_none</span>
</span><span id="sanitize_name-43"><a href="#sanitize_name-43"><span class="linenos">43</span></a>
</span><span id="sanitize_name-44"><a href="#sanitize_name-44"><span class="linenos">44</span></a>    <span class="n">sanitized</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
</span><span id="sanitize_name-45"><a href="#sanitize_name-45"><span class="linenos">45</span></a>    <span class="k">for</span> <span class="n">char</span> <span class="ow">in</span> <span class="n">name</span><span class="p">:</span>
</span><span id="sanitize_name-46"><a href="#sanitize_name-46"><span class="linenos">46</span></a>        <span class="k">if</span> <span class="n">char</span><span class="o">.</span><span class="n">isalnum</span><span class="p">():</span>
</span><span id="sanitize_name-47"><a href="#sanitize_name-47"><span class="linenos">47</span></a>            <span class="n">sanitized</span> <span class="o">+=</span> <span class="n">char</span>
</span><span id="sanitize_name-48"><a href="#sanitize_name-48"><span class="linenos">48</span></a>        <span class="k">elif</span> <span class="n">char</span> <span class="ow">in</span> <span class="n">additional_allowed_chars</span><span class="p">:</span>
</span><span id="sanitize_name-49"><a href="#sanitize_name-49"><span class="linenos">49</span></a>            <span class="n">sanitized</span> <span class="o">+=</span> <span class="n">char</span>
</span><span id="sanitize_name-50"><a href="#sanitize_name-50"><span class="linenos">50</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="sanitize_name-51"><a href="#sanitize_name-51"><span class="linenos">51</span></a>            <span class="n">sanitized</span> <span class="o">+=</span> <span class="n">replace_invalid</span>
</span><span id="sanitize_name-52"><a href="#sanitize_name-52"><span class="linenos">52</span></a>
</span><span id="sanitize_name-53"><a href="#sanitize_name-53"><span class="linenos">53</span></a>    <span class="k">if</span> <span class="n">sanitized</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">isdigit</span><span class="p">():</span>
</span><span id="sanitize_name-54"><a href="#sanitize_name-54"><span class="linenos">54</span></a>        <span class="n">sanitized</span> <span class="o">=</span> <span class="n">leading_digit_prefix</span> <span class="o">+</span> <span class="n">sanitized</span>
</span><span id="sanitize_name-55"><a href="#sanitize_name-55"><span class="linenos">55</span></a>
</span><span id="sanitize_name-56"><a href="#sanitize_name-56"><span class="linenos">56</span></a>    <span class="k">return</span> <span class="n">sanitized</span>
</span></pre></div>


            <div class="docstring"><p>sanitize a string, leaving only alphanumerics and <code>additional_allowed_chars</code></p>

<h1 id="parameters">Parameters:</h1>

<ul>
<li><code>name : str | None</code>
input string</li>
<li><code>additional_allowed_chars : str</code>
additional characters to allow, none by default
(defaults to <code>""</code>)</li>
<li><code>replace_invalid : str</code>
 character to replace invalid characters with
(defaults to <code>""</code>)</li>
<li><code>when_none : str | None</code>
 string to return if <code>name</code> is <code>None</code>. if <code>None</code>, raises an exception
(defaults to <code>"_None_"</code>)</li>
<li><code>leading_digit_prefix : str</code>
 character to prefix the string with if it starts with a digit
(defaults to <code>""</code>)</li>
</ul>

<h1 id="returns">Returns:</h1>

<ul>
<li><code>str</code>
sanitized string</li>
</ul>
</div>


                </section>
                <section id="sanitize_fname">
                            <input id="sanitize_fname-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">sanitize_fname</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">fname</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span>, </span><span class="param"><span class="o">**</span><span class="n">kwargs</span></span><span class="return-annotation">) -> <span class="nb">str</span>:</span></span>

                <div class="source-button-container">
            <label class="pdoc-button view-source-button" for="sanitize_fname-view-source"><span>View Source</span></label>
            <div class="github-button-wrapper">
                <a class="pdoc-button github-link-button" href="https://github.com/mivanit/muutils/blob/0.6.20/misc/__init__.py#L58-L63" target="_blank">
                    <span>View on GitHub</span>
                </a>
            </div>
        </div>

    </div>
    <a class="headerlink" href="#sanitize_fname"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="sanitize_fname-59"><a href="#sanitize_fname-59"><span class="linenos">59</span></a><span class="k">def</span> <span class="nf">sanitize_fname</span><span class="p">(</span><span class="n">fname</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="sanitize_fname-60"><a href="#sanitize_fname-60"><span class="linenos">60</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;sanitize a filename to posix standards</span>
</span><span id="sanitize_fname-61"><a href="#sanitize_fname-61"><span class="linenos">61</span></a>
</span><span id="sanitize_fname-62"><a href="#sanitize_fname-62"><span class="linenos">62</span></a><span class="sd">    - leave only alphanumerics, `_` (underscore), &#39;-&#39; (dash) and `.` (period)</span>
</span><span id="sanitize_fname-63"><a href="#sanitize_fname-63"><span class="linenos">63</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="sanitize_fname-64"><a href="#sanitize_fname-64"><span class="linenos">64</span></a>    <span class="k">return</span> <span class="n">sanitize_name</span><span class="p">(</span><span class="n">fname</span><span class="p">,</span> <span class="n">additional_allowed_chars</span><span class="o">=</span><span class="s2">&quot;._-&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>sanitize a filename to posix standards</p>

<ul>
<li>leave only alphanumerics, <code>_</code> (underscore), '-' (dash) and <code>.</code> (period)</li>
</ul>
</div>


                </section>
                <section id="sanitize_identifier">
                            <input id="sanitize_identifier-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">sanitize_identifier</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">fname</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span>, </span><span class="param"><span class="o">**</span><span class="n">kwargs</span></span><span class="return-annotation">) -> <span class="nb">str</span>:</span></span>

                <div class="source-button-container">
            <label class="pdoc-button view-source-button" for="sanitize_identifier-view-source"><span>View Source</span></label>
            <div class="github-button-wrapper">
                <a class="pdoc-button github-link-button" href="https://github.com/mivanit/muutils/blob/0.6.20/misc/__init__.py#L66-L74" target="_blank">
                    <span>View on GitHub</span>
                </a>
            </div>
        </div>

    </div>
    <a class="headerlink" href="#sanitize_identifier"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="sanitize_identifier-67"><a href="#sanitize_identifier-67"><span class="linenos">67</span></a><span class="k">def</span> <span class="nf">sanitize_identifier</span><span class="p">(</span><span class="n">fname</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="sanitize_identifier-68"><a href="#sanitize_identifier-68"><span class="linenos">68</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;sanitize an identifier (variable or function name)</span>
</span><span id="sanitize_identifier-69"><a href="#sanitize_identifier-69"><span class="linenos">69</span></a>
</span><span id="sanitize_identifier-70"><a href="#sanitize_identifier-70"><span class="linenos">70</span></a><span class="sd">    - leave only alphanumerics and `_` (underscore)</span>
</span><span id="sanitize_identifier-71"><a href="#sanitize_identifier-71"><span class="linenos">71</span></a><span class="sd">    - prefix with `_` if it starts with a digit</span>
</span><span id="sanitize_identifier-72"><a href="#sanitize_identifier-72"><span class="linenos">72</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="sanitize_identifier-73"><a href="#sanitize_identifier-73"><span class="linenos">73</span></a>    <span class="k">return</span> <span class="n">sanitize_name</span><span class="p">(</span>
</span><span id="sanitize_identifier-74"><a href="#sanitize_identifier-74"><span class="linenos">74</span></a>        <span class="n">fname</span><span class="p">,</span> <span class="n">additional_allowed_chars</span><span class="o">=</span><span class="s2">&quot;_&quot;</span><span class="p">,</span> <span class="n">leading_digit_prefix</span><span class="o">=</span><span class="s2">&quot;_&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span>
</span><span id="sanitize_identifier-75"><a href="#sanitize_identifier-75"><span class="linenos">75</span></a>    <span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>sanitize an identifier (variable or function name)</p>

<ul>
<li>leave only alphanumerics and <code>_</code> (underscore)</li>
<li>prefix with <code>_</code> if it starts with a digit</li>
</ul>
</div>


                </section>
                <section id="dict_to_filename">
                            <input id="dict_to_filename-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">dict_to_filename</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">data</span><span class="p">:</span> <span class="nb">dict</span>,</span><span class="param">	<span class="n">format_str</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">{key}</span><span class="s1">_</span><span class="si">{val}</span><span class="s1">&#39;</span>,</span><span class="param">	<span class="n">separator</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;.&#39;</span>,</span><span class="param">	<span class="n">max_length</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">255</span></span><span class="return-annotation">):</span></span>

                <div class="source-button-container">
            <label class="pdoc-button view-source-button" for="dict_to_filename-view-source"><span>View Source</span></label>
            <div class="github-button-wrapper">
                <a class="pdoc-button github-link-button" href="https://github.com/mivanit/muutils/blob/0.6.20/misc/__init__.py#L77-L99" target="_blank">
                    <span>View on GitHub</span>
                </a>
            </div>
        </div>

    </div>
    <a class="headerlink" href="#dict_to_filename"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="dict_to_filename-78"><a href="#dict_to_filename-78"><span class="linenos"> 78</span></a><span class="k">def</span> <span class="nf">dict_to_filename</span><span class="p">(</span>
</span><span id="dict_to_filename-79"><a href="#dict_to_filename-79"><span class="linenos"> 79</span></a>    <span class="n">data</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span>
</span><span id="dict_to_filename-80"><a href="#dict_to_filename-80"><span class="linenos"> 80</span></a>    <span class="n">format_str</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">{key}</span><span class="s2">_</span><span class="si">{val}</span><span class="s2">&quot;</span><span class="p">,</span>
</span><span id="dict_to_filename-81"><a href="#dict_to_filename-81"><span class="linenos"> 81</span></a>    <span class="n">separator</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;.&quot;</span><span class="p">,</span>
</span><span id="dict_to_filename-82"><a href="#dict_to_filename-82"><span class="linenos"> 82</span></a>    <span class="n">max_length</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">255</span><span class="p">,</span>
</span><span id="dict_to_filename-83"><a href="#dict_to_filename-83"><span class="linenos"> 83</span></a><span class="p">):</span>
</span><span id="dict_to_filename-84"><a href="#dict_to_filename-84"><span class="linenos"> 84</span></a>    <span class="c1"># Convert the dictionary items to a list of strings using the format string</span>
</span><span id="dict_to_filename-85"><a href="#dict_to_filename-85"><span class="linenos"> 85</span></a>    <span class="n">formatted_items</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="dict_to_filename-86"><a href="#dict_to_filename-86"><span class="linenos"> 86</span></a>        <span class="n">format_str</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="n">k</span><span class="p">,</span> <span class="n">val</span><span class="o">=</span><span class="n">v</span><span class="p">)</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">data</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
</span><span id="dict_to_filename-87"><a href="#dict_to_filename-87"><span class="linenos"> 87</span></a>    <span class="p">]</span>
</span><span id="dict_to_filename-88"><a href="#dict_to_filename-88"><span class="linenos"> 88</span></a>
</span><span id="dict_to_filename-89"><a href="#dict_to_filename-89"><span class="linenos"> 89</span></a>    <span class="c1"># Join the formatted items using the separator</span>
</span><span id="dict_to_filename-90"><a href="#dict_to_filename-90"><span class="linenos"> 90</span></a>    <span class="n">joined_str</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">separator</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">formatted_items</span><span class="p">)</span>
</span><span id="dict_to_filename-91"><a href="#dict_to_filename-91"><span class="linenos"> 91</span></a>
</span><span id="dict_to_filename-92"><a href="#dict_to_filename-92"><span class="linenos"> 92</span></a>    <span class="c1"># Remove special characters and spaces</span>
</span><span id="dict_to_filename-93"><a href="#dict_to_filename-93"><span class="linenos"> 93</span></a>    <span class="n">sanitized_str</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">sanitize_fname</span><span class="p">(</span><span class="n">joined_str</span><span class="p">)</span>
</span><span id="dict_to_filename-94"><a href="#dict_to_filename-94"><span class="linenos"> 94</span></a>
</span><span id="dict_to_filename-95"><a href="#dict_to_filename-95"><span class="linenos"> 95</span></a>    <span class="c1"># Check if the length is within limits</span>
</span><span id="dict_to_filename-96"><a href="#dict_to_filename-96"><span class="linenos"> 96</span></a>    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">sanitized_str</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="n">max_length</span><span class="p">:</span>
</span><span id="dict_to_filename-97"><a href="#dict_to_filename-97"><span class="linenos"> 97</span></a>        <span class="k">return</span> <span class="n">sanitized_str</span>
</span><span id="dict_to_filename-98"><a href="#dict_to_filename-98"><span class="linenos"> 98</span></a>
</span><span id="dict_to_filename-99"><a href="#dict_to_filename-99"><span class="linenos"> 99</span></a>    <span class="c1"># If the string is too long, generate a hash</span>
</span><span id="dict_to_filename-100"><a href="#dict_to_filename-100"><span class="linenos">100</span></a>    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;h_</span><span class="si">{</span><span class="n">stable_hash</span><span class="p">(</span><span class="n">sanitized_str</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
</span></pre></div>


    

                </section>
                <section id="dynamic_docstring">
                            <input id="dynamic_docstring-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">dynamic_docstring</span><span class="signature pdoc-code condensed">(<span class="param"><span class="o">**</span><span class="n">doc_params</span></span><span class="return-annotation">):</span></span>

                <div class="source-button-container">
            <label class="pdoc-button view-source-button" for="dynamic_docstring-view-source"><span>View Source</span></label>
            <div class="github-button-wrapper">
                <a class="pdoc-button github-link-button" href="https://github.com/mivanit/muutils/blob/0.6.20/misc/__init__.py#L102-L108" target="_blank">
                    <span>View on GitHub</span>
                </a>
            </div>
        </div>

    </div>
    <a class="headerlink" href="#dynamic_docstring"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="dynamic_docstring-103"><a href="#dynamic_docstring-103"><span class="linenos">103</span></a><span class="k">def</span> <span class="nf">dynamic_docstring</span><span class="p">(</span><span class="o">**</span><span class="n">doc_params</span><span class="p">):</span>
</span><span id="dynamic_docstring-104"><a href="#dynamic_docstring-104"><span class="linenos">104</span></a>    <span class="k">def</span> <span class="nf">decorator</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
</span><span id="dynamic_docstring-105"><a href="#dynamic_docstring-105"><span class="linenos">105</span></a>        <span class="k">if</span> <span class="n">func</span><span class="o">.</span><span class="vm">__doc__</span><span class="p">:</span>
</span><span id="dynamic_docstring-106"><a href="#dynamic_docstring-106"><span class="linenos">106</span></a>            <span class="n">func</span><span class="o">.</span><span class="vm">__doc__</span> <span class="o">=</span> <span class="n">func</span><span class="o">.</span><span class="vm">__doc__</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="o">**</span><span class="n">doc_params</span><span class="p">)</span>
</span><span id="dynamic_docstring-107"><a href="#dynamic_docstring-107"><span class="linenos">107</span></a>        <span class="k">return</span> <span class="n">func</span>
</span><span id="dynamic_docstring-108"><a href="#dynamic_docstring-108"><span class="linenos">108</span></a>
</span><span id="dynamic_docstring-109"><a href="#dynamic_docstring-109"><span class="linenos">109</span></a>    <span class="k">return</span> <span class="n">decorator</span>
</span></pre></div>


    

                </section>
                <section id="shorten_numerical_to_str">
                            <input id="shorten_numerical_to_str-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">shorten_numerical_to_str</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">num</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="nb">float</span>,</span><span class="param">	<span class="n">small_as_decimal</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>,</span><span class="param">	<span class="n">precision</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span></span><span class="return-annotation">) -> <span class="nb">str</span>:</span></span>

                <div class="source-button-container">
            <label class="pdoc-button view-source-button" for="shorten_numerical_to_str-view-source"><span>View Source</span></label>
            <div class="github-button-wrapper">
                <a class="pdoc-button github-link-button" href="https://github.com/mivanit/muutils/blob/0.6.20/misc/__init__.py#L22-L46" target="_blank">
                    <span>View on GitHub</span>
                </a>
            </div>
        </div>

    </div>
    <a class="headerlink" href="#shorten_numerical_to_str"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="shorten_numerical_to_str-23"><a href="#shorten_numerical_to_str-23"><span class="linenos">23</span></a><span class="k">def</span> <span class="nf">shorten_numerical_to_str</span><span class="p">(</span>
</span><span id="shorten_numerical_to_str-24"><a href="#shorten_numerical_to_str-24"><span class="linenos">24</span></a>    <span class="n">num</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="shorten_numerical_to_str-25"><a href="#shorten_numerical_to_str-25"><span class="linenos">25</span></a>    <span class="n">small_as_decimal</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="shorten_numerical_to_str-26"><a href="#shorten_numerical_to_str-26"><span class="linenos">26</span></a>    <span class="n">precision</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
</span><span id="shorten_numerical_to_str-27"><a href="#shorten_numerical_to_str-27"><span class="linenos">27</span></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="shorten_numerical_to_str-28"><a href="#shorten_numerical_to_str-28"><span class="linenos">28</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;shorten a large numerical value to a string</span>
</span><span id="shorten_numerical_to_str-29"><a href="#shorten_numerical_to_str-29"><span class="linenos">29</span></a><span class="sd">    1234 -&gt; 1K</span>
</span><span id="shorten_numerical_to_str-30"><a href="#shorten_numerical_to_str-30"><span class="linenos">30</span></a>
</span><span id="shorten_numerical_to_str-31"><a href="#shorten_numerical_to_str-31"><span class="linenos">31</span></a><span class="sd">    precision guaranteed to 1 in 10, but can be higher. reverse of `str_to_numeric`</span>
</span><span id="shorten_numerical_to_str-32"><a href="#shorten_numerical_to_str-32"><span class="linenos">32</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="shorten_numerical_to_str-33"><a href="#shorten_numerical_to_str-33"><span class="linenos">33</span></a>
</span><span id="shorten_numerical_to_str-34"><a href="#shorten_numerical_to_str-34"><span class="linenos">34</span></a>    <span class="c1"># small values are returned as is</span>
</span><span id="shorten_numerical_to_str-35"><a href="#shorten_numerical_to_str-35"><span class="linenos">35</span></a>    <span class="n">num_abs</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">num</span><span class="p">)</span>
</span><span id="shorten_numerical_to_str-36"><a href="#shorten_numerical_to_str-36"><span class="linenos">36</span></a>    <span class="k">if</span> <span class="n">num_abs</span> <span class="o">&lt;</span> <span class="mf">1e3</span><span class="p">:</span>
</span><span id="shorten_numerical_to_str-37"><a href="#shorten_numerical_to_str-37"><span class="linenos">37</span></a>        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="n">num</span><span class="p">)</span>
</span><span id="shorten_numerical_to_str-38"><a href="#shorten_numerical_to_str-38"><span class="linenos">38</span></a>
</span><span id="shorten_numerical_to_str-39"><a href="#shorten_numerical_to_str-39"><span class="linenos">39</span></a>    <span class="c1"># iterate over suffixes from largest to smallest</span>
</span><span id="shorten_numerical_to_str-40"><a href="#shorten_numerical_to_str-40"><span class="linenos">40</span></a>    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="p">(</span><span class="n">val</span><span class="p">,</span> <span class="n">suffix</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">_SHORTEN_TUPLES</span><span class="p">):</span>
</span><span id="shorten_numerical_to_str-41"><a href="#shorten_numerical_to_str-41"><span class="linenos">41</span></a>        <span class="k">if</span> <span class="n">num_abs</span> <span class="o">&gt;</span> <span class="n">val</span> <span class="ow">or</span> <span class="n">i</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">_SHORTEN_TUPLES</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="shorten_numerical_to_str-42"><a href="#shorten_numerical_to_str-42"><span class="linenos">42</span></a>            <span class="k">if</span> <span class="p">(</span><span class="n">num_abs</span> <span class="o">&lt;</span> <span class="n">val</span> <span class="o">*</span> <span class="mi">10</span><span class="p">)</span> <span class="ow">and</span> <span class="n">small_as_decimal</span><span class="p">:</span>
</span><span id="shorten_numerical_to_str-43"><a href="#shorten_numerical_to_str-43"><span class="linenos">43</span></a>                <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">num</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">val</span><span class="si">:</span><span class="s2">.</span><span class="si">{</span><span class="n">precision</span><span class="si">}</span><span class="s2">f</span><span class="si">}{</span><span class="n">suffix</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="shorten_numerical_to_str-44"><a href="#shorten_numerical_to_str-44"><span class="linenos">44</span></a>            <span class="k">elif</span> <span class="n">num_abs</span> <span class="o">&lt;</span> <span class="n">val</span> <span class="o">*</span> <span class="mf">1e3</span><span class="p">:</span>
</span><span id="shorten_numerical_to_str-45"><a href="#shorten_numerical_to_str-45"><span class="linenos">45</span></a>                <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="nb">int</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">num</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">val</span><span class="p">))</span><span class="si">}{</span><span class="n">suffix</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="shorten_numerical_to_str-46"><a href="#shorten_numerical_to_str-46"><span class="linenos">46</span></a>
</span><span id="shorten_numerical_to_str-47"><a href="#shorten_numerical_to_str-47"><span class="linenos">47</span></a>    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">num</span><span class="si">:</span><span class="s2">.</span><span class="si">{</span><span class="n">precision</span><span class="si">}</span><span class="s2">f</span><span class="si">}</span><span class="s2">&quot;</span>
</span></pre></div>


            <div class="docstring"><p>shorten a large numerical value to a string
1234 -> 1K</p>

<p>precision guaranteed to 1 in 10, but can be higher. reverse of <code><a href="#str_to_numeric">str_to_numeric</a></code></p>
</div>


                </section>
                <section id="str_to_numeric">
                            <input id="str_to_numeric-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">str_to_numeric</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">quantity</span><span class="p">:</span> <span class="nb">str</span>,</span><span class="param">	<span class="n">mapping</span><span class="p">:</span> <span class="kc">None</span> <span class="o">|</span> <span class="nb">bool</span> <span class="o">|</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span> <span class="o">|</span> <span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span></span><span class="return-annotation">) -> <span class="nb">int</span> <span class="o">|</span> <span class="nb">float</span>:</span></span>

                <div class="source-button-container">
            <label class="pdoc-button view-source-button" for="str_to_numeric-view-source"><span>View Source</span></label>
            <div class="github-button-wrapper">
                <a class="pdoc-button github-link-button" href="https://github.com/mivanit/muutils/blob/0.6.20/misc/__init__.py#L49-L165" target="_blank">
                    <span>View on GitHub</span>
                </a>
            </div>
        </div>

    </div>
    <a class="headerlink" href="#str_to_numeric"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="str_to_numeric-50"><a href="#str_to_numeric-50"><span class="linenos"> 50</span></a><span class="k">def</span> <span class="nf">str_to_numeric</span><span class="p">(</span>
</span><span id="str_to_numeric-51"><a href="#str_to_numeric-51"><span class="linenos"> 51</span></a>    <span class="n">quantity</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="str_to_numeric-52"><a href="#str_to_numeric-52"><span class="linenos"> 52</span></a>    <span class="n">mapping</span><span class="p">:</span> <span class="kc">None</span> <span class="o">|</span> <span class="nb">bool</span> <span class="o">|</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span> <span class="o">|</span> <span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="str_to_numeric-53"><a href="#str_to_numeric-53"><span class="linenos"> 53</span></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span> <span class="o">|</span> <span class="nb">float</span><span class="p">:</span>
</span><span id="str_to_numeric-54"><a href="#str_to_numeric-54"><span class="linenos"> 54</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Convert a string representing a quantity to a numeric value.</span>
</span><span id="str_to_numeric-55"><a href="#str_to_numeric-55"><span class="linenos"> 55</span></a>
</span><span id="str_to_numeric-56"><a href="#str_to_numeric-56"><span class="linenos"> 56</span></a><span class="sd">    The string can represent an integer, python float, fraction, or shortened via `shorten_numerical_to_str`.</span>
</span><span id="str_to_numeric-57"><a href="#str_to_numeric-57"><span class="linenos"> 57</span></a>
</span><span id="str_to_numeric-58"><a href="#str_to_numeric-58"><span class="linenos"> 58</span></a><span class="sd">    # Examples:</span>
</span><span id="str_to_numeric-59"><a href="#str_to_numeric-59"><span class="linenos"> 59</span></a><span class="sd">    ```</span>
</span><span id="str_to_numeric-60"><a href="#str_to_numeric-60"><span class="linenos"> 60</span></a><span class="sd">    &gt;&gt;&gt; str_to_numeric(&quot;5&quot;)</span>
</span><span id="str_to_numeric-61"><a href="#str_to_numeric-61"><span class="linenos"> 61</span></a><span class="sd">    5</span>
</span><span id="str_to_numeric-62"><a href="#str_to_numeric-62"><span class="linenos"> 62</span></a><span class="sd">    &gt;&gt;&gt; str_to_numeric(&quot;0.1&quot;)</span>
</span><span id="str_to_numeric-63"><a href="#str_to_numeric-63"><span class="linenos"> 63</span></a><span class="sd">    0.1</span>
</span><span id="str_to_numeric-64"><a href="#str_to_numeric-64"><span class="linenos"> 64</span></a><span class="sd">    &gt;&gt;&gt; str_to_numeric(&quot;1/5&quot;)</span>
</span><span id="str_to_numeric-65"><a href="#str_to_numeric-65"><span class="linenos"> 65</span></a><span class="sd">    0.2</span>
</span><span id="str_to_numeric-66"><a href="#str_to_numeric-66"><span class="linenos"> 66</span></a><span class="sd">    &gt;&gt;&gt; str_to_numeric(&quot;-1K&quot;)</span>
</span><span id="str_to_numeric-67"><a href="#str_to_numeric-67"><span class="linenos"> 67</span></a><span class="sd">    -1000.0</span>
</span><span id="str_to_numeric-68"><a href="#str_to_numeric-68"><span class="linenos"> 68</span></a><span class="sd">    &gt;&gt;&gt; str_to_numeric(&quot;1.5M&quot;)</span>
</span><span id="str_to_numeric-69"><a href="#str_to_numeric-69"><span class="linenos"> 69</span></a><span class="sd">    1500000.0</span>
</span><span id="str_to_numeric-70"><a href="#str_to_numeric-70"><span class="linenos"> 70</span></a><span class="sd">    &gt;&gt;&gt; str_to_numeric(&quot;1.2e2&quot;)</span>
</span><span id="str_to_numeric-71"><a href="#str_to_numeric-71"><span class="linenos"> 71</span></a><span class="sd">    120.0</span>
</span><span id="str_to_numeric-72"><a href="#str_to_numeric-72"><span class="linenos"> 72</span></a><span class="sd">    ```</span>
</span><span id="str_to_numeric-73"><a href="#str_to_numeric-73"><span class="linenos"> 73</span></a>
</span><span id="str_to_numeric-74"><a href="#str_to_numeric-74"><span class="linenos"> 74</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="str_to_numeric-75"><a href="#str_to_numeric-75"><span class="linenos"> 75</span></a>
</span><span id="str_to_numeric-76"><a href="#str_to_numeric-76"><span class="linenos"> 76</span></a>    <span class="c1"># check is string</span>
</span><span id="str_to_numeric-77"><a href="#str_to_numeric-77"><span class="linenos"> 77</span></a>    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">quantity</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
</span><span id="str_to_numeric-78"><a href="#str_to_numeric-78"><span class="linenos"> 78</span></a>        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="str_to_numeric-79"><a href="#str_to_numeric-79"><span class="linenos"> 79</span></a>            <span class="sa">f</span><span class="s2">&quot;quantity must be a string, got &#39;</span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">quantity</span><span class="p">)</span><span class="w"> </span><span class="si">= }</span><span class="s2">&#39; &#39;</span><span class="si">{</span><span class="n">quantity</span><span class="w"> </span><span class="si">= }</span><span class="s2">&#39;&quot;</span>
</span><span id="str_to_numeric-80"><a href="#str_to_numeric-80"><span class="linenos"> 80</span></a>        <span class="p">)</span>
</span><span id="str_to_numeric-81"><a href="#str_to_numeric-81"><span class="linenos"> 81</span></a>
</span><span id="str_to_numeric-82"><a href="#str_to_numeric-82"><span class="linenos"> 82</span></a>    <span class="c1"># basic int conversion</span>
</span><span id="str_to_numeric-83"><a href="#str_to_numeric-83"><span class="linenos"> 83</span></a>    <span class="k">try</span><span class="p">:</span>
</span><span id="str_to_numeric-84"><a href="#str_to_numeric-84"><span class="linenos"> 84</span></a>        <span class="n">quantity_int</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">quantity</span><span class="p">)</span>
</span><span id="str_to_numeric-85"><a href="#str_to_numeric-85"><span class="linenos"> 85</span></a>        <span class="k">return</span> <span class="n">quantity_int</span>
</span><span id="str_to_numeric-86"><a href="#str_to_numeric-86"><span class="linenos"> 86</span></a>    <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
</span><span id="str_to_numeric-87"><a href="#str_to_numeric-87"><span class="linenos"> 87</span></a>        <span class="k">pass</span>
</span><span id="str_to_numeric-88"><a href="#str_to_numeric-88"><span class="linenos"> 88</span></a>
</span><span id="str_to_numeric-89"><a href="#str_to_numeric-89"><span class="linenos"> 89</span></a>    <span class="c1"># basic float conversion</span>
</span><span id="str_to_numeric-90"><a href="#str_to_numeric-90"><span class="linenos"> 90</span></a>    <span class="k">try</span><span class="p">:</span>
</span><span id="str_to_numeric-91"><a href="#str_to_numeric-91"><span class="linenos"> 91</span></a>        <span class="n">quantity_float</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">quantity</span><span class="p">)</span>
</span><span id="str_to_numeric-92"><a href="#str_to_numeric-92"><span class="linenos"> 92</span></a>        <span class="k">return</span> <span class="n">quantity_float</span>
</span><span id="str_to_numeric-93"><a href="#str_to_numeric-93"><span class="linenos"> 93</span></a>    <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
</span><span id="str_to_numeric-94"><a href="#str_to_numeric-94"><span class="linenos"> 94</span></a>        <span class="k">pass</span>
</span><span id="str_to_numeric-95"><a href="#str_to_numeric-95"><span class="linenos"> 95</span></a>
</span><span id="str_to_numeric-96"><a href="#str_to_numeric-96"><span class="linenos"> 96</span></a>    <span class="c1"># mapping</span>
</span><span id="str_to_numeric-97"><a href="#str_to_numeric-97"><span class="linenos"> 97</span></a>    <span class="n">_mapping</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span> <span class="o">|</span> <span class="nb">float</span><span class="p">]</span>
</span><span id="str_to_numeric-98"><a href="#str_to_numeric-98"><span class="linenos"> 98</span></a>    <span class="k">if</span> <span class="n">mapping</span> <span class="ow">is</span> <span class="kc">True</span> <span class="ow">or</span> <span class="n">mapping</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="str_to_numeric-99"><a href="#str_to_numeric-99"><span class="linenos"> 99</span></a>        <span class="n">_mapping</span> <span class="o">=</span> <span class="n">_REVERSE_SHORTEN_MAP</span>
</span><span id="str_to_numeric-100"><a href="#str_to_numeric-100"><span class="linenos">100</span></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="str_to_numeric-101"><a href="#str_to_numeric-101"><span class="linenos">101</span></a>        <span class="n">_mapping</span> <span class="o">=</span> <span class="n">mapping</span>  <span class="c1"># type: ignore[assignment]</span>
</span><span id="str_to_numeric-102"><a href="#str_to_numeric-102"><span class="linenos">102</span></a>
</span><span id="str_to_numeric-103"><a href="#str_to_numeric-103"><span class="linenos">103</span></a>    <span class="n">quantity_original</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">quantity</span>
</span><span id="str_to_numeric-104"><a href="#str_to_numeric-104"><span class="linenos">104</span></a>
</span><span id="str_to_numeric-105"><a href="#str_to_numeric-105"><span class="linenos">105</span></a>    <span class="n">quantity</span> <span class="o">=</span> <span class="n">quantity</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
</span><span id="str_to_numeric-106"><a href="#str_to_numeric-106"><span class="linenos">106</span></a>
</span><span id="str_to_numeric-107"><a href="#str_to_numeric-107"><span class="linenos">107</span></a>    <span class="n">result</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="nb">float</span>
</span><span id="str_to_numeric-108"><a href="#str_to_numeric-108"><span class="linenos">108</span></a>    <span class="n">multiplier</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">1</span>
</span><span id="str_to_numeric-109"><a href="#str_to_numeric-109"><span class="linenos">109</span></a>
</span><span id="str_to_numeric-110"><a href="#str_to_numeric-110"><span class="linenos">110</span></a>    <span class="c1"># detect if it has a suffix</span>
</span><span id="str_to_numeric-111"><a href="#str_to_numeric-111"><span class="linenos">111</span></a>    <span class="n">suffixes_detected</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">suffix</span> <span class="ow">in</span> <span class="n">quantity</span> <span class="k">for</span> <span class="n">suffix</span> <span class="ow">in</span> <span class="n">_mapping</span><span class="p">]</span>
</span><span id="str_to_numeric-112"><a href="#str_to_numeric-112"><span class="linenos">112</span></a>    <span class="n">n_suffixes_detected</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">suffixes_detected</span><span class="p">)</span>
</span><span id="str_to_numeric-113"><a href="#str_to_numeric-113"><span class="linenos">113</span></a>    <span class="k">if</span> <span class="n">n_suffixes_detected</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="str_to_numeric-114"><a href="#str_to_numeric-114"><span class="linenos">114</span></a>        <span class="c1"># no suffix</span>
</span><span id="str_to_numeric-115"><a href="#str_to_numeric-115"><span class="linenos">115</span></a>        <span class="k">pass</span>
</span><span id="str_to_numeric-116"><a href="#str_to_numeric-116"><span class="linenos">116</span></a>    <span class="k">elif</span> <span class="n">n_suffixes_detected</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="str_to_numeric-117"><a href="#str_to_numeric-117"><span class="linenos">117</span></a>        <span class="c1"># find multiplier</span>
</span><span id="str_to_numeric-118"><a href="#str_to_numeric-118"><span class="linenos">118</span></a>        <span class="k">for</span> <span class="n">suffix</span><span class="p">,</span> <span class="n">mult</span> <span class="ow">in</span> <span class="n">_mapping</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="str_to_numeric-119"><a href="#str_to_numeric-119"><span class="linenos">119</span></a>            <span class="k">if</span> <span class="n">quantity</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="n">suffix</span><span class="p">):</span>
</span><span id="str_to_numeric-120"><a href="#str_to_numeric-120"><span class="linenos">120</span></a>                <span class="c1"># remove suffix, store multiplier, and break</span>
</span><span id="str_to_numeric-121"><a href="#str_to_numeric-121"><span class="linenos">121</span></a>                <span class="n">quantity</span> <span class="o">=</span> <span class="n">quantity</span><span class="p">[:</span> <span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
</span><span id="str_to_numeric-122"><a href="#str_to_numeric-122"><span class="linenos">122</span></a>                <span class="n">multiplier</span> <span class="o">=</span> <span class="n">mult</span>
</span><span id="str_to_numeric-123"><a href="#str_to_numeric-123"><span class="linenos">123</span></a>                <span class="k">break</span>
</span><span id="str_to_numeric-124"><a href="#str_to_numeric-124"><span class="linenos">124</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="str_to_numeric-125"><a href="#str_to_numeric-125"><span class="linenos">125</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid suffix in </span><span class="si">{</span><span class="n">quantity_original</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="str_to_numeric-126"><a href="#str_to_numeric-126"><span class="linenos">126</span></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="str_to_numeric-127"><a href="#str_to_numeric-127"><span class="linenos">127</span></a>        <span class="c1"># multiple suffixes</span>
</span><span id="str_to_numeric-128"><a href="#str_to_numeric-128"><span class="linenos">128</span></a>        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Multiple suffixes detected in </span><span class="si">{</span><span class="n">quantity_original</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="str_to_numeric-129"><a href="#str_to_numeric-129"><span class="linenos">129</span></a>
</span><span id="str_to_numeric-130"><a href="#str_to_numeric-130"><span class="linenos">130</span></a>    <span class="c1"># fractions</span>
</span><span id="str_to_numeric-131"><a href="#str_to_numeric-131"><span class="linenos">131</span></a>    <span class="k">if</span> <span class="s2">&quot;/&quot;</span> <span class="ow">in</span> <span class="n">quantity</span><span class="p">:</span>
</span><span id="str_to_numeric-132"><a href="#str_to_numeric-132"><span class="linenos">132</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="str_to_numeric-133"><a href="#str_to_numeric-133"><span class="linenos">133</span></a>            <span class="k">assert</span> <span class="n">quantity</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;too many &#39;/&#39;&quot;</span>
</span><span id="str_to_numeric-134"><a href="#str_to_numeric-134"><span class="linenos">134</span></a>            <span class="c1"># split and strip</span>
</span><span id="str_to_numeric-135"><a href="#str_to_numeric-135"><span class="linenos">135</span></a>            <span class="n">num</span><span class="p">,</span> <span class="n">den</span> <span class="o">=</span> <span class="n">quantity</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">)</span>
</span><span id="str_to_numeric-136"><a href="#str_to_numeric-136"><span class="linenos">136</span></a>            <span class="n">num</span> <span class="o">=</span> <span class="n">num</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
</span><span id="str_to_numeric-137"><a href="#str_to_numeric-137"><span class="linenos">137</span></a>            <span class="n">den</span> <span class="o">=</span> <span class="n">den</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
</span><span id="str_to_numeric-138"><a href="#str_to_numeric-138"><span class="linenos">138</span></a>            <span class="n">num_sign</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span>
</span><span id="str_to_numeric-139"><a href="#str_to_numeric-139"><span class="linenos">139</span></a>            <span class="c1"># negative numbers</span>
</span><span id="str_to_numeric-140"><a href="#str_to_numeric-140"><span class="linenos">140</span></a>            <span class="k">if</span> <span class="n">num</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;-&quot;</span><span class="p">):</span>
</span><span id="str_to_numeric-141"><a href="#str_to_numeric-141"><span class="linenos">141</span></a>                <span class="n">num_sign</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
</span><span id="str_to_numeric-142"><a href="#str_to_numeric-142"><span class="linenos">142</span></a>                <span class="n">num</span> <span class="o">=</span> <span class="n">num</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
</span><span id="str_to_numeric-143"><a href="#str_to_numeric-143"><span class="linenos">143</span></a>            <span class="c1"># assert that both are digits</span>
</span><span id="str_to_numeric-144"><a href="#str_to_numeric-144"><span class="linenos">144</span></a>            <span class="k">assert</span> <span class="p">(</span>
</span><span id="str_to_numeric-145"><a href="#str_to_numeric-145"><span class="linenos">145</span></a>                <span class="n">num</span><span class="o">.</span><span class="n">isdigit</span><span class="p">()</span> <span class="ow">and</span> <span class="n">den</span><span class="o">.</span><span class="n">isdigit</span><span class="p">()</span>
</span><span id="str_to_numeric-146"><a href="#str_to_numeric-146"><span class="linenos">146</span></a>            <span class="p">),</span> <span class="s2">&quot;numerator and denominator must be digits&quot;</span>
</span><span id="str_to_numeric-147"><a href="#str_to_numeric-147"><span class="linenos">147</span></a>            <span class="c1"># return the fraction</span>
</span><span id="str_to_numeric-148"><a href="#str_to_numeric-148"><span class="linenos">148</span></a>            <span class="n">result</span> <span class="o">=</span> <span class="n">num_sign</span> <span class="o">*</span> <span class="p">(</span>
</span><span id="str_to_numeric-149"><a href="#str_to_numeric-149"><span class="linenos">149</span></a>                <span class="nb">int</span><span class="p">(</span><span class="n">num</span><span class="p">)</span> <span class="o">/</span> <span class="nb">int</span><span class="p">(</span><span class="n">den</span><span class="p">)</span>
</span><span id="str_to_numeric-150"><a href="#str_to_numeric-150"><span class="linenos">150</span></a>            <span class="p">)</span>  <span class="c1"># this allows for fractions with suffixes, which is weird, but whatever</span>
</span><span id="str_to_numeric-151"><a href="#str_to_numeric-151"><span class="linenos">151</span></a>        <span class="k">except</span> <span class="ne">AssertionError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="str_to_numeric-152"><a href="#str_to_numeric-152"><span class="linenos">152</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid fraction </span><span class="si">{</span><span class="n">quantity_original</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span> <span class="kn">from</span> <span class="nn">e</span>
</span><span id="str_to_numeric-153"><a href="#str_to_numeric-153"><span class="linenos">153</span></a>
</span><span id="str_to_numeric-154"><a href="#str_to_numeric-154"><span class="linenos">154</span></a>    <span class="c1"># decimals</span>
</span><span id="str_to_numeric-155"><a href="#str_to_numeric-155"><span class="linenos">155</span></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="str_to_numeric-156"><a href="#str_to_numeric-156"><span class="linenos">156</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="str_to_numeric-157"><a href="#str_to_numeric-157"><span class="linenos">157</span></a>            <span class="n">result</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">quantity</span><span class="p">)</span>
</span><span id="str_to_numeric-158"><a href="#str_to_numeric-158"><span class="linenos">158</span></a>        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
</span><span id="str_to_numeric-159"><a href="#str_to_numeric-159"><span class="linenos">159</span></a>            <span class="k">try</span><span class="p">:</span>
</span><span id="str_to_numeric-160"><a href="#str_to_numeric-160"><span class="linenos">160</span></a>                <span class="n">result</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">quantity</span><span class="p">)</span>
</span><span id="str_to_numeric-161"><a href="#str_to_numeric-161"><span class="linenos">161</span></a>            <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="str_to_numeric-162"><a href="#str_to_numeric-162"><span class="linenos">162</span></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="str_to_numeric-163"><a href="#str_to_numeric-163"><span class="linenos">163</span></a>                    <span class="sa">f</span><span class="s2">&quot;Invalid quantity </span><span class="si">{</span><span class="n">quantity_original</span><span class="si">}</span><span class="s2"> (</span><span class="si">{</span><span class="n">quantity</span><span class="si">}</span><span class="s2">)&quot;</span>
</span><span id="str_to_numeric-164"><a href="#str_to_numeric-164"><span class="linenos">164</span></a>                <span class="p">)</span> <span class="kn">from</span> <span class="nn">e</span>
</span><span id="str_to_numeric-165"><a href="#str_to_numeric-165"><span class="linenos">165</span></a>
</span><span id="str_to_numeric-166"><a href="#str_to_numeric-166"><span class="linenos">166</span></a>    <span class="k">return</span> <span class="n">result</span> <span class="o">*</span> <span class="n">multiplier</span>
</span></pre></div>


            <div class="docstring"><p>Convert a string representing a quantity to a numeric value.</p>

<p>The string can represent an integer, python float, fraction, or shortened via <code><a href="#shorten_numerical_to_str">shorten_numerical_to_str</a></code>.</p>

<h1 id="examples">Examples:</h1>

<pre><code>&gt;&gt;&gt; str_to_numeric("5")
5
&gt;&gt;&gt; str_to_numeric("0.1")
0.1
&gt;&gt;&gt; str_to_numeric("1/5")
0.2
&gt;&gt;&gt; str_to_numeric("-1K")
-1000.0
&gt;&gt;&gt; str_to_numeric("1.5M")
1500000.0
&gt;&gt;&gt; str_to_numeric("1.2e2")
120.0
</code></pre>
</div>


                </section>
                <section id="_SHORTEN_MAP">
                    <div class="attr variable">
            <span class="name">_SHORTEN_MAP</span>        =
<input id="_SHORTEN_MAP-view-value" class="view-value-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
            <label class="view-value-button pdoc-button" for="_SHORTEN_MAP-view-value"></label><span class="default_value">{1000.0: &#39;K&#39;, 1000000.0: &#39;M&#39;, 1000000000.0: &#39;B&#39;, 1000000000000.0: &#39;t&#39;, 1000000000000000.0: &#39;q&#39;, 1e+18: &#39;Q&#39;}</span>

        
    </div>
    <a class="headerlink" href="#_SHORTEN_MAP"></a>
    
    

                </section>
                <section id="FrozenDict">
                            <input id="FrozenDict-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">FrozenDict</span><wbr>(<span class="base">builtins.dict</span>):

                <div class="source-button-container">
            <label class="pdoc-button view-source-button" for="FrozenDict-view-source"><span>View Source</span></label>
            <div class="github-button-wrapper">
                <a class="pdoc-button github-link-button" href="https://github.com/mivanit/muutils/blob/0.6.20/misc/__init__.py#L4-L9" target="_blank">
                    <span>View on GitHub</span>
                </a>
            </div>
        </div>

    </div>
    <a class="headerlink" href="#FrozenDict"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="FrozenDict-5"><a href="#FrozenDict-5"><span class="linenos"> 5</span></a><span class="k">class</span> <span class="nc">FrozenDict</span><span class="p">(</span><span class="nb">dict</span><span class="p">):</span>
</span><span id="FrozenDict-6"><a href="#FrozenDict-6"><span class="linenos"> 6</span></a>    <span class="k">def</span> <span class="fm">__setitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
</span><span id="FrozenDict-7"><a href="#FrozenDict-7"><span class="linenos"> 7</span></a>        <span class="k">raise</span> <span class="ne">AttributeError</span><span class="p">(</span><span class="s2">&quot;dict is frozen&quot;</span><span class="p">)</span>
</span><span id="FrozenDict-8"><a href="#FrozenDict-8"><span class="linenos"> 8</span></a>
</span><span id="FrozenDict-9"><a href="#FrozenDict-9"><span class="linenos"> 9</span></a>    <span class="k">def</span> <span class="fm">__delitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
</span><span id="FrozenDict-10"><a href="#FrozenDict-10"><span class="linenos">10</span></a>        <span class="k">raise</span> <span class="ne">AttributeError</span><span class="p">(</span><span class="s2">&quot;dict is frozen&quot;</span><span class="p">)</span>
</span></pre></div>


    

                            <div class="inherited">
                                <h5>Inherited Members</h5>
                                <dl>
                                    <div><dt>builtins.dict</dt>
                                <dd id="FrozenDict.get" class="function">get</dd>
                <dd id="FrozenDict.setdefault" class="function">setdefault</dd>
                <dd id="FrozenDict.pop" class="function">pop</dd>
                <dd id="FrozenDict.popitem" class="function">popitem</dd>
                <dd id="FrozenDict.keys" class="function">keys</dd>
                <dd id="FrozenDict.items" class="function">items</dd>
                <dd id="FrozenDict.values" class="function">values</dd>
                <dd id="FrozenDict.update" class="function">update</dd>
                <dd id="FrozenDict.fromkeys" class="function">fromkeys</dd>
                <dd id="FrozenDict.clear" class="function">clear</dd>
                <dd id="FrozenDict.copy" class="function">copy</dd>

            </div>
                                </dl>
                            </div>
                </section>
                <section id="FrozenList">
                            <input id="FrozenList-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">FrozenList</span><wbr>(<span class="base">builtins.list</span>):

                <div class="source-button-container">
            <label class="pdoc-button view-source-button" for="FrozenList-view-source"><span>View Source</span></label>
            <div class="github-button-wrapper">
                <a class="pdoc-button github-link-button" href="https://github.com/mivanit/muutils/blob/0.6.20/misc/__init__.py#L12-L35" target="_blank">
                    <span>View on GitHub</span>
                </a>
            </div>
        </div>

    </div>
    <a class="headerlink" href="#FrozenList"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="FrozenList-13"><a href="#FrozenList-13"><span class="linenos">13</span></a><span class="k">class</span> <span class="nc">FrozenList</span><span class="p">(</span><span class="nb">list</span><span class="p">):</span>
</span><span id="FrozenList-14"><a href="#FrozenList-14"><span class="linenos">14</span></a>    <span class="k">def</span> <span class="fm">__setitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
</span><span id="FrozenList-15"><a href="#FrozenList-15"><span class="linenos">15</span></a>        <span class="k">raise</span> <span class="ne">AttributeError</span><span class="p">(</span><span class="s2">&quot;list is frozen&quot;</span><span class="p">)</span>
</span><span id="FrozenList-16"><a href="#FrozenList-16"><span class="linenos">16</span></a>
</span><span id="FrozenList-17"><a href="#FrozenList-17"><span class="linenos">17</span></a>    <span class="k">def</span> <span class="fm">__delitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
</span><span id="FrozenList-18"><a href="#FrozenList-18"><span class="linenos">18</span></a>        <span class="k">raise</span> <span class="ne">AttributeError</span><span class="p">(</span><span class="s2">&quot;list is frozen&quot;</span><span class="p">)</span>
</span><span id="FrozenList-19"><a href="#FrozenList-19"><span class="linenos">19</span></a>
</span><span id="FrozenList-20"><a href="#FrozenList-20"><span class="linenos">20</span></a>    <span class="k">def</span> <span class="nf">append</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
</span><span id="FrozenList-21"><a href="#FrozenList-21"><span class="linenos">21</span></a>        <span class="k">raise</span> <span class="ne">AttributeError</span><span class="p">(</span><span class="s2">&quot;list is frozen&quot;</span><span class="p">)</span>
</span><span id="FrozenList-22"><a href="#FrozenList-22"><span class="linenos">22</span></a>
</span><span id="FrozenList-23"><a href="#FrozenList-23"><span class="linenos">23</span></a>    <span class="k">def</span> <span class="nf">extend</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">iterable</span><span class="p">):</span>
</span><span id="FrozenList-24"><a href="#FrozenList-24"><span class="linenos">24</span></a>        <span class="k">raise</span> <span class="ne">AttributeError</span><span class="p">(</span><span class="s2">&quot;list is frozen&quot;</span><span class="p">)</span>
</span><span id="FrozenList-25"><a href="#FrozenList-25"><span class="linenos">25</span></a>
</span><span id="FrozenList-26"><a href="#FrozenList-26"><span class="linenos">26</span></a>    <span class="k">def</span> <span class="nf">insert</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
</span><span id="FrozenList-27"><a href="#FrozenList-27"><span class="linenos">27</span></a>        <span class="k">raise</span> <span class="ne">AttributeError</span><span class="p">(</span><span class="s2">&quot;list is frozen&quot;</span><span class="p">)</span>
</span><span id="FrozenList-28"><a href="#FrozenList-28"><span class="linenos">28</span></a>
</span><span id="FrozenList-29"><a href="#FrozenList-29"><span class="linenos">29</span></a>    <span class="k">def</span> <span class="nf">remove</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
</span><span id="FrozenList-30"><a href="#FrozenList-30"><span class="linenos">30</span></a>        <span class="k">raise</span> <span class="ne">AttributeError</span><span class="p">(</span><span class="s2">&quot;list is frozen&quot;</span><span class="p">)</span>
</span><span id="FrozenList-31"><a href="#FrozenList-31"><span class="linenos">31</span></a>
</span><span id="FrozenList-32"><a href="#FrozenList-32"><span class="linenos">32</span></a>    <span class="k">def</span> <span class="nf">pop</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="o">=-</span><span class="mi">1</span><span class="p">):</span>
</span><span id="FrozenList-33"><a href="#FrozenList-33"><span class="linenos">33</span></a>        <span class="k">raise</span> <span class="ne">AttributeError</span><span class="p">(</span><span class="s2">&quot;list is frozen&quot;</span><span class="p">)</span>
</span><span id="FrozenList-34"><a href="#FrozenList-34"><span class="linenos">34</span></a>
</span><span id="FrozenList-35"><a href="#FrozenList-35"><span class="linenos">35</span></a>    <span class="k">def</span> <span class="nf">clear</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="FrozenList-36"><a href="#FrozenList-36"><span class="linenos">36</span></a>        <span class="k">raise</span> <span class="ne">AttributeError</span><span class="p">(</span><span class="s2">&quot;list is frozen&quot;</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Built-in mutable sequence.</p>

<p>If no argument is given, the constructor creates a new empty list.
The argument must be an iterable if specified.</p>
</div>


                            <div id="FrozenList.append" class="classattr">
                                        <input id="FrozenList.append-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">append</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">value</span></span><span class="return-annotation">):</span></span>

                <div class="source-button-container">
            <label class="pdoc-button view-source-button" for="FrozenList.append-view-source"><span>View Source</span></label>
            <div class="github-button-wrapper">
                <a class="pdoc-button github-link-button" href="https://github.com/mivanit/muutils/blob/0.6.20/misc/__init__.py#L19-L20" target="_blank">
                    <span>View on GitHub</span>
                </a>
            </div>
        </div>

    </div>
    <a class="headerlink" href="#FrozenList.append"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="FrozenList.append-20"><a href="#FrozenList.append-20"><span class="linenos">20</span></a>    <span class="k">def</span> <span class="nf">append</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
</span><span id="FrozenList.append-21"><a href="#FrozenList.append-21"><span class="linenos">21</span></a>        <span class="k">raise</span> <span class="ne">AttributeError</span><span class="p">(</span><span class="s2">&quot;list is frozen&quot;</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Append object to the end of the list.</p>
</div>


                            </div>
                            <div id="FrozenList.extend" class="classattr">
                                        <input id="FrozenList.extend-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">extend</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">iterable</span></span><span class="return-annotation">):</span></span>

                <div class="source-button-container">
            <label class="pdoc-button view-source-button" for="FrozenList.extend-view-source"><span>View Source</span></label>
            <div class="github-button-wrapper">
                <a class="pdoc-button github-link-button" href="https://github.com/mivanit/muutils/blob/0.6.20/misc/__init__.py#L22-L23" target="_blank">
                    <span>View on GitHub</span>
                </a>
            </div>
        </div>

    </div>
    <a class="headerlink" href="#FrozenList.extend"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="FrozenList.extend-23"><a href="#FrozenList.extend-23"><span class="linenos">23</span></a>    <span class="k">def</span> <span class="nf">extend</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">iterable</span><span class="p">):</span>
</span><span id="FrozenList.extend-24"><a href="#FrozenList.extend-24"><span class="linenos">24</span></a>        <span class="k">raise</span> <span class="ne">AttributeError</span><span class="p">(</span><span class="s2">&quot;list is frozen&quot;</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Extend list by appending elements from the iterable.</p>
</div>


                            </div>
                            <div id="FrozenList.insert" class="classattr">
                                        <input id="FrozenList.insert-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">insert</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">index</span>, </span><span class="param"><span class="n">value</span></span><span class="return-annotation">):</span></span>

                <div class="source-button-container">
            <label class="pdoc-button view-source-button" for="FrozenList.insert-view-source"><span>View Source</span></label>
            <div class="github-button-wrapper">
                <a class="pdoc-button github-link-button" href="https://github.com/mivanit/muutils/blob/0.6.20/misc/__init__.py#L25-L26" target="_blank">
                    <span>View on GitHub</span>
                </a>
            </div>
        </div>

    </div>
    <a class="headerlink" href="#FrozenList.insert"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="FrozenList.insert-26"><a href="#FrozenList.insert-26"><span class="linenos">26</span></a>    <span class="k">def</span> <span class="nf">insert</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
</span><span id="FrozenList.insert-27"><a href="#FrozenList.insert-27"><span class="linenos">27</span></a>        <span class="k">raise</span> <span class="ne">AttributeError</span><span class="p">(</span><span class="s2">&quot;list is frozen&quot;</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Insert object before index.</p>
</div>


                            </div>
                            <div id="FrozenList.remove" class="classattr">
                                        <input id="FrozenList.remove-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">remove</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">value</span></span><span class="return-annotation">):</span></span>

                <div class="source-button-container">
            <label class="pdoc-button view-source-button" for="FrozenList.remove-view-source"><span>View Source</span></label>
            <div class="github-button-wrapper">
                <a class="pdoc-button github-link-button" href="https://github.com/mivanit/muutils/blob/0.6.20/misc/__init__.py#L28-L29" target="_blank">
                    <span>View on GitHub</span>
                </a>
            </div>
        </div>

    </div>
    <a class="headerlink" href="#FrozenList.remove"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="FrozenList.remove-29"><a href="#FrozenList.remove-29"><span class="linenos">29</span></a>    <span class="k">def</span> <span class="nf">remove</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
</span><span id="FrozenList.remove-30"><a href="#FrozenList.remove-30"><span class="linenos">30</span></a>        <span class="k">raise</span> <span class="ne">AttributeError</span><span class="p">(</span><span class="s2">&quot;list is frozen&quot;</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Remove first occurrence of value.</p>

<p>Raises ValueError if the value is not present.</p>
</div>


                            </div>
                            <div id="FrozenList.pop" class="classattr">
                                        <input id="FrozenList.pop-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">pop</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">index</span><span class="o">=-</span><span class="mi">1</span></span><span class="return-annotation">):</span></span>

                <div class="source-button-container">
            <label class="pdoc-button view-source-button" for="FrozenList.pop-view-source"><span>View Source</span></label>
            <div class="github-button-wrapper">
                <a class="pdoc-button github-link-button" href="https://github.com/mivanit/muutils/blob/0.6.20/misc/__init__.py#L31-L32" target="_blank">
                    <span>View on GitHub</span>
                </a>
            </div>
        </div>

    </div>
    <a class="headerlink" href="#FrozenList.pop"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="FrozenList.pop-32"><a href="#FrozenList.pop-32"><span class="linenos">32</span></a>    <span class="k">def</span> <span class="nf">pop</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="o">=-</span><span class="mi">1</span><span class="p">):</span>
</span><span id="FrozenList.pop-33"><a href="#FrozenList.pop-33"><span class="linenos">33</span></a>        <span class="k">raise</span> <span class="ne">AttributeError</span><span class="p">(</span><span class="s2">&quot;list is frozen&quot;</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Remove and return item at index (default last).</p>

<p>Raises IndexError if list is empty or index is out of range.</p>
</div>


                            </div>
                            <div id="FrozenList.clear" class="classattr">
                                        <input id="FrozenList.clear-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">clear</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <div class="source-button-container">
            <label class="pdoc-button view-source-button" for="FrozenList.clear-view-source"><span>View Source</span></label>
            <div class="github-button-wrapper">
                <a class="pdoc-button github-link-button" href="https://github.com/mivanit/muutils/blob/0.6.20/misc/__init__.py#L34-L35" target="_blank">
                    <span>View on GitHub</span>
                </a>
            </div>
        </div>

    </div>
    <a class="headerlink" href="#FrozenList.clear"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="FrozenList.clear-35"><a href="#FrozenList.clear-35"><span class="linenos">35</span></a>    <span class="k">def</span> <span class="nf">clear</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="FrozenList.clear-36"><a href="#FrozenList.clear-36"><span class="linenos">36</span></a>        <span class="k">raise</span> <span class="ne">AttributeError</span><span class="p">(</span><span class="s2">&quot;list is frozen&quot;</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Remove all items from list.</p>
</div>


                            </div>
                            <div class="inherited">
                                <h5>Inherited Members</h5>
                                <dl>
                                    <div><dt>builtins.list</dt>
                                <dd id="FrozenList.__init__" class="function">list</dd>
                <dd id="FrozenList.copy" class="function">copy</dd>
                <dd id="FrozenList.index" class="function">index</dd>
                <dd id="FrozenList.count" class="function">count</dd>
                <dd id="FrozenList.reverse" class="function">reverse</dd>
                <dd id="FrozenList.sort" class="function">sort</dd>

            </div>
                                </dl>
                            </div>
                </section>
                <section id="freeze">
                            <input id="freeze-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">freeze</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">instance</span><span class="p">:</span> <span class="nb">object</span></span><span class="return-annotation">) -> <span class="nb">object</span>:</span></span>

                <div class="source-button-container">
            <label class="pdoc-button view-source-button" for="freeze-view-source"><span>View Source</span></label>
            <div class="github-button-wrapper">
                <a class="pdoc-button github-link-button" href="https://github.com/mivanit/muutils/blob/0.6.20/misc/__init__.py#L38-L107" target="_blank">
                    <span>View on GitHub</span>
                </a>
            </div>
        </div>

    </div>
    <a class="headerlink" href="#freeze"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="freeze-39"><a href="#freeze-39"><span class="linenos"> 39</span></a><span class="k">def</span> <span class="nf">freeze</span><span class="p">(</span><span class="n">instance</span><span class="p">:</span> <span class="nb">object</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">object</span><span class="p">:</span>
</span><span id="freeze-40"><a href="#freeze-40"><span class="linenos"> 40</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;recursively freeze an object in-place so that its attributes and elements cannot be changed</span>
</span><span id="freeze-41"><a href="#freeze-41"><span class="linenos"> 41</span></a>
</span><span id="freeze-42"><a href="#freeze-42"><span class="linenos"> 42</span></a><span class="sd">    messy in the sense that sometimes the object is modified in place, but you can&#39;t rely on that. always use the return value.</span>
</span><span id="freeze-43"><a href="#freeze-43"><span class="linenos"> 43</span></a>
</span><span id="freeze-44"><a href="#freeze-44"><span class="linenos"> 44</span></a><span class="sd">    the [gelidum](https://github.com/diegojromerolopez/gelidum/) package is a more complete implementation of this idea</span>
</span><span id="freeze-45"><a href="#freeze-45"><span class="linenos"> 45</span></a>
</span><span id="freeze-46"><a href="#freeze-46"><span class="linenos"> 46</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="freeze-47"><a href="#freeze-47"><span class="linenos"> 47</span></a>
</span><span id="freeze-48"><a href="#freeze-48"><span class="linenos"> 48</span></a>    <span class="c1"># mark as frozen</span>
</span><span id="freeze-49"><a href="#freeze-49"><span class="linenos"> 49</span></a>    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">instance</span><span class="p">,</span> <span class="s2">&quot;_IS_FROZEN&quot;</span><span class="p">):</span>
</span><span id="freeze-50"><a href="#freeze-50"><span class="linenos"> 50</span></a>        <span class="k">if</span> <span class="n">instance</span><span class="o">.</span><span class="n">_IS_FROZEN</span><span class="p">:</span>
</span><span id="freeze-51"><a href="#freeze-51"><span class="linenos"> 51</span></a>            <span class="k">return</span> <span class="n">instance</span>
</span><span id="freeze-52"><a href="#freeze-52"><span class="linenos"> 52</span></a>
</span><span id="freeze-53"><a href="#freeze-53"><span class="linenos"> 53</span></a>    <span class="c1"># try to mark as frozen</span>
</span><span id="freeze-54"><a href="#freeze-54"><span class="linenos"> 54</span></a>    <span class="k">try</span><span class="p">:</span>
</span><span id="freeze-55"><a href="#freeze-55"><span class="linenos"> 55</span></a>        <span class="n">instance</span><span class="o">.</span><span class="n">_IS_FROZEN</span> <span class="o">=</span> <span class="kc">True</span>  <span class="c1"># type: ignore[attr-defined]</span>
</span><span id="freeze-56"><a href="#freeze-56"><span class="linenos"> 56</span></a>    <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
</span><span id="freeze-57"><a href="#freeze-57"><span class="linenos"> 57</span></a>        <span class="k">pass</span>
</span><span id="freeze-58"><a href="#freeze-58"><span class="linenos"> 58</span></a>
</span><span id="freeze-59"><a href="#freeze-59"><span class="linenos"> 59</span></a>    <span class="c1"># skip basic types, weird things, or already frozen things</span>
</span><span id="freeze-60"><a href="#freeze-60"><span class="linenos"> 60</span></a>    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">instance</span><span class="p">,</span> <span class="p">(</span><span class="nb">bool</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">)):</span>
</span><span id="freeze-61"><a href="#freeze-61"><span class="linenos"> 61</span></a>        <span class="k">pass</span>
</span><span id="freeze-62"><a href="#freeze-62"><span class="linenos"> 62</span></a>
</span><span id="freeze-63"><a href="#freeze-63"><span class="linenos"> 63</span></a>    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">instance</span><span class="p">,</span> <span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="kc">None</span><span class="p">),</span> <span class="nb">type</span><span class="p">(</span><span class="bp">Ellipsis</span><span class="p">))):</span>
</span><span id="freeze-64"><a href="#freeze-64"><span class="linenos"> 64</span></a>        <span class="k">pass</span>
</span><span id="freeze-65"><a href="#freeze-65"><span class="linenos"> 65</span></a>
</span><span id="freeze-66"><a href="#freeze-66"><span class="linenos"> 66</span></a>    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">instance</span><span class="p">,</span> <span class="p">(</span><span class="n">FrozenList</span><span class="p">,</span> <span class="n">FrozenDict</span><span class="p">,</span> <span class="nb">frozenset</span><span class="p">)):</span>
</span><span id="freeze-67"><a href="#freeze-67"><span class="linenos"> 67</span></a>        <span class="k">pass</span>
</span><span id="freeze-68"><a href="#freeze-68"><span class="linenos"> 68</span></a>
</span><span id="freeze-69"><a href="#freeze-69"><span class="linenos"> 69</span></a>    <span class="c1"># handle containers</span>
</span><span id="freeze-70"><a href="#freeze-70"><span class="linenos"> 70</span></a>    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">instance</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
</span><span id="freeze-71"><a href="#freeze-71"><span class="linenos"> 71</span></a>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">instance</span><span class="p">)):</span>
</span><span id="freeze-72"><a href="#freeze-72"><span class="linenos"> 72</span></a>            <span class="n">instance</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">freeze</span><span class="p">(</span><span class="n">instance</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
</span><span id="freeze-73"><a href="#freeze-73"><span class="linenos"> 73</span></a>        <span class="n">instance</span> <span class="o">=</span> <span class="n">FrozenList</span><span class="p">(</span><span class="n">instance</span><span class="p">)</span>
</span><span id="freeze-74"><a href="#freeze-74"><span class="linenos"> 74</span></a>
</span><span id="freeze-75"><a href="#freeze-75"><span class="linenos"> 75</span></a>    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">instance</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">):</span>
</span><span id="freeze-76"><a href="#freeze-76"><span class="linenos"> 76</span></a>        <span class="n">instance</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">freeze</span><span class="p">(</span><span class="n">item</span><span class="p">)</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">instance</span><span class="p">)</span>
</span><span id="freeze-77"><a href="#freeze-77"><span class="linenos"> 77</span></a>
</span><span id="freeze-78"><a href="#freeze-78"><span class="linenos"> 78</span></a>    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">instance</span><span class="p">,</span> <span class="nb">set</span><span class="p">):</span>
</span><span id="freeze-79"><a href="#freeze-79"><span class="linenos"> 79</span></a>        <span class="n">instance</span> <span class="o">=</span> <span class="nb">frozenset</span><span class="p">({</span><span class="n">freeze</span><span class="p">(</span><span class="n">item</span><span class="p">)</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">instance</span><span class="p">})</span>
</span><span id="freeze-80"><a href="#freeze-80"><span class="linenos"> 80</span></a>
</span><span id="freeze-81"><a href="#freeze-81"><span class="linenos"> 81</span></a>    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">instance</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
</span><span id="freeze-82"><a href="#freeze-82"><span class="linenos"> 82</span></a>        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">instance</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="freeze-83"><a href="#freeze-83"><span class="linenos"> 83</span></a>            <span class="n">instance</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">freeze</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
</span><span id="freeze-84"><a href="#freeze-84"><span class="linenos"> 84</span></a>        <span class="n">instance</span> <span class="o">=</span> <span class="n">FrozenDict</span><span class="p">(</span><span class="n">instance</span><span class="p">)</span>
</span><span id="freeze-85"><a href="#freeze-85"><span class="linenos"> 85</span></a>
</span><span id="freeze-86"><a href="#freeze-86"><span class="linenos"> 86</span></a>    <span class="c1"># handle custom classes</span>
</span><span id="freeze-87"><a href="#freeze-87"><span class="linenos"> 87</span></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="freeze-88"><a href="#freeze-88"><span class="linenos"> 88</span></a>        <span class="c1"># set everything in the __dict__ to frozen</span>
</span><span id="freeze-89"><a href="#freeze-89"><span class="linenos"> 89</span></a>        <span class="n">instance</span><span class="o">.</span><span class="vm">__dict__</span> <span class="o">=</span> <span class="n">freeze</span><span class="p">(</span><span class="n">instance</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">)</span>  <span class="c1"># type: ignore[assignment]</span>
</span><span id="freeze-90"><a href="#freeze-90"><span class="linenos"> 90</span></a>
</span><span id="freeze-91"><a href="#freeze-91"><span class="linenos"> 91</span></a>        <span class="c1"># create a new class which inherits from the original class</span>
</span><span id="freeze-92"><a href="#freeze-92"><span class="linenos"> 92</span></a>        <span class="k">class</span> <span class="nc">FrozenClass</span><span class="p">(</span><span class="n">instance</span><span class="o">.</span><span class="vm">__class__</span><span class="p">):</span>  <span class="c1"># type: ignore[name-defined]</span>
</span><span id="freeze-93"><a href="#freeze-93"><span class="linenos"> 93</span></a>            <span class="k">def</span> <span class="fm">__setattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
</span><span id="freeze-94"><a href="#freeze-94"><span class="linenos"> 94</span></a>                <span class="k">raise</span> <span class="ne">AttributeError</span><span class="p">(</span><span class="s2">&quot;class is frozen&quot;</span><span class="p">)</span>
</span><span id="freeze-95"><a href="#freeze-95"><span class="linenos"> 95</span></a>
</span><span id="freeze-96"><a href="#freeze-96"><span class="linenos"> 96</span></a>        <span class="n">FrozenClass</span><span class="o">.</span><span class="vm">__name__</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;FrozenClass__</span><span class="si">{</span><span class="n">instance</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="freeze-97"><a href="#freeze-97"><span class="linenos"> 97</span></a>        <span class="n">FrozenClass</span><span class="o">.</span><span class="vm">__module__</span> <span class="o">=</span> <span class="n">instance</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__module__</span>
</span><span id="freeze-98"><a href="#freeze-98"><span class="linenos"> 98</span></a>        <span class="n">FrozenClass</span><span class="o">.</span><span class="vm">__doc__</span> <span class="o">=</span> <span class="n">instance</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__doc__</span>
</span><span id="freeze-99"><a href="#freeze-99"><span class="linenos"> 99</span></a>
</span><span id="freeze-100"><a href="#freeze-100"><span class="linenos">100</span></a>        <span class="c1"># set the instance&#39;s class to the new class</span>
</span><span id="freeze-101"><a href="#freeze-101"><span class="linenos">101</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="freeze-102"><a href="#freeze-102"><span class="linenos">102</span></a>            <span class="n">instance</span><span class="o">.</span><span class="vm">__class__</span> <span class="o">=</span> <span class="n">FrozenClass</span>
</span><span id="freeze-103"><a href="#freeze-103"><span class="linenos">103</span></a>        <span class="k">except</span> <span class="ne">TypeError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="freeze-104"><a href="#freeze-104"><span class="linenos">104</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="freeze-105"><a href="#freeze-105"><span class="linenos">105</span></a>                <span class="sa">f</span><span class="s2">&quot;Cannot freeze:</span><span class="se">\n</span><span class="si">{</span><span class="n">instance</span><span class="w"> </span><span class="si">= }</span><span class="se">\n</span><span class="si">{</span><span class="n">instance</span><span class="o">.</span><span class="vm">__class__</span><span class="w"> </span><span class="si">= }</span><span class="se">\n</span><span class="si">{</span><span class="n">FrozenClass</span><span class="w"> </span><span class="si">= }</span><span class="s2">&quot;</span>
</span><span id="freeze-106"><a href="#freeze-106"><span class="linenos">106</span></a>            <span class="p">)</span> <span class="kn">from</span> <span class="nn">e</span>
</span><span id="freeze-107"><a href="#freeze-107"><span class="linenos">107</span></a>
</span><span id="freeze-108"><a href="#freeze-108"><span class="linenos">108</span></a>    <span class="k">return</span> <span class="n">instance</span>
</span></pre></div>


            <div class="docstring"><p>recursively freeze an object in-place so that its attributes and elements cannot be changed</p>

<p>messy in the sense that sometimes the object is modified in place, but you can't rely on that. always use the return value.</p>

<p>the <a href="https://github.com/diegojromerolopez/gelidum/">gelidum</a> package is a more complete implementation of this idea</p>
</div>


                </section>
                <section id="is_abstract">
                            <input id="is_abstract-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">is_abstract</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">cls</span><span class="p">:</span> <span class="nb">type</span></span><span class="return-annotation">) -> <span class="nb">bool</span>:</span></span>

                <div class="source-button-container">
            <label class="pdoc-button view-source-button" for="is_abstract-view-source"><span>View Source</span></label>
            <div class="github-button-wrapper">
                <a class="pdoc-button github-link-button" href="https://github.com/mivanit/muutils/blob/0.6.20/misc/__init__.py#L14-L23" target="_blank">
                    <span>View on GitHub</span>
                </a>
            </div>
        </div>

    </div>
    <a class="headerlink" href="#is_abstract"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="is_abstract-15"><a href="#is_abstract-15"><span class="linenos">15</span></a><span class="k">def</span> <span class="nf">is_abstract</span><span class="p">(</span><span class="bp">cls</span><span class="p">:</span> <span class="nb">type</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="is_abstract-16"><a href="#is_abstract-16"><span class="linenos">16</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="is_abstract-17"><a href="#is_abstract-17"><span class="linenos">17</span></a><span class="sd">    Returns if a class is abstract.</span>
</span><span id="is_abstract-18"><a href="#is_abstract-18"><span class="linenos">18</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="is_abstract-19"><a href="#is_abstract-19"><span class="linenos">19</span></a>    <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="s2">&quot;__abstractmethods__&quot;</span><span class="p">):</span>
</span><span id="is_abstract-20"><a href="#is_abstract-20"><span class="linenos">20</span></a>        <span class="k">return</span> <span class="kc">False</span>  <span class="c1"># an ordinary class</span>
</span><span id="is_abstract-21"><a href="#is_abstract-21"><span class="linenos">21</span></a>    <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="bp">cls</span><span class="o">.</span><span class="n">__abstractmethods__</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="is_abstract-22"><a href="#is_abstract-22"><span class="linenos">22</span></a>        <span class="k">return</span> <span class="kc">False</span>  <span class="c1"># a concrete implementation of an abstract class</span>
</span><span id="is_abstract-23"><a href="#is_abstract-23"><span class="linenos">23</span></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="is_abstract-24"><a href="#is_abstract-24"><span class="linenos">24</span></a>        <span class="k">return</span> <span class="kc">True</span>  <span class="c1"># an abstract class</span>
</span></pre></div>


            <div class="docstring"><p>Returns if a class is abstract.</p>
</div>


                </section>
                <section id="get_all_subclasses">
                            <input id="get_all_subclasses-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_all_subclasses</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">class_</span><span class="p">:</span> <span class="nb">type</span>, </span><span class="param"><span class="n">include_self</span><span class="o">=</span><span class="kc">False</span></span><span class="return-annotation">) -> <span class="nb">set</span><span class="p">[</span><span class="nb">type</span><span class="p">]</span>:</span></span>

                <div class="source-button-container">
            <label class="pdoc-button view-source-button" for="get_all_subclasses-view-source"><span>View Source</span></label>
            <div class="github-button-wrapper">
                <a class="pdoc-button github-link-button" href="https://github.com/mivanit/muutils/blob/0.6.20/misc/__init__.py#L26-L48" target="_blank">
                    <span>View on GitHub</span>
                </a>
            </div>
        </div>

    </div>
    <a class="headerlink" href="#get_all_subclasses"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="get_all_subclasses-27"><a href="#get_all_subclasses-27"><span class="linenos">27</span></a><span class="k">def</span> <span class="nf">get_all_subclasses</span><span class="p">(</span><span class="n">class_</span><span class="p">:</span> <span class="nb">type</span><span class="p">,</span> <span class="n">include_self</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">set</span><span class="p">[</span><span class="nb">type</span><span class="p">]:</span>
</span><span id="get_all_subclasses-28"><a href="#get_all_subclasses-28"><span class="linenos">28</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="get_all_subclasses-29"><a href="#get_all_subclasses-29"><span class="linenos">29</span></a><span class="sd">    Returns a set containing all child classes in the subclass graph of `class_`.</span>
</span><span id="get_all_subclasses-30"><a href="#get_all_subclasses-30"><span class="linenos">30</span></a><span class="sd">    I.e., includes subclasses of subclasses, etc.</span>
</span><span id="get_all_subclasses-31"><a href="#get_all_subclasses-31"><span class="linenos">31</span></a>
</span><span id="get_all_subclasses-32"><a href="#get_all_subclasses-32"><span class="linenos">32</span></a><span class="sd">    # Parameters</span>
</span><span id="get_all_subclasses-33"><a href="#get_all_subclasses-33"><span class="linenos">33</span></a><span class="sd">    - `include_self`: Whether to include `class_` itself in the returned set</span>
</span><span id="get_all_subclasses-34"><a href="#get_all_subclasses-34"><span class="linenos">34</span></a><span class="sd">    - `class_`: Superclass</span>
</span><span id="get_all_subclasses-35"><a href="#get_all_subclasses-35"><span class="linenos">35</span></a>
</span><span id="get_all_subclasses-36"><a href="#get_all_subclasses-36"><span class="linenos">36</span></a><span class="sd">    # Development</span>
</span><span id="get_all_subclasses-37"><a href="#get_all_subclasses-37"><span class="linenos">37</span></a><span class="sd">    Since most class hierarchies are small, the inefficiencies of the existing recursive implementation aren&#39;t problematic.</span>
</span><span id="get_all_subclasses-38"><a href="#get_all_subclasses-38"><span class="linenos">38</span></a><span class="sd">    It might be valuable to refactor with memoization if the need arises to use this function on a very large class hierarchy.</span>
</span><span id="get_all_subclasses-39"><a href="#get_all_subclasses-39"><span class="linenos">39</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="get_all_subclasses-40"><a href="#get_all_subclasses-40"><span class="linenos">40</span></a>    <span class="n">subs</span><span class="p">:</span> <span class="nb">set</span><span class="p">[</span><span class="nb">type</span><span class="p">]</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span>
</span><span id="get_all_subclasses-41"><a href="#get_all_subclasses-41"><span class="linenos">41</span></a>        <span class="n">flatten</span><span class="p">(</span>
</span><span id="get_all_subclasses-42"><a href="#get_all_subclasses-42"><span class="linenos">42</span></a>            <span class="n">get_all_subclasses</span><span class="p">(</span><span class="n">sub</span><span class="p">,</span> <span class="n">include_self</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="get_all_subclasses-43"><a href="#get_all_subclasses-43"><span class="linenos">43</span></a>            <span class="k">for</span> <span class="n">sub</span> <span class="ow">in</span> <span class="n">class_</span><span class="o">.</span><span class="n">__subclasses__</span><span class="p">()</span>
</span><span id="get_all_subclasses-44"><a href="#get_all_subclasses-44"><span class="linenos">44</span></a>            <span class="k">if</span> <span class="n">sub</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
</span><span id="get_all_subclasses-45"><a href="#get_all_subclasses-45"><span class="linenos">45</span></a>        <span class="p">)</span>
</span><span id="get_all_subclasses-46"><a href="#get_all_subclasses-46"><span class="linenos">46</span></a>    <span class="p">)</span>
</span><span id="get_all_subclasses-47"><a href="#get_all_subclasses-47"><span class="linenos">47</span></a>    <span class="k">if</span> <span class="n">include_self</span><span class="p">:</span>
</span><span id="get_all_subclasses-48"><a href="#get_all_subclasses-48"><span class="linenos">48</span></a>        <span class="n">subs</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">class_</span><span class="p">)</span>
</span><span id="get_all_subclasses-49"><a href="#get_all_subclasses-49"><span class="linenos">49</span></a>    <span class="k">return</span> <span class="n">subs</span>
</span></pre></div>


            <div class="docstring"><p>Returns a set containing all child classes in the subclass graph of <code>class_</code>.
I.e., includes subclasses of subclasses, etc.</p>

<h1 id="parameters">Parameters</h1>

<ul>
<li><code>include_self</code>: Whether to include <code>class_</code> itself in the returned set</li>
<li><code>class_</code>: Superclass</li>
</ul>

<h1 id="development">Development</h1>

<p>Since most class hierarchies are small, the inefficiencies of the existing recursive implementation aren't problematic.
It might be valuable to refactor with memoization if the need arises to use this function on a very large class hierarchy.</p>
</div>


                </section>
                <section id="isinstance_by_type_name">
                            <input id="isinstance_by_type_name-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">isinstance_by_type_name</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">o</span><span class="p">:</span> <span class="nb">object</span>, </span><span class="param"><span class="n">type_name</span><span class="p">:</span> <span class="nb">str</span></span><span class="return-annotation">):</span></span>

                <div class="source-button-container">
            <label class="pdoc-button view-source-button" for="isinstance_by_type_name-view-source"><span>View Source</span></label>
            <div class="github-button-wrapper">
                <a class="pdoc-button github-link-button" href="https://github.com/mivanit/muutils/blob/0.6.20/misc/__init__.py#L51-L61" target="_blank">
                    <span>View on GitHub</span>
                </a>
            </div>
        </div>

    </div>
    <a class="headerlink" href="#isinstance_by_type_name"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="isinstance_by_type_name-52"><a href="#isinstance_by_type_name-52"><span class="linenos">52</span></a><span class="k">def</span> <span class="nf">isinstance_by_type_name</span><span class="p">(</span><span class="n">o</span><span class="p">:</span> <span class="nb">object</span><span class="p">,</span> <span class="n">type_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
</span><span id="isinstance_by_type_name-53"><a href="#isinstance_by_type_name-53"><span class="linenos">53</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Behaves like stdlib `isinstance` except it accepts a string representation of the type rather than the type itself.</span>
</span><span id="isinstance_by_type_name-54"><a href="#isinstance_by_type_name-54"><span class="linenos">54</span></a><span class="sd">    This is a hacky function intended to circumvent the need to import a type into a module.</span>
</span><span id="isinstance_by_type_name-55"><a href="#isinstance_by_type_name-55"><span class="linenos">55</span></a><span class="sd">    It is susceptible to type name collisions.</span>
</span><span id="isinstance_by_type_name-56"><a href="#isinstance_by_type_name-56"><span class="linenos">56</span></a>
</span><span id="isinstance_by_type_name-57"><a href="#isinstance_by_type_name-57"><span class="linenos">57</span></a><span class="sd">    # Parameters</span>
</span><span id="isinstance_by_type_name-58"><a href="#isinstance_by_type_name-58"><span class="linenos">58</span></a><span class="sd">    `o`: Object (not the type itself) whose type to interrogate</span>
</span><span id="isinstance_by_type_name-59"><a href="#isinstance_by_type_name-59"><span class="linenos">59</span></a><span class="sd">    `type_name`: The string returned by `type_.__name__`.</span>
</span><span id="isinstance_by_type_name-60"><a href="#isinstance_by_type_name-60"><span class="linenos">60</span></a><span class="sd">    Generic types are not supported, only types that would appear in `type_.__mro__`.</span>
</span><span id="isinstance_by_type_name-61"><a href="#isinstance_by_type_name-61"><span class="linenos">61</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="isinstance_by_type_name-62"><a href="#isinstance_by_type_name-62"><span class="linenos">62</span></a>    <span class="k">return</span> <span class="n">type_name</span> <span class="ow">in</span> <span class="p">{</span><span class="n">s</span><span class="o">.</span><span class="vm">__name__</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="nb">type</span><span class="p">(</span><span class="n">o</span><span class="p">)</span><span class="o">.</span><span class="vm">__mro__</span><span class="p">}</span>
</span></pre></div>


            <div class="docstring"><p>Behaves like stdlib <code>isinstance</code> except it accepts a string representation of the type rather than the type itself.
This is a hacky function intended to circumvent the need to import a type into a module.
It is susceptible to type name collisions.</p>

<h1 id="parameters">Parameters</h1>

<p><code>o</code>: Object (not the type itself) whose type to interrogate
<code>type_name</code>: The string returned by <code>type_.__name__</code>.
Generic types are not supported, only types that would appear in <code>type_.__mro__</code>.</p>
</div>


                </section>
                <section id="IsDataclass">
                            <input id="IsDataclass-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
                    <div class="decorator">@runtime_checkable</div>

    <span class="def">class</span>
    <span class="name">IsDataclass</span><wbr>(<span class="base">typing.Protocol</span>):

                <div class="source-button-container">
            <label class="pdoc-button view-source-button" for="IsDataclass-view-source"><span>View Source</span></label>
            <div class="github-button-wrapper">
                <a class="pdoc-button github-link-button" href="https://github.com/mivanit/muutils/blob/0.6.20/misc/__init__.py#L68-L72" target="_blank">
                    <span>View on GitHub</span>
                </a>
            </div>
        </div>

    </div>
    <a class="headerlink" href="#IsDataclass"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="IsDataclass-69"><a href="#IsDataclass-69"><span class="linenos">69</span></a><span class="nd">@runtime_checkable</span>
</span><span id="IsDataclass-70"><a href="#IsDataclass-70"><span class="linenos">70</span></a><span class="k">class</span> <span class="nc">IsDataclass</span><span class="p">(</span><span class="n">Protocol</span><span class="p">):</span>
</span><span id="IsDataclass-71"><a href="#IsDataclass-71"><span class="linenos">71</span></a>    <span class="c1"># Generic type for any dataclass instance</span>
</span><span id="IsDataclass-72"><a href="#IsDataclass-72"><span class="linenos">72</span></a>    <span class="c1"># https://stackoverflow.com/questions/54668000/type-hint-for-an-instance-of-a-non-specific-dataclass</span>
</span><span id="IsDataclass-73"><a href="#IsDataclass-73"><span class="linenos">73</span></a>    <span class="n">__dataclass_fields__</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span>
</span></pre></div>


            <div class="docstring"><p>Base class for protocol classes.</p>

<p>Protocol classes are defined as::</p>

<pre><code>class Proto(Protocol):
    def meth(self) -&gt; int:
        ...
</code></pre>

<p>Such classes are primarily used with static type checkers that recognize
structural subtyping (static duck-typing).</p>

<p>For example::</p>

<pre><code>class C:
    def meth(self) -&gt; int:
        return 0

def func(x: Proto) -&gt; int:
    return x.meth()

func(C())  # Passes static type check
</code></pre>

<p>See PEP 544 for details. Protocol classes decorated with
@typing.runtime_checkable act as simple-minded runtime protocols that check
only the presence of given attributes, ignoring their type signatures.
Protocol classes can be generic, they are defined as::</p>

<pre><code>class GenProto[T](Protocol):
    def meth(self) -&gt; T:
        ...
</code></pre>
</div>


                            <div id="IsDataclass.__init__" class="classattr">
                                        <input id="IsDataclass.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">IsDataclass</span><span class="signature pdoc-code condensed">(<span class="param"><span class="o">*</span><span class="n">args</span>, </span><span class="param"><span class="o">**</span><span class="n">kwargs</span></span>)</span>

                <div class="source-button-container">
            <label class="pdoc-button view-source-button" for="IsDataclass.__init__-view-source"><span>View Source</span></label>
            <div class="github-button-wrapper">
                <a class="pdoc-button github-link-button" href="https://github.com/mivanit/muutils/blob/0.6.20/misc/__init__.py#L1709-L1735" target="_blank">
                    <span>View on GitHub</span>
                </a>
            </div>
        </div>

    </div>
    <a class="headerlink" href="#IsDataclass.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="IsDataclass.__init__-1710"><a href="#IsDataclass.__init__-1710"><span class="linenos">1710</span></a><span class="k">def</span> <span class="nf">_no_init_or_replace_init</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
</span><span id="IsDataclass.__init__-1711"><a href="#IsDataclass.__init__-1711"><span class="linenos">1711</span></a>    <span class="bp">cls</span> <span class="o">=</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="IsDataclass.__init__-1712"><a href="#IsDataclass.__init__-1712"><span class="linenos">1712</span></a>
</span><span id="IsDataclass.__init__-1713"><a href="#IsDataclass.__init__-1713"><span class="linenos">1713</span></a>    <span class="k">if</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_is_protocol</span><span class="p">:</span>
</span><span id="IsDataclass.__init__-1714"><a href="#IsDataclass.__init__-1714"><span class="linenos">1714</span></a>        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;Protocols cannot be instantiated&#39;</span><span class="p">)</span>
</span><span id="IsDataclass.__init__-1715"><a href="#IsDataclass.__init__-1715"><span class="linenos">1715</span></a>
</span><span id="IsDataclass.__init__-1716"><a href="#IsDataclass.__init__-1716"><span class="linenos">1716</span></a>    <span class="c1"># Already using a custom `__init__`. No need to calculate correct</span>
</span><span id="IsDataclass.__init__-1717"><a href="#IsDataclass.__init__-1717"><span class="linenos">1717</span></a>    <span class="c1"># `__init__` to call. This can lead to RecursionError. See bpo-45121.</span>
</span><span id="IsDataclass.__init__-1718"><a href="#IsDataclass.__init__-1718"><span class="linenos">1718</span></a>    <span class="k">if</span> <span class="bp">cls</span><span class="o">.</span><span class="fm">__init__</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">_no_init_or_replace_init</span><span class="p">:</span>
</span><span id="IsDataclass.__init__-1719"><a href="#IsDataclass.__init__-1719"><span class="linenos">1719</span></a>        <span class="k">return</span>
</span><span id="IsDataclass.__init__-1720"><a href="#IsDataclass.__init__-1720"><span class="linenos">1720</span></a>
</span><span id="IsDataclass.__init__-1721"><a href="#IsDataclass.__init__-1721"><span class="linenos">1721</span></a>    <span class="c1"># Initially, `__init__` of a protocol subclass is set to `_no_init_or_replace_init`.</span>
</span><span id="IsDataclass.__init__-1722"><a href="#IsDataclass.__init__-1722"><span class="linenos">1722</span></a>    <span class="c1"># The first instantiation of the subclass will call `_no_init_or_replace_init` which</span>
</span><span id="IsDataclass.__init__-1723"><a href="#IsDataclass.__init__-1723"><span class="linenos">1723</span></a>    <span class="c1"># searches for a proper new `__init__` in the MRO. The new `__init__`</span>
</span><span id="IsDataclass.__init__-1724"><a href="#IsDataclass.__init__-1724"><span class="linenos">1724</span></a>    <span class="c1"># replaces the subclass&#39; old `__init__` (ie `_no_init_or_replace_init`). Subsequent</span>
</span><span id="IsDataclass.__init__-1725"><a href="#IsDataclass.__init__-1725"><span class="linenos">1725</span></a>    <span class="c1"># instantiation of the protocol subclass will thus use the new</span>
</span><span id="IsDataclass.__init__-1726"><a href="#IsDataclass.__init__-1726"><span class="linenos">1726</span></a>    <span class="c1"># `__init__` and no longer call `_no_init_or_replace_init`.</span>
</span><span id="IsDataclass.__init__-1727"><a href="#IsDataclass.__init__-1727"><span class="linenos">1727</span></a>    <span class="k">for</span> <span class="n">base</span> <span class="ow">in</span> <span class="bp">cls</span><span class="o">.</span><span class="vm">__mro__</span><span class="p">:</span>
</span><span id="IsDataclass.__init__-1728"><a href="#IsDataclass.__init__-1728"><span class="linenos">1728</span></a>        <span class="n">init</span> <span class="o">=</span> <span class="n">base</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;__init__&#39;</span><span class="p">,</span> <span class="n">_no_init_or_replace_init</span><span class="p">)</span>
</span><span id="IsDataclass.__init__-1729"><a href="#IsDataclass.__init__-1729"><span class="linenos">1729</span></a>        <span class="k">if</span> <span class="n">init</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">_no_init_or_replace_init</span><span class="p">:</span>
</span><span id="IsDataclass.__init__-1730"><a href="#IsDataclass.__init__-1730"><span class="linenos">1730</span></a>            <span class="bp">cls</span><span class="o">.</span><span class="fm">__init__</span> <span class="o">=</span> <span class="n">init</span>
</span><span id="IsDataclass.__init__-1731"><a href="#IsDataclass.__init__-1731"><span class="linenos">1731</span></a>            <span class="k">break</span>
</span><span id="IsDataclass.__init__-1732"><a href="#IsDataclass.__init__-1732"><span class="linenos">1732</span></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="IsDataclass.__init__-1733"><a href="#IsDataclass.__init__-1733"><span class="linenos">1733</span></a>        <span class="c1"># should not happen</span>
</span><span id="IsDataclass.__init__-1734"><a href="#IsDataclass.__init__-1734"><span class="linenos">1734</span></a>        <span class="bp">cls</span><span class="o">.</span><span class="fm">__init__</span> <span class="o">=</span> <span class="nb">object</span><span class="o">.</span><span class="fm">__init__</span>
</span><span id="IsDataclass.__init__-1735"><a href="#IsDataclass.__init__-1735"><span class="linenos">1735</span></a>
</span><span id="IsDataclass.__init__-1736"><a href="#IsDataclass.__init__-1736"><span class="linenos">1736</span></a>    <span class="bp">cls</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span></pre></div>


    

                            </div>
                </section>
                <section id="get_hashable_eq_attrs">
                            <input id="get_hashable_eq_attrs-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_hashable_eq_attrs</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">dc</span><span class="p">:</span> <span class="n"><a href="#IsDataclass">IsDataclass</a></span></span><span class="return-annotation">) -> <span class="nb">tuple</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]</span>:</span></span>

                <div class="source-button-container">
            <label class="pdoc-button view-source-button" for="get_hashable_eq_attrs-view-source"><span>View Source</span></label>
            <div class="github-button-wrapper">
                <a class="pdoc-button github-link-button" href="https://github.com/mivanit/muutils/blob/0.6.20/misc/__init__.py#L75-L83" target="_blank">
                    <span>View on GitHub</span>
                </a>
            </div>
        </div>

    </div>
    <a class="headerlink" href="#get_hashable_eq_attrs"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="get_hashable_eq_attrs-76"><a href="#get_hashable_eq_attrs-76"><span class="linenos">76</span></a><span class="k">def</span> <span class="nf">get_hashable_eq_attrs</span><span class="p">(</span><span class="n">dc</span><span class="p">:</span> <span class="n">IsDataclass</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="n">Any</span><span class="p">]:</span>
</span><span id="get_hashable_eq_attrs-77"><a href="#get_hashable_eq_attrs-77"><span class="linenos">77</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns a tuple of all fields used for equality comparison, including the type of the dataclass itself.</span>
</span><span id="get_hashable_eq_attrs-78"><a href="#get_hashable_eq_attrs-78"><span class="linenos">78</span></a><span class="sd">    The type is included to preserve the unequal equality behavior of instances of different dataclasses whose fields are identical.</span>
</span><span id="get_hashable_eq_attrs-79"><a href="#get_hashable_eq_attrs-79"><span class="linenos">79</span></a><span class="sd">    Essentially used to generate a hashable dataclass representation for equality comparison even if it&#39;s not frozen.</span>
</span><span id="get_hashable_eq_attrs-80"><a href="#get_hashable_eq_attrs-80"><span class="linenos">80</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="get_hashable_eq_attrs-81"><a href="#get_hashable_eq_attrs-81"><span class="linenos">81</span></a>    <span class="k">return</span> <span class="o">*</span><span class="p">(</span>
</span><span id="get_hashable_eq_attrs-82"><a href="#get_hashable_eq_attrs-82"><span class="linenos">82</span></a>        <span class="nb">getattr</span><span class="p">(</span><span class="n">dc</span><span class="p">,</span> <span class="n">fld</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
</span><span id="get_hashable_eq_attrs-83"><a href="#get_hashable_eq_attrs-83"><span class="linenos">83</span></a>        <span class="k">for</span> <span class="n">fld</span> <span class="ow">in</span> <span class="nb">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">compare</span><span class="p">,</span> <span class="n">dc</span><span class="o">.</span><span class="n">__dataclass_fields__</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>
</span><span id="get_hashable_eq_attrs-84"><a href="#get_hashable_eq_attrs-84"><span class="linenos">84</span></a>    <span class="p">),</span> <span class="nb">type</span><span class="p">(</span><span class="n">dc</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Returns a tuple of all fields used for equality comparison, including the type of the dataclass itself.
The type is included to preserve the unequal equality behavior of instances of different dataclasses whose fields are identical.
Essentially used to generate a hashable dataclass representation for equality comparison even if it's not frozen.</p>
</div>


                </section>
                <section id="dataclass_set_equals">
                            <input id="dataclass_set_equals-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">dataclass_set_equals</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">coll1</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="n"><a href="#IsDataclass">IsDataclass</a></span><span class="p">]</span>,</span><span class="param">	<span class="n">coll2</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="n"><a href="#IsDataclass">IsDataclass</a></span><span class="p">]</span></span><span class="return-annotation">) -> <span class="nb">bool</span>:</span></span>

                <div class="source-button-container">
            <label class="pdoc-button view-source-button" for="dataclass_set_equals-view-source"><span>View Source</span></label>
            <div class="github-button-wrapper">
                <a class="pdoc-button github-link-button" href="https://github.com/mivanit/muutils/blob/0.6.20/misc/__init__.py#L86-L97" target="_blank">
                    <span>View on GitHub</span>
                </a>
            </div>
        </div>

    </div>
    <a class="headerlink" href="#dataclass_set_equals"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="dataclass_set_equals-87"><a href="#dataclass_set_equals-87"><span class="linenos">87</span></a><span class="k">def</span> <span class="nf">dataclass_set_equals</span><span class="p">(</span>
</span><span id="dataclass_set_equals-88"><a href="#dataclass_set_equals-88"><span class="linenos">88</span></a>    <span class="n">coll1</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">IsDataclass</span><span class="p">],</span> <span class="n">coll2</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">IsDataclass</span><span class="p">]</span>
</span><span id="dataclass_set_equals-89"><a href="#dataclass_set_equals-89"><span class="linenos">89</span></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="dataclass_set_equals-90"><a href="#dataclass_set_equals-90"><span class="linenos">90</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Compares 2 collections of dataclass instances as if they were sets.</span>
</span><span id="dataclass_set_equals-91"><a href="#dataclass_set_equals-91"><span class="linenos">91</span></a><span class="sd">    Duplicates are ignored in the same manner as a set.</span>
</span><span id="dataclass_set_equals-92"><a href="#dataclass_set_equals-92"><span class="linenos">92</span></a><span class="sd">    Unfrozen dataclasses can&#39;t be placed in sets since they&#39;re not hashable.</span>
</span><span id="dataclass_set_equals-93"><a href="#dataclass_set_equals-93"><span class="linenos">93</span></a><span class="sd">    Collections of them may be compared using this function.</span>
</span><span id="dataclass_set_equals-94"><a href="#dataclass_set_equals-94"><span class="linenos">94</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="dataclass_set_equals-95"><a href="#dataclass_set_equals-95"><span class="linenos">95</span></a>
</span><span id="dataclass_set_equals-96"><a href="#dataclass_set_equals-96"><span class="linenos">96</span></a>    <span class="k">return</span> <span class="p">{</span><span class="n">get_hashable_eq_attrs</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">coll1</span><span class="p">}</span> <span class="o">==</span> <span class="p">{</span>
</span><span id="dataclass_set_equals-97"><a href="#dataclass_set_equals-97"><span class="linenos">97</span></a>        <span class="n">get_hashable_eq_attrs</span><span class="p">(</span><span class="n">y</span><span class="p">)</span> <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">coll2</span>
</span><span id="dataclass_set_equals-98"><a href="#dataclass_set_equals-98"><span class="linenos">98</span></a>    <span class="p">}</span>
</span></pre></div>


            <div class="docstring"><p>Compares 2 collections of dataclass instances as if they were sets.
Duplicates are ignored in the same manner as a set.
Unfrozen dataclasses can't be placed in sets since they're not hashable.
Collections of them may be compared using this function.</p>
</div>


                </section>
    </main>
<script>
    function escapeHTML(html) {
        return document.createElement('div').appendChild(document.createTextNode(html)).parentNode.innerHTML;
    }

    const originalContent = document.querySelector("main.pdoc");
    let currentContent = originalContent;

    function setContent(innerHTML) {
        let elem;
        if (innerHTML) {
            elem = document.createElement("main");
            elem.classList.add("pdoc");
            elem.innerHTML = innerHTML;
        } else {
            elem = originalContent;
        }
        if (currentContent !== elem) {
            currentContent.replaceWith(elem);
            currentContent = elem;
        }
    }

    function getSearchTerm() {
        return (new URL(window.location)).searchParams.get("search");
    }

    const searchBox = document.querySelector(".pdoc input[type=search]");
    searchBox.addEventListener("input", function () {
        let url = new URL(window.location);
        if (searchBox.value.trim()) {
            url.hash = "";
            url.searchParams.set("search", searchBox.value);
        } else {
            url.searchParams.delete("search");
        }
        history.replaceState("", "", url.toString());
        onInput();
    });
    window.addEventListener("popstate", onInput);


    let search, searchErr;

    async function initialize() {
        try {
            search = await new Promise((resolve, reject) => {
                const script = document.createElement("script");
                script.type = "text/javascript";
                script.async = true;
                script.onload = () => resolve(window.pdocSearch);
                script.onerror = (e) => reject(e);
                script.src = "../search.js";
                document.getElementsByTagName("head")[0].appendChild(script);
            });
        } catch (e) {
            console.error("Cannot fetch pdoc search index");
            searchErr = "Cannot fetch search index.";
        }
        onInput();

        document.querySelector("nav.pdoc").addEventListener("click", e => {
            if (e.target.hash) {
                searchBox.value = "";
                searchBox.dispatchEvent(new Event("input"));
            }
        });
    }

    function onInput() {
        setContent((() => {
            const term = getSearchTerm();
            if (!term) {
                return null
            }
            if (searchErr) {
                return `<h3>Error: ${searchErr}</h3>`
            }
            if (!search) {
                return "<h3>Searching...</h3>"
            }

            window.scrollTo({top: 0, left: 0, behavior: 'auto'});

            const results = search(term);

            let html;
            if (results.length === 0) {
                html = `No search results for '${escapeHTML(term)}'.`
            } else {
                html = `<h4>${results.length} search result${results.length > 1 ? "s" : ""} for '${escapeHTML(term)}'.</h4>`;
            }
            for (let result of results.slice(0, 10)) {
                let doc = result.doc;
                let url = `../${doc.modulename.replaceAll(".", "/")}.html`;
                if (doc.qualname) {
                    url += `#${doc.qualname}`;
                }

                let heading;
                switch (result.doc.kind) {
                    case "function":
                        if (doc.fullname.endsWith(".__init__")) {
                            heading = `<span class="name">${doc.fullname.replace(/\.__init__$/, "")}</span>${doc.signature}`;
                        } else {
                            heading = `<span class="def">${doc.funcdef}</span> <span class="name">${doc.fullname}</span>${doc.signature}`;
                        }
                        break;
                    case "class":
                        heading = `<span class="def">class</span> <span class="name">${doc.fullname}</span>`;
                        if (doc.bases)
                            heading += `<wbr>(<span class="base">${doc.bases}</span>)`;
                        heading += `:`;
                        break;
                    case "variable":
                        heading = `<span class="name">${doc.fullname}</span>`;
                        if (doc.annotation)
                            heading += `<span class="annotation">${doc.annotation}</span>`;
                        if (doc.default_value)
                            heading += `<span class="default_value"> = ${doc.default_value}</span>`;
                        break;
                    default:
                        heading = `<span class="name">${doc.fullname}</span>`;
                        break;
                }
                html += `
                        <section class="search-result">
                        <a href="${url}" class="attr ${doc.kind}">${heading}</a>
                        <div class="docstring">${doc.doc}</div>
                        </section>
                    `;

            }
            return html;
        })());
    }

    if (getSearchTerm()) {
        initialize();
        searchBox.value = getSearchTerm();
        onInput();
    } else {
        searchBox.addEventListener("focus", initialize, {once: true});
    }

    searchBox.addEventListener("keydown", e => {
        if (["ArrowDown", "ArrowUp", "Enter"].includes(e.key)) {
            let focused = currentContent.querySelector(".search-result.focused");
            if (!focused) {
                currentContent.querySelector(".search-result").classList.add("focused");
            } else if (
                e.key === "ArrowDown"
                && focused.nextElementSibling
                && focused.nextElementSibling.classList.contains("search-result")
            ) {
                focused.classList.remove("focused");
                focused.nextElementSibling.classList.add("focused");
                focused.nextElementSibling.scrollIntoView({
                    behavior: "smooth",
                    block: "nearest",
                    inline: "nearest"
                });
            } else if (
                e.key === "ArrowUp"
                && focused.previousElementSibling
                && focused.previousElementSibling.classList.contains("search-result")
            ) {
                focused.classList.remove("focused");
                focused.previousElementSibling.classList.add("focused");
                focused.previousElementSibling.scrollIntoView({
                    behavior: "smooth",
                    block: "nearest",
                    inline: "nearest"
                });
            } else if (
                e.key === "Enter"
            ) {
                focused.querySelector("a").click();
            }
        }
    });
</script></body>
</html>