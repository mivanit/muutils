<blockquote>
<p>docs for <a
href="https://github.com/mivanit/muutils"><code>muutils</code></a>
v0.8.6</p>
</blockquote>
<h2 id="contents">Contents</h2>
<p><a href="https://pypi.org/project/muutils/"><img
src="https://img.shields.io/pypi/v/muutils" alt="PyPI" /></a> <img
src="https://img.shields.io/pypi/dm/muutils" alt="PyPI - Downloads" />
<a href="https://miv.name/muutils"><img
src="https://img.shields.io/badge/docs-latest-blue"
alt="docs" /></a></p>
<p><a
href="https://github.com/mivanit/muutils/actions/workflows/checks.yml"><img
src="https://github.com/mivanit/muutils/actions/workflows/checks.yml/badge.svg"
alt="Checks" /></a> <a
href="https://github.com/mivanit/muutils/actions/workflows/make-docs.yml"><img
src="https://github.com/mivanit/muutils/actions/workflows/make-docs.yml/badge.svg"
alt="Checks" /></a> <a href="docs/coverage/html/"><img
src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI5OSIgaGVpZ2h0PSIyMCI+CiAgICA8bGluZWFyR3JhZGllbnQgaWQ9ImIiIHgyPSIwIiB5Mj0iMTAwJSI+CiAgICAgICAgPHN0b3Agb2Zmc2V0PSIwIiBzdG9wLWNvbG9yPSIjYmJiIiBzdG9wLW9wYWNpdHk9Ii4xIi8+CiAgICAgICAgPHN0b3Agb2Zmc2V0PSIxIiBzdG9wLW9wYWNpdHk9Ii4xIi8+CiAgICA8L2xpbmVhckdyYWRpZW50PgogICAgPG1hc2sgaWQ9ImEiPgogICAgICAgIDxyZWN0IHdpZHRoPSI5OSIgaGVpZ2h0PSIyMCIgcng9IjMiIGZpbGw9IiNmZmYiLz4KICAgIDwvbWFzaz4KICAgIDxnIG1hc2s9InVybCgjYSkiPgogICAgICAgIDxwYXRoIGZpbGw9IiM1NTUiIGQ9Ik0wIDBoNjN2MjBIMHoiLz4KICAgICAgICA8cGF0aCBmaWxsPSIjYTRhNjFkIiBkPSJNNjMgMGgzNnYyMEg2M3oiLz4KICAgICAgICA8cGF0aCBmaWxsPSJ1cmwoI2IpIiBkPSJNMCAwaDk5djIwSDB6Ii8+CiAgICA8L2c+CiAgICA8ZyBmaWxsPSIjZmZmIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmb250LWZhbWlseT0iRGVqYVZ1IFNhbnMsVmVyZGFuYSxHZW5ldmEsc2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMSI+CiAgICAgICAgPHRleHQgeD0iMzEuNSIgeT0iMTUiIGZpbGw9IiMwMTAxMDEiIGZpbGwtb3BhY2l0eT0iLjMiPmNvdmVyYWdlPC90ZXh0PgogICAgICAgIDx0ZXh0IHg9IjMxLjUiIHk9IjE0Ij5jb3ZlcmFnZTwvdGV4dD4KICAgICAgICA8dGV4dCB4PSI4MCIgeT0iMTUiIGZpbGw9IiMwMTAxMDEiIGZpbGwtb3BhY2l0eT0iLjMiPjg1JTwvdGV4dD4KICAgICAgICA8dGV4dCB4PSI4MCIgeT0iMTQiPjg1JTwvdGV4dD4KICAgIDwvZz4KPC9zdmc+Cg=="
alt="Coverage" /></a></p>
<p><img
src="https://img.shields.io/github/commit-activity/t/mivanit/muutils"
alt="GitHub commits" /> <img
src="https://img.shields.io/github/commit-activity/m/mivanit/muutils"
alt="GitHub commit activity" /> <img
src="https://img.shields.io/github/issues-pr-closed/mivanit/muutils"
alt="GitHub closed pull requests" /> <img
src="https://img.shields.io/github/languages/code-size/mivanit/muutils"
alt="code size, bytes" />
<!-- ![Lines of code](https://img.shields.io/tokei/lines/github.com/mivanit/muutils) --></p>
<p><code>muutils</code>, stylized as “<span
class="math inline"><em>μ</em></span>utils” or “μutils”, is a collection
of miscellaneous python utilities, meant to be small and with no
dependencies outside of standard python.</p>
<h1 id="installation">installation</h1>
<p>PyPi: <a href="https://pypi.org/project/muutils/">muutils</a></p>
<pre><code>pip install muutils</code></pre>
<p>Note that for using <code>mlutils</code>, <code>tensor_utils</code>,
<code>nbutils.configure_notebook</code>, or the array serialization
features of <code>json_serialize</code>, you will need to install with
optional <code>array</code> dependencies:</p>
<pre><code>pip install muutils[array]</code></pre>
<h1 id="documentation">documentation</h1>
<p><a href="https://miv.name/muutils"><strong>hosted html
docs:</strong></a> https://miv.name/muutils</p>
<ul>
<li><a href="https://miv.name/muutils/combined/muutils.html">single-page
html docs</a> <a
href="https://github.com/mivanit/muutils/tree/main/docs/combined/muutils.html">(absolute
source link)</a></li>
<li><a href="https://miv.name/muutils/combined/muutils.md">single-page
markdown docs</a> <a
href="https://github.com/mivanit/muutils/tree/main/docs/combined/muutils.md">(absolute
source link)</a></li>
<li>Test coverage: <a
href="https://miv.name/muutils/coverage/html/"><img
src="https://miv.name/muutils/coverage/coverage.svg"
alt="Test Coverage" /></a> <a
href="https://miv.name/muutils/coverage/html/">webpage</a> <a
href="https://github.com/mivanit/muutils/tree/main/docs/coverage/html/">(absolute
source link)</a> <a
href="https://github.com/mivanit/muutils/tree/main/docs/coverage/coverage.txt">(plain
text)</a></li>
</ul>
<h1 id="modules">modules</h1>
<h2 id="statcounter"><a
href="https://github.com/mivanit/muutils/tree/main/muutils/statcounter.py"><code>statcounter</code></a></h2>
<p>an extension of <code>collections.Counter</code> that provides
“smart” computation of stats (mean, variance, median, other percentiles)
from the counter object without using
<code>Counter.elements()</code></p>
<h2 id="dictmagic"><a
href="https://github.com/mivanit/muutils/tree/main/muutils/dictmagic.py"><code>dictmagic</code></a></h2>
<p>has utilities for working with dictionaries, like:</p>
<ul>
<li>converting dotlist-dictionaries to nested dictionaries and back:
<code>python       &gt;&gt;&gt; dotlist_to_nested_dict({'a.b.c': 1, 'a.b.d': 2, 'a.e': 3})       {'a': {'b': {'c': 1, 'd': 2}, 'e': 3}}       &gt;&gt;&gt; nested_dict_to_dotlist({'a': {'b': {'c': 1, 'd': 2}, 'e': 3}})       {'a.b.c': 1, 'a.b.d': 2, 'a.e': 3}</code></li>
<li><code>DefaulterDict</code> which works like a
<code>defaultdict</code> but can generate the default value based on the
key</li>
<li><code>condense_tensor_dict</code> takes a dict of dotlist-tensors
and gives a more human-readable summary:
<code>python       &gt;&gt;&gt; model = MyGPT()       &gt;&gt;&gt; print(condense_tensor_dict(model.named_parameters(), 'yaml'))</code>
<code>yaml       embed:           W_E: (50257, 768)       pos_embed:           W_pos: (1024, 768)       blocks:         '[0-11]':           attn:             '[W_Q, W_K, W_V]': (12, 768, 64)           W_O: (12, 64, 768)             '[b_Q, b_K, b_V]': (12, 64)           b_O: (768,)       &lt;...&gt;</code></li>
</ul>
<h2 id="kappa"><a
href="https://github.com/mivanit/muutils/tree/main/muutils/kappa.py"><code>kappa</code></a></h2>
<p>Anonymous gettitem, so you can do things like</p>
<div class="sourceCode" id="cb3"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> k <span class="op">=</span> Kappa(<span class="kw">lambda</span> x: x<span class="op">**</span><span class="dv">2</span>)</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> k[<span class="dv">2</span>]</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="dv">4</span></span></code></pre></div>
<h2 id="sysinfo"><a
href="https://github.com/mivanit/muutils/tree/main/muutils/sysinfo.py"><code>sysinfo</code></a></h2>
<p>utility for getting a bunch of system information. useful for
logging.</p>
<h2 id="misc"><code>misc</code>:</h2>
<p>contains a few utilities: - <code>stable_hash()</code> uses
<code>hashlib.sha256</code> to compute a hash of an object that is
stable across runs of python - <code>list_join</code> and
<code>list_split</code> which behave like <code>str.join</code> and
<code>str.split</code> but for lists - <code>sanitize_fname</code> and
<code>dict_to_filename</code> for simplifying the creation of unique
filename - <code>shorten_numerical_to_str()</code> and
<code>str_to_numeric</code> turns numbers like <code>123456789</code>
into <code>"123M"</code> and back - <code>freeze</code>, which prevents
an object from being modified. Also see <a
href="https://github.com/diegojromerolopez/gelidum/">gelidum</a></p>
<h2 id="nbutils"><a
href="https://github.com/mivanit/muutils/tree/main/muutils/nbutils"><code>nbutils</code></a></h2>
<p>contains utilities for working with jupyter notebooks, such as:</p>
<ul>
<li>quickly converting notebooks to python scripts (and running those
scripts) for testing in CI</li>
<li>configuring notebooks, to make it easier to switch between figure
output formats, locations, and more</li>
<li>shorthand for displaying mermaid diagrams and TeX</li>
</ul>
<h2 id="json_serialize"><a
href="https://github.com/mivanit/muutils/tree/main/muutils/json_serialize.py"><code>json_serialize</code></a></h2>
<p>a tool for serializing and loading arbitrary python objects into
json. plays nicely with <a
href="https://github.com/mivanit/ZANJ/"><code>ZANJ</code></a></p>
<h2 id="tensor_utils">[<code>tensor_utils</code>]</h2>
<p>contains minor utilities for working with pytorch tensors and numpy
arrays, mostly for making type conversions easier</p>
<h2 id="group_equiv"><a
href="https://github.com/mivanit/muutils/tree/main/muutils/group_equiv.py"><code>group_equiv</code></a></h2>
<p>groups elements from a sequence according to a given equivalence
relation, without assuming that the equivalence relation obeys the
transitive property</p>
<h2 id="jsonlines"><a
href="https://github.com/mivanit/muutils/tree/main/muutils/jsonlines.py"><code>jsonlines</code></a></h2>
<p>an extremely simple utility for reading/writing <code>jsonl</code>
files</p>
<h2 id="zanj"><a
href="https://github.com/mivanit/ZANJ/"><code>ZANJ</code></a></h2>
<p>is a human-readable and simple format for ML models, datasets, and
arbitrary objects. It’s build around having a zip file with
<code>json</code> and <code>npy</code> files, and has been spun off into
its <a href="https://github.com/mivanit/ZANJ/">own project</a>.</p>
<p>There are a couple work-in-progress utilities in <a
href="https://github.com/mivanit/muutils/tree/main/muutils/_wip/"><code>_wip</code></a>
that aren’t ready for anything, but nothing in this repo is suitable for
production. Use at your own risk!</p>
<h2 id="submodules">Submodules</h2>
<ul>
<li><a href="#json_serialize"><code>json_serialize</code></a></li>
<li><a href="#logger"><code>logger</code></a></li>
<li><a href="#misc"><code>misc</code></a></li>
<li><a href="#nbutils"><code>nbutils</code></a></li>
<li><a href="#console_unicode"><code>console_unicode</code></a></li>
<li><a href="#dbg"><code>dbg</code></a></li>
<li><a href="#dictmagic"><code>dictmagic</code></a></li>
<li><a href="#errormode"><code>errormode</code></a></li>
<li><a href="#group_equiv"><code>group_equiv</code></a></li>
<li><a href="#interval"><code>interval</code></a></li>
<li><a href="#jsonlines"><code>jsonlines</code></a></li>
<li><a href="#kappa"><code>kappa</code></a></li>
<li><a href="#mlutils"><code>mlutils</code></a></li>
<li><a href="#parallel"><code>parallel</code></a></li>
<li><a href="#spinner"><code>spinner</code></a></li>
<li><a href="#statcounter"><code>statcounter</code></a></li>
<li><a href="#sysinfo"><code>sysinfo</code></a></li>
<li><a href="#tensor_info"><code>tensor_info</code></a></li>
<li><a href="#tensor_utils"><code>tensor_utils</code></a></li>
<li><a href="#timeit_fancy"><code>timeit_fancy</code></a></li>
<li><a href="#validate_type"><code>validate_type</code></a></li>
</ul>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/__init__.py">View
Source on GitHub</a></p>
<h1 id="muutils"><code>muutils</code></h1>
<p><a href="https://pypi.org/project/muutils/"><img
src="https://img.shields.io/pypi/v/muutils" alt="PyPI" /></a> <img
src="https://img.shields.io/pypi/dm/muutils" alt="PyPI - Downloads" />
<a href="https://miv.name/muutils"><img
src="https://img.shields.io/badge/docs-latest-blue"
alt="docs" /></a></p>
<p><a
href="https://github.com/mivanit/muutils/actions/workflows/checks.yml"><img
src="https://github.com/mivanit/muutils/actions/workflows/checks.yml/badge.svg"
alt="Checks" /></a> <a
href="https://github.com/mivanit/muutils/actions/workflows/make-docs.yml"><img
src="https://github.com/mivanit/muutils/actions/workflows/make-docs.yml/badge.svg"
alt="Checks" /></a> <a href="docs/coverage/html/"><img
src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI5OSIgaGVpZ2h0PSIyMCI+CiAgICA8bGluZWFyR3JhZGllbnQgaWQ9ImIiIHgyPSIwIiB5Mj0iMTAwJSI+CiAgICAgICAgPHN0b3Agb2Zmc2V0PSIwIiBzdG9wLWNvbG9yPSIjYmJiIiBzdG9wLW9wYWNpdHk9Ii4xIi8+CiAgICAgICAgPHN0b3Agb2Zmc2V0PSIxIiBzdG9wLW9wYWNpdHk9Ii4xIi8+CiAgICA8L2xpbmVhckdyYWRpZW50PgogICAgPG1hc2sgaWQ9ImEiPgogICAgICAgIDxyZWN0IHdpZHRoPSI5OSIgaGVpZ2h0PSIyMCIgcng9IjMiIGZpbGw9IiNmZmYiLz4KICAgIDwvbWFzaz4KICAgIDxnIG1hc2s9InVybCgjYSkiPgogICAgICAgIDxwYXRoIGZpbGw9IiM1NTUiIGQ9Ik0wIDBoNjN2MjBIMHoiLz4KICAgICAgICA8cGF0aCBmaWxsPSIjYTRhNjFkIiBkPSJNNjMgMGgzNnYyMEg2M3oiLz4KICAgICAgICA8cGF0aCBmaWxsPSJ1cmwoI2IpIiBkPSJNMCAwaDk5djIwSDB6Ii8+CiAgICA8L2c+CiAgICA8ZyBmaWxsPSIjZmZmIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmb250LWZhbWlseT0iRGVqYVZ1IFNhbnMsVmVyZGFuYSxHZW5ldmEsc2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMSI+CiAgICAgICAgPHRleHQgeD0iMzEuNSIgeT0iMTUiIGZpbGw9IiMwMTAxMDEiIGZpbGwtb3BhY2l0eT0iLjMiPmNvdmVyYWdlPC90ZXh0PgogICAgICAgIDx0ZXh0IHg9IjMxLjUiIHk9IjE0Ij5jb3ZlcmFnZTwvdGV4dD4KICAgICAgICA8dGV4dCB4PSI4MCIgeT0iMTUiIGZpbGw9IiMwMTAxMDEiIGZpbGwtb3BhY2l0eT0iLjMiPjg1JTwvdGV4dD4KICAgICAgICA8dGV4dCB4PSI4MCIgeT0iMTQiPjg1JTwvdGV4dD4KICAgIDwvZz4KPC9zdmc+Cg=="
alt="Coverage" /></a></p>
<p><img
src="https://img.shields.io/github/commit-activity/t/mivanit/muutils"
alt="GitHub commits" /> <img
src="https://img.shields.io/github/commit-activity/m/mivanit/muutils"
alt="GitHub commit activity" /> <img
src="https://img.shields.io/github/issues-pr-closed/mivanit/muutils"
alt="GitHub closed pull requests" /> <img
src="https://img.shields.io/github/languages/code-size/mivanit/muutils"
alt="code size, bytes" />
<!-- ![Lines of code](https://img.shields.io/tokei/lines/github.com/mivanit/muutils) --></p>
<p><code>muutils</code>, stylized as “<span
class="math inline"><em>μ</em></span>utils” or “μutils”, is a collection
of miscellaneous python utilities, meant to be small and with no
dependencies outside of standard python.</p>
<h3 id="installation-1">installation</h3>
<p>PyPi: <a href="https://pypi.org/project/muutils/">muutils</a></p>
<pre><code>pip install muutils</code></pre>
<p>Note that for using <code>mlutils</code>, <code>tensor_utils</code>,
<code>nbutils.configure_notebook</code>, or the array serialization
features of <code>json_serialize</code>, you will need to install with
optional <code>array</code> dependencies:</p>
<pre><code>pip install muutils[array]</code></pre>
<h3 id="documentation-1">documentation</h3>
<p><a href="https://miv.name/muutils"><strong>hosted html
docs:</strong></a> https://miv.name/muutils</p>
<ul>
<li><a href="https://miv.name/muutils/combined/muutils.html">single-page
html docs</a> <a
href="https://github.com/mivanit/muutils/tree/main/docs/combined/muutils.html">(absolute
source link)</a></li>
<li><a href="https://miv.name/muutils/combined/muutils.md">single-page
markdown docs</a> <a
href="https://github.com/mivanit/muutils/tree/main/docs/combined/muutils.md">(absolute
source link)</a></li>
<li>Test coverage: <a
href="https://miv.name/muutils/coverage/html/"><img
src="https://miv.name/muutils/coverage/coverage.svg"
alt="Test Coverage" /></a> <a
href="https://miv.name/muutils/coverage/html/">webpage</a> <a
href="https://github.com/mivanit/muutils/tree/main/docs/coverage/html/">(absolute
source link)</a> <a
href="https://github.com/mivanit/muutils/tree/main/docs/coverage/coverage.txt">(plain
text)</a></li>
</ul>
<h3 id="modules-1">modules</h3>
<h4 id="statcounter-1"><a
href="https://github.com/mivanit/muutils/tree/main/muutils/statcounter.py"><code>statcounter</code></a></h4>
<p>an extension of <code>collections.Counter</code> that provides
“smart” computation of stats (mean, variance, median, other percentiles)
from the counter object without using
<code>Counter.elements()</code></p>
<h4 id="dictmagic-1"><a
href="https://github.com/mivanit/muutils/tree/main/muutils/dictmagic.py"><code>dictmagic</code></a></h4>
<p>has utilities for working with dictionaries, like:</p>
<ul>
<li>converting dotlist-dictionaries to nested dictionaries and back:
<code>python       &gt;&gt;&gt; dotlist_to_nested_dict({'a.b.c': 1, 'a.b.d': 2, 'a.e': 3})       {'a': {'b': {'c': 1, 'd': 2}, 'e': 3}}       &gt;&gt;&gt; nested_dict_to_dotlist({'a': {'b': {'c': 1, 'd': 2}, 'e': 3}})       {'a.b.c': 1, 'a.b.d': 2, 'a.e': 3}</code></li>
<li><code>DefaulterDict</code> which works like a
<code>defaultdict</code> but can generate the default value based on the
key</li>
<li><code>condense_tensor_dict</code> takes a dict of dotlist-tensors
and gives a more human-readable summary:
<code>python       &gt;&gt;&gt; model = MyGPT()       &gt;&gt;&gt; print(condense_tensor_dict(model.named_parameters(), 'yaml'))</code>
<code>yaml       embed:           W_E: (50257, 768)       pos_embed:           W_pos: (1024, 768)       blocks:         '[0-11]':           attn:             '[W_Q, W_K, W_V]': (12, 768, 64)           W_O: (12, 64, 768)             '[b_Q, b_K, b_V]': (12, 64)           b_O: (768,)       &lt;...&gt;</code></li>
</ul>
<h4 id="kappa-1"><a
href="https://github.com/mivanit/muutils/tree/main/muutils/kappa.py"><code>kappa</code></a></h4>
<p>Anonymous gettitem, so you can do things like</p>
<div class="sourceCode" id="cb6"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> k <span class="op">=</span> Kappa(<span class="kw">lambda</span> x: x<span class="op">**</span><span class="dv">2</span>)</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> k[<span class="dv">2</span>]</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="dv">4</span></span></code></pre></div>
<h4 id="sysinfo-1"><a
href="https://github.com/mivanit/muutils/tree/main/muutils/sysinfo.py"><code>sysinfo</code></a></h4>
<p>utility for getting a bunch of system information. useful for
logging.</p>
<h4 id="misc-1"><code>misc</code>:</h4>
<p>contains a few utilities: - <code>stable_hash()</code> uses
<code>hashlib.sha256</code> to compute a hash of an object that is
stable across runs of python - <code>list_join</code> and
<code>list_split</code> which behave like <code>str.join</code> and
<code>str.split</code> but for lists - <code>sanitize_fname</code> and
<code>dict_to_filename</code> for simplifying the creation of unique
filename - <code>shorten_numerical_to_str()</code> and
<code>str_to_numeric</code> turns numbers like <code>123456789</code>
into <code>"123M"</code> and back - <code>freeze</code>, which prevents
an object from being modified. Also see <a
href="https://github.com/diegojromerolopez/gelidum/">gelidum</a></p>
<h4 id="nbutils-1"><a
href="https://github.com/mivanit/muutils/tree/main/muutils/nbutils"><code>nbutils</code></a></h4>
<p>contains utilities for working with jupyter notebooks, such as:</p>
<ul>
<li>quickly converting notebooks to python scripts (and running those
scripts) for testing in CI</li>
<li>configuring notebooks, to make it easier to switch between figure
output formats, locations, and more</li>
<li>shorthand for displaying mermaid diagrams and TeX</li>
</ul>
<h4 id="json_serialize-1"><a
href="https://github.com/mivanit/muutils/tree/main/muutils/json_serialize.py"><code>json_serialize</code></a></h4>
<p>a tool for serializing and loading arbitrary python objects into
json. plays nicely with <a
href="https://github.com/mivanit/ZANJ/"><code>ZANJ</code></a></p>
<h4 id="tensor_utils-1">[<code>tensor_utils</code>]</h4>
<p>contains minor utilities for working with pytorch tensors and numpy
arrays, mostly for making type conversions easier</p>
<h4 id="group_equiv-1"><a
href="https://github.com/mivanit/muutils/tree/main/muutils/group_equiv.py"><code>group_equiv</code></a></h4>
<p>groups elements from a sequence according to a given equivalence
relation, without assuming that the equivalence relation obeys the
transitive property</p>
<h4 id="jsonlines-1"><a
href="https://github.com/mivanit/muutils/tree/main/muutils/jsonlines.py"><code>jsonlines</code></a></h4>
<p>an extremely simple utility for reading/writing <code>jsonl</code>
files</p>
<h4 id="zanj-1"><a
href="https://github.com/mivanit/ZANJ/"><code>ZANJ</code></a></h4>
<p>is a human-readable and simple format for ML models, datasets, and
arbitrary objects. It’s build around having a zip file with
<code>json</code> and <code>npy</code> files, and has been spun off into
its <a href="https://github.com/mivanit/ZANJ/">own project</a>.</p>
<p>There are a couple work-in-progress utilities in <a
href="https://github.com/mivanit/muutils/tree/main/muutils/_wip/"><code>_wip</code></a>
that aren’t ready for anything, but nothing in this repo is suitable for
production. Use at your own risk!</p>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/__init__.py#L0-L30">View
Source on GitHub</a></p>
<blockquote>
<p>docs for <a
href="https://github.com/mivanit/muutils"><code>muutils</code></a>
v0.8.6</p>
</blockquote>
<h2 id="api-documentation">API Documentation</h2>
<ul>
<li><a
href="#get_console_safe_str"><code>get_console_safe_str</code></a></li>
</ul>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/console_unicode.py">View
Source on GitHub</a></p>
<h1
id="muutils.console_unicode"><code>muutils.console_unicode</code></h1>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/console_unicode.py#L0-L33">View
Source on GitHub</a></p>
<h3 id="get_console_safe_str"><code>def get_console_safe_str</code></h3>
<div class="sourceCode" id="cb7"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>(default: <span class="bu">str</span>, fallback: <span class="bu">str</span>) <span class="op">-&gt;</span> <span class="bu">str</span></span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/console_unicode.py#L4-L34">View
Source on GitHub</a></p>
<p>Determine a console-safe string based on the preferred encoding.</p>
<p>This function attempts to encode a given <code>default</code> string
using the system’s preferred encoding. If encoding is successful, it
returns the <code>default</code> string; otherwise, it returns a
<code>fallback</code> string.</p>
<h3 id="parameters">Parameters:</h3>
<ul>
<li><code>default : str</code> The primary string intended for use, to
be tested against the system’s preferred encoding.</li>
<li><code>fallback : str</code> The alternative string to be used if
<code>default</code> cannot be encoded in the system’s preferred
encoding.</li>
</ul>
<h3 id="returns">Returns:</h3>
<ul>
<li><code>str</code> Either <code>default</code> or
<code>fallback</code> based on whether <code>default</code> can be
encoded safely.</li>
</ul>
<h3 id="usage">Usage:</h3>
<div class="sourceCode" id="cb8"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> get_console_safe_str(<span class="st">&quot;café&quot;</span>, <span class="st">&quot;cafe&quot;</span>)</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="co">&quot;café&quot;</span>  <span class="co"># This result may vary based on the system&#39;s preferred encoding.</span></span></code></pre></div>
<blockquote>
<p>docs for <a
href="https://github.com/mivanit/muutils"><code>muutils</code></a>
v0.8.6</p>
</blockquote>
<h2 id="contents-1">Contents</h2>
<p>this code is based on an implementation of the Rust builtin
<code>dbg!</code> for Python, originally from
https://github.com/tylerwince/pydbg/blob/master/pydbg.py although it has
been significantly modified</p>
<p>licensed under MIT:</p>
<p>Copyright (c) 2019 Tyler Wince</p>
<p>Permission is hereby granted, free of charge, to any person obtaining
a copy of this software and associated documentation files (the
“Software”), to deal in the Software without restriction, including
without limitation the rights to use, copy, modify, merge, publish,
distribute, sublicense, and/or sell copies of the Software, and to
permit persons to whom the Software is furnished to do so, subject to
the following conditions:</p>
<p>The above copyright notice and this permission notice shall be
included in all copies or substantial portions of the Software.</p>
<p>THE SOFTWARE IS PROVIDED “AS IS”, WITHOUT WARRANTY OF ANY KIND,
EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.
IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY
CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,
TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE
SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</p>
<h2 id="api-documentation-1">API Documentation</h2>
<ul>
<li><a href="#PATH_MODE"><code>PATH_MODE</code></a></li>
<li><a
href="#DEFAULT_VAL_JOINER"><code>DEFAULT_VAL_JOINER</code></a></li>
<li><a href="#dbg"><code>dbg</code></a></li>
<li><a
href="#DBG_TENSOR_ARRAY_SUMMARY_DEFAULTS"><code>DBG_TENSOR_ARRAY_SUMMARY_DEFAULTS</code></a></li>
<li><a
href="#DBG_TENSOR_VAL_JOINER"><code>DBG_TENSOR_VAL_JOINER</code></a></li>
<li><a href="#tensor_info"><code>tensor_info</code></a></li>
<li><a href="#dbg_tensor"><code>dbg_tensor</code></a></li>
</ul>
<p><a href="https://github.com/mivanit/muutils/blob/0.8.6/dbg.py">View
Source on GitHub</a></p>
<h1 id="muutils.dbg"><code>muutils.dbg</code></h1>
<p>this code is based on an implementation of the Rust builtin
<code>dbg!</code> for Python, originally from
https://github.com/tylerwince/pydbg/blob/master/pydbg.py although it has
been significantly modified</p>
<p>licensed under MIT:</p>
<p>Copyright (c) 2019 Tyler Wince</p>
<p>Permission is hereby granted, free of charge, to any person obtaining
a copy of this software and associated documentation files (the
“Software”), to deal in the Software without restriction, including
without limitation the rights to use, copy, modify, merge, publish,
distribute, sublicense, and/or sell copies of the Software, and to
permit persons to whom the Software is furnished to do so, subject to
the following conditions:</p>
<p>The above copyright notice and this permission notice shall be
included in all copies or substantial portions of the Software.</p>
<p>THE SOFTWARE IS PROVIDED “AS IS”, WITHOUT WARRANTY OF ANY KIND,
EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.
IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY
CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,
TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE
SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</p>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/dbg.py#L0-L193">View
Source on GitHub</a></p>
<ul>
<li><p><code>PATH_MODE: Literal['relative', 'absolute'] = 'relative'</code></p></li>
<li><p><code>DEFAULT_VAL_JOINER: str = ' = '</code></p></li>
</ul>
<h3 id="dbg"><code>def dbg</code></h3>
<div class="sourceCode" id="cb9"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>    exp: Union[<span class="op">~</span>_ExpType, muutils.dbg._NoExpPassedSentinel] <span class="op">=</span> <span class="op">&lt;</span>muutils.dbg._NoExpPassedSentinel <span class="bu">object</span><span class="op">&gt;</span>,</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>    formatter: Optional[Callable[[Any], <span class="bu">str</span>]] <span class="op">=</span> <span class="va">None</span>,</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>    val_joiner: <span class="bu">str</span> <span class="op">=</span> <span class="st">&#39; = &#39;</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>) <span class="op">-&gt;</span> Union[<span class="op">~</span>_ExpType, muutils.dbg._NoExpPassedSentinel]</span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/dbg.py#L95-L160">View
Source on GitHub</a></p>
<p>Call dbg with any variable or expression.</p>
<p>Calling dbg will print to stderr the current filename and lineno, as
well as the passed expression and what the expression evaluates to:</p>
<pre><code>    from &lt;a href=&quot;&quot;&gt;muutils.dbg&lt;/a&gt; import dbg

    a = 2
    b = 5

    dbg(a+b)

    def square(x: int) -&gt; int:
            return x * x

    dbg(square(a))</code></pre>
<ul>
<li><p><code>DBG_TENSOR_ARRAY_SUMMARY_DEFAULTS: Dict[str, Union[str, int, bool]] = {'fmt': 'unicode', 'precision': 2, 'stats': True, 'shape': True, 'dtype': True, 'device': True, 'requires_grad': True, 'sparkline': True, 'sparkline_bins': 7, 'sparkline_logy': False, 'colored': True, 'eq_char': '='}</code></p></li>
<li><p><code>DBG_TENSOR_VAL_JOINER: str = ': '</code></p></li>
</ul>
<h3 id="tensor_info"><code>def tensor_info</code></h3>
<div class="sourceCode" id="cb11"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>(tensor: Any) <span class="op">-&gt;</span> <span class="bu">str</span></span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/dbg.py#L186-L189">View
Source on GitHub</a></p>
<ul>
<li><code>dbg_tensor = functools.partial(&lt;function dbg&gt;, formatter=&lt;function tensor_info&gt;, val_joiner=': ')</code></li>
</ul>
<blockquote>
<p>docs for <a
href="https://github.com/mivanit/muutils"><code>muutils</code></a>
v0.8.6</p>
</blockquote>
<h2 id="contents-2">Contents</h2>
<p>making working with dictionaries easier</p>
<ul>
<li><code>DefaulterDict</code>: like a defaultdict, but default_factory
is passed the key as an argument</li>
<li>various methods for working wit dotlist-nested dicts, converting to
and from them</li>
<li><code>condense_nested_dicts</code>: condense a nested dict, by
condensing numeric or matching keys with matching values to ranges</li>
<li><code>condense_tensor_dict</code>: convert a dictionary of tensors
to a dictionary of shapes</li>
<li><code>kwargs_to_nested_dict</code>: given kwargs from fire, convert
them to a nested dict</li>
</ul>
<h2 id="api-documentation-2">API Documentation</h2>
<ul>
<li><a href="#DefaulterDict"><code>DefaulterDict</code></a></li>
<li><a
href="#defaultdict_to_dict_recursive"><code>defaultdict_to_dict_recursive</code></a></li>
<li><a
href="#dotlist_to_nested_dict"><code>dotlist_to_nested_dict</code></a></li>
<li><a
href="#nested_dict_to_dotlist"><code>nested_dict_to_dotlist</code></a></li>
<li><a
href="#update_with_nested_dict"><code>update_with_nested_dict</code></a></li>
<li><a
href="#kwargs_to_nested_dict"><code>kwargs_to_nested_dict</code></a></li>
<li><a
href="#is_numeric_consecutive"><code>is_numeric_consecutive</code></a></li>
<li><a
href="#condense_nested_dicts_numeric_keys"><code>condense_nested_dicts_numeric_keys</code></a></li>
<li><a
href="#condense_nested_dicts_matching_values"><code>condense_nested_dicts_matching_values</code></a></li>
<li><a
href="#condense_nested_dicts"><code>condense_nested_dicts</code></a></li>
<li><a
href="#tuple_dims_replace"><code>tuple_dims_replace</code></a></li>
<li><a href="#TensorDict"><code>TensorDict</code></a></li>
<li><a href="#TensorIterable"><code>TensorIterable</code></a></li>
<li><a href="#TensorDictFormats"><code>TensorDictFormats</code></a></li>
<li><a
href="#condense_tensor_dict"><code>condense_tensor_dict</code></a></li>
</ul>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/dictmagic.py">View
Source on GitHub</a></p>
<h1 id="muutils.dictmagic"><code>muutils.dictmagic</code></h1>
<p>making working with dictionaries easier</p>
<ul>
<li><code>DefaulterDict</code>: like a defaultdict, but default_factory
is passed the key as an argument</li>
<li>various methods for working wit dotlist-nested dicts, converting to
and from them</li>
<li><code>condense_nested_dicts</code>: condense a nested dict, by
condensing numeric or matching keys with matching values to ranges</li>
<li><code>condense_tensor_dict</code>: convert a dictionary of tensors
to a dictionary of shapes</li>
<li><code>kwargs_to_nested_dict</code>: given kwargs from fire, convert
them to a nested dict</li>
</ul>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/dictmagic.py#L0-L521">View
Source on GitHub</a></p>
<h3
id="DefaulterDict"><code>class DefaulterDict(typing.Dict[~_KT, ~_VT], typing.Generic[~_KT, ~_VT]):</code></h3>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/dictmagic.py#L33-L50">View
Source on GitHub</a></p>
<p>like a defaultdict, but default_factory is passed the key as an
argument</p>
<ul>
<li><code>default_factory: Callable[[~_KT], ~_VT]</code></li>
</ul>
<h3 id="inherited-members">Inherited Members</h3>
<ul>
<li><a href="#DefaulterDict.get"><code>get</code></a></li>
<li><a href="#DefaulterDict.setdefault"><code>setdefault</code></a></li>
<li><a href="#DefaulterDict.pop"><code>pop</code></a></li>
<li><a href="#DefaulterDict.popitem"><code>popitem</code></a></li>
<li><a href="#DefaulterDict.keys"><code>keys</code></a></li>
<li><a href="#DefaulterDict.items"><code>items</code></a></li>
<li><a href="#DefaulterDict.values"><code>values</code></a></li>
<li><a href="#DefaulterDict.update"><code>update</code></a></li>
<li><a href="#DefaulterDict.fromkeys"><code>fromkeys</code></a></li>
<li><a href="#DefaulterDict.clear"><code>clear</code></a></li>
<li><a href="#DefaulterDict.copy"><code>copy</code></a></li>
</ul>
<h3
id="defaultdict_to_dict_recursive"><code>def defaultdict_to_dict_recursive</code></h3>
<div class="sourceCode" id="cb12"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>    dd: Union[collections.defaultdict, muutils.dictmagic.DefaulterDict]</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>) <span class="op">-&gt;</span> <span class="bu">dict</span></span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/dictmagic.py#L57-L66">View
Source on GitHub</a></p>
<p>Convert a defaultdict or DefaulterDict to a normal dict,
recursively</p>
<h3
id="dotlist_to_nested_dict"><code>def dotlist_to_nested_dict</code></h3>
<div class="sourceCode" id="cb13"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>(dot_dict: Dict[<span class="bu">str</span>, Any], sep: <span class="bu">str</span> <span class="op">=</span> <span class="st">&#39;.&#39;</span>) <span class="op">-&gt;</span> Dict[<span class="bu">str</span>, Any]</span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/dictmagic.py#L69-L89">View
Source on GitHub</a></p>
<p>Convert a dict with dot-separated keys to a nested dict</p>
<p>Example:</p>
<pre><code>&gt;&gt;&gt; dotlist_to_nested_dict({&#39;a.b.c&#39;: 1, &#39;a.b.d&#39;: 2, &#39;a.e&#39;: 3})
{&#39;a&#39;: {&#39;b&#39;: {&#39;c&#39;: 1, &#39;d&#39;: 2}, &#39;e&#39;: 3}}</code></pre>
<h3
id="nested_dict_to_dotlist"><code>def nested_dict_to_dotlist</code></h3>
<div class="sourceCode" id="cb15"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>    nested_dict: Dict[<span class="bu">str</span>, Any],</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>    sep: <span class="bu">str</span> <span class="op">=</span> <span class="st">&#39;.&#39;</span>,</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>    allow_lists: <span class="bu">bool</span> <span class="op">=</span> <span class="va">False</span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>) <span class="op">-&gt;</span> <span class="bu">dict</span>[<span class="bu">str</span>, typing.Any]</span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/dictmagic.py#L92-L122">View
Source on GitHub</a></p>
<h3
id="update_with_nested_dict"><code>def update_with_nested_dict</code></h3>
<div class="sourceCode" id="cb16"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>    original: <span class="bu">dict</span>[<span class="bu">str</span>, typing.Any],</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>    update: <span class="bu">dict</span>[<span class="bu">str</span>, typing.Any]</span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>) <span class="op">-&gt;</span> <span class="bu">dict</span>[<span class="bu">str</span>, typing.Any]</span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/dictmagic.py#L125-L154">View
Source on GitHub</a></p>
<p>Update a dict with a nested dict</p>
<p>Example: &gt;&gt;&gt; update_with_nested_dict({‘a’: {‘b’: 1}, “c”:
-1}, {‘a’: {“b”: 2}}) {‘a’: {‘b’: 2}, ‘c’: -1}</p>
<h3 id="arguments">Arguments</h3>
<ul>
<li><code>original: dict[str, Any]</code> the dict to update (will be
modified in-place)</li>
<li><code>update: dict[str, Any]</code> the dict to update with</li>
</ul>
<h3 id="returns-1">Returns</h3>
<ul>
<li><code>dict</code> the updated dict</li>
</ul>
<h3
id="kwargs_to_nested_dict"><code>def kwargs_to_nested_dict</code></h3>
<div class="sourceCode" id="cb17"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>    kwargs_dict: <span class="bu">dict</span>[<span class="bu">str</span>, typing.Any],</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>    sep: <span class="bu">str</span> <span class="op">=</span> <span class="st">&#39;.&#39;</span>,</span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>    strip_prefix: Optional[<span class="bu">str</span>] <span class="op">=</span> <span class="va">None</span>,</span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>    when_unknown_prefix: Union[muutils.errormode.ErrorMode, <span class="bu">str</span>] <span class="op">=</span> ErrorMode.Warn,</span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>    transform_key: Optional[Callable[[<span class="bu">str</span>], <span class="bu">str</span>]] <span class="op">=</span> <span class="va">None</span></span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a>) <span class="op">-&gt;</span> <span class="bu">dict</span>[<span class="bu">str</span>, typing.Any]</span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/dictmagic.py#L157-L211">View
Source on GitHub</a></p>
<p>given kwargs from fire, convert them to a nested dict</p>
<p>if strip_prefix is not None, then all keys must start with the
prefix. by default, will warn if an unknown prefix is found, but can be
set to raise an error or ignore it:
<code>when_unknown_prefix: ErrorMode</code></p>
<p>Example:</p>
<div class="sourceCode" id="cb18"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> main(<span class="op">**</span>kwargs):</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(kwargs_to_nested_dict(kwargs))</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>fire.Fire(main)</span></code></pre></div>
<p>running the above script will give:</p>
<div class="sourceCode" id="cb19"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> python test.py <span class="at">--a.b.c</span><span class="op">=</span>1 <span class="at">--a.b.d</span><span class="op">=</span>2 <span class="at">--a.e</span><span class="op">=</span>3</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="ex">{</span><span class="st">&#39;a&#39;</span><span class="ex">:</span> {<span class="st">&#39;b&#39;</span>: {<span class="st">&#39;c&#39;</span>: 1, <span class="st">&#39;d&#39;</span>: 2}, <span class="st">&#39;e&#39;</span>: 3}}</span></code></pre></div>
<h3 id="arguments-1">Arguments</h3>
<ul>
<li><code>kwargs_dict: dict[str, Any]</code> the kwargs dict to
convert</li>
<li><code>sep: str = "."</code> the separator to use for nested
keys</li>
<li><code>strip_prefix: Optional[str] = None</code> if not None, then
all keys must start with this prefix</li>
<li><code>when_unknown_prefix: ErrorMode = ErrorMode.WARN</code> what to
do when an unknown prefix is found</li>
<li><code>transform_key: Callable[[str], str] | None = None</code> a
function to apply to each key before adding it to the dict (applied
after stripping the prefix)</li>
</ul>
<h3
id="is_numeric_consecutive"><code>def is_numeric_consecutive</code></h3>
<div class="sourceCode" id="cb20"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>(lst: <span class="bu">list</span>[<span class="bu">str</span>]) <span class="op">-&gt;</span> <span class="bu">bool</span></span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/dictmagic.py#L214-L220">View
Source on GitHub</a></p>
<p>Check if the list of keys is numeric and consecutive.</p>
<h3
id="condense_nested_dicts_numeric_keys"><code>def condense_nested_dicts_numeric_keys</code></h3>
<div class="sourceCode" id="cb21"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>(data: <span class="bu">dict</span>[<span class="bu">str</span>, typing.Any]) <span class="op">-&gt;</span> <span class="bu">dict</span>[<span class="bu">str</span>, typing.Any]</span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/dictmagic.py#L223-L267">View
Source on GitHub</a></p>
<p>condense a nested dict, by condensing numeric keys with matching
values to ranges</p>
<h3 id="examples">Examples:</h3>
<div class="sourceCode" id="cb22"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> condense_nested_dicts_numeric_keys({<span class="st">&#39;1&#39;</span>: <span class="dv">1</span>, <span class="st">&#39;2&#39;</span>: <span class="dv">1</span>, <span class="st">&#39;3&#39;</span>: <span class="dv">1</span>, <span class="st">&#39;4&#39;</span>: <span class="dv">2</span>, <span class="st">&#39;5&#39;</span>: <span class="dv">2</span>, <span class="st">&#39;6&#39;</span>: <span class="dv">2</span>})</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>{<span class="st">&#39;[1-3]&#39;</span>: <span class="dv">1</span>, <span class="st">&#39;[4-6]&#39;</span>: <span class="dv">2</span>}</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> condense_nested_dicts_numeric_keys({<span class="st">&#39;1&#39;</span>: {<span class="st">&#39;1&#39;</span>: <span class="st">&#39;a&#39;</span>, <span class="st">&#39;2&#39;</span>: <span class="st">&#39;a&#39;</span>}, <span class="st">&#39;2&#39;</span>: <span class="st">&#39;b&#39;</span>})</span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>{<span class="st">&quot;1&quot;</span>: {<span class="st">&quot;[1-2]&quot;</span>: <span class="st">&quot;a&quot;</span>}, <span class="st">&quot;2&quot;</span>: <span class="st">&quot;b&quot;</span>}</span></code></pre></div>
<h3
id="condense_nested_dicts_matching_values"><code>def condense_nested_dicts_matching_values</code></h3>
<div class="sourceCode" id="cb23"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>    data: <span class="bu">dict</span>[<span class="bu">str</span>, typing.Any],</span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>    val_condense_fallback_mapping: Optional[Callable[[Any], Hashable]] <span class="op">=</span> <span class="va">None</span></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>) <span class="op">-&gt;</span> <span class="bu">dict</span>[<span class="bu">str</span>, typing.Any]</span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/dictmagic.py#L270-L321">View
Source on GitHub</a></p>
<p>condense a nested dict, by condensing keys with matching values</p>
<h3 id="examples-todo">Examples: TODO</h3>
<h3 id="parameters-1">Parameters:</h3>
<ul>
<li><code>data : dict[str, Any]</code> data to process</li>
<li><code>val_condense_fallback_mapping : Callable[[Any], Hashable] | None</code>
a function to apply to each value before adding it to the dict (if it’s
not hashable) (defaults to <code>None</code>)</li>
</ul>
<h3
id="condense_nested_dicts"><code>def condense_nested_dicts</code></h3>
<div class="sourceCode" id="cb24"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>    data: <span class="bu">dict</span>[<span class="bu">str</span>, typing.Any],</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>    condense_numeric_keys: <span class="bu">bool</span> <span class="op">=</span> <span class="va">True</span>,</span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>    condense_matching_values: <span class="bu">bool</span> <span class="op">=</span> <span class="va">True</span>,</span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>    val_condense_fallback_mapping: Optional[Callable[[Any], Hashable]] <span class="op">=</span> <span class="va">None</span></span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>) <span class="op">-&gt;</span> <span class="bu">dict</span>[<span class="bu">str</span>, typing.Any]</span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/dictmagic.py#L324-L359">View
Source on GitHub</a></p>
<p>condense a nested dict, by condensing numeric or matching keys with
matching values to ranges</p>
<p>combines the functionality of
<code>condense_nested_dicts_numeric_keys()</code> and
<code>condense_nested_dicts_matching_values()</code></p>
<h3
id="note-this-process-is-not-meant-to-be-reversible-and-is-intended-for-pretty-printing-and-visualization-purposes">NOTE:
this process is not meant to be reversible, and is intended for
pretty-printing and visualization purposes</h3>
<p>it’s not reversible because types are lost to make the printing
pretty</p>
<h3 id="parameters-2">Parameters:</h3>
<ul>
<li><code>data : dict[str, Any]</code> data to process</li>
<li><code>condense_numeric_keys : bool</code> whether to condense
numeric keys (e.g. “1”, “2”, “3”) to ranges (e.g. “[1-3]”) (defaults to
<code>True</code>)</li>
<li><code>condense_matching_values : bool</code> whether to condense
keys with matching values (defaults to <code>True</code>)</li>
<li><code>val_condense_fallback_mapping : Callable[[Any], Hashable] | None</code>
a function to apply to each value before adding it to the dict (if it’s
not hashable) (defaults to <code>None</code>)</li>
</ul>
<h3 id="tuple_dims_replace"><code>def tuple_dims_replace</code></h3>
<div class="sourceCode" id="cb25"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>    t: <span class="bu">tuple</span>[<span class="bu">int</span>, ...],</span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>    dims_names_map: Optional[<span class="bu">dict</span>[<span class="bu">int</span>, <span class="bu">str</span>]] <span class="op">=</span> <span class="va">None</span></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>) <span class="op">-&gt;</span> <span class="bu">tuple</span>[typing.Union[<span class="bu">int</span>, <span class="bu">str</span>], ...]</span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/dictmagic.py#L362-L368">View
Source on GitHub</a></p>
<ul>
<li><p><code>TensorDict = typing.Dict[str, ForwardRef('torch.Tensor|np.ndarray')]</code></p></li>
<li><p><code>TensorIterable = typing.Iterable[typing.Tuple[str, ForwardRef('torch.Tensor|np.ndarray')]]</code></p></li>
<li><p><code>TensorDictFormats = typing.Literal['dict', 'json', 'yaml', 'yml']</code></p></li>
</ul>
<h3 id="condense_tensor_dict"><code>def condense_tensor_dict</code></h3>
<div class="sourceCode" id="cb26"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>    data: <span class="st">&#39;TensorDict | TensorIterable&#39;</span>,</span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>    fmt: Literal[<span class="st">&#39;dict&#39;</span>, <span class="st">&#39;json&#39;</span>, <span class="st">&#39;yaml&#39;</span>, <span class="st">&#39;yml&#39;</span>] <span class="op">=</span> <span class="st">&#39;dict&#39;</span>,</span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>    <span class="op">*</span>args,</span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>    shapes_convert: Callable[[<span class="bu">tuple</span>], Any] <span class="op">=</span> <span class="op">&lt;</span>function _default_shapes_convert<span class="op">&gt;</span>,</span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a>    drop_batch_dims: <span class="bu">int</span> <span class="op">=</span> <span class="dv">0</span>,</span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a>    sep: <span class="bu">str</span> <span class="op">=</span> <span class="st">&#39;.&#39;</span>,</span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a>    dims_names_map: Optional[<span class="bu">dict</span>[<span class="bu">int</span>, <span class="bu">str</span>]] <span class="op">=</span> <span class="va">None</span>,</span>
<span id="cb26-9"><a href="#cb26-9" aria-hidden="true" tabindex="-1"></a>    condense_numeric_keys: <span class="bu">bool</span> <span class="op">=</span> <span class="va">True</span>,</span>
<span id="cb26-10"><a href="#cb26-10" aria-hidden="true" tabindex="-1"></a>    condense_matching_values: <span class="bu">bool</span> <span class="op">=</span> <span class="va">True</span>,</span>
<span id="cb26-11"><a href="#cb26-11" aria-hidden="true" tabindex="-1"></a>    val_condense_fallback_mapping: Optional[Callable[[Any], Hashable]] <span class="op">=</span> <span class="va">None</span>,</span>
<span id="cb26-12"><a href="#cb26-12" aria-hidden="true" tabindex="-1"></a>    return_format: Optional[Literal[<span class="st">&#39;dict&#39;</span>, <span class="st">&#39;json&#39;</span>, <span class="st">&#39;yaml&#39;</span>, <span class="st">&#39;yml&#39;</span>]] <span class="op">=</span> <span class="va">None</span></span>
<span id="cb26-13"><a href="#cb26-13" aria-hidden="true" tabindex="-1"></a>) <span class="op">-&gt;</span> Union[<span class="bu">str</span>, <span class="bu">dict</span>[<span class="bu">str</span>, <span class="bu">str</span> <span class="op">|</span> <span class="bu">tuple</span>[<span class="bu">int</span>, ...]]]</span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/dictmagic.py#L380-L522">View
Source on GitHub</a></p>
<p>Convert a dictionary of tensors to a dictionary of shapes.</p>
<p>by default, values are converted to strings of their shapes (for nice
printing). If you want the actual shapes, set
<code>shapes_convert = lambda x: x</code> or
<code>shapes_convert = None</code>.</p>
<h3 id="parameters-3">Parameters:</h3>
<ul>
<li><code>data : dict[str, "torch.Tensor|np.ndarray"] | Iterable[tuple[str, "torch.Tensor|np.ndarray"]]</code>
a either a <code>TensorDict</code> dict from strings to tensors, or an
<code>TensorIterable</code> iterable of (key, tensor) pairs (like you
might get from a <code>dict().items())</code> )</li>
<li><code>fmt : TensorDictFormats</code> format to return the result in
– either a dict, or dump to json/yaml directly for pretty printing. will
crash if yaml is not installed. (defaults to <code>'dict'</code>)</li>
<li><code>shapes_convert : Callable[[tuple], Any]</code> conversion of a
shape tuple to a string or other format (defaults to turning it into a
string and removing quotes) (defaults to
<code>lambdax:str(x).replace('"', '').replace("'", '')</code>)</li>
<li><code>drop_batch_dims : int</code> number of leading dimensions to
drop from the shape (defaults to <code>0</code>)</li>
<li><code>sep : str</code> separator to use for nested keys (defaults to
<code>'.'</code>)</li>
<li><code>dims_names_map : dict[int, str] | None</code> convert certain
dimension values in shape. not perfect, can be buggy (defaults to
<code>None</code>)</li>
<li><code>condense_numeric_keys : bool</code> whether to condense
numeric keys (e.g. “1”, “2”, “3”) to ranges (e.g. “[1-3]”), passed on to
<code>condense_nested_dicts</code> (defaults to <code>True</code>)</li>
<li><code>condense_matching_values : bool</code> whether to condense
keys with matching values, passed on to
<code>condense_nested_dicts</code> (defaults to <code>True</code>)</li>
<li><code>val_condense_fallback_mapping : Callable[[Any], Hashable] | None</code>
a function to apply to each value before adding it to the dict (if it’s
not hashable), passed on to <code>condense_nested_dicts</code> (defaults
to <code>None</code>)</li>
<li><code>return_format : TensorDictFormats | None</code> legacy alias
for <code>fmt</code> kwarg</li>
</ul>
<h3 id="returns-2">Returns:</h3>
<ul>
<li><code>str|dict[str, str|tuple[int, ...]]</code> dict if
<code>return_format='dict'</code>, a string for <code>json</code> or
<code>yaml</code> output</li>
</ul>
<h3 id="examples-1">Examples:</h3>
<div class="sourceCode" id="cb27"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> model <span class="op">=</span> transformer_lens.HookedTransformer.from_pretrained(<span class="st">&quot;gpt2&quot;</span>)</span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="bu">print</span>(condense_tensor_dict(model.named_parameters(), return_format<span class="op">=</span><span class="st">&#39;yaml&#39;</span>))</span></code></pre></div>
<div class="sourceCode" id="cb28"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="fu">embed</span><span class="kw">:</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">W_E</span><span class="kw">:</span><span class="at"> (50257, 768)</span></span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a><span class="fu">pos_embed</span><span class="kw">:</span></span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">W_pos</span><span class="kw">:</span><span class="at"> (1024, 768)</span></span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a><span class="fu">blocks</span><span class="kw">:</span></span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">&#39;[0-11]&#39;</span><span class="kw">:</span></span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">attn</span><span class="kw">:</span></span>
<span id="cb28-8"><a href="#cb28-8" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">&#39;[W_Q, W_K, W_V]&#39;</span><span class="kw">:</span><span class="at"> (12, 768, 64)</span></span>
<span id="cb28-9"><a href="#cb28-9" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">W_O</span><span class="kw">:</span><span class="at"> (12, 64, 768)</span></span>
<span id="cb28-10"><a href="#cb28-10" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">&#39;[b_Q, b_K, b_V]&#39;</span><span class="kw">:</span><span class="at"> (12, 64)</span></span>
<span id="cb28-11"><a href="#cb28-11" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">b_O</span><span class="kw">:</span><span class="at"> (768,)</span></span>
<span id="cb28-12"><a href="#cb28-12" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">mlp</span><span class="kw">:</span></span>
<span id="cb28-13"><a href="#cb28-13" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">W_in</span><span class="kw">:</span><span class="at"> (768, 3072)</span></span>
<span id="cb28-14"><a href="#cb28-14" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">b_in</span><span class="kw">:</span><span class="at"> (3072,)</span></span>
<span id="cb28-15"><a href="#cb28-15" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">W_out</span><span class="kw">:</span><span class="at"> (3072, 768)</span></span>
<span id="cb28-16"><a href="#cb28-16" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">b_out</span><span class="kw">:</span><span class="at"> (768,)</span></span>
<span id="cb28-17"><a href="#cb28-17" aria-hidden="true" tabindex="-1"></a><span class="fu">unembed</span><span class="kw">:</span></span>
<span id="cb28-18"><a href="#cb28-18" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">W_U</span><span class="kw">:</span><span class="at"> (768, 50257)</span></span>
<span id="cb28-19"><a href="#cb28-19" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">b_U</span><span class="kw">:</span><span class="at"> (50257,)</span></span></code></pre></div>
<h3 id="raises">Raises:</h3>
<ul>
<li><code>ValueError</code> : if <code>return_format</code> is not one
of ‘dict’, ‘json’, or ‘yaml’, or if you try to use ‘yaml’ output without
having PyYAML installed</li>
</ul>
<blockquote>
<p>docs for <a
href="https://github.com/mivanit/muutils"><code>muutils</code></a>
v0.8.6</p>
</blockquote>
<h2 id="contents-3">Contents</h2>
<p>provides <code>ErrorMode</code> enum for handling errors
consistently</p>
<p>pass an <code>error_mode: ErrorMode</code> to a function to specify
how to handle a certain kind of exception. That function then instead of
<code>raise</code>ing or <code>warnings.warn</code>ing, calls
<code>error_mode.process</code> with the message and the exception.</p>
<p>you can also specify the exception class to raise, the warning class
to use, and the source of the exception/warning.</p>
<h2 id="api-documentation-3">API Documentation</h2>
<ul>
<li><a href="#WarningFunc"><code>WarningFunc</code></a></li>
<li><a href="#LoggingFunc"><code>LoggingFunc</code></a></li>
<li><a href="#GLOBAL_WARN_FUNC"><code>GLOBAL_WARN_FUNC</code></a></li>
<li><a href="#GLOBAL_LOG_FUNC"><code>GLOBAL_LOG_FUNC</code></a></li>
<li><a
href="#custom_showwarning"><code>custom_showwarning</code></a></li>
<li><a href="#ErrorMode"><code>ErrorMode</code></a></li>
<li><a
href="#ERROR_MODE_ALIASES"><code>ERROR_MODE_ALIASES</code></a></li>
</ul>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/errormode.py">View
Source on GitHub</a></p>
<h1 id="muutils.errormode"><code>muutils.errormode</code></h1>
<p>provides <code>ErrorMode</code> enum for handling errors
consistently</p>
<p>pass an <code>error_mode: ErrorMode</code> to a function to specify
how to handle a certain kind of exception. That function then instead of
<code>raise</code>ing or <code>warnings.warn</code>ing, calls
<code>error_mode.process</code> with the message and the exception.</p>
<p>you can also specify the exception class to raise, the warning class
to use, and the source of the exception/warning.</p>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/errormode.py#L0-L240">View
Source on GitHub</a></p>
<h3
id="WarningFunc"><code>class WarningFunc(typing.Protocol):</code></h3>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/errormode.py#L19-L25">View
Source on GitHub</a></p>
<p>Base class for protocol classes.</p>
<p>Protocol classes are defined as::</p>
<pre><code>class Proto(Protocol):
    def meth(self) -&gt; int:
        ...</code></pre>
<p>Such classes are primarily used with static type checkers that
recognize structural subtyping (static duck-typing).</p>
<p>For example::</p>
<pre><code>class C:
    def meth(self) -&gt; int:
        return 0

def func(x: Proto) -&gt; int:
    return x.meth()

func(C())  # Passes static type check</code></pre>
<p>See PEP 544 for details. Protocol classes decorated with <span
class="citation"
data-cites="typing.runtime_checkable">@typing.runtime_checkable</span>
act as simple-minded runtime protocols that check only the presence of
given attributes, ignoring their type signatures. Protocol classes can
be generic, they are defined as::</p>
<pre><code>class GenProto[T](Protocol):
    def meth(self) -&gt; T:
        ...</code></pre>
<h3 id="WarningFunc.__init__"><code>WarningFunc</code></h3>
<div class="sourceCode" id="cb32"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>(<span class="op">*</span>args, <span class="op">**</span>kwargs)</span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/errormode.py#L1766-L1792">View
Source on GitHub</a></p>
<ul>
<li><code>LoggingFunc = typing.Callable[[str], NoneType]</code></li>
</ul>
<h3 id="GLOBAL_WARN_FUNC"><code>def GLOBAL_WARN_FUNC</code></h3>
<div class="sourceCode" id="cb33"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>(unknown)</span></code></pre></div>
<p>Issue a warning, or maybe ignore it or raise an exception.</p>
<p>message Text of the warning message. category The Warning category
subclass. Defaults to UserWarning. stacklevel How far up the call stack
to make this warning appear. A value of 2 for example attributes the
warning to the caller of the code calling warn(). source If supplied,
the destroyed object which emitted a ResourceWarning skip_file_prefixes
An optional tuple of module filename prefixes indicating frames to skip
during stacklevel computations for stack frame attribution.</p>
<h3 id="GLOBAL_LOG_FUNC"><code>def GLOBAL_LOG_FUNC</code></h3>
<div class="sourceCode" id="cb34"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>(<span class="op">*</span>args, sep<span class="op">=</span><span class="st">&#39; &#39;</span>, end<span class="op">=</span><span class="st">&#39;</span><span class="ch">\n</span><span class="st">&#39;</span>, <span class="bu">file</span><span class="op">=</span><span class="va">None</span>, flush<span class="op">=</span><span class="va">False</span>)</span></code></pre></div>
<p>Prints the values to a stream, or to sys.stdout by default.</p>
<p>sep string inserted between values, default a space. end string
appended after the last value, default a newline. file a file-like
object (stream); defaults to the current sys.stdout. flush whether to
forcibly flush the stream.</p>
<h3 id="custom_showwarning"><code>def custom_showwarning</code></h3>
<div class="sourceCode" id="cb35"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>    message: <span class="pp">Warning</span> <span class="op">|</span> <span class="bu">str</span>,</span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>    category: Optional[Type[<span class="pp">Warning</span>]] <span class="op">=</span> <span class="va">None</span>,</span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a>    filename: <span class="bu">str</span> <span class="op">|</span> <span class="va">None</span> <span class="op">=</span> <span class="va">None</span>,</span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a>    lineno: <span class="bu">int</span> <span class="op">|</span> <span class="va">None</span> <span class="op">=</span> <span class="va">None</span>,</span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a>    <span class="bu">file</span>: Optional[TextIO] <span class="op">=</span> <span class="va">None</span>,</span>
<span id="cb35-7"><a href="#cb35-7" aria-hidden="true" tabindex="-1"></a>    line: Optional[<span class="bu">str</span>] <span class="op">=</span> <span class="va">None</span></span>
<span id="cb35-8"><a href="#cb35-8" aria-hidden="true" tabindex="-1"></a>) <span class="op">-&gt;</span> <span class="va">None</span></span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/errormode.py#L34-L75">View
Source on GitHub</a></p>
<h3 id="ErrorMode"><code>class ErrorMode(enum.Enum):</code></h3>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/errormode.py#L78-L212">View
Source on GitHub</a></p>
<p>Enum for handling errors consistently</p>
<p>pass one of the instances of this enum to a function to specify how
to handle a certain kind of exception.</p>
<p>That function then instead of <code>raise</code>ing or
<code>warnings.warn</code>ing, calls <code>error_mode.process</code>
with the message and the exception.</p>
<ul>
<li><p><code>EXCEPT = ErrorMode.Except</code></p></li>
<li><p><code>WARN = ErrorMode.Warn</code></p></li>
<li><p><code>LOG = ErrorMode.Log</code></p></li>
<li><p><code>IGNORE = ErrorMode.Ignore</code></p></li>
</ul>
<h3 id="ErrorMode.process"><code>def process</code></h3>
<div class="sourceCode" id="cb36"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>    <span class="va">self</span>,</span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a>    msg: <span class="bu">str</span>,</span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a>    except_cls: Type[<span class="pp">Exception</span>] <span class="op">=</span> <span class="op">&lt;</span><span class="kw">class</span> <span class="st">&#39;ValueError&#39;</span><span class="op">&gt;</span>,</span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a>    warn_cls: Type[<span class="pp">Warning</span>] <span class="op">=</span> <span class="op">&lt;</span><span class="kw">class</span> <span class="st">&#39;UserWarning&#39;</span><span class="op">&gt;</span>,</span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true" tabindex="-1"></a>    except_from: Optional[<span class="pp">Exception</span>] <span class="op">=</span> <span class="va">None</span>,</span>
<span id="cb36-7"><a href="#cb36-7" aria-hidden="true" tabindex="-1"></a>    warn_func: muutils.errormode.WarningFunc <span class="op">|</span> <span class="va">None</span> <span class="op">=</span> <span class="va">None</span>,</span>
<span id="cb36-8"><a href="#cb36-8" aria-hidden="true" tabindex="-1"></a>    log_func: Optional[Callable[[<span class="bu">str</span>], NoneType]] <span class="op">=</span> <span class="va">None</span></span>
<span id="cb36-9"><a href="#cb36-9" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/errormode.py#L91-L160">View
Source on GitHub</a></p>
<p>process an exception or warning according to the error mode</p>
<h3 id="parameters-4">Parameters:</h3>
<ul>
<li><code>msg : str</code> message to pass to <code>except_cls</code> or
<code>warn_func</code></li>
<li><code>except_cls : typing.Type[Exception]</code> exception class to
raise, must be a subclass of <code>Exception</code> (defaults to
<code>ValueError</code>)</li>
<li><code>warn_cls : typing.Type[Warning]</code> warning class to use,
must be a subclass of <code>Warning</code> (defaults to
<code>UserWarning</code>)</li>
<li><code>except_from : typing.Optional[Exception]</code> will
<code>raise except_cls(msg) from except_from</code> if not
<code>None</code> (defaults to <code>None</code>)</li>
<li><code>warn_func : WarningFunc | None</code> function to use for
warnings, must have the signature
<code>warn_func(msg: str, category: typing.Type[Warning], source: typing.Any = None) -&gt; None</code>
(defaults to <code>None</code>)</li>
<li><code>log_func : LoggingFunc | None</code> function to use for
logging, must have the signature
<code>log_func(msg: str) -&gt; None</code> (defaults to
<code>None</code>)</li>
</ul>
<h3 id="raises-1">Raises:</h3>
<ul>
<li><code>except_cls</code> : <em>description</em></li>
<li><code>except_cls</code> : <em>description</em></li>
<li><code>ValueError</code> : <em>description</em></li>
</ul>
<h3 id="ErrorMode.from_any"><code>def from_any</code></h3>
<div class="sourceCode" id="cb37"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>    cls,</span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>    mode: <span class="bu">str</span> <span class="op">|</span> muutils.errormode.ErrorMode,</span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a>    allow_aliases: <span class="bu">bool</span> <span class="op">=</span> <span class="va">True</span>,</span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a>    allow_prefix: <span class="bu">bool</span> <span class="op">=</span> <span class="va">True</span></span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a>) <span class="op">-&gt;</span> muutils.errormode.ErrorMode</span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/errormode.py#L162-L195">View
Source on GitHub</a></p>
<p>initialize an <code>ErrorMode</code> from a string or an
<code>ErrorMode</code> instance</p>
<h3 id="ErrorMode.serialize"><code>def serialize</code></h3>
<div class="sourceCode" id="cb38"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>(<span class="va">self</span>) <span class="op">-&gt;</span> <span class="bu">str</span></span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/errormode.py#L203-L204">View
Source on GitHub</a></p>
<h3 id="ErrorMode.load"><code>def load</code></h3>
<div class="sourceCode" id="cb39"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>(cls, data: <span class="bu">str</span>) <span class="op">-&gt;</span> muutils.errormode.ErrorMode</span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/errormode.py#L206-L212">View
Source on GitHub</a></p>
<h3 id="inherited-members-1">Inherited Members</h3>
<ul>
<li><p><a href="#ErrorMode.name"><code>name</code></a></p></li>
<li><p><a href="#ErrorMode.value"><code>value</code></a></p></li>
<li><p><code>ERROR_MODE_ALIASES: dict[str, muutils.errormode.ErrorMode] = {'except': ErrorMode.Except, 'warn': ErrorMode.Warn, 'log': ErrorMode.Log, 'ignore': ErrorMode.Ignore, 'e': ErrorMode.Except, 'error': ErrorMode.Except, 'err': ErrorMode.Except, 'raise': ErrorMode.Except, 'w': ErrorMode.Warn, 'warning': ErrorMode.Warn, 'l': ErrorMode.Log, 'print': ErrorMode.Log, 'output': ErrorMode.Log, 'show': ErrorMode.Log, 'display': ErrorMode.Log, 'i': ErrorMode.Ignore, 'silent': ErrorMode.Ignore, 'quiet': ErrorMode.Ignore, 'nothing': ErrorMode.Ignore}</code></p></li>
</ul>
<p>map of string aliases to <code>ErrorMode</code> instances</p>
<blockquote>
<p>docs for <a
href="https://github.com/mivanit/muutils"><code>muutils</code></a>
v0.8.6</p>
</blockquote>
<h2 id="contents-4">Contents</h2>
<p>group items by assuming that <code>eq_func</code> defines an
equivalence relation</p>
<h2 id="api-documentation-4">API Documentation</h2>
<ul>
<li><a
href="#group_by_equivalence"><code>group_by_equivalence</code></a></li>
</ul>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/group_equiv.py">View
Source on GitHub</a></p>
<h1 id="muutils.group_equiv"><code>muutils.group_equiv</code></h1>
<p>group items by assuming that <code>eq_func</code> defines an
equivalence relation</p>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/group_equiv.py#L0-L65">View
Source on GitHub</a></p>
<h3 id="group_by_equivalence"><code>def group_by_equivalence</code></h3>
<div class="sourceCode" id="cb40"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>    items_in: Sequence[<span class="op">~</span>T],</span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a>    eq_func: Callable[[<span class="op">~</span>T, <span class="op">~</span>T], <span class="bu">bool</span>]</span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a>) <span class="op">-&gt;</span> <span class="bu">list</span>[<span class="bu">list</span>[<span class="op">~</span>T]]</span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/group_equiv.py#L11-L66">View
Source on GitHub</a></p>
<p>group items by assuming that <code>eq_func</code> implies an
equivalence relation but might not be transitive</p>
<p>so, if f(a,b) and f(b,c) then f(a,c) might be false, but we still
want to put [a,b,c] in the same class</p>
<p>note that lists are used to avoid the need for hashable items, and to
allow for duplicates</p>
<h3 id="arguments-2">Arguments</h3>
<ul>
<li><code>items_in: Sequence[T]</code> the items to group</li>
<li><code>eq_func: Callable[[T, T], bool]</code> a function that returns
true if two items are equivalent. need not be transitive</li>
</ul>
<blockquote>
<p>docs for <a
href="https://github.com/mivanit/muutils"><code>muutils</code></a>
v0.8.6</p>
</blockquote>
<h2 id="contents-5">Contents</h2>
<p>represents a mathematical <code>Interval</code> over the real
numbers</p>
<h2 id="api-documentation-5">API Documentation</h2>
<ul>
<li><a href="#Number"><code>Number</code></a></li>
<li><a href="#Interval"><code>Interval</code></a></li>
<li><a href="#ClosedInterval"><code>ClosedInterval</code></a></li>
<li><a href="#OpenInterval"><code>OpenInterval</code></a></li>
</ul>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/interval.py">View
Source on GitHub</a></p>
<h1 id="muutils.interval"><code>muutils.interval</code></h1>
<p>represents a mathematical <code>Interval</code> over the real
numbers</p>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/interval.py#L0-L531">View
Source on GitHub</a></p>
<ul>
<li><code>Number = typing.Union[float, int]</code></li>
</ul>
<h3 id="Interval"><code>class Interval:</code></h3>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/interval.py#L26-L518">View
Source on GitHub</a></p>
<p>Represents a mathematical interval, open by default.</p>
<p>The Interval class can represent both open and closed intervals, as
well as half-open intervals. It supports various initialization methods
and provides containment checks.</p>
<p>Examples:</p>
<pre><code>&gt;&gt;&gt; i1 = Interval(1, 5)  # Default open interval (1, 5)
&gt;&gt;&gt; 3 in i1
True
&gt;&gt;&gt; 1 in i1
False
&gt;&gt;&gt; i2 = Interval([1, 5])  # Closed interval [1, 5]
&gt;&gt;&gt; 1 in i2
True
&gt;&gt;&gt; i3 = Interval(1, 5, closed_L=True)  # Half-open interval [1, 5)
&gt;&gt;&gt; str(i3)
&#39;[1, 5)&#39;
&gt;&gt;&gt; i4 = ClosedInterval(1, 5)  # Closed interval [1, 5]
&gt;&gt;&gt; i5 = OpenInterval(1, 5)  # Open interval (1, 5)</code></pre>
<h3 id="Interval.__init__"><code>Interval</code></h3>
<div class="sourceCode" id="cb42"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>    <span class="op">*</span>args: Union[Sequence[Union[<span class="bu">float</span>, <span class="bu">int</span>]], <span class="bu">float</span>, <span class="bu">int</span>],</span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a>    is_closed: Optional[<span class="bu">bool</span>] <span class="op">=</span> <span class="va">None</span>,</span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a>    closed_L: Optional[<span class="bu">bool</span>] <span class="op">=</span> <span class="va">None</span>,</span>
<span id="cb42-5"><a href="#cb42-5" aria-hidden="true" tabindex="-1"></a>    closed_R: Optional[<span class="bu">bool</span>] <span class="op">=</span> <span class="va">None</span></span>
<span id="cb42-6"><a href="#cb42-6" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/interval.py#L51-L156">View
Source on GitHub</a></p>
<ul>
<li><p><code>lower: Union[float, int]</code></p></li>
<li><p><code>upper: Union[float, int]</code></p></li>
<li><p><code>closed_L: bool</code></p></li>
<li><p><code>closed_R: bool</code></p></li>
<li><p><code>singleton_set: Optional[set[Union[float, int]]]</code></p></li>
<li><p><code>is_closed: bool</code></p></li>
</ul>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/interval.py#L158-L164">View
Source on GitHub</a></p>
<ul>
<li><code>is_open: bool</code></li>
</ul>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/interval.py#L166-L172">View
Source on GitHub</a></p>
<ul>
<li><code>is_half_open: bool</code></li>
</ul>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/interval.py#L174-L178">View
Source on GitHub</a></p>
<ul>
<li><code>is_singleton: bool</code></li>
</ul>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/interval.py#L180-L182">View
Source on GitHub</a></p>
<ul>
<li><code>is_empty: bool</code></li>
</ul>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/interval.py#L184-L186">View
Source on GitHub</a></p>
<ul>
<li><code>is_finite: bool</code></li>
</ul>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/interval.py#L188-L190">View
Source on GitHub</a></p>
<ul>
<li><code>singleton: Union[float, int]</code></li>
</ul>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/interval.py#L192-L196">View
Source on GitHub</a></p>
<h3 id="Interval.get_empty"><code>def get_empty</code></h3>
<div class="sourceCode" id="cb43"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a>() <span class="op">-&gt;</span> muutils.interval.Interval</span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/interval.py#L198-L200">View
Source on GitHub</a></p>
<h3 id="Interval.get_singleton"><code>def get_singleton</code></h3>
<div class="sourceCode" id="cb44"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a>(value: Union[<span class="bu">float</span>, <span class="bu">int</span>]) <span class="op">-&gt;</span> muutils.interval.Interval</span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/interval.py#L202-L206">View
Source on GitHub</a></p>
<h3
id="Interval.numerical_contained"><code>def numerical_contained</code></h3>
<div class="sourceCode" id="cb45"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a>(<span class="va">self</span>, item: Union[<span class="bu">float</span>, <span class="bu">int</span>]) <span class="op">-&gt;</span> <span class="bu">bool</span></span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/interval.py#L208-L217">View
Source on GitHub</a></p>
<h3
id="Interval.interval_contained"><code>def interval_contained</code></h3>
<div class="sourceCode" id="cb46"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a>(<span class="va">self</span>, item: muutils.interval.Interval) <span class="op">-&gt;</span> <span class="bu">bool</span></span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/interval.py#L219-L245">View
Source on GitHub</a></p>
<h3 id="Interval.from_str"><code>def from_str</code></h3>
<div class="sourceCode" id="cb47"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a>(cls, input_str: <span class="bu">str</span>) <span class="op">-&gt;</span> muutils.interval.Interval</span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/interval.py#L265-L313">View
Source on GitHub</a></p>
<h3 id="Interval.copy"><code>def copy</code></h3>
<div class="sourceCode" id="cb48"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a>(<span class="va">self</span>) <span class="op">-&gt;</span> muutils.interval.Interval</span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/interval.py#L357-L364">View
Source on GitHub</a></p>
<h3 id="Interval.size"><code>def size</code></h3>
<div class="sourceCode" id="cb49"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a>(<span class="va">self</span>) <span class="op">-&gt;</span> <span class="bu">float</span></span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/interval.py#L366-L378">View
Source on GitHub</a></p>
<p>Returns the size of the interval.</p>
<h3 id="returns-3">Returns:</h3>
<ul>
<li><code>float</code> the size of the interval</li>
</ul>
<h3 id="Interval.clamp"><code>def clamp</code></h3>
<div class="sourceCode" id="cb50"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a>(<span class="va">self</span>, value: Union[<span class="bu">int</span>, <span class="bu">float</span>], epsilon: <span class="bu">float</span> <span class="op">=</span> <span class="fl">1e-10</span>) <span class="op">-&gt;</span> <span class="bu">float</span></span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/interval.py#L380-L440">View
Source on GitHub</a></p>
<p>Clamp the given value to the interval bounds.</p>
<p>For open bounds, the clamped value will be slightly inside the
interval (by epsilon).</p>
<h3 id="parameters-5">Parameters:</h3>
<ul>
<li><code>value : Union[int, float]</code> the value to clamp.</li>
<li><code>epsilon : float</code> margin for open bounds (defaults to
<code>_EPSILON</code>)</li>
</ul>
<h3 id="returns-4">Returns:</h3>
<ul>
<li><code>float</code> the clamped value</li>
</ul>
<h3 id="raises-2">Raises:</h3>
<ul>
<li><code>ValueError</code> : If the input value is NaN.</li>
</ul>
<h3 id="Interval.intersection"><code>def intersection</code></h3>
<div class="sourceCode" id="cb51"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a>(<span class="va">self</span>, other: muutils.interval.Interval) <span class="op">-&gt;</span> muutils.interval.Interval</span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/interval.py#L442-L469">View
Source on GitHub</a></p>
<h3 id="Interval.union"><code>def union</code></h3>
<div class="sourceCode" id="cb52"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a>(<span class="va">self</span>, other: muutils.interval.Interval) <span class="op">-&gt;</span> muutils.interval.Interval</span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/interval.py#L471-L518">View
Source on GitHub</a></p>
<h3
id="ClosedInterval"><code>class ClosedInterval(Interval):</code></h3>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/interval.py#L521-L525">View
Source on GitHub</a></p>
<p>Represents a mathematical interval, open by default.</p>
<p>The Interval class can represent both open and closed intervals, as
well as half-open intervals. It supports various initialization methods
and provides containment checks.</p>
<p>Examples:</p>
<pre><code>&gt;&gt;&gt; i1 = Interval(1, 5)  # Default open interval (1, 5)
&gt;&gt;&gt; 3 in i1
True
&gt;&gt;&gt; 1 in i1
False
&gt;&gt;&gt; i2 = Interval([1, 5])  # Closed interval [1, 5]
&gt;&gt;&gt; 1 in i2
True
&gt;&gt;&gt; i3 = Interval(1, 5, closed_L=True)  # Half-open interval [1, 5)
&gt;&gt;&gt; str(i3)
&#39;[1, 5)&#39;
&gt;&gt;&gt; i4 = ClosedInterval(1, 5)  # Closed interval [1, 5]
&gt;&gt;&gt; i5 = OpenInterval(1, 5)  # Open interval (1, 5)</code></pre>
<h3 id="ClosedInterval.__init__"><code>ClosedInterval</code></h3>
<div class="sourceCode" id="cb54"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a>(<span class="op">*</span>args: Union[Sequence[<span class="bu">float</span>], <span class="bu">float</span>], <span class="op">**</span>kwargs: Any)</span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/interval.py#L522-L525">View
Source on GitHub</a></p>
<h3 id="inherited-members-2">Inherited Members</h3>
<ul>
<li><a href="#ClosedInterval.lower"><code>lower</code></a></li>
<li><a href="#ClosedInterval.upper"><code>upper</code></a></li>
<li><a href="#ClosedInterval.closed_L"><code>closed_L</code></a></li>
<li><a href="#ClosedInterval.closed_R"><code>closed_R</code></a></li>
<li><a
href="#ClosedInterval.singleton_set"><code>singleton_set</code></a></li>
<li><a href="#ClosedInterval.is_closed"><code>is_closed</code></a></li>
<li><a href="#ClosedInterval.is_open"><code>is_open</code></a></li>
<li><a
href="#ClosedInterval.is_half_open"><code>is_half_open</code></a></li>
<li><a
href="#ClosedInterval.is_singleton"><code>is_singleton</code></a></li>
<li><a href="#ClosedInterval.is_empty"><code>is_empty</code></a></li>
<li><a href="#ClosedInterval.is_finite"><code>is_finite</code></a></li>
<li><a href="#ClosedInterval.singleton"><code>singleton</code></a></li>
<li><a href="#ClosedInterval.get_empty"><code>get_empty</code></a></li>
<li><a
href="#ClosedInterval.get_singleton"><code>get_singleton</code></a></li>
<li><a
href="#ClosedInterval.numerical_contained"><code>numerical_contained</code></a></li>
<li><a
href="#ClosedInterval.interval_contained"><code>interval_contained</code></a></li>
<li><a href="#ClosedInterval.from_str"><code>from_str</code></a></li>
<li><a href="#ClosedInterval.copy"><code>copy</code></a></li>
<li><a href="#ClosedInterval.size"><code>size</code></a></li>
<li><a href="#ClosedInterval.clamp"><code>clamp</code></a></li>
<li><a
href="#ClosedInterval.intersection"><code>intersection</code></a></li>
<li><a href="#ClosedInterval.union"><code>union</code></a></li>
</ul>
<h3 id="OpenInterval"><code>class OpenInterval(Interval):</code></h3>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/interval.py#L528-L532">View
Source on GitHub</a></p>
<p>Represents a mathematical interval, open by default.</p>
<p>The Interval class can represent both open and closed intervals, as
well as half-open intervals. It supports various initialization methods
and provides containment checks.</p>
<p>Examples:</p>
<pre><code>&gt;&gt;&gt; i1 = Interval(1, 5)  # Default open interval (1, 5)
&gt;&gt;&gt; 3 in i1
True
&gt;&gt;&gt; 1 in i1
False
&gt;&gt;&gt; i2 = Interval([1, 5])  # Closed interval [1, 5]
&gt;&gt;&gt; 1 in i2
True
&gt;&gt;&gt; i3 = Interval(1, 5, closed_L=True)  # Half-open interval [1, 5)
&gt;&gt;&gt; str(i3)
&#39;[1, 5)&#39;
&gt;&gt;&gt; i4 = ClosedInterval(1, 5)  # Closed interval [1, 5]
&gt;&gt;&gt; i5 = OpenInterval(1, 5)  # Open interval (1, 5)</code></pre>
<h3 id="OpenInterval.__init__"><code>OpenInterval</code></h3>
<div class="sourceCode" id="cb56"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a>(<span class="op">*</span>args: Union[Sequence[<span class="bu">float</span>], <span class="bu">float</span>], <span class="op">**</span>kwargs: Any)</span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/interval.py#L529-L532">View
Source on GitHub</a></p>
<h3 id="inherited-members-3">Inherited Members</h3>
<ul>
<li><a href="#OpenInterval.lower"><code>lower</code></a></li>
<li><a href="#OpenInterval.upper"><code>upper</code></a></li>
<li><a href="#OpenInterval.closed_L"><code>closed_L</code></a></li>
<li><a href="#OpenInterval.closed_R"><code>closed_R</code></a></li>
<li><a
href="#OpenInterval.singleton_set"><code>singleton_set</code></a></li>
<li><a href="#OpenInterval.is_closed"><code>is_closed</code></a></li>
<li><a href="#OpenInterval.is_open"><code>is_open</code></a></li>
<li><a
href="#OpenInterval.is_half_open"><code>is_half_open</code></a></li>
<li><a
href="#OpenInterval.is_singleton"><code>is_singleton</code></a></li>
<li><a href="#OpenInterval.is_empty"><code>is_empty</code></a></li>
<li><a href="#OpenInterval.is_finite"><code>is_finite</code></a></li>
<li><a href="#OpenInterval.singleton"><code>singleton</code></a></li>
<li><a href="#OpenInterval.get_empty"><code>get_empty</code></a></li>
<li><a
href="#OpenInterval.get_singleton"><code>get_singleton</code></a></li>
<li><a
href="#OpenInterval.numerical_contained"><code>numerical_contained</code></a></li>
<li><a
href="#OpenInterval.interval_contained"><code>interval_contained</code></a></li>
<li><a href="#OpenInterval.from_str"><code>from_str</code></a></li>
<li><a href="#OpenInterval.copy"><code>copy</code></a></li>
<li><a href="#OpenInterval.size"><code>size</code></a></li>
<li><a href="#OpenInterval.clamp"><code>clamp</code></a></li>
<li><a
href="#OpenInterval.intersection"><code>intersection</code></a></li>
<li><a href="#OpenInterval.union"><code>union</code></a></li>
</ul>
<blockquote>
<p>docs for <a
href="https://github.com/mivanit/muutils"><code>muutils</code></a>
v0.8.6</p>
</blockquote>
<h2 id="contents-6">Contents</h2>
<p>submodule for serializing things to json in a recoverable way</p>
<p>you can throw <em>any</em> object into
<code>muutils.json_serialize.json_serialize</code> and it will return a
<code>JSONitem</code>, meaning a bool, int, float, str, None, list of
<code>JSONitem</code>s, or a dict mappting to <code>JSONitem</code>.</p>
<p>The goal of this is if you want to just be able to store something as
relatively human-readable JSON, and don’t care as much about recovering
it, you can throw it into <code>json_serialize</code> and it will just
work. If you want to do so in a recoverable way, check out <a
href="https://github.com/mivanit/ZANJ"><code>ZANJ</code></a>.</p>
<p>it will do so by looking in <code>DEFAULT_HANDLERS</code>, which will
keep it as-is if its already valid, then try to find a
<code>.serialize()</code> method on the object, and then have a bunch of
special cases. You can add handlers by initializing a
<code>JsonSerializer</code> object and passing a sequence of them to
<code>handlers_pre</code></p>
<p>additionally, <code>SerializeableDataclass</code> is a special kind
of dataclass where you specify how to serialize each field, and a
<code>.serialize()</code> method is automatically added to the class.
This is done by using the <code>serializable_dataclass</code> decorator,
inheriting from <code>SerializeableDataclass</code>, and
<code>serializable_field</code> in place of
<code>dataclasses.field</code> when defining non-standard fields.</p>
<p>This module plays nicely with and is a dependency of the <a
href="https://github.com/mivanit/ZANJ"><code>ZANJ</code></a> library,
which extends this to support saving things to disk in a more efficient
way than just plain json (arrays are saved as npy files, for example),
and automatically detecting how to load saved objects into their
original classes.</p>
<h2 id="submodules-1">Submodules</h2>
<ul>
<li><a href="#array"><code>array</code></a></li>
<li><a href="#util"><code>util</code></a></li>
<li><a href="#json_serialize"><code>json_serialize</code></a></li>
<li><a
href="#serializable_dataclass"><code>serializable_dataclass</code></a></li>
<li><a
href="#serializable_field"><code>serializable_field</code></a></li>
</ul>
<h2 id="api-documentation-6">API Documentation</h2>
<ul>
<li><a href="#json_serialize"><code>json_serialize</code></a></li>
<li><a
href="#serializable_dataclass"><code>serializable_dataclass</code></a></li>
<li><a
href="#serializable_field"><code>serializable_field</code></a></li>
<li><a href="#arr_metadata"><code>arr_metadata</code></a></li>
<li><a href="#load_array"><code>load_array</code></a></li>
<li><a href="#BASE_HANDLERS"><code>BASE_HANDLERS</code></a></li>
<li><a href="#JSONitem"><code>JSONitem</code></a></li>
<li><a href="#JsonSerializer"><code>JsonSerializer</code></a></li>
<li><a href="#try_catch"><code>try_catch</code></a></li>
<li><a href="#dc_eq"><code>dc_eq</code></a></li>
<li><a
href="#SerializableDataclass"><code>SerializableDataclass</code></a></li>
</ul>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/json_serialize/__init__.py">View
Source on GitHub</a></p>
<h1 id="muutils.json_serialize"><code>muutils.json_serialize</code></h1>
<p>submodule for serializing things to json in a recoverable way</p>
<p>you can throw <em>any</em> object into
<code>&lt;a href="json_serialize/json_serialize.html"&gt;muutils.json_serialize.json_serialize&lt;/a&gt;</code>
and it will return a <code>JSONitem</code>, meaning a bool, int, float,
str, None, list of <code>JSONitem</code>s, or a dict mappting to
<code>JSONitem</code>.</p>
<p>The goal of this is if you want to just be able to store something as
relatively human-readable JSON, and don’t care as much about recovering
it, you can throw it into <code>json_serialize</code> and it will just
work. If you want to do so in a recoverable way, check out <a
href="https://github.com/mivanit/ZANJ"><code>ZANJ</code></a>.</p>
<p>it will do so by looking in <code>DEFAULT_HANDLERS</code>, which will
keep it as-is if its already valid, then try to find a
<code>.serialize()</code> method on the object, and then have a bunch of
special cases. You can add handlers by initializing a
<code>JsonSerializer</code> object and passing a sequence of them to
<code>handlers_pre</code></p>
<p>additionally, <code>SerializeableDataclass</code> is a special kind
of dataclass where you specify how to serialize each field, and a
<code>.serialize()</code> method is automatically added to the class.
This is done by using the <code>serializable_dataclass</code> decorator,
inheriting from <code>SerializeableDataclass</code>, and
<code>serializable_field</code> in place of
<code>dataclasses.field</code> when defining non-standard fields.</p>
<p>This module plays nicely with and is a dependency of the <a
href="https://github.com/mivanit/ZANJ"><code>ZANJ</code></a> library,
which extends this to support saving things to disk in a more efficient
way than just plain json (arrays are saved as npy files, for example),
and automatically detecting how to load saved objects into their
original classes.</p>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/json_serialize/__init__.py#L0-L50">View
Source on GitHub</a></p>
<h3 id="json_serialize"><code>def json_serialize</code></h3>
<div class="sourceCode" id="cb57"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a>    obj: Any,</span>
<span id="cb57-3"><a href="#cb57-3" aria-hidden="true" tabindex="-1"></a>    path: <span class="bu">tuple</span>[typing.Union[<span class="bu">str</span>, <span class="bu">int</span>], ...] <span class="op">=</span> ()</span>
<span id="cb57-4"><a href="#cb57-4" aria-hidden="true" tabindex="-1"></a>) <span class="op">-&gt;</span> Union[<span class="bu">bool</span>, <span class="bu">int</span>, <span class="bu">float</span>, <span class="bu">str</span>, NoneType, List[Union[<span class="bu">bool</span>, <span class="bu">int</span>, <span class="bu">float</span>, <span class="bu">str</span>, NoneType, List[Any], Dict[<span class="bu">str</span>, Any]]], Dict[<span class="bu">str</span>, Union[<span class="bu">bool</span>, <span class="bu">int</span>, <span class="bu">float</span>, <span class="bu">str</span>, NoneType, List[Any], Dict[<span class="bu">str</span>, Any]]]]</span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/json_serialize/__init__.py#L331-L333">View
Source on GitHub</a></p>
<p>serialize object to json-serializable object with default config</p>
<h3
id="serializable_dataclass"><code>def serializable_dataclass</code></h3>
<div class="sourceCode" id="cb58"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a>    _cls<span class="op">=</span><span class="va">None</span>,</span>
<span id="cb58-3"><a href="#cb58-3" aria-hidden="true" tabindex="-1"></a>    <span class="op">*</span>,</span>
<span id="cb58-4"><a href="#cb58-4" aria-hidden="true" tabindex="-1"></a>    init: <span class="bu">bool</span> <span class="op">=</span> <span class="va">True</span>,</span>
<span id="cb58-5"><a href="#cb58-5" aria-hidden="true" tabindex="-1"></a>    <span class="bu">repr</span>: <span class="bu">bool</span> <span class="op">=</span> <span class="va">True</span>,</span>
<span id="cb58-6"><a href="#cb58-6" aria-hidden="true" tabindex="-1"></a>    eq: <span class="bu">bool</span> <span class="op">=</span> <span class="va">True</span>,</span>
<span id="cb58-7"><a href="#cb58-7" aria-hidden="true" tabindex="-1"></a>    order: <span class="bu">bool</span> <span class="op">=</span> <span class="va">False</span>,</span>
<span id="cb58-8"><a href="#cb58-8" aria-hidden="true" tabindex="-1"></a>    unsafe_hash: <span class="bu">bool</span> <span class="op">=</span> <span class="va">False</span>,</span>
<span id="cb58-9"><a href="#cb58-9" aria-hidden="true" tabindex="-1"></a>    frozen: <span class="bu">bool</span> <span class="op">=</span> <span class="va">False</span>,</span>
<span id="cb58-10"><a href="#cb58-10" aria-hidden="true" tabindex="-1"></a>    properties_to_serialize: Optional[<span class="bu">list</span>[<span class="bu">str</span>]] <span class="op">=</span> <span class="va">None</span>,</span>
<span id="cb58-11"><a href="#cb58-11" aria-hidden="true" tabindex="-1"></a>    register_handler: <span class="bu">bool</span> <span class="op">=</span> <span class="va">True</span>,</span>
<span id="cb58-12"><a href="#cb58-12" aria-hidden="true" tabindex="-1"></a>    on_typecheck_error: muutils.errormode.ErrorMode <span class="op">=</span> ErrorMode.Except,</span>
<span id="cb58-13"><a href="#cb58-13" aria-hidden="true" tabindex="-1"></a>    on_typecheck_mismatch: muutils.errormode.ErrorMode <span class="op">=</span> ErrorMode.Warn,</span>
<span id="cb58-14"><a href="#cb58-14" aria-hidden="true" tabindex="-1"></a>    methods_no_override: <span class="bu">list</span>[<span class="bu">str</span>] <span class="op">|</span> <span class="va">None</span> <span class="op">=</span> <span class="va">None</span>,</span>
<span id="cb58-15"><a href="#cb58-15" aria-hidden="true" tabindex="-1"></a>    <span class="op">**</span>kwargs</span>
<span id="cb58-16"><a href="#cb58-16" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/json_serialize/__init__.py#L558-L905">View
Source on GitHub</a></p>
<p>decorator to make a dataclass serializable. <strong>must also make it
inherit from <code>SerializableDataclass</code>!!</strong></p>
<p>types will be validated (like pydantic) unless
<code>on_typecheck_mismatch</code> is set to
<code>ErrorMode.IGNORE</code></p>
<p>behavior of most kwargs matches that of
<code>dataclasses.dataclass</code>, but with some additional kwargs. any
kwargs not listed here are passed to
<code>dataclasses.dataclass</code></p>
<p>Returns the same class as was passed in, with dunder methods added
based on the fields defined in the class.</p>
<p>Examines PEP 526 <code>__annotations__</code> to determine
fields.</p>
<p>If init is true, an <code>__init__()</code> method is added to the
class. If repr is true, a <code>__repr__()</code> method is added. If
order is true, rich comparison dunder methods are added. If unsafe_hash
is true, a <code>__hash__()</code> method function is added. If frozen
is true, fields may not be assigned to after instance creation.</p>
<div class="sourceCode" id="cb59"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="at">@serializable_dataclass</span>(kw_only<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> Myclass(SerializableDataclass):</span>
<span id="cb59-3"><a href="#cb59-3" aria-hidden="true" tabindex="-1"></a>    a: <span class="bu">int</span></span>
<span id="cb59-4"><a href="#cb59-4" aria-hidden="true" tabindex="-1"></a>    b: <span class="bu">str</span></span></code></pre></div>
<div class="sourceCode" id="cb60"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> Myclass(a<span class="op">=</span><span class="dv">1</span>, b<span class="op">=</span><span class="st">&quot;q&quot;</span>).serialize()</span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a>{_FORMAT_KEY: <span class="st">&#39;Myclass(SerializableDataclass)&#39;</span>, <span class="st">&#39;a&#39;</span>: <span class="dv">1</span>, <span class="st">&#39;b&#39;</span>: <span class="st">&#39;q&#39;</span>}</span></code></pre></div>
<h3 id="parameters-6">Parameters:</h3>
<ul>
<li><code>_cls : _type_</code> class to decorate. don’t pass this arg,
just use this as a decorator (defaults to <code>None</code>)</li>
<li><code>init : bool</code> whether to add an <code>__init__</code>
method <em>(passed to dataclasses.dataclass)</em> (defaults to
<code>True</code>)</li>
<li><code>repr : bool</code> whether to add a <code>__repr__</code>
method <em>(passed to dataclasses.dataclass)</em> (defaults to
<code>True</code>)</li>
<li><code>order : bool</code> whether to add rich comparison methods
<em>(passed to dataclasses.dataclass)</em> (defaults to
<code>False</code>)</li>
<li><code>unsafe_hash : bool</code> whether to add a
<code>__hash__</code> method <em>(passed to dataclasses.dataclass)</em>
(defaults to <code>False</code>)</li>
<li><code>frozen : bool</code> whether to make the class frozen
<em>(passed to dataclasses.dataclass)</em> (defaults to
<code>False</code>)</li>
<li><code>properties_to_serialize : Optional[list[str]]</code> which
properties to add to the serialized data dict
<strong>SerializableDataclass only</strong> (defaults to
<code>None</code>)</li>
<li><code>register_handler : bool</code> if true, register the class
with ZANJ for loading <strong>SerializableDataclass only</strong>
(defaults to <code>True</code>)</li>
<li><code>on_typecheck_error : ErrorMode</code> what to do if type
checking throws an exception (except, warn, ignore). If
<code>ignore</code> and an exception is thrown, type validation will
still return false <strong>SerializableDataclass only</strong></li>
<li><code>on_typecheck_mismatch : ErrorMode</code> what to do if a type
mismatch is found (except, warn, ignore). If <code>ignore</code>, type
validation will return <code>True</code> <strong>SerializableDataclass
only</strong></li>
<li><code>methods_no_override : list[str]|None</code> list of methods
that should not be overridden by the decorator by default,
<code>__eq__</code>, <code>serialize</code>, <code>load</code>, and
<code>validate_fields_types</code> are overridden by this function, but
you can disable this if you’d rather write your own.
<code>dataclasses.dataclass</code> might still overwrite these, and
those options take precedence <strong>SerializableDataclass
only</strong> (defaults to <code>None</code>)</li>
<li><code>**kwargs</code> <em>(passed to
dataclasses.dataclass)</em></li>
</ul>
<h3 id="returns-5">Returns:</h3>
<ul>
<li><code>_type_</code> the decorated class</li>
</ul>
<h3 id="raises-3">Raises:</h3>
<ul>
<li><code>KWOnlyError</code> : only raised if <code>kw_only</code> is
<code>True</code> and python version is &lt;3.9, since
<code>dataclasses.dataclass</code> does not support this</li>
<li><code>NotSerializableFieldException</code> : if a field is not a
<code>SerializableField</code></li>
<li><code>FieldSerializationError</code> : if there is an error
serializing a field</li>
<li><code>AttributeError</code> : if a property is not found on the
class</li>
<li><code>FieldLoadingError</code> : if there is an error loading a
field</li>
</ul>
<h3 id="serializable_field"><code>def serializable_field</code></h3>
<div class="sourceCode" id="cb61"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a>    <span class="op">*</span>_args,</span>
<span id="cb61-3"><a href="#cb61-3" aria-hidden="true" tabindex="-1"></a>    default: Union[Any, dataclasses._MISSING_TYPE] <span class="op">=</span> <span class="op">&lt;</span>dataclasses._MISSING_TYPE <span class="bu">object</span><span class="op">&gt;</span>,</span>
<span id="cb61-4"><a href="#cb61-4" aria-hidden="true" tabindex="-1"></a>    default_factory: Union[Any, dataclasses._MISSING_TYPE] <span class="op">=</span> <span class="op">&lt;</span>dataclasses._MISSING_TYPE <span class="bu">object</span><span class="op">&gt;</span>,</span>
<span id="cb61-5"><a href="#cb61-5" aria-hidden="true" tabindex="-1"></a>    init: <span class="bu">bool</span> <span class="op">=</span> <span class="va">True</span>,</span>
<span id="cb61-6"><a href="#cb61-6" aria-hidden="true" tabindex="-1"></a>    <span class="bu">repr</span>: <span class="bu">bool</span> <span class="op">=</span> <span class="va">True</span>,</span>
<span id="cb61-7"><a href="#cb61-7" aria-hidden="true" tabindex="-1"></a>    <span class="bu">hash</span>: Optional[<span class="bu">bool</span>] <span class="op">=</span> <span class="va">None</span>,</span>
<span id="cb61-8"><a href="#cb61-8" aria-hidden="true" tabindex="-1"></a>    compare: <span class="bu">bool</span> <span class="op">=</span> <span class="va">True</span>,</span>
<span id="cb61-9"><a href="#cb61-9" aria-hidden="true" tabindex="-1"></a>    metadata: Optional[mappingproxy] <span class="op">=</span> <span class="va">None</span>,</span>
<span id="cb61-10"><a href="#cb61-10" aria-hidden="true" tabindex="-1"></a>    kw_only: Union[<span class="bu">bool</span>, dataclasses._MISSING_TYPE] <span class="op">=</span> <span class="op">&lt;</span>dataclasses._MISSING_TYPE <span class="bu">object</span><span class="op">&gt;</span>,</span>
<span id="cb61-11"><a href="#cb61-11" aria-hidden="true" tabindex="-1"></a>    serialize: <span class="bu">bool</span> <span class="op">=</span> <span class="va">True</span>,</span>
<span id="cb61-12"><a href="#cb61-12" aria-hidden="true" tabindex="-1"></a>    serialization_fn: Optional[Callable[[Any], Any]] <span class="op">=</span> <span class="va">None</span>,</span>
<span id="cb61-13"><a href="#cb61-13" aria-hidden="true" tabindex="-1"></a>    deserialize_fn: Optional[Callable[[Any], Any]] <span class="op">=</span> <span class="va">None</span>,</span>
<span id="cb61-14"><a href="#cb61-14" aria-hidden="true" tabindex="-1"></a>    assert_type: <span class="bu">bool</span> <span class="op">=</span> <span class="va">True</span>,</span>
<span id="cb61-15"><a href="#cb61-15" aria-hidden="true" tabindex="-1"></a>    custom_typecheck_fn: Optional[Callable[[<span class="bu">type</span>], <span class="bu">bool</span>]] <span class="op">=</span> <span class="va">None</span>,</span>
<span id="cb61-16"><a href="#cb61-16" aria-hidden="true" tabindex="-1"></a>    <span class="op">**</span>kwargs: Any</span>
<span id="cb61-17"><a href="#cb61-17" aria-hidden="true" tabindex="-1"></a>) <span class="op">-&gt;</span> Any</span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/json_serialize/__init__.py#L187-L279">View
Source on GitHub</a></p>
<p>Create a new <code>SerializableField</code></p>
<pre><code>default: Sfield_T | dataclasses._MISSING_TYPE = dataclasses.MISSING,
default_factory: Callable[[], Sfield_T]
| dataclasses._MISSING_TYPE = dataclasses.MISSING,
init: bool = True,
repr: bool = True,
hash: Optional[bool] = None,
compare: bool = True,
metadata: types.MappingProxyType | None = None,
kw_only: bool | dataclasses._MISSING_TYPE = dataclasses.MISSING,
### ----------------------------------------------------------------------
### new in `SerializableField`, not in `dataclasses.Field`
serialize: bool = True,
serialization_fn: Optional[Callable[[Any], Any]] = None,
loading_fn: Optional[Callable[[Any], Any]] = None,
deserialize_fn: Optional[Callable[[Any], Any]] = None,
assert_type: bool = True,
custom_typecheck_fn: Optional[Callable[[type], bool]] = None,</code></pre>
<h3 id="new-parameters">new Parameters:</h3>
<ul>
<li><code>serialize</code>: whether to serialize this field when
serializing the class’</li>
<li><code>serialization_fn</code>: function taking the instance of the
field and returning a serializable object. If not provided, will iterate
through the <code>SerializerHandler</code>s defined in
<code>&lt;a href="json_serialize/json_serialize.html"&gt;muutils.json_serialize.json_serialize&lt;/a&gt;</code></li>
<li><code>loading_fn</code>: function taking the serialized object and
returning the instance of the field. If not provided, will take object
as-is.</li>
<li><code>deserialize_fn</code>: new alternative to
<code>loading_fn</code>. takes only the field’s value, not the whole
class. if both <code>loading_fn</code> and <code>deserialize_fn</code>
are provided, an error will be raised.</li>
<li><code>assert_type</code>: whether to assert the type of the field
when loading. if <code>False</code>, will not check the type of the
field.</li>
<li><code>custom_typecheck_fn</code>: function taking the type of the
field and returning whether the type itself is valid. if not provided,
will use the default type checking.</li>
</ul>
<h3 id="gotchas">Gotchas:</h3>
<ul>
<li><code>loading_fn</code> takes the dict of the
<strong>class</strong>, not the field. if you wanted a
<code>loading_fn</code> that does nothing, you’d write:</li>
</ul>
<div class="sourceCode" id="cb63"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> MyClass:</span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a>    my_field: <span class="bu">int</span> <span class="op">=</span> serializable_field(</span>
<span id="cb63-3"><a href="#cb63-3" aria-hidden="true" tabindex="-1"></a>        serialization_fn<span class="op">=</span><span class="kw">lambda</span> x: <span class="bu">str</span>(x),</span>
<span id="cb63-4"><a href="#cb63-4" aria-hidden="true" tabindex="-1"></a>        loading_fn<span class="op">=</span><span class="kw">lambda</span> x[<span class="st">&quot;my_field&quot;</span>]: <span class="bu">int</span>(x)</span>
<span id="cb63-5"><a href="#cb63-5" aria-hidden="true" tabindex="-1"></a>    )</span></code></pre></div>
<p>using <code>deserialize_fn</code> instead:</p>
<div class="sourceCode" id="cb64"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> MyClass:</span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true" tabindex="-1"></a>    my_field: <span class="bu">int</span> <span class="op">=</span> serializable_field(</span>
<span id="cb64-3"><a href="#cb64-3" aria-hidden="true" tabindex="-1"></a>        serialization_fn<span class="op">=</span><span class="kw">lambda</span> x: <span class="bu">str</span>(x),</span>
<span id="cb64-4"><a href="#cb64-4" aria-hidden="true" tabindex="-1"></a>        deserialize_fn<span class="op">=</span><span class="kw">lambda</span> x: <span class="bu">int</span>(x)</span>
<span id="cb64-5"><a href="#cb64-5" aria-hidden="true" tabindex="-1"></a>    )</span></code></pre></div>
<p>In the above code, <code>my_field</code> is an int but will be
serialized as a string.</p>
<p>note that if not using ZANJ, and you have a class inside a container,
you MUST provide <code>serialization_fn</code> and
<code>loading_fn</code> to serialize and load the container. ZANJ will
automatically do this for you.</p>
<h3
id="todo-custom_value_check_fn-function-taking-the-value-of-the-field-and-returning-whether-the-value-itself-is-valid.-if-not-provided-any-value-is-valid-as-long-as-it-passes-the-type-test">TODO:
<code>custom_value_check_fn</code>: function taking the value of the
field and returning whether the value itself is valid. if not provided,
any value is valid as long as it passes the type test</h3>
<h3 id="arr_metadata"><code>def arr_metadata</code></h3>
<div class="sourceCode" id="cb65"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a>(arr) <span class="op">-&gt;</span> <span class="bu">dict</span>[<span class="bu">str</span>, <span class="bu">list</span>[<span class="bu">int</span>] <span class="op">|</span> <span class="bu">str</span> <span class="op">|</span> <span class="bu">int</span>]</span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/json_serialize/__init__.py#L48-L56">View
Source on GitHub</a></p>
<p>get metadata for a numpy array</p>
<h3 id="load_array"><code>def load_array</code></h3>
<div class="sourceCode" id="cb66"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb66-2"><a href="#cb66-2" aria-hidden="true" tabindex="-1"></a>    arr: Union[<span class="bu">bool</span>, <span class="bu">int</span>, <span class="bu">float</span>, <span class="bu">str</span>, NoneType, List[Union[<span class="bu">bool</span>, <span class="bu">int</span>, <span class="bu">float</span>, <span class="bu">str</span>, NoneType, List[Any], Dict[<span class="bu">str</span>, Any]]], Dict[<span class="bu">str</span>, Union[<span class="bu">bool</span>, <span class="bu">int</span>, <span class="bu">float</span>, <span class="bu">str</span>, NoneType, List[Any], Dict[<span class="bu">str</span>, Any]]]],</span>
<span id="cb66-3"><a href="#cb66-3" aria-hidden="true" tabindex="-1"></a>    array_mode: Optional[Literal[<span class="st">&#39;list&#39;</span>, <span class="st">&#39;array_list_meta&#39;</span>, <span class="st">&#39;array_hex_meta&#39;</span>, <span class="st">&#39;array_b64_meta&#39;</span>, <span class="st">&#39;external&#39;</span>, <span class="st">&#39;zero_dim&#39;</span>]] <span class="op">=</span> <span class="va">None</span></span>
<span id="cb66-4"><a href="#cb66-4" aria-hidden="true" tabindex="-1"></a>) <span class="op">-&gt;</span> Any</span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/json_serialize/__init__.py#L167-L226">View
Source on GitHub</a></p>
<p>load a json-serialized array, infer the mode if not specified</p>
<ul>
<li><p><code>BASE_HANDLERS = (SerializerHandler(check=&lt;function &lt;lambda&gt;&gt;, serialize_func=&lt;function &lt;lambda&gt;&gt;, uid='base types', desc='base types (bool, int, float, str, None)'), SerializerHandler(check=&lt;function &lt;lambda&gt;&gt;, serialize_func=&lt;function &lt;lambda&gt;&gt;, uid='dictionaries', desc='dictionaries'), SerializerHandler(check=&lt;function &lt;lambda&gt;&gt;, serialize_func=&lt;function &lt;lambda&gt;&gt;, uid='(list, tuple) -&gt; list', desc='lists and tuples as lists'))</code></p></li>
<li><p><code>JSONitem = typing.Union[bool, int, float, str, NoneType, typing.List[typing.Union[bool, int, float, str, NoneType, typing.List[typing.Any], typing.Dict[str, typing.Any]]], typing.Dict[str, typing.Union[bool, int, float, str, NoneType, typing.List[typing.Any], typing.Dict[str, typing.Any]]]]</code></p></li>
</ul>
<h3 id="JsonSerializer"><code>class JsonSerializer:</code></h3>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/json_serialize/__init__.py#L235-L325">View
Source on GitHub</a></p>
<p>Json serialization class (holds configs)</p>
<h3 id="parameters-7">Parameters:</h3>
<ul>
<li><code>array_mode : ArrayMode</code> how to write arrays (defaults to
<code>"array_list_meta"</code>)</li>
<li><code>error_mode : ErrorMode</code> what to do when we can’t
serialize an object (will use repr as fallback if “ignore” or “warn”)
(defaults to <code>"except"</code>)</li>
<li><code>handlers_pre : MonoTuple[SerializerHandler]</code> handlers to
use before the default handlers (defaults to <code>tuple()</code>)</li>
<li><code>handlers_default : MonoTuple[SerializerHandler]</code> default
handlers to use (defaults to <code>DEFAULT_HANDLERS</code>)</li>
<li><code>write_only_format : bool</code> changes _FORMAT_KEY keys in
output to “<strong>write_format</strong>” (when you want to serialize
something in a way that zanj won’t try to recover the object when
loading) (defaults to <code>False</code>)</li>
</ul>
<h3 id="raises-4">Raises:</h3>
<ul>
<li><code>ValueError</code>: on init, if <code>args</code> is not
empty</li>
<li><code>SerializationException</code>: on
<code>json_serialize()</code>, if any error occurs when trying to
serialize an object and <code>error_mode</code> is set to
<code>ErrorMode.EXCEPT"</code></li>
</ul>
<h3 id="JsonSerializer.__init__"><code>JsonSerializer</code></h3>
<div class="sourceCode" id="cb67"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb67-2"><a href="#cb67-2" aria-hidden="true" tabindex="-1"></a>    <span class="op">*</span>args,</span>
<span id="cb67-3"><a href="#cb67-3" aria-hidden="true" tabindex="-1"></a>    array_mode: Literal[<span class="st">&#39;list&#39;</span>, <span class="st">&#39;array_list_meta&#39;</span>, <span class="st">&#39;array_hex_meta&#39;</span>, <span class="st">&#39;array_b64_meta&#39;</span>, <span class="st">&#39;external&#39;</span>, <span class="st">&#39;zero_dim&#39;</span>] <span class="op">=</span> <span class="st">&#39;array_list_meta&#39;</span>,</span>
<span id="cb67-4"><a href="#cb67-4" aria-hidden="true" tabindex="-1"></a>    error_mode: muutils.errormode.ErrorMode <span class="op">=</span> ErrorMode.Except,</span>
<span id="cb67-5"><a href="#cb67-5" aria-hidden="true" tabindex="-1"></a>    handlers_pre: <span class="va">None</span> <span class="op">=</span> (),</span>
<span id="cb67-6"><a href="#cb67-6" aria-hidden="true" tabindex="-1"></a>    handlers_default: <span class="va">None</span> <span class="op">=</span> (SerializerHandler(check<span class="op">=&lt;</span>function <span class="op">&lt;</span><span class="kw">lambda</span><span class="op">&gt;&gt;</span>, serialize_func<span class="op">=&lt;</span>function <span class="op">&lt;</span><span class="kw">lambda</span><span class="op">&gt;&gt;</span>, uid<span class="op">=</span><span class="st">&#39;base types&#39;</span>, desc<span class="op">=</span><span class="st">&#39;base types (bool, int, float, str, None)&#39;</span>), SerializerHandler(check<span class="op">=&lt;</span>function <span class="op">&lt;</span><span class="kw">lambda</span><span class="op">&gt;&gt;</span>, serialize_func<span class="op">=&lt;</span>function <span class="op">&lt;</span><span class="kw">lambda</span><span class="op">&gt;&gt;</span>, uid<span class="op">=</span><span class="st">&#39;dictionaries&#39;</span>, desc<span class="op">=</span><span class="st">&#39;dictionaries&#39;</span>), SerializerHandler(check<span class="op">=&lt;</span>function <span class="op">&lt;</span><span class="kw">lambda</span><span class="op">&gt;&gt;</span>, serialize_func<span class="op">=&lt;</span>function <span class="op">&lt;</span><span class="kw">lambda</span><span class="op">&gt;&gt;</span>, uid<span class="op">=</span><span class="st">&#39;(list, tuple) -&gt; list&#39;</span>, desc<span class="op">=</span><span class="st">&#39;lists and tuples as lists&#39;</span>), SerializerHandler(check<span class="op">=&lt;</span>function <span class="op">&lt;</span><span class="kw">lambda</span><span class="op">&gt;&gt;</span>, serialize_func<span class="op">=&lt;</span>function _serialize_override_serialize_func<span class="op">&gt;</span>, uid<span class="op">=</span><span class="st">&#39;.serialize override&#39;</span>, desc<span class="op">=</span><span class="st">&#39;objects with .serialize method&#39;</span>), SerializerHandler(check<span class="op">=&lt;</span>function <span class="op">&lt;</span><span class="kw">lambda</span><span class="op">&gt;&gt;</span>, serialize_func<span class="op">=&lt;</span>function <span class="op">&lt;</span><span class="kw">lambda</span><span class="op">&gt;&gt;</span>, uid<span class="op">=</span><span class="st">&#39;namedtuple -&gt; dict&#39;</span>, desc<span class="op">=</span><span class="st">&#39;namedtuples as dicts&#39;</span>), SerializerHandler(check<span class="op">=&lt;</span>function <span class="op">&lt;</span><span class="kw">lambda</span><span class="op">&gt;&gt;</span>, serialize_func<span class="op">=&lt;</span>function <span class="op">&lt;</span><span class="kw">lambda</span><span class="op">&gt;&gt;</span>, uid<span class="op">=</span><span class="st">&#39;dataclass -&gt; dict&#39;</span>, desc<span class="op">=</span><span class="st">&#39;dataclasses as dicts&#39;</span>), SerializerHandler(check<span class="op">=&lt;</span>function <span class="op">&lt;</span><span class="kw">lambda</span><span class="op">&gt;&gt;</span>, serialize_func<span class="op">=&lt;</span>function <span class="op">&lt;</span><span class="kw">lambda</span><span class="op">&gt;&gt;</span>, uid<span class="op">=</span><span class="st">&#39;path -&gt; str&#39;</span>, desc<span class="op">=</span><span class="st">&#39;Path objects as posix strings&#39;</span>), SerializerHandler(check<span class="op">=&lt;</span>function <span class="op">&lt;</span><span class="kw">lambda</span><span class="op">&gt;&gt;</span>, serialize_func<span class="op">=&lt;</span>function <span class="op">&lt;</span><span class="kw">lambda</span><span class="op">&gt;&gt;</span>, uid<span class="op">=</span><span class="st">&#39;obj -&gt; str(obj)&#39;</span>, desc<span class="op">=</span><span class="st">&#39;directly serialize objects in `SERIALIZE_DIRECT_AS_STR` to strings&#39;</span>), SerializerHandler(check<span class="op">=&lt;</span>function <span class="op">&lt;</span><span class="kw">lambda</span><span class="op">&gt;&gt;</span>, serialize_func<span class="op">=&lt;</span>function <span class="op">&lt;</span><span class="kw">lambda</span><span class="op">&gt;&gt;</span>, uid<span class="op">=</span><span class="st">&#39;numpy.ndarray&#39;</span>, desc<span class="op">=</span><span class="st">&#39;numpy arrays&#39;</span>), SerializerHandler(check<span class="op">=&lt;</span>function <span class="op">&lt;</span><span class="kw">lambda</span><span class="op">&gt;&gt;</span>, serialize_func<span class="op">=&lt;</span>function <span class="op">&lt;</span><span class="kw">lambda</span><span class="op">&gt;&gt;</span>, uid<span class="op">=</span><span class="st">&#39;torch.Tensor&#39;</span>, desc<span class="op">=</span><span class="st">&#39;pytorch tensors&#39;</span>), SerializerHandler(check<span class="op">=&lt;</span>function <span class="op">&lt;</span><span class="kw">lambda</span><span class="op">&gt;&gt;</span>, serialize_func<span class="op">=&lt;</span>function <span class="op">&lt;</span><span class="kw">lambda</span><span class="op">&gt;&gt;</span>, uid<span class="op">=</span><span class="st">&#39;pandas.DataFrame&#39;</span>, desc<span class="op">=</span><span class="st">&#39;pandas DataFrames&#39;</span>), SerializerHandler(check<span class="op">=&lt;</span>function <span class="op">&lt;</span><span class="kw">lambda</span><span class="op">&gt;&gt;</span>, serialize_func<span class="op">=&lt;</span>function <span class="op">&lt;</span><span class="kw">lambda</span><span class="op">&gt;&gt;</span>, uid<span class="op">=</span><span class="st">&#39;(set, list, tuple, Iterable) -&gt; list&#39;</span>, desc<span class="op">=</span><span class="st">&#39;sets, lists, tuples, and Iterables as lists&#39;</span>), SerializerHandler(check<span class="op">=&lt;</span>function <span class="op">&lt;</span><span class="kw">lambda</span><span class="op">&gt;&gt;</span>, serialize_func<span class="op">=&lt;</span>function <span class="op">&lt;</span><span class="kw">lambda</span><span class="op">&gt;&gt;</span>, uid<span class="op">=</span><span class="st">&#39;fallback&#39;</span>, desc<span class="op">=</span><span class="st">&#39;fallback handler -- serialize object attributes and special functions as strings&#39;</span>)),</span>
<span id="cb67-7"><a href="#cb67-7" aria-hidden="true" tabindex="-1"></a>    write_only_format: <span class="bu">bool</span> <span class="op">=</span> <span class="va">False</span></span>
<span id="cb67-8"><a href="#cb67-8" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/json_serialize/__init__.py#L261-L281">View
Source on GitHub</a></p>
<ul>
<li><p><code>array_mode: Literal['list', 'array_list_meta', 'array_hex_meta', 'array_b64_meta', 'external', 'zero_dim']</code></p></li>
<li><p><code>error_mode: muutils.errormode.ErrorMode</code></p></li>
<li><p><code>write_only_format: bool</code></p></li>
<li><p><code>handlers: None</code></p></li>
</ul>
<h3
id="JsonSerializer.json_serialize"><code>def json_serialize</code></h3>
<div class="sourceCode" id="cb68"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb68-2"><a href="#cb68-2" aria-hidden="true" tabindex="-1"></a>    <span class="va">self</span>,</span>
<span id="cb68-3"><a href="#cb68-3" aria-hidden="true" tabindex="-1"></a>    obj: Any,</span>
<span id="cb68-4"><a href="#cb68-4" aria-hidden="true" tabindex="-1"></a>    path: <span class="bu">tuple</span>[typing.Union[<span class="bu">str</span>, <span class="bu">int</span>], ...] <span class="op">=</span> ()</span>
<span id="cb68-5"><a href="#cb68-5" aria-hidden="true" tabindex="-1"></a>) <span class="op">-&gt;</span> Union[<span class="bu">bool</span>, <span class="bu">int</span>, <span class="bu">float</span>, <span class="bu">str</span>, NoneType, List[Union[<span class="bu">bool</span>, <span class="bu">int</span>, <span class="bu">float</span>, <span class="bu">str</span>, NoneType, List[Any], Dict[<span class="bu">str</span>, Any]]], Dict[<span class="bu">str</span>, Union[<span class="bu">bool</span>, <span class="bu">int</span>, <span class="bu">float</span>, <span class="bu">str</span>, NoneType, List[Any], Dict[<span class="bu">str</span>, Any]]]]</span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/json_serialize/__init__.py#L283-L313">View
Source on GitHub</a></p>
<h3 id="JsonSerializer.hashify"><code>def hashify</code></h3>
<div class="sourceCode" id="cb69"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb69-2"><a href="#cb69-2" aria-hidden="true" tabindex="-1"></a>    <span class="va">self</span>,</span>
<span id="cb69-3"><a href="#cb69-3" aria-hidden="true" tabindex="-1"></a>    obj: Any,</span>
<span id="cb69-4"><a href="#cb69-4" aria-hidden="true" tabindex="-1"></a>    path: <span class="bu">tuple</span>[typing.Union[<span class="bu">str</span>, <span class="bu">int</span>], ...] <span class="op">=</span> (),</span>
<span id="cb69-5"><a href="#cb69-5" aria-hidden="true" tabindex="-1"></a>    force: <span class="bu">bool</span> <span class="op">=</span> <span class="va">True</span></span>
<span id="cb69-6"><a href="#cb69-6" aria-hidden="true" tabindex="-1"></a>) <span class="op">-&gt;</span> Union[<span class="bu">bool</span>, <span class="bu">int</span>, <span class="bu">float</span>, <span class="bu">str</span>, <span class="bu">tuple</span>]</span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/json_serialize/__init__.py#L315-L325">View
Source on GitHub</a></p>
<p>try to turn any object into something hashable</p>
<h3 id="try_catch"><code>def try_catch</code></h3>
<div class="sourceCode" id="cb70"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a>(func: Callable)</span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/json_serialize/__init__.py#L98-L111">View
Source on GitHub</a></p>
<p>wraps the function to catch exceptions, returns serialized error
message on exception</p>
<p>returned func will return normal result on success, or error message
on exception</p>
<h3 id="dc_eq"><code>def dc_eq</code></h3>
<div class="sourceCode" id="cb71"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb71-2"><a href="#cb71-2" aria-hidden="true" tabindex="-1"></a>    dc1,</span>
<span id="cb71-3"><a href="#cb71-3" aria-hidden="true" tabindex="-1"></a>    dc2,</span>
<span id="cb71-4"><a href="#cb71-4" aria-hidden="true" tabindex="-1"></a>    except_when_class_mismatch: <span class="bu">bool</span> <span class="op">=</span> <span class="va">False</span>,</span>
<span id="cb71-5"><a href="#cb71-5" aria-hidden="true" tabindex="-1"></a>    false_when_class_mismatch: <span class="bu">bool</span> <span class="op">=</span> <span class="va">True</span>,</span>
<span id="cb71-6"><a href="#cb71-6" aria-hidden="true" tabindex="-1"></a>    except_when_field_mismatch: <span class="bu">bool</span> <span class="op">=</span> <span class="va">False</span></span>
<span id="cb71-7"><a href="#cb71-7" aria-hidden="true" tabindex="-1"></a>) <span class="op">-&gt;</span> <span class="bu">bool</span></span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/json_serialize/__init__.py#L192-L281">View
Source on GitHub</a></p>
<p>checks if two dataclasses which (might) hold numpy arrays are
equal</p>
<h3 id="parameters-8">Parameters:</h3>
<ul>
<li><code>dc1</code>: the first dataclass</li>
<li><code>dc2</code>: the second dataclass</li>
<li><code>except_when_class_mismatch: bool</code> if <code>True</code>,
will throw <code>TypeError</code> if the classes are different. if not,
will return false by default or attempt to compare the fields if
<code>false_when_class_mismatch</code> is <code>False</code> (default:
<code>False</code>)</li>
<li><code>false_when_class_mismatch: bool</code> only relevant if
<code>except_when_class_mismatch</code> is <code>False</code>. if
<code>True</code>, will return <code>False</code> if the classes are
different. if <code>False</code>, will attempt to compare the
fields.</li>
<li><code>except_when_field_mismatch: bool</code> only relevant if
<code>except_when_class_mismatch</code> is <code>False</code> and
<code>false_when_class_mismatch</code> is <code>False</code>. if
<code>True</code>, will throw <code>TypeError</code> if the fields are
different. (default: <code>True</code>)</li>
</ul>
<h3 id="returns-6">Returns:</h3>
<ul>
<li><code>bool</code>: True if the dataclasses are equal, False
otherwise</li>
</ul>
<h3 id="raises-5">Raises:</h3>
<ul>
<li><code>TypeError</code>: if the dataclasses are of different
classes</li>
<li><code>AttributeError</code>: if the dataclasses have different
fields</li>
</ul>
<h3
id="todo-after-except-when-class-mismatch-is-false-shouldnt-we-then-go-to-field-keys-match">TODO:
after “except when class mismatch” is False, shouldn’t we then go to
“field keys match”?</h3>
<pre><code>          [START]
             ▼
       ┌───────────┐  ┌─────────┐
       │dc1 is dc2?├─►│ classes │
       └──┬────────┘No│ match?  │
  ────    │           ├─────────┤
 (True)◄──┘Yes        │No       │Yes
  ────                ▼         ▼
      ┌────────────────┐ ┌────────────┐
      │ except when    │ │ fields keys│
      │ class mismatch?│ │ match?     │
      ├───────────┬────┘ ├───────┬────┘
      │Yes        │No    │No     │Yes
      ▼           ▼      ▼       ▼
 ───────────  ┌──────────┐  ┌────────┐
{ raise     } │ except   │  │ field  │
{ TypeError } │ when     │  │ values │
 ───────────  │ field    │  │ match? │
              │ mismatch?│  ├────┬───┘
              ├───────┬──┘  │    │Yes
              │Yes    │No   │No  ▼
              ▼       ▼     │   ────
 ───────────────     ─────  │  (True)
{ raise         }   (False)◄┘   ────
{ AttributeError}    ─────
 ───────────────</code></pre>
<h3
id="SerializableDataclass"><code>class SerializableDataclass(abc.ABC):</code></h3>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/json_serialize/__init__.py#L294-L490">View
Source on GitHub</a></p>
<p>Base class for serializable dataclasses</p>
<p>only for linting and type checking, still need to call
<code>serializable_dataclass</code> decorator</p>
<h3 id="usage-1">Usage:</h3>
<div class="sourceCode" id="cb73"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a><span class="at">@serializable_dataclass</span></span>
<span id="cb73-2"><a href="#cb73-2" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> MyClass(SerializableDataclass):</span>
<span id="cb73-3"><a href="#cb73-3" aria-hidden="true" tabindex="-1"></a>    a: <span class="bu">int</span></span>
<span id="cb73-4"><a href="#cb73-4" aria-hidden="true" tabindex="-1"></a>    b: <span class="bu">str</span></span></code></pre></div>
<p>and then you can call <code>my_obj.serialize()</code> to get a dict
that can be serialized to json. So, you can do:</p>
<pre><code>&gt;&gt;&gt; my_obj = MyClass(a=1, b=&quot;q&quot;)
&gt;&gt;&gt; s = json.dumps(my_obj.serialize())
&gt;&gt;&gt; s
&#39;{_FORMAT_KEY: &quot;MyClass(SerializableDataclass)&quot;, &quot;a&quot;: 1, &quot;b&quot;: &quot;q&quot;}&#39;
&gt;&gt;&gt; read_obj = MyClass.load(json.loads(s))
&gt;&gt;&gt; read_obj == my_obj
True</code></pre>
<p>This isn’t too impressive on its own, but it gets more useful when
you have nested classses, or fields that are not json-serializable by
default:</p>
<div class="sourceCode" id="cb75"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a><span class="at">@serializable_dataclass</span></span>
<span id="cb75-2"><a href="#cb75-2" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> NestedClass(SerializableDataclass):</span>
<span id="cb75-3"><a href="#cb75-3" aria-hidden="true" tabindex="-1"></a>    x: <span class="bu">str</span></span>
<span id="cb75-4"><a href="#cb75-4" aria-hidden="true" tabindex="-1"></a>    y: MyClass</span>
<span id="cb75-5"><a href="#cb75-5" aria-hidden="true" tabindex="-1"></a>    act_fun: torch.nn.Module <span class="op">=</span> serializable_field(</span>
<span id="cb75-6"><a href="#cb75-6" aria-hidden="true" tabindex="-1"></a>        default<span class="op">=</span>torch.nn.ReLU(),</span>
<span id="cb75-7"><a href="#cb75-7" aria-hidden="true" tabindex="-1"></a>        serialization_fn<span class="op">=</span><span class="kw">lambda</span> x: <span class="bu">str</span>(x),</span>
<span id="cb75-8"><a href="#cb75-8" aria-hidden="true" tabindex="-1"></a>        deserialize_fn<span class="op">=</span><span class="kw">lambda</span> x: <span class="bu">getattr</span>(torch.nn, x)(),</span>
<span id="cb75-9"><a href="#cb75-9" aria-hidden="true" tabindex="-1"></a>    )</span></code></pre></div>
<p>which gives us:</p>
<pre><code>&gt;&gt;&gt; nc = NestedClass(x=&quot;q&quot;, y=MyClass(a=1, b=&quot;q&quot;), act_fun=torch.nn.Sigmoid())
&gt;&gt;&gt; s = json.dumps(nc.serialize())
&gt;&gt;&gt; s
&#39;{_FORMAT_KEY: &quot;NestedClass(SerializableDataclass)&quot;, &quot;x&quot;: &quot;q&quot;, &quot;y&quot;: {_FORMAT_KEY: &quot;MyClass(SerializableDataclass)&quot;, &quot;a&quot;: 1, &quot;b&quot;: &quot;q&quot;}, &quot;act_fun&quot;: &quot;Sigmoid&quot;}&#39;
&gt;&gt;&gt; read_nc = NestedClass.load(json.loads(s))
&gt;&gt;&gt; read_nc == nc
True</code></pre>
<h3 id="SerializableDataclass.serialize"><code>def serialize</code></h3>
<div class="sourceCode" id="cb77"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a>(<span class="va">self</span>) <span class="op">-&gt;</span> <span class="bu">dict</span>[<span class="bu">str</span>, typing.Any]</span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/json_serialize/__init__.py#L347-L351">View
Source on GitHub</a></p>
<p>returns the class as a dict, implemented by using
<code>@serializable_dataclass</code> decorator</p>
<h3 id="SerializableDataclass.load"><code>def load</code></h3>
<div class="sourceCode" id="cb78"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a>(cls: Type[<span class="op">~</span>T], data: Union[<span class="bu">dict</span>[<span class="bu">str</span>, Any], <span class="op">~</span>T]) <span class="op">-&gt;</span> <span class="op">~</span>T</span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/json_serialize/__init__.py#L353-L356">View
Source on GitHub</a></p>
<p>takes in an appropriately structured dict and returns an instance of
the class, implemented by using <code>@serializable_dataclass</code>
decorator</p>
<h3
id="SerializableDataclass.validate_fields_types"><code>def validate_fields_types</code></h3>
<div class="sourceCode" id="cb79"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb79-2"><a href="#cb79-2" aria-hidden="true" tabindex="-1"></a>    <span class="va">self</span>,</span>
<span id="cb79-3"><a href="#cb79-3" aria-hidden="true" tabindex="-1"></a>    on_typecheck_error: muutils.errormode.ErrorMode <span class="op">=</span> ErrorMode.Except</span>
<span id="cb79-4"><a href="#cb79-4" aria-hidden="true" tabindex="-1"></a>) <span class="op">-&gt;</span> <span class="bu">bool</span></span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/json_serialize/__init__.py#L358-L364">View
Source on GitHub</a></p>
<p>validate the types of all the fields on a
<code>SerializableDataclass</code>. calls
<code>SerializableDataclass__validate_field_type</code> for each
field</p>
<h3
id="SerializableDataclass.validate_field_type"><code>def validate_field_type</code></h3>
<div class="sourceCode" id="cb80"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb80-2"><a href="#cb80-2" aria-hidden="true" tabindex="-1"></a>    <span class="va">self</span>,</span>
<span id="cb80-3"><a href="#cb80-3" aria-hidden="true" tabindex="-1"></a>    field: muutils.json_serialize.serializable_field.SerializableField <span class="op">|</span> <span class="bu">str</span>,</span>
<span id="cb80-4"><a href="#cb80-4" aria-hidden="true" tabindex="-1"></a>    on_typecheck_error: muutils.errormode.ErrorMode <span class="op">=</span> ErrorMode.Except</span>
<span id="cb80-5"><a href="#cb80-5" aria-hidden="true" tabindex="-1"></a>) <span class="op">-&gt;</span> <span class="bu">bool</span></span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/json_serialize/__init__.py#L366-L374">View
Source on GitHub</a></p>
<p>given a dataclass, check the field matches the type hint</p>
<h3 id="SerializableDataclass.diff"><code>def diff</code></h3>
<div class="sourceCode" id="cb81"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb81-2"><a href="#cb81-2" aria-hidden="true" tabindex="-1"></a>    <span class="va">self</span>,</span>
<span id="cb81-3"><a href="#cb81-3" aria-hidden="true" tabindex="-1"></a>    other: muutils.json_serialize.serializable_dataclass.SerializableDataclass,</span>
<span id="cb81-4"><a href="#cb81-4" aria-hidden="true" tabindex="-1"></a>    of_serialized: <span class="bu">bool</span> <span class="op">=</span> <span class="va">False</span></span>
<span id="cb81-5"><a href="#cb81-5" aria-hidden="true" tabindex="-1"></a>) <span class="op">-&gt;</span> <span class="bu">dict</span>[<span class="bu">str</span>, typing.Any]</span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/json_serialize/__init__.py#L383-L465">View
Source on GitHub</a></p>
<p>get a rich and recursive diff between two instances of a serializable
dataclass</p>
<div class="sourceCode" id="cb82"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> Myclass(a<span class="op">=</span><span class="dv">1</span>, b<span class="op">=</span><span class="dv">2</span>).diff(Myclass(a<span class="op">=</span><span class="dv">1</span>, b<span class="op">=</span><span class="dv">3</span>))</span>
<span id="cb82-2"><a href="#cb82-2" aria-hidden="true" tabindex="-1"></a>{<span class="st">&#39;b&#39;</span>: {<span class="st">&#39;self&#39;</span>: <span class="dv">2</span>, <span class="st">&#39;other&#39;</span>: <span class="dv">3</span>}}</span>
<span id="cb82-3"><a href="#cb82-3" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> NestedClass(x<span class="op">=</span><span class="st">&quot;q1&quot;</span>, y<span class="op">=</span>Myclass(a<span class="op">=</span><span class="dv">1</span>, b<span class="op">=</span><span class="dv">2</span>)).diff(NestedClass(x<span class="op">=</span><span class="st">&quot;q2&quot;</span>, y<span class="op">=</span>Myclass(a<span class="op">=</span><span class="dv">1</span>, b<span class="op">=</span><span class="dv">3</span>)))</span>
<span id="cb82-4"><a href="#cb82-4" aria-hidden="true" tabindex="-1"></a>{<span class="st">&#39;x&#39;</span>: {<span class="st">&#39;self&#39;</span>: <span class="st">&#39;q1&#39;</span>, <span class="st">&#39;other&#39;</span>: <span class="st">&#39;q2&#39;</span>}, <span class="st">&#39;y&#39;</span>: {<span class="st">&#39;b&#39;</span>: {<span class="st">&#39;self&#39;</span>: <span class="dv">2</span>, <span class="st">&#39;other&#39;</span>: <span class="dv">3</span>}}}</span></code></pre></div>
<h3 id="parameters-9">Parameters:</h3>
<ul>
<li><code>other : SerializableDataclass</code> other instance to compare
against</li>
<li><code>of_serialized : bool</code> if true, compare serialized data
and not raw values (defaults to <code>False</code>)</li>
</ul>
<h3 id="returns-7">Returns:</h3>
<ul>
<li><code>dict[str, Any]</code></li>
</ul>
<h3 id="raises-6">Raises:</h3>
<ul>
<li><code>ValueError</code> : if the instances are not of the same
type</li>
<li><code>ValueError</code> : if the instances are
<code>dataclasses.dataclass</code> but not
<code>SerializableDataclass</code></li>
</ul>
<h3
id="SerializableDataclass.update_from_nested_dict"><code>def update_from_nested_dict</code></h3>
<div class="sourceCode" id="cb83"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a>(<span class="va">self</span>, nested_dict: <span class="bu">dict</span>[<span class="bu">str</span>, typing.Any])</span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/json_serialize/__init__.py#L467-L482">View
Source on GitHub</a></p>
<p>update the instance from a nested dict, useful for configuration from
command line args</p>
<h3 id="parameters-10">Parameters:</h3>
<pre><code>- `nested_dict : dict[str, Any]`
    nested dict to update the instance with</code></pre>
<blockquote>
<p>docs for <a
href="https://github.com/mivanit/muutils"><code>muutils</code></a>
v0.8.6</p>
</blockquote>
<h2 id="contents-7">Contents</h2>
<p>this utilities module handles serialization and loading of numpy and
torch arrays as json</p>
<ul>
<li><code>array_list_meta</code> is less efficient (arrays are stored as
nested lists), but preserves both metadata and human readability.</li>
<li><code>array_b64_meta</code> is the most efficient, but is not human
readable.</li>
<li><code>external</code> is mostly for use in <a
href="https://github.com/mivanit/ZANJ"><code>ZANJ</code></a></li>
</ul>
<h2 id="api-documentation-7">API Documentation</h2>
<ul>
<li><a href="#ArrayMode"><code>ArrayMode</code></a></li>
<li><a href="#array_n_elements"><code>array_n_elements</code></a></li>
<li><a href="#arr_metadata"><code>arr_metadata</code></a></li>
<li><a href="#serialize_array"><code>serialize_array</code></a></li>
<li><a href="#infer_array_mode"><code>infer_array_mode</code></a></li>
<li><a href="#load_array"><code>load_array</code></a></li>
</ul>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/json_serialize/array.py">View
Source on GitHub</a></p>
<h1
id="muutils.json_serialize.array"><code>muutils.json_serialize.array</code></h1>
<p>this utilities module handles serialization and loading of numpy and
torch arrays as json</p>
<ul>
<li><code>array_list_meta</code> is less efficient (arrays are stored as
nested lists), but preserves both metadata and human readability.</li>
<li><code>array_b64_meta</code> is the most efficient, but is not human
readable.</li>
<li><code>external</code> is mostly for use in <a
href="https://github.com/mivanit/ZANJ"><code>ZANJ</code></a></li>
</ul>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/json_serialize/array.py#L0-L225">View
Source on GitHub</a></p>
<ul>
<li><code>ArrayMode = typing.Literal['list', 'array_list_meta', 'array_hex_meta', 'array_b64_meta', 'external', 'zero_dim']</code></li>
</ul>
<h3 id="array_n_elements"><code>def array_n_elements</code></h3>
<div class="sourceCode" id="cb85"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true" tabindex="-1"></a>(arr) <span class="op">-&gt;</span> <span class="bu">int</span></span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/json_serialize/array.py#L38-L45">View
Source on GitHub</a></p>
<p>get the number of elements in an array</p>
<h3 id="arr_metadata"><code>def arr_metadata</code></h3>
<div class="sourceCode" id="cb86"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb86-1"><a href="#cb86-1" aria-hidden="true" tabindex="-1"></a>(arr) <span class="op">-&gt;</span> <span class="bu">dict</span>[<span class="bu">str</span>, <span class="bu">list</span>[<span class="bu">int</span>] <span class="op">|</span> <span class="bu">str</span> <span class="op">|</span> <span class="bu">int</span>]</span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/json_serialize/array.py#L48-L56">View
Source on GitHub</a></p>
<p>get metadata for a numpy array</p>
<h3 id="serialize_array"><code>def serialize_array</code></h3>
<div class="sourceCode" id="cb87"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb87-1"><a href="#cb87-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb87-2"><a href="#cb87-2" aria-hidden="true" tabindex="-1"></a>    jser: <span class="st">&quot;&#39;JsonSerializer&#39;&quot;</span>,</span>
<span id="cb87-3"><a href="#cb87-3" aria-hidden="true" tabindex="-1"></a>    arr: numpy.ndarray,</span>
<span id="cb87-4"><a href="#cb87-4" aria-hidden="true" tabindex="-1"></a>    path: Union[<span class="bu">str</span>, Sequence[<span class="bu">str</span> <span class="op">|</span> <span class="bu">int</span>]],</span>
<span id="cb87-5"><a href="#cb87-5" aria-hidden="true" tabindex="-1"></a>    array_mode: Optional[Literal[<span class="st">&#39;list&#39;</span>, <span class="st">&#39;array_list_meta&#39;</span>, <span class="st">&#39;array_hex_meta&#39;</span>, <span class="st">&#39;array_b64_meta&#39;</span>, <span class="st">&#39;external&#39;</span>, <span class="st">&#39;zero_dim&#39;</span>]] <span class="op">=</span> <span class="va">None</span></span>
<span id="cb87-6"><a href="#cb87-6" aria-hidden="true" tabindex="-1"></a>) <span class="op">-&gt;</span> Union[<span class="bu">bool</span>, <span class="bu">int</span>, <span class="bu">float</span>, <span class="bu">str</span>, NoneType, List[Union[<span class="bu">bool</span>, <span class="bu">int</span>, <span class="bu">float</span>, <span class="bu">str</span>, NoneType, List[Any], Dict[<span class="bu">str</span>, Any]]], Dict[<span class="bu">str</span>, Union[<span class="bu">bool</span>, <span class="bu">int</span>, <span class="bu">float</span>, <span class="bu">str</span>, NoneType, List[Any], Dict[<span class="bu">str</span>, Any]]]]</span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/json_serialize/array.py#L59-L133">View
Source on GitHub</a></p>
<p>serialize a numpy or pytorch array in one of several modes</p>
<p>if the object is zero-dimensional, simply get the unique item</p>
<p><code>array_mode: ArrayMode</code> can be one of: -
<code>list</code>: serialize as a list of values, no metadata
(equivalent to <code>arr.tolist()</code>) -
<code>array_list_meta</code>: serialize dict with metadata, actual list
under the key <code>data</code> - <code>array_hex_meta</code>: serialize
dict with metadata, actual hex string under the key <code>data</code> -
<code>array_b64_meta</code>: serialize dict with metadata, actual base64
string under the key <code>data</code></p>
<p>for <code>array_list_meta</code>, <code>array_hex_meta</code>, and
<code>array_b64_meta</code>, the serialized object is:</p>
<pre><code>{
    _FORMAT_KEY: &lt;array_list_meta|array_hex_meta&gt;,
    &quot;shape&quot;: arr.shape,
    &quot;dtype&quot;: str(arr.dtype),
    &quot;data&quot;: &lt;arr.tolist()|arr.tobytes().hex()|base64.b64encode(arr.tobytes()).decode()&gt;,
}</code></pre>
<h3 id="parameters-11">Parameters:</h3>
<ul>
<li><code>arr : Any</code> array to serialize</li>
<li><code>array_mode : ArrayMode</code> mode in which to serialize the
array (defaults to <code>None</code> and inheriting from
<code>jser: JsonSerializer</code>)</li>
</ul>
<h3 id="returns-8">Returns:</h3>
<ul>
<li><code>JSONitem</code> json serialized array</li>
</ul>
<h3 id="raises-7">Raises:</h3>
<ul>
<li><code>KeyError</code> : if the array mode is not valid</li>
</ul>
<h3 id="infer_array_mode"><code>def infer_array_mode</code></h3>
<div class="sourceCode" id="cb89"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb89-1"><a href="#cb89-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb89-2"><a href="#cb89-2" aria-hidden="true" tabindex="-1"></a>    arr: Union[<span class="bu">bool</span>, <span class="bu">int</span>, <span class="bu">float</span>, <span class="bu">str</span>, NoneType, List[Union[<span class="bu">bool</span>, <span class="bu">int</span>, <span class="bu">float</span>, <span class="bu">str</span>, NoneType, List[Any], Dict[<span class="bu">str</span>, Any]]], Dict[<span class="bu">str</span>, Union[<span class="bu">bool</span>, <span class="bu">int</span>, <span class="bu">float</span>, <span class="bu">str</span>, NoneType, List[Any], Dict[<span class="bu">str</span>, Any]]]]</span>
<span id="cb89-3"><a href="#cb89-3" aria-hidden="true" tabindex="-1"></a>) <span class="op">-&gt;</span> Literal[<span class="st">&#39;list&#39;</span>, <span class="st">&#39;array_list_meta&#39;</span>, <span class="st">&#39;array_hex_meta&#39;</span>, <span class="st">&#39;array_b64_meta&#39;</span>, <span class="st">&#39;external&#39;</span>, <span class="st">&#39;zero_dim&#39;</span>]</span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/json_serialize/array.py#L136-L164">View
Source on GitHub</a></p>
<p>given a serialized array, infer the mode</p>
<p>assumes the array was serialized via
<code>serialize_array()</code></p>
<h3 id="load_array"><code>def load_array</code></h3>
<div class="sourceCode" id="cb90"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb90-1"><a href="#cb90-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb90-2"><a href="#cb90-2" aria-hidden="true" tabindex="-1"></a>    arr: Union[<span class="bu">bool</span>, <span class="bu">int</span>, <span class="bu">float</span>, <span class="bu">str</span>, NoneType, List[Union[<span class="bu">bool</span>, <span class="bu">int</span>, <span class="bu">float</span>, <span class="bu">str</span>, NoneType, List[Any], Dict[<span class="bu">str</span>, Any]]], Dict[<span class="bu">str</span>, Union[<span class="bu">bool</span>, <span class="bu">int</span>, <span class="bu">float</span>, <span class="bu">str</span>, NoneType, List[Any], Dict[<span class="bu">str</span>, Any]]]],</span>
<span id="cb90-3"><a href="#cb90-3" aria-hidden="true" tabindex="-1"></a>    array_mode: Optional[Literal[<span class="st">&#39;list&#39;</span>, <span class="st">&#39;array_list_meta&#39;</span>, <span class="st">&#39;array_hex_meta&#39;</span>, <span class="st">&#39;array_b64_meta&#39;</span>, <span class="st">&#39;external&#39;</span>, <span class="st">&#39;zero_dim&#39;</span>]] <span class="op">=</span> <span class="va">None</span></span>
<span id="cb90-4"><a href="#cb90-4" aria-hidden="true" tabindex="-1"></a>) <span class="op">-&gt;</span> Any</span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/json_serialize/array.py#L167-L226">View
Source on GitHub</a></p>
<p>load a json-serialized array, infer the mode if not specified</p>
<blockquote>
<p>docs for <a
href="https://github.com/mivanit/muutils"><code>muutils</code></a>
v0.8.6</p>
</blockquote>
<h2 id="contents-8">Contents</h2>
<p>provides the basic framework for json serialization of objects</p>
<p>notably:</p>
<ul>
<li><code>SerializerHandler</code> defines how to serialize a specific
type of object</li>
<li><code>JsonSerializer</code> handles configuration for which handlers
to use</li>
<li><code>json_serialize</code> provides the default configuration if
you don’t care – call it on any object!</li>
</ul>
<h2 id="api-documentation-8">API Documentation</h2>
<ul>
<li><a
href="#SERIALIZER_SPECIAL_KEYS"><code>SERIALIZER_SPECIAL_KEYS</code></a></li>
<li><a
href="#SERIALIZER_SPECIAL_FUNCS"><code>SERIALIZER_SPECIAL_FUNCS</code></a></li>
<li><a
href="#SERIALIZE_DIRECT_AS_STR"><code>SERIALIZE_DIRECT_AS_STR</code></a></li>
<li><a href="#ObjectPath"><code>ObjectPath</code></a></li>
<li><a href="#SerializerHandler"><code>SerializerHandler</code></a></li>
<li><a href="#BASE_HANDLERS"><code>BASE_HANDLERS</code></a></li>
<li><a href="#DEFAULT_HANDLERS"><code>DEFAULT_HANDLERS</code></a></li>
<li><a href="#JsonSerializer"><code>JsonSerializer</code></a></li>
<li><a
href="#GLOBAL_JSON_SERIALIZER"><code>GLOBAL_JSON_SERIALIZER</code></a></li>
<li><a href="#json_serialize"><code>json_serialize</code></a></li>
</ul>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/json_serialize/json_serialize.py">View
Source on GitHub</a></p>
<h1
id="muutils.json_serialize.json_serialize"><code>muutils.json_serialize.json_serialize</code></h1>
<p>provides the basic framework for json serialization of objects</p>
<p>notably:</p>
<ul>
<li><code>SerializerHandler</code> defines how to serialize a specific
type of object</li>
<li><code>JsonSerializer</code> handles configuration for which handlers
to use</li>
<li><code>json_serialize</code> provides the default configuration if
you don’t care – call it on any object!</li>
</ul>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/json_serialize/json_serialize.py#L0-L332">View
Source on GitHub</a></p>
<ul>
<li><p><code>SERIALIZER_SPECIAL_KEYS: None = ('__name__', '__doc__', '__module__', '__class__', '__dict__', '__annotations__')</code></p></li>
<li><p><code>SERIALIZER_SPECIAL_FUNCS: dict[str, typing.Callable] = {'str': &lt;class 'str'&gt;, 'dir': &lt;built-in function dir&gt;, 'type': &lt;function &lt;lambda&gt;&gt;, 'repr': &lt;function &lt;lambda&gt;&gt;, 'code': &lt;function &lt;lambda&gt;&gt;, 'sourcefile': &lt;function &lt;lambda&gt;&gt;}</code></p></li>
<li><p><code>SERIALIZE_DIRECT_AS_STR: Set[str] = {"&lt;class 'torch.device'&gt;", "&lt;class 'torch.dtype'&gt;"}</code></p></li>
<li><p><code>ObjectPath = tuple[typing.Union[str, int], ...]</code></p></li>
</ul>
<h3 id="SerializerHandler"><code>class SerializerHandler:</code></h3>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/json_serialize/json_serialize.py#L72-L109">View
Source on GitHub</a></p>
<p>a handler for a specific type of object</p>
<h3 id="parameters-12">Parameters:</h3>
<pre><code>- `check : Callable[[JsonSerializer, Any], bool]` takes a JsonSerializer and an object, returns whether to use this handler
- `serialize : Callable[[JsonSerializer, Any, ObjectPath], JSONitem]` takes a JsonSerializer, an object, and the current path, returns the serialized object
- `desc : str` description of the handler (optional)</code></pre>
<h3 id="SerializerHandler.__init__"><code>SerializerHandler</code></h3>
<div class="sourceCode" id="cb92"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb92-1"><a href="#cb92-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb92-2"><a href="#cb92-2" aria-hidden="true" tabindex="-1"></a>    check: Callable[[muutils.json_serialize.json_serialize.JsonSerializer, Any, <span class="bu">tuple</span>[Union[<span class="bu">str</span>, <span class="bu">int</span>], ...]], <span class="bu">bool</span>],</span>
<span id="cb92-3"><a href="#cb92-3" aria-hidden="true" tabindex="-1"></a>    serialize_func: Callable[[muutils.json_serialize.json_serialize.JsonSerializer, Any, <span class="bu">tuple</span>[Union[<span class="bu">str</span>, <span class="bu">int</span>], ...]], Union[<span class="bu">bool</span>, <span class="bu">int</span>, <span class="bu">float</span>, <span class="bu">str</span>, NoneType, List[Union[<span class="bu">bool</span>, <span class="bu">int</span>, <span class="bu">float</span>, <span class="bu">str</span>, NoneType, List[Any], Dict[<span class="bu">str</span>, Any]]], Dict[<span class="bu">str</span>, Union[<span class="bu">bool</span>, <span class="bu">int</span>, <span class="bu">float</span>, <span class="bu">str</span>, NoneType, List[Any], Dict[<span class="bu">str</span>, Any]]]]],</span>
<span id="cb92-4"><a href="#cb92-4" aria-hidden="true" tabindex="-1"></a>    uid: <span class="bu">str</span>,</span>
<span id="cb92-5"><a href="#cb92-5" aria-hidden="true" tabindex="-1"></a>    desc: <span class="bu">str</span></span>
<span id="cb92-6"><a href="#cb92-6" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<ul>
<li><p><code>check: Callable[[muutils.json_serialize.json_serialize.JsonSerializer, Any, tuple[Union[str, int], ...]], bool]</code></p></li>
<li><p><code>serialize_func: Callable[[muutils.json_serialize.json_serialize.JsonSerializer, Any, tuple[Union[str, int], ...]], Union[bool, int, float, str, NoneType, List[Union[bool, int, float, str, NoneType, List[Any], Dict[str, Any]]], Dict[str, Union[bool, int, float, str, NoneType, List[Any], Dict[str, Any]]]]]</code></p></li>
<li><p><code>uid: str</code></p></li>
<li><p><code>desc: str</code></p></li>
</ul>
<h3 id="SerializerHandler.serialize"><code>def serialize</code></h3>
<div class="sourceCode" id="cb93"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb93-1"><a href="#cb93-1" aria-hidden="true" tabindex="-1"></a>(<span class="va">self</span>) <span class="op">-&gt;</span> <span class="bu">dict</span></span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/json_serialize/json_serialize.py#L91-L109">View
Source on GitHub</a></p>
<p>serialize the handler info</p>
<ul>
<li><p><code>BASE_HANDLERS: None = (SerializerHandler(check=&lt;function &lt;lambda&gt;&gt;, serialize_func=&lt;function &lt;lambda&gt;&gt;, uid='base types', desc='base types (bool, int, float, str, None)'), SerializerHandler(check=&lt;function &lt;lambda&gt;&gt;, serialize_func=&lt;function &lt;lambda&gt;&gt;, uid='dictionaries', desc='dictionaries'), SerializerHandler(check=&lt;function &lt;lambda&gt;&gt;, serialize_func=&lt;function &lt;lambda&gt;&gt;, uid='(list, tuple) -&gt; list', desc='lists and tuples as lists'))</code></p></li>
<li><p><code>DEFAULT_HANDLERS: None = (SerializerHandler(check=&lt;function &lt;lambda&gt;&gt;, serialize_func=&lt;function &lt;lambda&gt;&gt;, uid='base types', desc='base types (bool, int, float, str, None)'), SerializerHandler(check=&lt;function &lt;lambda&gt;&gt;, serialize_func=&lt;function &lt;lambda&gt;&gt;, uid='dictionaries', desc='dictionaries'), SerializerHandler(check=&lt;function &lt;lambda&gt;&gt;, serialize_func=&lt;function &lt;lambda&gt;&gt;, uid='(list, tuple) -&gt; list', desc='lists and tuples as lists'), SerializerHandler(check=&lt;function &lt;lambda&gt;&gt;, serialize_func=&lt;function _serialize_override_serialize_func&gt;, uid='.serialize override', desc='objects with .serialize method'), SerializerHandler(check=&lt;function &lt;lambda&gt;&gt;, serialize_func=&lt;function &lt;lambda&gt;&gt;, uid='namedtuple -&gt; dict', desc='namedtuples as dicts'), SerializerHandler(check=&lt;function &lt;lambda&gt;&gt;, serialize_func=&lt;function &lt;lambda&gt;&gt;, uid='dataclass -&gt; dict', desc='dataclasses as dicts'), SerializerHandler(check=&lt;function &lt;lambda&gt;&gt;, serialize_func=&lt;function &lt;lambda&gt;&gt;, uid='path -&gt; str', desc='Path objects as posix strings'), SerializerHandler(check=&lt;function &lt;lambda&gt;&gt;, serialize_func=&lt;function &lt;lambda&gt;&gt;, uid='obj -&gt; str(obj)', desc='directly serialize objects in</code>SERIALIZE_DIRECT_AS_STR<code>to strings'), SerializerHandler(check=&lt;function &lt;lambda&gt;&gt;, serialize_func=&lt;function &lt;lambda&gt;&gt;, uid='numpy.ndarray', desc='numpy arrays'), SerializerHandler(check=&lt;function &lt;lambda&gt;&gt;, serialize_func=&lt;function &lt;lambda&gt;&gt;, uid='torch.Tensor', desc='pytorch tensors'), SerializerHandler(check=&lt;function &lt;lambda&gt;&gt;, serialize_func=&lt;function &lt;lambda&gt;&gt;, uid='pandas.DataFrame', desc='pandas DataFrames'), SerializerHandler(check=&lt;function &lt;lambda&gt;&gt;, serialize_func=&lt;function &lt;lambda&gt;&gt;, uid='(set, list, tuple, Iterable) -&gt; list', desc='sets, lists, tuples, and Iterables as lists'), SerializerHandler(check=&lt;function &lt;lambda&gt;&gt;, serialize_func=&lt;function &lt;lambda&gt;&gt;, uid='fallback', desc='fallback handler -- serialize object attributes and special functions as strings'))</code></p></li>
</ul>
<h3 id="JsonSerializer"><code>class JsonSerializer:</code></h3>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/json_serialize/json_serialize.py#L235-L325">View
Source on GitHub</a></p>
<p>Json serialization class (holds configs)</p>
<h3 id="parameters-13">Parameters:</h3>
<ul>
<li><code>array_mode : ArrayMode</code> how to write arrays (defaults to
<code>"array_list_meta"</code>)</li>
<li><code>error_mode : ErrorMode</code> what to do when we can’t
serialize an object (will use repr as fallback if “ignore” or “warn”)
(defaults to <code>"except"</code>)</li>
<li><code>handlers_pre : MonoTuple[SerializerHandler]</code> handlers to
use before the default handlers (defaults to <code>tuple()</code>)</li>
<li><code>handlers_default : MonoTuple[SerializerHandler]</code> default
handlers to use (defaults to <code>DEFAULT_HANDLERS</code>)</li>
<li><code>write_only_format : bool</code> changes _FORMAT_KEY keys in
output to “<strong>write_format</strong>” (when you want to serialize
something in a way that zanj won’t try to recover the object when
loading) (defaults to <code>False</code>)</li>
</ul>
<h3 id="raises-8">Raises:</h3>
<ul>
<li><code>ValueError</code>: on init, if <code>args</code> is not
empty</li>
<li><code>SerializationException</code>: on
<code>json_serialize()</code>, if any error occurs when trying to
serialize an object and <code>error_mode</code> is set to
<code>ErrorMode.EXCEPT"</code></li>
</ul>
<h3 id="JsonSerializer.__init__"><code>JsonSerializer</code></h3>
<div class="sourceCode" id="cb94"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb94-1"><a href="#cb94-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb94-2"><a href="#cb94-2" aria-hidden="true" tabindex="-1"></a>    <span class="op">*</span>args,</span>
<span id="cb94-3"><a href="#cb94-3" aria-hidden="true" tabindex="-1"></a>    array_mode: Literal[<span class="st">&#39;list&#39;</span>, <span class="st">&#39;array_list_meta&#39;</span>, <span class="st">&#39;array_hex_meta&#39;</span>, <span class="st">&#39;array_b64_meta&#39;</span>, <span class="st">&#39;external&#39;</span>, <span class="st">&#39;zero_dim&#39;</span>] <span class="op">=</span> <span class="st">&#39;array_list_meta&#39;</span>,</span>
<span id="cb94-4"><a href="#cb94-4" aria-hidden="true" tabindex="-1"></a>    error_mode: muutils.errormode.ErrorMode <span class="op">=</span> ErrorMode.Except,</span>
<span id="cb94-5"><a href="#cb94-5" aria-hidden="true" tabindex="-1"></a>    handlers_pre: <span class="va">None</span> <span class="op">=</span> (),</span>
<span id="cb94-6"><a href="#cb94-6" aria-hidden="true" tabindex="-1"></a>    handlers_default: <span class="va">None</span> <span class="op">=</span> (SerializerHandler(check<span class="op">=&lt;</span>function <span class="op">&lt;</span><span class="kw">lambda</span><span class="op">&gt;&gt;</span>, serialize_func<span class="op">=&lt;</span>function <span class="op">&lt;</span><span class="kw">lambda</span><span class="op">&gt;&gt;</span>, uid<span class="op">=</span><span class="st">&#39;base types&#39;</span>, desc<span class="op">=</span><span class="st">&#39;base types (bool, int, float, str, None)&#39;</span>), SerializerHandler(check<span class="op">=&lt;</span>function <span class="op">&lt;</span><span class="kw">lambda</span><span class="op">&gt;&gt;</span>, serialize_func<span class="op">=&lt;</span>function <span class="op">&lt;</span><span class="kw">lambda</span><span class="op">&gt;&gt;</span>, uid<span class="op">=</span><span class="st">&#39;dictionaries&#39;</span>, desc<span class="op">=</span><span class="st">&#39;dictionaries&#39;</span>), SerializerHandler(check<span class="op">=&lt;</span>function <span class="op">&lt;</span><span class="kw">lambda</span><span class="op">&gt;&gt;</span>, serialize_func<span class="op">=&lt;</span>function <span class="op">&lt;</span><span class="kw">lambda</span><span class="op">&gt;&gt;</span>, uid<span class="op">=</span><span class="st">&#39;(list, tuple) -&gt; list&#39;</span>, desc<span class="op">=</span><span class="st">&#39;lists and tuples as lists&#39;</span>), SerializerHandler(check<span class="op">=&lt;</span>function <span class="op">&lt;</span><span class="kw">lambda</span><span class="op">&gt;&gt;</span>, serialize_func<span class="op">=&lt;</span>function _serialize_override_serialize_func<span class="op">&gt;</span>, uid<span class="op">=</span><span class="st">&#39;.serialize override&#39;</span>, desc<span class="op">=</span><span class="st">&#39;objects with .serialize method&#39;</span>), SerializerHandler(check<span class="op">=&lt;</span>function <span class="op">&lt;</span><span class="kw">lambda</span><span class="op">&gt;&gt;</span>, serialize_func<span class="op">=&lt;</span>function <span class="op">&lt;</span><span class="kw">lambda</span><span class="op">&gt;&gt;</span>, uid<span class="op">=</span><span class="st">&#39;namedtuple -&gt; dict&#39;</span>, desc<span class="op">=</span><span class="st">&#39;namedtuples as dicts&#39;</span>), SerializerHandler(check<span class="op">=&lt;</span>function <span class="op">&lt;</span><span class="kw">lambda</span><span class="op">&gt;&gt;</span>, serialize_func<span class="op">=&lt;</span>function <span class="op">&lt;</span><span class="kw">lambda</span><span class="op">&gt;&gt;</span>, uid<span class="op">=</span><span class="st">&#39;dataclass -&gt; dict&#39;</span>, desc<span class="op">=</span><span class="st">&#39;dataclasses as dicts&#39;</span>), SerializerHandler(check<span class="op">=&lt;</span>function <span class="op">&lt;</span><span class="kw">lambda</span><span class="op">&gt;&gt;</span>, serialize_func<span class="op">=&lt;</span>function <span class="op">&lt;</span><span class="kw">lambda</span><span class="op">&gt;&gt;</span>, uid<span class="op">=</span><span class="st">&#39;path -&gt; str&#39;</span>, desc<span class="op">=</span><span class="st">&#39;Path objects as posix strings&#39;</span>), SerializerHandler(check<span class="op">=&lt;</span>function <span class="op">&lt;</span><span class="kw">lambda</span><span class="op">&gt;&gt;</span>, serialize_func<span class="op">=&lt;</span>function <span class="op">&lt;</span><span class="kw">lambda</span><span class="op">&gt;&gt;</span>, uid<span class="op">=</span><span class="st">&#39;obj -&gt; str(obj)&#39;</span>, desc<span class="op">=</span><span class="st">&#39;directly serialize objects in `SERIALIZE_DIRECT_AS_STR` to strings&#39;</span>), SerializerHandler(check<span class="op">=&lt;</span>function <span class="op">&lt;</span><span class="kw">lambda</span><span class="op">&gt;&gt;</span>, serialize_func<span class="op">=&lt;</span>function <span class="op">&lt;</span><span class="kw">lambda</span><span class="op">&gt;&gt;</span>, uid<span class="op">=</span><span class="st">&#39;numpy.ndarray&#39;</span>, desc<span class="op">=</span><span class="st">&#39;numpy arrays&#39;</span>), SerializerHandler(check<span class="op">=&lt;</span>function <span class="op">&lt;</span><span class="kw">lambda</span><span class="op">&gt;&gt;</span>, serialize_func<span class="op">=&lt;</span>function <span class="op">&lt;</span><span class="kw">lambda</span><span class="op">&gt;&gt;</span>, uid<span class="op">=</span><span class="st">&#39;torch.Tensor&#39;</span>, desc<span class="op">=</span><span class="st">&#39;pytorch tensors&#39;</span>), SerializerHandler(check<span class="op">=&lt;</span>function <span class="op">&lt;</span><span class="kw">lambda</span><span class="op">&gt;&gt;</span>, serialize_func<span class="op">=&lt;</span>function <span class="op">&lt;</span><span class="kw">lambda</span><span class="op">&gt;&gt;</span>, uid<span class="op">=</span><span class="st">&#39;pandas.DataFrame&#39;</span>, desc<span class="op">=</span><span class="st">&#39;pandas DataFrames&#39;</span>), SerializerHandler(check<span class="op">=&lt;</span>function <span class="op">&lt;</span><span class="kw">lambda</span><span class="op">&gt;&gt;</span>, serialize_func<span class="op">=&lt;</span>function <span class="op">&lt;</span><span class="kw">lambda</span><span class="op">&gt;&gt;</span>, uid<span class="op">=</span><span class="st">&#39;(set, list, tuple, Iterable) -&gt; list&#39;</span>, desc<span class="op">=</span><span class="st">&#39;sets, lists, tuples, and Iterables as lists&#39;</span>), SerializerHandler(check<span class="op">=&lt;</span>function <span class="op">&lt;</span><span class="kw">lambda</span><span class="op">&gt;&gt;</span>, serialize_func<span class="op">=&lt;</span>function <span class="op">&lt;</span><span class="kw">lambda</span><span class="op">&gt;&gt;</span>, uid<span class="op">=</span><span class="st">&#39;fallback&#39;</span>, desc<span class="op">=</span><span class="st">&#39;fallback handler -- serialize object attributes and special functions as strings&#39;</span>)),</span>
<span id="cb94-7"><a href="#cb94-7" aria-hidden="true" tabindex="-1"></a>    write_only_format: <span class="bu">bool</span> <span class="op">=</span> <span class="va">False</span></span>
<span id="cb94-8"><a href="#cb94-8" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/json_serialize/json_serialize.py#L261-L281">View
Source on GitHub</a></p>
<ul>
<li><p><code>array_mode: Literal['list', 'array_list_meta', 'array_hex_meta', 'array_b64_meta', 'external', 'zero_dim']</code></p></li>
<li><p><code>error_mode: muutils.errormode.ErrorMode</code></p></li>
<li><p><code>write_only_format: bool</code></p></li>
<li><p><code>handlers: None</code></p></li>
</ul>
<h3
id="JsonSerializer.json_serialize"><code>def json_serialize</code></h3>
<div class="sourceCode" id="cb95"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb95-1"><a href="#cb95-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb95-2"><a href="#cb95-2" aria-hidden="true" tabindex="-1"></a>    <span class="va">self</span>,</span>
<span id="cb95-3"><a href="#cb95-3" aria-hidden="true" tabindex="-1"></a>    obj: Any,</span>
<span id="cb95-4"><a href="#cb95-4" aria-hidden="true" tabindex="-1"></a>    path: <span class="bu">tuple</span>[typing.Union[<span class="bu">str</span>, <span class="bu">int</span>], ...] <span class="op">=</span> ()</span>
<span id="cb95-5"><a href="#cb95-5" aria-hidden="true" tabindex="-1"></a>) <span class="op">-&gt;</span> Union[<span class="bu">bool</span>, <span class="bu">int</span>, <span class="bu">float</span>, <span class="bu">str</span>, NoneType, List[Union[<span class="bu">bool</span>, <span class="bu">int</span>, <span class="bu">float</span>, <span class="bu">str</span>, NoneType, List[Any], Dict[<span class="bu">str</span>, Any]]], Dict[<span class="bu">str</span>, Union[<span class="bu">bool</span>, <span class="bu">int</span>, <span class="bu">float</span>, <span class="bu">str</span>, NoneType, List[Any], Dict[<span class="bu">str</span>, Any]]]]</span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/json_serialize/json_serialize.py#L283-L313">View
Source on GitHub</a></p>
<h3 id="JsonSerializer.hashify"><code>def hashify</code></h3>
<div class="sourceCode" id="cb96"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb96-1"><a href="#cb96-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb96-2"><a href="#cb96-2" aria-hidden="true" tabindex="-1"></a>    <span class="va">self</span>,</span>
<span id="cb96-3"><a href="#cb96-3" aria-hidden="true" tabindex="-1"></a>    obj: Any,</span>
<span id="cb96-4"><a href="#cb96-4" aria-hidden="true" tabindex="-1"></a>    path: <span class="bu">tuple</span>[typing.Union[<span class="bu">str</span>, <span class="bu">int</span>], ...] <span class="op">=</span> (),</span>
<span id="cb96-5"><a href="#cb96-5" aria-hidden="true" tabindex="-1"></a>    force: <span class="bu">bool</span> <span class="op">=</span> <span class="va">True</span></span>
<span id="cb96-6"><a href="#cb96-6" aria-hidden="true" tabindex="-1"></a>) <span class="op">-&gt;</span> Union[<span class="bu">bool</span>, <span class="bu">int</span>, <span class="bu">float</span>, <span class="bu">str</span>, <span class="bu">tuple</span>]</span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/json_serialize/json_serialize.py#L315-L325">View
Source on GitHub</a></p>
<p>try to turn any object into something hashable</p>
<ul>
<li><code>GLOBAL_JSON_SERIALIZER: muutils.json_serialize.json_serialize.JsonSerializer = &lt;muutils.json_serialize.json_serialize.JsonSerializer object&gt;</code></li>
</ul>
<h3 id="json_serialize"><code>def json_serialize</code></h3>
<div class="sourceCode" id="cb97"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb97-1"><a href="#cb97-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb97-2"><a href="#cb97-2" aria-hidden="true" tabindex="-1"></a>    obj: Any,</span>
<span id="cb97-3"><a href="#cb97-3" aria-hidden="true" tabindex="-1"></a>    path: <span class="bu">tuple</span>[typing.Union[<span class="bu">str</span>, <span class="bu">int</span>], ...] <span class="op">=</span> ()</span>
<span id="cb97-4"><a href="#cb97-4" aria-hidden="true" tabindex="-1"></a>) <span class="op">-&gt;</span> Union[<span class="bu">bool</span>, <span class="bu">int</span>, <span class="bu">float</span>, <span class="bu">str</span>, NoneType, List[Union[<span class="bu">bool</span>, <span class="bu">int</span>, <span class="bu">float</span>, <span class="bu">str</span>, NoneType, List[Any], Dict[<span class="bu">str</span>, Any]]], Dict[<span class="bu">str</span>, Union[<span class="bu">bool</span>, <span class="bu">int</span>, <span class="bu">float</span>, <span class="bu">str</span>, NoneType, List[Any], Dict[<span class="bu">str</span>, Any]]]]</span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/json_serialize/json_serialize.py#L331-L333">View
Source on GitHub</a></p>
<p>serialize object to json-serializable object with default config</p>
<blockquote>
<p>docs for <a
href="https://github.com/mivanit/muutils"><code>muutils</code></a>
v0.8.6</p>
</blockquote>
<h2 id="contents-9">Contents</h2>
<p>save and load objects to and from json or compatible formats in a
recoverable way</p>
<p><code>d = dataclasses.asdict(my_obj)</code> will give you a dict, but
if some fields are not json-serializable, you will get an error when you
call <code>json.dumps(d)</code>. This module provides a way around
that.</p>
<p>Instead, you define your class:</p>
<div class="sourceCode" id="cb98"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb98-1"><a href="#cb98-1" aria-hidden="true" tabindex="-1"></a><span class="at">@serializable_dataclass</span></span>
<span id="cb98-2"><a href="#cb98-2" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> MyClass(SerializableDataclass):</span>
<span id="cb98-3"><a href="#cb98-3" aria-hidden="true" tabindex="-1"></a>    a: <span class="bu">int</span></span>
<span id="cb98-4"><a href="#cb98-4" aria-hidden="true" tabindex="-1"></a>    b: <span class="bu">str</span></span></code></pre></div>
<p>and then you can call <code>my_obj.serialize()</code> to get a dict
that can be serialized to json. So, you can do:</p>
<pre><code>&gt;&gt;&gt; my_obj = MyClass(a=1, b=&quot;q&quot;)
&gt;&gt;&gt; s = json.dumps(my_obj.serialize())
&gt;&gt;&gt; s
&#39;{_FORMAT_KEY: &quot;MyClass(SerializableDataclass)&quot;, &quot;a&quot;: 1, &quot;b&quot;: &quot;q&quot;}&#39;
&gt;&gt;&gt; read_obj = MyClass.load(json.loads(s))
&gt;&gt;&gt; read_obj == my_obj
True</code></pre>
<p>This isn’t too impressive on its own, but it gets more useful when
you have nested classses, or fields that are not json-serializable by
default:</p>
<div class="sourceCode" id="cb100"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb100-1"><a href="#cb100-1" aria-hidden="true" tabindex="-1"></a><span class="at">@serializable_dataclass</span></span>
<span id="cb100-2"><a href="#cb100-2" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> NestedClass(SerializableDataclass):</span>
<span id="cb100-3"><a href="#cb100-3" aria-hidden="true" tabindex="-1"></a>    x: <span class="bu">str</span></span>
<span id="cb100-4"><a href="#cb100-4" aria-hidden="true" tabindex="-1"></a>    y: MyClass</span>
<span id="cb100-5"><a href="#cb100-5" aria-hidden="true" tabindex="-1"></a>    act_fun: torch.nn.Module <span class="op">=</span> serializable_field(</span>
<span id="cb100-6"><a href="#cb100-6" aria-hidden="true" tabindex="-1"></a>        default<span class="op">=</span>torch.nn.ReLU(),</span>
<span id="cb100-7"><a href="#cb100-7" aria-hidden="true" tabindex="-1"></a>        serialization_fn<span class="op">=</span><span class="kw">lambda</span> x: <span class="bu">str</span>(x),</span>
<span id="cb100-8"><a href="#cb100-8" aria-hidden="true" tabindex="-1"></a>        deserialize_fn<span class="op">=</span><span class="kw">lambda</span> x: <span class="bu">getattr</span>(torch.nn, x)(),</span>
<span id="cb100-9"><a href="#cb100-9" aria-hidden="true" tabindex="-1"></a>    )</span></code></pre></div>
<p>which gives us:</p>
<pre><code>&gt;&gt;&gt; nc = NestedClass(x=&quot;q&quot;, y=MyClass(a=1, b=&quot;q&quot;), act_fun=torch.nn.Sigmoid())
&gt;&gt;&gt; s = json.dumps(nc.serialize())
&gt;&gt;&gt; s
&#39;{_FORMAT_KEY: &quot;NestedClass(SerializableDataclass)&quot;, &quot;x&quot;: &quot;q&quot;, &quot;y&quot;: {_FORMAT_KEY: &quot;MyClass(SerializableDataclass)&quot;, &quot;a&quot;: 1, &quot;b&quot;: &quot;q&quot;}, &quot;act_fun&quot;: &quot;Sigmoid&quot;}&#39;
&gt;&gt;&gt; read_nc = NestedClass.load(json.loads(s))
&gt;&gt;&gt; read_nc == nc
True</code></pre>
<h2 id="api-documentation-9">API Documentation</h2>
<ul>
<li><a
href="#CantGetTypeHintsWarning"><code>CantGetTypeHintsWarning</code></a></li>
<li><a
href="#ZanjMissingWarning"><code>ZanjMissingWarning</code></a></li>
<li><a
href="#zanj_register_loader_serializable_dataclass"><code>zanj_register_loader_serializable_dataclass</code></a></li>
<li><a
href="#FieldIsNotInitOrSerializeWarning"><code>FieldIsNotInitOrSerializeWarning</code></a></li>
<li><a
href="#SerializableDataclass__validate_field_type"><code>SerializableDataclass__validate_field_type</code></a></li>
<li><a
href="#SerializableDataclass__validate_fields_types__dict"><code>SerializableDataclass__validate_fields_types__dict</code></a></li>
<li><a
href="#SerializableDataclass__validate_fields_types"><code>SerializableDataclass__validate_fields_types</code></a></li>
<li><a
href="#SerializableDataclass"><code>SerializableDataclass</code></a></li>
<li><a
href="#get_cls_type_hints_cached"><code>get_cls_type_hints_cached</code></a></li>
<li><a
href="#get_cls_type_hints"><code>get_cls_type_hints</code></a></li>
<li><a href="#KWOnlyError"><code>KWOnlyError</code></a></li>
<li><a href="#FieldError"><code>FieldError</code></a></li>
<li><a
href="#NotSerializableFieldException"><code>NotSerializableFieldException</code></a></li>
<li><a
href="#FieldSerializationError"><code>FieldSerializationError</code></a></li>
<li><a href="#FieldLoadingError"><code>FieldLoadingError</code></a></li>
<li><a
href="#FieldTypeMismatchError"><code>FieldTypeMismatchError</code></a></li>
<li><a
href="#serializable_dataclass"><code>serializable_dataclass</code></a></li>
</ul>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/json_serialize/serializable_dataclass.py">View
Source on GitHub</a></p>
<h1
id="muutils.json_serialize.serializable_dataclass"><code>muutils.json_serialize.serializable_dataclass</code></h1>
<p>save and load objects to and from json or compatible formats in a
recoverable way</p>
<p><code>d = dataclasses.asdict(my_obj)</code> will give you a dict, but
if some fields are not json-serializable, you will get an error when you
call <code>json.dumps(d)</code>. This module provides a way around
that.</p>
<p>Instead, you define your class:</p>
<div class="sourceCode" id="cb102"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb102-1"><a href="#cb102-1" aria-hidden="true" tabindex="-1"></a><span class="at">@serializable_dataclass</span></span>
<span id="cb102-2"><a href="#cb102-2" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> MyClass(SerializableDataclass):</span>
<span id="cb102-3"><a href="#cb102-3" aria-hidden="true" tabindex="-1"></a>    a: <span class="bu">int</span></span>
<span id="cb102-4"><a href="#cb102-4" aria-hidden="true" tabindex="-1"></a>    b: <span class="bu">str</span></span></code></pre></div>
<p>and then you can call <code>my_obj.serialize()</code> to get a dict
that can be serialized to json. So, you can do:</p>
<pre><code>&gt;&gt;&gt; my_obj = MyClass(a=1, b=&quot;q&quot;)
&gt;&gt;&gt; s = json.dumps(my_obj.serialize())
&gt;&gt;&gt; s
&#39;{_FORMAT_KEY: &quot;MyClass(SerializableDataclass)&quot;, &quot;a&quot;: 1, &quot;b&quot;: &quot;q&quot;}&#39;
&gt;&gt;&gt; read_obj = MyClass.load(json.loads(s))
&gt;&gt;&gt; read_obj == my_obj
True</code></pre>
<p>This isn’t too impressive on its own, but it gets more useful when
you have nested classses, or fields that are not json-serializable by
default:</p>
<div class="sourceCode" id="cb104"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb104-1"><a href="#cb104-1" aria-hidden="true" tabindex="-1"></a><span class="at">@serializable_dataclass</span></span>
<span id="cb104-2"><a href="#cb104-2" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> NestedClass(SerializableDataclass):</span>
<span id="cb104-3"><a href="#cb104-3" aria-hidden="true" tabindex="-1"></a>    x: <span class="bu">str</span></span>
<span id="cb104-4"><a href="#cb104-4" aria-hidden="true" tabindex="-1"></a>    y: MyClass</span>
<span id="cb104-5"><a href="#cb104-5" aria-hidden="true" tabindex="-1"></a>    act_fun: torch.nn.Module <span class="op">=</span> serializable_field(</span>
<span id="cb104-6"><a href="#cb104-6" aria-hidden="true" tabindex="-1"></a>        default<span class="op">=</span>torch.nn.ReLU(),</span>
<span id="cb104-7"><a href="#cb104-7" aria-hidden="true" tabindex="-1"></a>        serialization_fn<span class="op">=</span><span class="kw">lambda</span> x: <span class="bu">str</span>(x),</span>
<span id="cb104-8"><a href="#cb104-8" aria-hidden="true" tabindex="-1"></a>        deserialize_fn<span class="op">=</span><span class="kw">lambda</span> x: <span class="bu">getattr</span>(torch.nn, x)(),</span>
<span id="cb104-9"><a href="#cb104-9" aria-hidden="true" tabindex="-1"></a>    )</span></code></pre></div>
<p>which gives us:</p>
<pre><code>&gt;&gt;&gt; nc = NestedClass(x=&quot;q&quot;, y=MyClass(a=1, b=&quot;q&quot;), act_fun=torch.nn.Sigmoid())
&gt;&gt;&gt; s = json.dumps(nc.serialize())
&gt;&gt;&gt; s
&#39;{_FORMAT_KEY: &quot;NestedClass(SerializableDataclass)&quot;, &quot;x&quot;: &quot;q&quot;, &quot;y&quot;: {_FORMAT_KEY: &quot;MyClass(SerializableDataclass)&quot;, &quot;a&quot;: 1, &quot;b&quot;: &quot;q&quot;}, &quot;act_fun&quot;: &quot;Sigmoid&quot;}&#39;
&gt;&gt;&gt; read_nc = NestedClass.load(json.loads(s))
&gt;&gt;&gt; read_nc == nc
True</code></pre>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/json_serialize/serializable_dataclass.py#L0-L904">View
Source on GitHub</a></p>
<h3
id="CantGetTypeHintsWarning"><code>class CantGetTypeHintsWarning(builtins.UserWarning):</code></h3>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/json_serialize/serializable_dataclass.py#L87-L90">View
Source on GitHub</a></p>
<p>special warning for when we can’t get type hints</p>
<h3 id="inherited-members-4">Inherited Members</h3>
<ul>
<li><p><a
href="#CantGetTypeHintsWarning.__init__"><code>UserWarning</code></a></p></li>
<li><p><a
href="#CantGetTypeHintsWarning.with_traceback"><code>with_traceback</code></a></p></li>
<li><p><a
href="#CantGetTypeHintsWarning.add_note"><code>add_note</code></a></p></li>
<li><p><a
href="#CantGetTypeHintsWarning.args"><code>args</code></a></p></li>
</ul>
<h3
id="ZanjMissingWarning"><code>class ZanjMissingWarning(builtins.UserWarning):</code></h3>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/json_serialize/serializable_dataclass.py#L93-L96">View
Source on GitHub</a></p>
<p>special warning for when <a
href="https://github.com/mivanit/ZANJ"><code>ZANJ</code></a> is missing
– <code>register_loader_serializable_dataclass</code> will not work</p>
<h3 id="inherited-members-5">Inherited Members</h3>
<ul>
<li><p><a
href="#ZanjMissingWarning.__init__"><code>UserWarning</code></a></p></li>
<li><p><a
href="#ZanjMissingWarning.with_traceback"><code>with_traceback</code></a></p></li>
<li><p><a
href="#ZanjMissingWarning.add_note"><code>add_note</code></a></p></li>
<li><p><a href="#ZanjMissingWarning.args"><code>args</code></a></p></li>
</ul>
<h3
id="zanj_register_loader_serializable_dataclass"><code>def zanj_register_loader_serializable_dataclass</code></h3>
<div class="sourceCode" id="cb106"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb106-1"><a href="#cb106-1" aria-hidden="true" tabindex="-1"></a>(cls: Type[<span class="op">~</span>T])</span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/json_serialize/serializable_dataclass.py#L103-L142">View
Source on GitHub</a></p>
<p>Register a serializable dataclass with the ZANJ import</p>
<p>this allows <code>ZANJ().read()</code> to load the class and not just
return plain dicts</p>
<h3
id="todo-there-is-some-duplication-here-with-register_loader_handler">TODO:
there is some duplication here with register_loader_handler</h3>
<h3
id="FieldIsNotInitOrSerializeWarning"><code>class FieldIsNotInitOrSerializeWarning(builtins.UserWarning):</code></h3>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/json_serialize/serializable_dataclass.py#L149-L150">View
Source on GitHub</a></p>
<p>Base class for warnings generated by user code.</p>
<h3 id="inherited-members-6">Inherited Members</h3>
<ul>
<li><p><a
href="#FieldIsNotInitOrSerializeWarning.__init__"><code>UserWarning</code></a></p></li>
<li><p><a
href="#FieldIsNotInitOrSerializeWarning.with_traceback"><code>with_traceback</code></a></p></li>
<li><p><a
href="#FieldIsNotInitOrSerializeWarning.add_note"><code>add_note</code></a></p></li>
<li><p><a
href="#FieldIsNotInitOrSerializeWarning.args"><code>args</code></a></p></li>
</ul>
<h3
id="SerializableDataclass__validate_field_type"><code>def SerializableDataclass__validate_field_type</code></h3>
<div class="sourceCode" id="cb107"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb107-1"><a href="#cb107-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb107-2"><a href="#cb107-2" aria-hidden="true" tabindex="-1"></a>    <span class="va">self</span>: muutils.json_serialize.serializable_dataclass.SerializableDataclass,</span>
<span id="cb107-3"><a href="#cb107-3" aria-hidden="true" tabindex="-1"></a>    field: muutils.json_serialize.serializable_field.SerializableField <span class="op">|</span> <span class="bu">str</span>,</span>
<span id="cb107-4"><a href="#cb107-4" aria-hidden="true" tabindex="-1"></a>    on_typecheck_error: muutils.errormode.ErrorMode <span class="op">=</span> ErrorMode.Except</span>
<span id="cb107-5"><a href="#cb107-5" aria-hidden="true" tabindex="-1"></a>) <span class="op">-&gt;</span> <span class="bu">bool</span></span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/json_serialize/serializable_dataclass.py#L153-L242">View
Source on GitHub</a></p>
<p>given a dataclass, check the field matches the type hint</p>
<p>this function is written to
<code>&lt;a href="#SerializableDataclass.validate_field_type"&gt;SerializableDataclass.validate_field_type&lt;/a&gt;</code></p>
<h3 id="parameters-14">Parameters:</h3>
<ul>
<li><code>self : SerializableDataclass</code>
<code>SerializableDataclass</code> instance</li>
<li><code>field : SerializableField | str</code> field to validate, will
get from <code>self.__dataclass_fields__</code> if an
<code>str</code></li>
<li><code>on_typecheck_error : ErrorMode</code> what to do if type
checking throws an exception (except, warn, ignore). If
<code>ignore</code> and an exception is thrown, the function will return
<code>False</code> (defaults to
<code>_DEFAULT_ON_TYPECHECK_ERROR</code>)</li>
</ul>
<h3 id="returns-9">Returns:</h3>
<ul>
<li><code>bool</code> if the field type is correct. <code>False</code>
if the field type is incorrect or an exception is thrown and
<code>on_typecheck_error</code> is <code>ignore</code></li>
</ul>
<h3
id="SerializableDataclass__validate_fields_types__dict"><code>def SerializableDataclass__validate_fields_types__dict</code></h3>
<div class="sourceCode" id="cb108"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb108-1"><a href="#cb108-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb108-2"><a href="#cb108-2" aria-hidden="true" tabindex="-1"></a>    <span class="va">self</span>: muutils.json_serialize.serializable_dataclass.SerializableDataclass,</span>
<span id="cb108-3"><a href="#cb108-3" aria-hidden="true" tabindex="-1"></a>    on_typecheck_error: muutils.errormode.ErrorMode <span class="op">=</span> ErrorMode.Except</span>
<span id="cb108-4"><a href="#cb108-4" aria-hidden="true" tabindex="-1"></a>) <span class="op">-&gt;</span> <span class="bu">dict</span>[<span class="bu">str</span>, <span class="bu">bool</span>]</span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/json_serialize/serializable_dataclass.py#L245-L279">View
Source on GitHub</a></p>
<p>validate the types of all the fields on a
<code>SerializableDataclass</code>. calls
<code>SerializableDataclass__validate_field_type</code> for each
field</p>
<p>returns a dict of field names to bools, where the bool is if the
field type is valid</p>
<h3
id="SerializableDataclass__validate_fields_types"><code>def SerializableDataclass__validate_fields_types</code></h3>
<div class="sourceCode" id="cb109"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb109-1"><a href="#cb109-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb109-2"><a href="#cb109-2" aria-hidden="true" tabindex="-1"></a>    <span class="va">self</span>: muutils.json_serialize.serializable_dataclass.SerializableDataclass,</span>
<span id="cb109-3"><a href="#cb109-3" aria-hidden="true" tabindex="-1"></a>    on_typecheck_error: muutils.errormode.ErrorMode <span class="op">=</span> ErrorMode.Except</span>
<span id="cb109-4"><a href="#cb109-4" aria-hidden="true" tabindex="-1"></a>) <span class="op">-&gt;</span> <span class="bu">bool</span></span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/json_serialize/serializable_dataclass.py#L282-L291">View
Source on GitHub</a></p>
<p>validate the types of all the fields on a
<code>SerializableDataclass</code>. calls
<code>SerializableDataclass__validate_field_type</code> for each
field</p>
<h3
id="SerializableDataclass"><code>class SerializableDataclass(abc.ABC):</code></h3>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/json_serialize/serializable_dataclass.py#L294-L490">View
Source on GitHub</a></p>
<p>Base class for serializable dataclasses</p>
<p>only for linting and type checking, still need to call
<code>serializable_dataclass</code> decorator</p>
<h3 id="usage-2">Usage:</h3>
<div class="sourceCode" id="cb110"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb110-1"><a href="#cb110-1" aria-hidden="true" tabindex="-1"></a><span class="at">@serializable_dataclass</span></span>
<span id="cb110-2"><a href="#cb110-2" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> MyClass(SerializableDataclass):</span>
<span id="cb110-3"><a href="#cb110-3" aria-hidden="true" tabindex="-1"></a>    a: <span class="bu">int</span></span>
<span id="cb110-4"><a href="#cb110-4" aria-hidden="true" tabindex="-1"></a>    b: <span class="bu">str</span></span></code></pre></div>
<p>and then you can call <code>my_obj.serialize()</code> to get a dict
that can be serialized to json. So, you can do:</p>
<pre><code>&gt;&gt;&gt; my_obj = MyClass(a=1, b=&quot;q&quot;)
&gt;&gt;&gt; s = json.dumps(my_obj.serialize())
&gt;&gt;&gt; s
&#39;{_FORMAT_KEY: &quot;MyClass(SerializableDataclass)&quot;, &quot;a&quot;: 1, &quot;b&quot;: &quot;q&quot;}&#39;
&gt;&gt;&gt; read_obj = MyClass.load(json.loads(s))
&gt;&gt;&gt; read_obj == my_obj
True</code></pre>
<p>This isn’t too impressive on its own, but it gets more useful when
you have nested classses, or fields that are not json-serializable by
default:</p>
<div class="sourceCode" id="cb112"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb112-1"><a href="#cb112-1" aria-hidden="true" tabindex="-1"></a><span class="at">@serializable_dataclass</span></span>
<span id="cb112-2"><a href="#cb112-2" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> NestedClass(SerializableDataclass):</span>
<span id="cb112-3"><a href="#cb112-3" aria-hidden="true" tabindex="-1"></a>    x: <span class="bu">str</span></span>
<span id="cb112-4"><a href="#cb112-4" aria-hidden="true" tabindex="-1"></a>    y: MyClass</span>
<span id="cb112-5"><a href="#cb112-5" aria-hidden="true" tabindex="-1"></a>    act_fun: torch.nn.Module <span class="op">=</span> serializable_field(</span>
<span id="cb112-6"><a href="#cb112-6" aria-hidden="true" tabindex="-1"></a>        default<span class="op">=</span>torch.nn.ReLU(),</span>
<span id="cb112-7"><a href="#cb112-7" aria-hidden="true" tabindex="-1"></a>        serialization_fn<span class="op">=</span><span class="kw">lambda</span> x: <span class="bu">str</span>(x),</span>
<span id="cb112-8"><a href="#cb112-8" aria-hidden="true" tabindex="-1"></a>        deserialize_fn<span class="op">=</span><span class="kw">lambda</span> x: <span class="bu">getattr</span>(torch.nn, x)(),</span>
<span id="cb112-9"><a href="#cb112-9" aria-hidden="true" tabindex="-1"></a>    )</span></code></pre></div>
<p>which gives us:</p>
<pre><code>&gt;&gt;&gt; nc = NestedClass(x=&quot;q&quot;, y=MyClass(a=1, b=&quot;q&quot;), act_fun=torch.nn.Sigmoid())
&gt;&gt;&gt; s = json.dumps(nc.serialize())
&gt;&gt;&gt; s
&#39;{_FORMAT_KEY: &quot;NestedClass(SerializableDataclass)&quot;, &quot;x&quot;: &quot;q&quot;, &quot;y&quot;: {_FORMAT_KEY: &quot;MyClass(SerializableDataclass)&quot;, &quot;a&quot;: 1, &quot;b&quot;: &quot;q&quot;}, &quot;act_fun&quot;: &quot;Sigmoid&quot;}&#39;
&gt;&gt;&gt; read_nc = NestedClass.load(json.loads(s))
&gt;&gt;&gt; read_nc == nc
True</code></pre>
<h3 id="SerializableDataclass.serialize"><code>def serialize</code></h3>
<div class="sourceCode" id="cb114"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb114-1"><a href="#cb114-1" aria-hidden="true" tabindex="-1"></a>(<span class="va">self</span>) <span class="op">-&gt;</span> <span class="bu">dict</span>[<span class="bu">str</span>, typing.Any]</span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/json_serialize/serializable_dataclass.py#L347-L351">View
Source on GitHub</a></p>
<p>returns the class as a dict, implemented by using
<code>@serializable_dataclass</code> decorator</p>
<h3 id="SerializableDataclass.load"><code>def load</code></h3>
<div class="sourceCode" id="cb115"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb115-1"><a href="#cb115-1" aria-hidden="true" tabindex="-1"></a>(cls: Type[<span class="op">~</span>T], data: Union[<span class="bu">dict</span>[<span class="bu">str</span>, Any], <span class="op">~</span>T]) <span class="op">-&gt;</span> <span class="op">~</span>T</span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/json_serialize/serializable_dataclass.py#L353-L356">View
Source on GitHub</a></p>
<p>takes in an appropriately structured dict and returns an instance of
the class, implemented by using <code>@serializable_dataclass</code>
decorator</p>
<h3
id="SerializableDataclass.validate_fields_types"><code>def validate_fields_types</code></h3>
<div class="sourceCode" id="cb116"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb116-1"><a href="#cb116-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb116-2"><a href="#cb116-2" aria-hidden="true" tabindex="-1"></a>    <span class="va">self</span>,</span>
<span id="cb116-3"><a href="#cb116-3" aria-hidden="true" tabindex="-1"></a>    on_typecheck_error: muutils.errormode.ErrorMode <span class="op">=</span> ErrorMode.Except</span>
<span id="cb116-4"><a href="#cb116-4" aria-hidden="true" tabindex="-1"></a>) <span class="op">-&gt;</span> <span class="bu">bool</span></span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/json_serialize/serializable_dataclass.py#L358-L364">View
Source on GitHub</a></p>
<p>validate the types of all the fields on a
<code>SerializableDataclass</code>. calls
<code>SerializableDataclass__validate_field_type</code> for each
field</p>
<h3
id="SerializableDataclass.validate_field_type"><code>def validate_field_type</code></h3>
<div class="sourceCode" id="cb117"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb117-1"><a href="#cb117-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb117-2"><a href="#cb117-2" aria-hidden="true" tabindex="-1"></a>    <span class="va">self</span>,</span>
<span id="cb117-3"><a href="#cb117-3" aria-hidden="true" tabindex="-1"></a>    field: muutils.json_serialize.serializable_field.SerializableField <span class="op">|</span> <span class="bu">str</span>,</span>
<span id="cb117-4"><a href="#cb117-4" aria-hidden="true" tabindex="-1"></a>    on_typecheck_error: muutils.errormode.ErrorMode <span class="op">=</span> ErrorMode.Except</span>
<span id="cb117-5"><a href="#cb117-5" aria-hidden="true" tabindex="-1"></a>) <span class="op">-&gt;</span> <span class="bu">bool</span></span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/json_serialize/serializable_dataclass.py#L366-L374">View
Source on GitHub</a></p>
<p>given a dataclass, check the field matches the type hint</p>
<h3 id="SerializableDataclass.diff"><code>def diff</code></h3>
<div class="sourceCode" id="cb118"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb118-1"><a href="#cb118-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb118-2"><a href="#cb118-2" aria-hidden="true" tabindex="-1"></a>    <span class="va">self</span>,</span>
<span id="cb118-3"><a href="#cb118-3" aria-hidden="true" tabindex="-1"></a>    other: muutils.json_serialize.serializable_dataclass.SerializableDataclass,</span>
<span id="cb118-4"><a href="#cb118-4" aria-hidden="true" tabindex="-1"></a>    of_serialized: <span class="bu">bool</span> <span class="op">=</span> <span class="va">False</span></span>
<span id="cb118-5"><a href="#cb118-5" aria-hidden="true" tabindex="-1"></a>) <span class="op">-&gt;</span> <span class="bu">dict</span>[<span class="bu">str</span>, typing.Any]</span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/json_serialize/serializable_dataclass.py#L383-L465">View
Source on GitHub</a></p>
<p>get a rich and recursive diff between two instances of a serializable
dataclass</p>
<div class="sourceCode" id="cb119"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb119-1"><a href="#cb119-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> Myclass(a<span class="op">=</span><span class="dv">1</span>, b<span class="op">=</span><span class="dv">2</span>).diff(Myclass(a<span class="op">=</span><span class="dv">1</span>, b<span class="op">=</span><span class="dv">3</span>))</span>
<span id="cb119-2"><a href="#cb119-2" aria-hidden="true" tabindex="-1"></a>{<span class="st">&#39;b&#39;</span>: {<span class="st">&#39;self&#39;</span>: <span class="dv">2</span>, <span class="st">&#39;other&#39;</span>: <span class="dv">3</span>}}</span>
<span id="cb119-3"><a href="#cb119-3" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> NestedClass(x<span class="op">=</span><span class="st">&quot;q1&quot;</span>, y<span class="op">=</span>Myclass(a<span class="op">=</span><span class="dv">1</span>, b<span class="op">=</span><span class="dv">2</span>)).diff(NestedClass(x<span class="op">=</span><span class="st">&quot;q2&quot;</span>, y<span class="op">=</span>Myclass(a<span class="op">=</span><span class="dv">1</span>, b<span class="op">=</span><span class="dv">3</span>)))</span>
<span id="cb119-4"><a href="#cb119-4" aria-hidden="true" tabindex="-1"></a>{<span class="st">&#39;x&#39;</span>: {<span class="st">&#39;self&#39;</span>: <span class="st">&#39;q1&#39;</span>, <span class="st">&#39;other&#39;</span>: <span class="st">&#39;q2&#39;</span>}, <span class="st">&#39;y&#39;</span>: {<span class="st">&#39;b&#39;</span>: {<span class="st">&#39;self&#39;</span>: <span class="dv">2</span>, <span class="st">&#39;other&#39;</span>: <span class="dv">3</span>}}}</span></code></pre></div>
<h3 id="parameters-15">Parameters:</h3>
<ul>
<li><code>other : SerializableDataclass</code> other instance to compare
against</li>
<li><code>of_serialized : bool</code> if true, compare serialized data
and not raw values (defaults to <code>False</code>)</li>
</ul>
<h3 id="returns-10">Returns:</h3>
<ul>
<li><code>dict[str, Any]</code></li>
</ul>
<h3 id="raises-9">Raises:</h3>
<ul>
<li><code>ValueError</code> : if the instances are not of the same
type</li>
<li><code>ValueError</code> : if the instances are
<code>dataclasses.dataclass</code> but not
<code>SerializableDataclass</code></li>
</ul>
<h3
id="SerializableDataclass.update_from_nested_dict"><code>def update_from_nested_dict</code></h3>
<div class="sourceCode" id="cb120"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb120-1"><a href="#cb120-1" aria-hidden="true" tabindex="-1"></a>(<span class="va">self</span>, nested_dict: <span class="bu">dict</span>[<span class="bu">str</span>, typing.Any])</span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/json_serialize/serializable_dataclass.py#L467-L482">View
Source on GitHub</a></p>
<p>update the instance from a nested dict, useful for configuration from
command line args</p>
<h3 id="parameters-16">Parameters:</h3>
<pre><code>- `nested_dict : dict[str, Any]`
    nested dict to update the instance with</code></pre>
<h3
id="get_cls_type_hints_cached"><code>def get_cls_type_hints_cached</code></h3>
<div class="sourceCode" id="cb122"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb122-1"><a href="#cb122-1" aria-hidden="true" tabindex="-1"></a>(cls: Type[<span class="op">~</span>T]) <span class="op">-&gt;</span> <span class="bu">dict</span>[<span class="bu">str</span>, typing.Any]</span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/json_serialize/serializable_dataclass.py#L495-L498">View
Source on GitHub</a></p>
<p>cached typing.get_type_hints for a class</p>
<h3 id="get_cls_type_hints"><code>def get_cls_type_hints</code></h3>
<div class="sourceCode" id="cb123"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb123-1"><a href="#cb123-1" aria-hidden="true" tabindex="-1"></a>(cls: Type[<span class="op">~</span>T]) <span class="op">-&gt;</span> <span class="bu">dict</span>[<span class="bu">str</span>, typing.Any]</span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/json_serialize/serializable_dataclass.py#L501-L519">View
Source on GitHub</a></p>
<p>helper function to get type hints for a class</p>
<h3
id="KWOnlyError"><code>class KWOnlyError(builtins.NotImplementedError):</code></h3>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/json_serialize/serializable_dataclass.py#L522-L525">View
Source on GitHub</a></p>
<p>kw-only dataclasses are not supported in python &lt;3.9</p>
<h3 id="inherited-members-7">Inherited Members</h3>
<ul>
<li><p><a
href="#KWOnlyError.__init__"><code>NotImplementedError</code></a></p></li>
<li><p><a
href="#KWOnlyError.with_traceback"><code>with_traceback</code></a></p></li>
<li><p><a
href="#KWOnlyError.add_note"><code>add_note</code></a></p></li>
<li><p><a href="#KWOnlyError.args"><code>args</code></a></p></li>
</ul>
<h3
id="FieldError"><code>class FieldError(builtins.ValueError):</code></h3>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/json_serialize/serializable_dataclass.py#L528-L531">View
Source on GitHub</a></p>
<p>base class for field errors</p>
<h3 id="inherited-members-8">Inherited Members</h3>
<ul>
<li><p><a
href="#FieldError.__init__"><code>ValueError</code></a></p></li>
<li><p><a
href="#FieldError.with_traceback"><code>with_traceback</code></a></p></li>
<li><p><a href="#FieldError.add_note"><code>add_note</code></a></p></li>
<li><p><a href="#FieldError.args"><code>args</code></a></p></li>
</ul>
<h3
id="NotSerializableFieldException"><code>class NotSerializableFieldException(FieldError):</code></h3>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/json_serialize/serializable_dataclass.py#L534-L537">View
Source on GitHub</a></p>
<p>field is not a <code>SerializableField</code></p>
<h3 id="inherited-members-9">Inherited Members</h3>
<ul>
<li><p><a
href="#NotSerializableFieldException.__init__"><code>ValueError</code></a></p></li>
<li><p><a
href="#NotSerializableFieldException.with_traceback"><code>with_traceback</code></a></p></li>
<li><p><a
href="#NotSerializableFieldException.add_note"><code>add_note</code></a></p></li>
<li><p><a
href="#NotSerializableFieldException.args"><code>args</code></a></p></li>
</ul>
<h3
id="FieldSerializationError"><code>class FieldSerializationError(FieldError):</code></h3>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/json_serialize/serializable_dataclass.py#L540-L543">View
Source on GitHub</a></p>
<p>error while serializing a field</p>
<h3 id="inherited-members-10">Inherited Members</h3>
<ul>
<li><p><a
href="#FieldSerializationError.__init__"><code>ValueError</code></a></p></li>
<li><p><a
href="#FieldSerializationError.with_traceback"><code>with_traceback</code></a></p></li>
<li><p><a
href="#FieldSerializationError.add_note"><code>add_note</code></a></p></li>
<li><p><a
href="#FieldSerializationError.args"><code>args</code></a></p></li>
</ul>
<h3
id="FieldLoadingError"><code>class FieldLoadingError(FieldError):</code></h3>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/json_serialize/serializable_dataclass.py#L546-L549">View
Source on GitHub</a></p>
<p>error while loading a field</p>
<h3 id="inherited-members-11">Inherited Members</h3>
<ul>
<li><p><a
href="#FieldLoadingError.__init__"><code>ValueError</code></a></p></li>
<li><p><a
href="#FieldLoadingError.with_traceback"><code>with_traceback</code></a></p></li>
<li><p><a
href="#FieldLoadingError.add_note"><code>add_note</code></a></p></li>
<li><p><a href="#FieldLoadingError.args"><code>args</code></a></p></li>
</ul>
<h3
id="FieldTypeMismatchError"><code>class FieldTypeMismatchError(FieldError, builtins.TypeError):</code></h3>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/json_serialize/serializable_dataclass.py#L552-L555">View
Source on GitHub</a></p>
<p>error when a field type does not match the type hint</p>
<h3 id="inherited-members-12">Inherited Members</h3>
<ul>
<li><p><a
href="#FieldTypeMismatchError.__init__"><code>ValueError</code></a></p></li>
<li><p><a
href="#FieldTypeMismatchError.with_traceback"><code>with_traceback</code></a></p></li>
<li><p><a
href="#FieldTypeMismatchError.add_note"><code>add_note</code></a></p></li>
<li><p><a
href="#FieldTypeMismatchError.args"><code>args</code></a></p></li>
</ul>
<h3
id="serializable_dataclass"><code>def serializable_dataclass</code></h3>
<div class="sourceCode" id="cb124"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb124-1"><a href="#cb124-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb124-2"><a href="#cb124-2" aria-hidden="true" tabindex="-1"></a>    _cls<span class="op">=</span><span class="va">None</span>,</span>
<span id="cb124-3"><a href="#cb124-3" aria-hidden="true" tabindex="-1"></a>    <span class="op">*</span>,</span>
<span id="cb124-4"><a href="#cb124-4" aria-hidden="true" tabindex="-1"></a>    init: <span class="bu">bool</span> <span class="op">=</span> <span class="va">True</span>,</span>
<span id="cb124-5"><a href="#cb124-5" aria-hidden="true" tabindex="-1"></a>    <span class="bu">repr</span>: <span class="bu">bool</span> <span class="op">=</span> <span class="va">True</span>,</span>
<span id="cb124-6"><a href="#cb124-6" aria-hidden="true" tabindex="-1"></a>    eq: <span class="bu">bool</span> <span class="op">=</span> <span class="va">True</span>,</span>
<span id="cb124-7"><a href="#cb124-7" aria-hidden="true" tabindex="-1"></a>    order: <span class="bu">bool</span> <span class="op">=</span> <span class="va">False</span>,</span>
<span id="cb124-8"><a href="#cb124-8" aria-hidden="true" tabindex="-1"></a>    unsafe_hash: <span class="bu">bool</span> <span class="op">=</span> <span class="va">False</span>,</span>
<span id="cb124-9"><a href="#cb124-9" aria-hidden="true" tabindex="-1"></a>    frozen: <span class="bu">bool</span> <span class="op">=</span> <span class="va">False</span>,</span>
<span id="cb124-10"><a href="#cb124-10" aria-hidden="true" tabindex="-1"></a>    properties_to_serialize: Optional[<span class="bu">list</span>[<span class="bu">str</span>]] <span class="op">=</span> <span class="va">None</span>,</span>
<span id="cb124-11"><a href="#cb124-11" aria-hidden="true" tabindex="-1"></a>    register_handler: <span class="bu">bool</span> <span class="op">=</span> <span class="va">True</span>,</span>
<span id="cb124-12"><a href="#cb124-12" aria-hidden="true" tabindex="-1"></a>    on_typecheck_error: muutils.errormode.ErrorMode <span class="op">=</span> ErrorMode.Except,</span>
<span id="cb124-13"><a href="#cb124-13" aria-hidden="true" tabindex="-1"></a>    on_typecheck_mismatch: muutils.errormode.ErrorMode <span class="op">=</span> ErrorMode.Warn,</span>
<span id="cb124-14"><a href="#cb124-14" aria-hidden="true" tabindex="-1"></a>    methods_no_override: <span class="bu">list</span>[<span class="bu">str</span>] <span class="op">|</span> <span class="va">None</span> <span class="op">=</span> <span class="va">None</span>,</span>
<span id="cb124-15"><a href="#cb124-15" aria-hidden="true" tabindex="-1"></a>    <span class="op">**</span>kwargs</span>
<span id="cb124-16"><a href="#cb124-16" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/json_serialize/serializable_dataclass.py#L558-L905">View
Source on GitHub</a></p>
<p>decorator to make a dataclass serializable. <strong>must also make it
inherit from <code>SerializableDataclass</code>!!</strong></p>
<p>types will be validated (like pydantic) unless
<code>on_typecheck_mismatch</code> is set to
<code>ErrorMode.IGNORE</code></p>
<p>behavior of most kwargs matches that of
<code>dataclasses.dataclass</code>, but with some additional kwargs. any
kwargs not listed here are passed to
<code>dataclasses.dataclass</code></p>
<p>Returns the same class as was passed in, with dunder methods added
based on the fields defined in the class.</p>
<p>Examines PEP 526 <code>__annotations__</code> to determine
fields.</p>
<p>If init is true, an <code>__init__()</code> method is added to the
class. If repr is true, a <code>__repr__()</code> method is added. If
order is true, rich comparison dunder methods are added. If unsafe_hash
is true, a <code>__hash__()</code> method function is added. If frozen
is true, fields may not be assigned to after instance creation.</p>
<div class="sourceCode" id="cb125"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb125-1"><a href="#cb125-1" aria-hidden="true" tabindex="-1"></a><span class="at">@serializable_dataclass</span>(kw_only<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb125-2"><a href="#cb125-2" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> Myclass(SerializableDataclass):</span>
<span id="cb125-3"><a href="#cb125-3" aria-hidden="true" tabindex="-1"></a>    a: <span class="bu">int</span></span>
<span id="cb125-4"><a href="#cb125-4" aria-hidden="true" tabindex="-1"></a>    b: <span class="bu">str</span></span></code></pre></div>
<div class="sourceCode" id="cb126"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb126-1"><a href="#cb126-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> Myclass(a<span class="op">=</span><span class="dv">1</span>, b<span class="op">=</span><span class="st">&quot;q&quot;</span>).serialize()</span>
<span id="cb126-2"><a href="#cb126-2" aria-hidden="true" tabindex="-1"></a>{_FORMAT_KEY: <span class="st">&#39;Myclass(SerializableDataclass)&#39;</span>, <span class="st">&#39;a&#39;</span>: <span class="dv">1</span>, <span class="st">&#39;b&#39;</span>: <span class="st">&#39;q&#39;</span>}</span></code></pre></div>
<h3 id="parameters-17">Parameters:</h3>
<ul>
<li><code>_cls : _type_</code> class to decorate. don’t pass this arg,
just use this as a decorator (defaults to <code>None</code>)</li>
<li><code>init : bool</code> whether to add an <code>__init__</code>
method <em>(passed to dataclasses.dataclass)</em> (defaults to
<code>True</code>)</li>
<li><code>repr : bool</code> whether to add a <code>__repr__</code>
method <em>(passed to dataclasses.dataclass)</em> (defaults to
<code>True</code>)</li>
<li><code>order : bool</code> whether to add rich comparison methods
<em>(passed to dataclasses.dataclass)</em> (defaults to
<code>False</code>)</li>
<li><code>unsafe_hash : bool</code> whether to add a
<code>__hash__</code> method <em>(passed to dataclasses.dataclass)</em>
(defaults to <code>False</code>)</li>
<li><code>frozen : bool</code> whether to make the class frozen
<em>(passed to dataclasses.dataclass)</em> (defaults to
<code>False</code>)</li>
<li><code>properties_to_serialize : Optional[list[str]]</code> which
properties to add to the serialized data dict
<strong>SerializableDataclass only</strong> (defaults to
<code>None</code>)</li>
<li><code>register_handler : bool</code> if true, register the class
with ZANJ for loading <strong>SerializableDataclass only</strong>
(defaults to <code>True</code>)</li>
<li><code>on_typecheck_error : ErrorMode</code> what to do if type
checking throws an exception (except, warn, ignore). If
<code>ignore</code> and an exception is thrown, type validation will
still return false <strong>SerializableDataclass only</strong></li>
<li><code>on_typecheck_mismatch : ErrorMode</code> what to do if a type
mismatch is found (except, warn, ignore). If <code>ignore</code>, type
validation will return <code>True</code> <strong>SerializableDataclass
only</strong></li>
<li><code>methods_no_override : list[str]|None</code> list of methods
that should not be overridden by the decorator by default,
<code>__eq__</code>, <code>serialize</code>, <code>load</code>, and
<code>validate_fields_types</code> are overridden by this function, but
you can disable this if you’d rather write your own.
<code>dataclasses.dataclass</code> might still overwrite these, and
those options take precedence <strong>SerializableDataclass
only</strong> (defaults to <code>None</code>)</li>
<li><code>**kwargs</code> <em>(passed to
dataclasses.dataclass)</em></li>
</ul>
<h3 id="returns-11">Returns:</h3>
<ul>
<li><code>_type_</code> the decorated class</li>
</ul>
<h3 id="raises-10">Raises:</h3>
<ul>
<li><code>KWOnlyError</code> : only raised if <code>kw_only</code> is
<code>True</code> and python version is &lt;3.9, since
<code>dataclasses.dataclass</code> does not support this</li>
<li><code>NotSerializableFieldException</code> : if a field is not a
<code>SerializableField</code></li>
<li><code>FieldSerializationError</code> : if there is an error
serializing a field</li>
<li><code>AttributeError</code> : if a property is not found on the
class</li>
<li><code>FieldLoadingError</code> : if there is an error loading a
field</li>
</ul>
<blockquote>
<p>docs for <a
href="https://github.com/mivanit/muutils"><code>muutils</code></a>
v0.8.6</p>
</blockquote>
<h2 id="contents-10">Contents</h2>
<p>extends <code>dataclasses.Field</code> for use with
<code>SerializableDataclass</code></p>
<p>In particular, instead of using <code>dataclasses.field</code>, use
<code>serializable_field</code> to define fields in a
<code>SerializableDataclass</code>. You provide information on how the
field should be serialized and loaded (as well as anything that goes
into <code>dataclasses.field</code>) when you define the field, and the
<code>SerializableDataclass</code> will automatically use those
functions.</p>
<h2 id="api-documentation-10">API Documentation</h2>
<ul>
<li><a href="#SerializableField"><code>SerializableField</code></a></li>
<li><a
href="#serializable_field"><code>serializable_field</code></a></li>
</ul>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/json_serialize/serializable_field.py">View
Source on GitHub</a></p>
<h1
id="muutils.json_serialize.serializable_field"><code>muutils.json_serialize.serializable_field</code></h1>
<p>extends <code>dataclasses.Field</code> for use with
<code>SerializableDataclass</code></p>
<p>In particular, instead of using <code>dataclasses.field</code>, use
<code>serializable_field</code> to define fields in a
<code>SerializableDataclass</code>. You provide information on how the
field should be serialized and loaded (as well as anything that goes
into <code>dataclasses.field</code>) when you define the field, and the
<code>SerializableDataclass</code> will automatically use those
functions.</p>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/json_serialize/serializable_field.py#L0-L278">View
Source on GitHub</a></p>
<h3
id="SerializableField"><code>class SerializableField(dataclasses.Field):</code></h3>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/json_serialize/serializable_field.py#L20-L127">View
Source on GitHub</a></p>
<p>extension of <code>dataclasses.Field</code> with additional
serialization properties</p>
<h3 id="SerializableField.__init__"><code>SerializableField</code></h3>
<div class="sourceCode" id="cb127"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb127-1"><a href="#cb127-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb127-2"><a href="#cb127-2" aria-hidden="true" tabindex="-1"></a>    default: Union[Any, dataclasses._MISSING_TYPE] <span class="op">=</span> <span class="op">&lt;</span>dataclasses._MISSING_TYPE <span class="bu">object</span><span class="op">&gt;</span>,</span>
<span id="cb127-3"><a href="#cb127-3" aria-hidden="true" tabindex="-1"></a>    default_factory: Union[Callable[[], Any], dataclasses._MISSING_TYPE] <span class="op">=</span> <span class="op">&lt;</span>dataclasses._MISSING_TYPE <span class="bu">object</span><span class="op">&gt;</span>,</span>
<span id="cb127-4"><a href="#cb127-4" aria-hidden="true" tabindex="-1"></a>    init: <span class="bu">bool</span> <span class="op">=</span> <span class="va">True</span>,</span>
<span id="cb127-5"><a href="#cb127-5" aria-hidden="true" tabindex="-1"></a>    <span class="bu">repr</span>: <span class="bu">bool</span> <span class="op">=</span> <span class="va">True</span>,</span>
<span id="cb127-6"><a href="#cb127-6" aria-hidden="true" tabindex="-1"></a>    <span class="bu">hash</span>: Optional[<span class="bu">bool</span>] <span class="op">=</span> <span class="va">None</span>,</span>
<span id="cb127-7"><a href="#cb127-7" aria-hidden="true" tabindex="-1"></a>    compare: <span class="bu">bool</span> <span class="op">=</span> <span class="va">True</span>,</span>
<span id="cb127-8"><a href="#cb127-8" aria-hidden="true" tabindex="-1"></a>    metadata: Optional[mappingproxy] <span class="op">=</span> <span class="va">None</span>,</span>
<span id="cb127-9"><a href="#cb127-9" aria-hidden="true" tabindex="-1"></a>    kw_only: Union[<span class="bu">bool</span>, dataclasses._MISSING_TYPE] <span class="op">=</span> <span class="op">&lt;</span>dataclasses._MISSING_TYPE <span class="bu">object</span><span class="op">&gt;</span>,</span>
<span id="cb127-10"><a href="#cb127-10" aria-hidden="true" tabindex="-1"></a>    serialize: <span class="bu">bool</span> <span class="op">=</span> <span class="va">True</span>,</span>
<span id="cb127-11"><a href="#cb127-11" aria-hidden="true" tabindex="-1"></a>    serialization_fn: Optional[Callable[[Any], Any]] <span class="op">=</span> <span class="va">None</span>,</span>
<span id="cb127-12"><a href="#cb127-12" aria-hidden="true" tabindex="-1"></a>    loading_fn: Optional[Callable[[Any], Any]] <span class="op">=</span> <span class="va">None</span>,</span>
<span id="cb127-13"><a href="#cb127-13" aria-hidden="true" tabindex="-1"></a>    deserialize_fn: Optional[Callable[[Any], Any]] <span class="op">=</span> <span class="va">None</span>,</span>
<span id="cb127-14"><a href="#cb127-14" aria-hidden="true" tabindex="-1"></a>    assert_type: <span class="bu">bool</span> <span class="op">=</span> <span class="va">True</span>,</span>
<span id="cb127-15"><a href="#cb127-15" aria-hidden="true" tabindex="-1"></a>    custom_typecheck_fn: Optional[Callable[[<span class="op">&lt;</span>member <span class="st">&#39;type&#39;</span> of <span class="st">&#39;SerializableField&#39;</span> objects<span class="op">&gt;</span>], <span class="bu">bool</span>]] <span class="op">=</span> <span class="va">None</span></span>
<span id="cb127-16"><a href="#cb127-16" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/json_serialize/serializable_field.py#L45-L109">View
Source on GitHub</a></p>
<ul>
<li><p><code>serialize: bool</code></p></li>
<li><p><code>serialization_fn: Optional[Callable[[Any], Any]]</code></p></li>
<li><p><code>loading_fn: Optional[Callable[[Any], Any]]</code></p></li>
<li><p><code>deserialize_fn: Optional[Callable[[Any], Any]]</code></p></li>
<li><p><code>assert_type: bool</code></p></li>
<li><p><code>custom_typecheck_fn: Optional[Callable[[&lt;member 'type' of 'SerializableField' objects&gt;], bool]]</code></p></li>
</ul>
<h3 id="SerializableField.from_Field"><code>def from_Field</code></h3>
<div class="sourceCode" id="cb128"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb128-1"><a href="#cb128-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb128-2"><a href="#cb128-2" aria-hidden="true" tabindex="-1"></a>    cls,</span>
<span id="cb128-3"><a href="#cb128-3" aria-hidden="true" tabindex="-1"></a>    field: dataclasses.Field</span>
<span id="cb128-4"><a href="#cb128-4" aria-hidden="true" tabindex="-1"></a>) <span class="op">-&gt;</span> muutils.json_serialize.serializable_field.SerializableField</span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/json_serialize/serializable_field.py#L111-L127">View
Source on GitHub</a></p>
<p>copy all values from a <code>dataclasses.Field</code> to new
<code>SerializableField</code></p>
<ul>
<li><p><code>name</code></p></li>
<li><p><code>type</code></p></li>
<li><p><code>default</code></p></li>
<li><p><code>default_factory</code></p></li>
<li><p><code>init</code></p></li>
<li><p><code>repr</code></p></li>
<li><p><code>hash</code></p></li>
<li><p><code>compare</code></p></li>
<li><p><code>metadata</code></p></li>
<li><p><code>kw_only</code></p></li>
</ul>
<h3 id="serializable_field"><code>def serializable_field</code></h3>
<div class="sourceCode" id="cb129"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb129-1"><a href="#cb129-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb129-2"><a href="#cb129-2" aria-hidden="true" tabindex="-1"></a>    <span class="op">*</span>_args,</span>
<span id="cb129-3"><a href="#cb129-3" aria-hidden="true" tabindex="-1"></a>    default: Union[Any, dataclasses._MISSING_TYPE] <span class="op">=</span> <span class="op">&lt;</span>dataclasses._MISSING_TYPE <span class="bu">object</span><span class="op">&gt;</span>,</span>
<span id="cb129-4"><a href="#cb129-4" aria-hidden="true" tabindex="-1"></a>    default_factory: Union[Any, dataclasses._MISSING_TYPE] <span class="op">=</span> <span class="op">&lt;</span>dataclasses._MISSING_TYPE <span class="bu">object</span><span class="op">&gt;</span>,</span>
<span id="cb129-5"><a href="#cb129-5" aria-hidden="true" tabindex="-1"></a>    init: <span class="bu">bool</span> <span class="op">=</span> <span class="va">True</span>,</span>
<span id="cb129-6"><a href="#cb129-6" aria-hidden="true" tabindex="-1"></a>    <span class="bu">repr</span>: <span class="bu">bool</span> <span class="op">=</span> <span class="va">True</span>,</span>
<span id="cb129-7"><a href="#cb129-7" aria-hidden="true" tabindex="-1"></a>    <span class="bu">hash</span>: Optional[<span class="bu">bool</span>] <span class="op">=</span> <span class="va">None</span>,</span>
<span id="cb129-8"><a href="#cb129-8" aria-hidden="true" tabindex="-1"></a>    compare: <span class="bu">bool</span> <span class="op">=</span> <span class="va">True</span>,</span>
<span id="cb129-9"><a href="#cb129-9" aria-hidden="true" tabindex="-1"></a>    metadata: Optional[mappingproxy] <span class="op">=</span> <span class="va">None</span>,</span>
<span id="cb129-10"><a href="#cb129-10" aria-hidden="true" tabindex="-1"></a>    kw_only: Union[<span class="bu">bool</span>, dataclasses._MISSING_TYPE] <span class="op">=</span> <span class="op">&lt;</span>dataclasses._MISSING_TYPE <span class="bu">object</span><span class="op">&gt;</span>,</span>
<span id="cb129-11"><a href="#cb129-11" aria-hidden="true" tabindex="-1"></a>    serialize: <span class="bu">bool</span> <span class="op">=</span> <span class="va">True</span>,</span>
<span id="cb129-12"><a href="#cb129-12" aria-hidden="true" tabindex="-1"></a>    serialization_fn: Optional[Callable[[Any], Any]] <span class="op">=</span> <span class="va">None</span>,</span>
<span id="cb129-13"><a href="#cb129-13" aria-hidden="true" tabindex="-1"></a>    deserialize_fn: Optional[Callable[[Any], Any]] <span class="op">=</span> <span class="va">None</span>,</span>
<span id="cb129-14"><a href="#cb129-14" aria-hidden="true" tabindex="-1"></a>    assert_type: <span class="bu">bool</span> <span class="op">=</span> <span class="va">True</span>,</span>
<span id="cb129-15"><a href="#cb129-15" aria-hidden="true" tabindex="-1"></a>    custom_typecheck_fn: Optional[Callable[[<span class="bu">type</span>], <span class="bu">bool</span>]] <span class="op">=</span> <span class="va">None</span>,</span>
<span id="cb129-16"><a href="#cb129-16" aria-hidden="true" tabindex="-1"></a>    <span class="op">**</span>kwargs: Any</span>
<span id="cb129-17"><a href="#cb129-17" aria-hidden="true" tabindex="-1"></a>) <span class="op">-&gt;</span> Any</span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/json_serialize/serializable_field.py#L187-L279">View
Source on GitHub</a></p>
<p>Create a new <code>SerializableField</code></p>
<pre><code>default: Sfield_T | dataclasses._MISSING_TYPE = dataclasses.MISSING,
default_factory: Callable[[], Sfield_T]
| dataclasses._MISSING_TYPE = dataclasses.MISSING,
init: bool = True,
repr: bool = True,
hash: Optional[bool] = None,
compare: bool = True,
metadata: types.MappingProxyType | None = None,
kw_only: bool | dataclasses._MISSING_TYPE = dataclasses.MISSING,
### ----------------------------------------------------------------------
### new in `SerializableField`, not in `dataclasses.Field`
serialize: bool = True,
serialization_fn: Optional[Callable[[Any], Any]] = None,
loading_fn: Optional[Callable[[Any], Any]] = None,
deserialize_fn: Optional[Callable[[Any], Any]] = None,
assert_type: bool = True,
custom_typecheck_fn: Optional[Callable[[type], bool]] = None,</code></pre>
<h3 id="new-parameters-1">new Parameters:</h3>
<ul>
<li><code>serialize</code>: whether to serialize this field when
serializing the class’</li>
<li><code>serialization_fn</code>: function taking the instance of the
field and returning a serializable object. If not provided, will iterate
through the <code>SerializerHandler</code>s defined in
<code>&lt;a href="json_serialize.html"&gt;muutils.json_serialize.json_serialize&lt;/a&gt;</code></li>
<li><code>loading_fn</code>: function taking the serialized object and
returning the instance of the field. If not provided, will take object
as-is.</li>
<li><code>deserialize_fn</code>: new alternative to
<code>loading_fn</code>. takes only the field’s value, not the whole
class. if both <code>loading_fn</code> and <code>deserialize_fn</code>
are provided, an error will be raised.</li>
<li><code>assert_type</code>: whether to assert the type of the field
when loading. if <code>False</code>, will not check the type of the
field.</li>
<li><code>custom_typecheck_fn</code>: function taking the type of the
field and returning whether the type itself is valid. if not provided,
will use the default type checking.</li>
</ul>
<h3 id="gotchas-1">Gotchas:</h3>
<ul>
<li><code>loading_fn</code> takes the dict of the
<strong>class</strong>, not the field. if you wanted a
<code>loading_fn</code> that does nothing, you’d write:</li>
</ul>
<div class="sourceCode" id="cb131"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb131-1"><a href="#cb131-1" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> MyClass:</span>
<span id="cb131-2"><a href="#cb131-2" aria-hidden="true" tabindex="-1"></a>    my_field: <span class="bu">int</span> <span class="op">=</span> serializable_field(</span>
<span id="cb131-3"><a href="#cb131-3" aria-hidden="true" tabindex="-1"></a>        serialization_fn<span class="op">=</span><span class="kw">lambda</span> x: <span class="bu">str</span>(x),</span>
<span id="cb131-4"><a href="#cb131-4" aria-hidden="true" tabindex="-1"></a>        loading_fn<span class="op">=</span><span class="kw">lambda</span> x[<span class="st">&quot;my_field&quot;</span>]: <span class="bu">int</span>(x)</span>
<span id="cb131-5"><a href="#cb131-5" aria-hidden="true" tabindex="-1"></a>    )</span></code></pre></div>
<p>using <code>deserialize_fn</code> instead:</p>
<div class="sourceCode" id="cb132"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb132-1"><a href="#cb132-1" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> MyClass:</span>
<span id="cb132-2"><a href="#cb132-2" aria-hidden="true" tabindex="-1"></a>    my_field: <span class="bu">int</span> <span class="op">=</span> serializable_field(</span>
<span id="cb132-3"><a href="#cb132-3" aria-hidden="true" tabindex="-1"></a>        serialization_fn<span class="op">=</span><span class="kw">lambda</span> x: <span class="bu">str</span>(x),</span>
<span id="cb132-4"><a href="#cb132-4" aria-hidden="true" tabindex="-1"></a>        deserialize_fn<span class="op">=</span><span class="kw">lambda</span> x: <span class="bu">int</span>(x)</span>
<span id="cb132-5"><a href="#cb132-5" aria-hidden="true" tabindex="-1"></a>    )</span></code></pre></div>
<p>In the above code, <code>my_field</code> is an int but will be
serialized as a string.</p>
<p>note that if not using ZANJ, and you have a class inside a container,
you MUST provide <code>serialization_fn</code> and
<code>loading_fn</code> to serialize and load the container. ZANJ will
automatically do this for you.</p>
<h3
id="todo-custom_value_check_fn-function-taking-the-value-of-the-field-and-returning-whether-the-value-itself-is-valid.-if-not-provided-any-value-is-valid-as-long-as-it-passes-the-type-test-1">TODO:
<code>custom_value_check_fn</code>: function taking the value of the
field and returning whether the value itself is valid. if not provided,
any value is valid as long as it passes the type test</h3>
<blockquote>
<p>docs for <a
href="https://github.com/mivanit/muutils"><code>muutils</code></a>
v0.8.6</p>
</blockquote>
<h2 id="contents-11">Contents</h2>
<p>utilities for json_serialize</p>
<h2 id="api-documentation-11">API Documentation</h2>
<ul>
<li><a href="#BaseType"><code>BaseType</code></a></li>
<li><a href="#JSONitem"><code>JSONitem</code></a></li>
<li><a href="#JSONdict"><code>JSONdict</code></a></li>
<li><a href="#Hashableitem"><code>Hashableitem</code></a></li>
<li><a
href="#UniversalContainer"><code>UniversalContainer</code></a></li>
<li><a
href="#isinstance_namedtuple"><code>isinstance_namedtuple</code></a></li>
<li><a href="#try_catch"><code>try_catch</code></a></li>
<li><a
href="#SerializationException"><code>SerializationException</code></a></li>
<li><a href="#string_as_lines"><code>string_as_lines</code></a></li>
<li><a href="#safe_getsource"><code>safe_getsource</code></a></li>
<li><a href="#array_safe_eq"><code>array_safe_eq</code></a></li>
<li><a href="#dc_eq"><code>dc_eq</code></a></li>
<li><a href="#MonoTuple"><code>MonoTuple</code></a></li>
</ul>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/json_serialize/util.py">View
Source on GitHub</a></p>
<h1
id="muutils.json_serialize.util"><code>muutils.json_serialize.util</code></h1>
<p>utilities for json_serialize</p>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/json_serialize/util.py#L0-L280">View
Source on GitHub</a></p>
<ul>
<li><p><code>BaseType = typing.Union[bool, int, float, str, NoneType]</code></p></li>
<li><p><code>JSONitem = typing.Union[bool, int, float, str, NoneType, typing.List[typing.Union[bool, int, float, str, NoneType, typing.List[typing.Any], typing.Dict[str, typing.Any]]], typing.Dict[str, typing.Union[bool, int, float, str, NoneType, typing.List[typing.Any], typing.Dict[str, typing.Any]]]]</code></p></li>
<li><p><code>JSONdict = typing.Dict[str, typing.Union[bool, int, float, str, NoneType, typing.List[typing.Union[bool, int, float, str, NoneType, typing.List[typing.Any], typing.Dict[str, typing.Any]]], typing.Dict[str, typing.Union[bool, int, float, str, NoneType, typing.List[typing.Any], typing.Dict[str, typing.Any]]]]]</code></p></li>
<li><p><code>Hashableitem = typing.Union[bool, int, float, str, tuple]</code></p></li>
</ul>
<h3 id="UniversalContainer"><code>class UniversalContainer:</code></h3>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/json_serialize/util.py#L76-L80">View
Source on GitHub</a></p>
<p>contains everything – <code>x in UniversalContainer()</code> is
always True</p>
<h3
id="isinstance_namedtuple"><code>def isinstance_namedtuple</code></h3>
<div class="sourceCode" id="cb133"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb133-1"><a href="#cb133-1" aria-hidden="true" tabindex="-1"></a>(x: Any) <span class="op">-&gt;</span> <span class="bu">bool</span></span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/json_serialize/util.py#L83-L95">View
Source on GitHub</a></p>
<p>checks if <code>x</code> is a <code>namedtuple</code></p>
<p>credit to
https://stackoverflow.com/questions/2166818/how-to-check-if-an-object-is-an-instance-of-a-namedtuple</p>
<h3 id="try_catch"><code>def try_catch</code></h3>
<div class="sourceCode" id="cb134"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb134-1"><a href="#cb134-1" aria-hidden="true" tabindex="-1"></a>(func: Callable)</span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/json_serialize/util.py#L98-L111">View
Source on GitHub</a></p>
<p>wraps the function to catch exceptions, returns serialized error
message on exception</p>
<p>returned func will return normal result on success, or error message
on exception</p>
<h3
id="SerializationException"><code>class SerializationException(builtins.Exception):</code></h3>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/json_serialize/util.py#L128-L129">View
Source on GitHub</a></p>
<p>Common base class for all non-exit exceptions.</p>
<h3 id="inherited-members-13">Inherited Members</h3>
<ul>
<li><p><a
href="#SerializationException.__init__"><code>Exception</code></a></p></li>
<li><p><a
href="#SerializationException.with_traceback"><code>with_traceback</code></a></p></li>
<li><p><a
href="#SerializationException.add_note"><code>add_note</code></a></p></li>
<li><p><a
href="#SerializationException.args"><code>args</code></a></p></li>
</ul>
<h3 id="string_as_lines"><code>def string_as_lines</code></h3>
<div class="sourceCode" id="cb135"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb135-1"><a href="#cb135-1" aria-hidden="true" tabindex="-1"></a>(s: <span class="bu">str</span> <span class="op">|</span> <span class="va">None</span>) <span class="op">-&gt;</span> <span class="bu">list</span>[<span class="bu">str</span>]</span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/json_serialize/util.py#L132-L140">View
Source on GitHub</a></p>
<p>for easier reading of long strings in json, split up by newlines</p>
<p>sort of like how jupyter notebooks do it</p>
<h3 id="safe_getsource"><code>def safe_getsource</code></h3>
<div class="sourceCode" id="cb136"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb136-1"><a href="#cb136-1" aria-hidden="true" tabindex="-1"></a>(func) <span class="op">-&gt;</span> <span class="bu">list</span>[<span class="bu">str</span>]</span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/json_serialize/util.py#L143-L147">View
Source on GitHub</a></p>
<h3 id="array_safe_eq"><code>def array_safe_eq</code></h3>
<div class="sourceCode" id="cb137"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb137-1"><a href="#cb137-1" aria-hidden="true" tabindex="-1"></a>(a: Any, b: Any) <span class="op">-&gt;</span> <span class="bu">bool</span></span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/json_serialize/util.py#L151-L189">View
Source on GitHub</a></p>
<p>check if two objects are equal, account for if numpy arrays or torch
tensors</p>
<h3 id="dc_eq"><code>def dc_eq</code></h3>
<div class="sourceCode" id="cb138"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb138-1"><a href="#cb138-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb138-2"><a href="#cb138-2" aria-hidden="true" tabindex="-1"></a>    dc1,</span>
<span id="cb138-3"><a href="#cb138-3" aria-hidden="true" tabindex="-1"></a>    dc2,</span>
<span id="cb138-4"><a href="#cb138-4" aria-hidden="true" tabindex="-1"></a>    except_when_class_mismatch: <span class="bu">bool</span> <span class="op">=</span> <span class="va">False</span>,</span>
<span id="cb138-5"><a href="#cb138-5" aria-hidden="true" tabindex="-1"></a>    false_when_class_mismatch: <span class="bu">bool</span> <span class="op">=</span> <span class="va">True</span>,</span>
<span id="cb138-6"><a href="#cb138-6" aria-hidden="true" tabindex="-1"></a>    except_when_field_mismatch: <span class="bu">bool</span> <span class="op">=</span> <span class="va">False</span></span>
<span id="cb138-7"><a href="#cb138-7" aria-hidden="true" tabindex="-1"></a>) <span class="op">-&gt;</span> <span class="bu">bool</span></span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/json_serialize/util.py#L192-L281">View
Source on GitHub</a></p>
<p>checks if two dataclasses which (might) hold numpy arrays are
equal</p>
<h3 id="parameters-18">Parameters:</h3>
<ul>
<li><code>dc1</code>: the first dataclass</li>
<li><code>dc2</code>: the second dataclass</li>
<li><code>except_when_class_mismatch: bool</code> if <code>True</code>,
will throw <code>TypeError</code> if the classes are different. if not,
will return false by default or attempt to compare the fields if
<code>false_when_class_mismatch</code> is <code>False</code> (default:
<code>False</code>)</li>
<li><code>false_when_class_mismatch: bool</code> only relevant if
<code>except_when_class_mismatch</code> is <code>False</code>. if
<code>True</code>, will return <code>False</code> if the classes are
different. if <code>False</code>, will attempt to compare the
fields.</li>
<li><code>except_when_field_mismatch: bool</code> only relevant if
<code>except_when_class_mismatch</code> is <code>False</code> and
<code>false_when_class_mismatch</code> is <code>False</code>. if
<code>True</code>, will throw <code>TypeError</code> if the fields are
different. (default: <code>True</code>)</li>
</ul>
<h3 id="returns-12">Returns:</h3>
<ul>
<li><code>bool</code>: True if the dataclasses are equal, False
otherwise</li>
</ul>
<h3 id="raises-11">Raises:</h3>
<ul>
<li><code>TypeError</code>: if the dataclasses are of different
classes</li>
<li><code>AttributeError</code>: if the dataclasses have different
fields</li>
</ul>
<h3
id="todo-after-except-when-class-mismatch-is-false-shouldnt-we-then-go-to-field-keys-match-1">TODO:
after “except when class mismatch” is False, shouldn’t we then go to
“field keys match”?</h3>
<pre><code>          [START]
             ▼
       ┌───────────┐  ┌─────────┐
       │dc1 is dc2?├─►│ classes │
       └──┬────────┘No│ match?  │
  ────    │           ├─────────┤
 (True)◄──┘Yes        │No       │Yes
  ────                ▼         ▼
      ┌────────────────┐ ┌────────────┐
      │ except when    │ │ fields keys│
      │ class mismatch?│ │ match?     │
      ├───────────┬────┘ ├───────┬────┘
      │Yes        │No    │No     │Yes
      ▼           ▼      ▼       ▼
 ───────────  ┌──────────┐  ┌────────┐
{ raise     } │ except   │  │ field  │
{ TypeError } │ when     │  │ values │
 ───────────  │ field    │  │ match? │
              │ mismatch?│  ├────┬───┘
              ├───────┬──┘  │    │Yes
              │Yes    │No   │No  ▼
              ▼       ▼     │   ────
 ───────────────     ─────  │  (True)
{ raise         }   (False)◄┘   ────
{ AttributeError}    ─────
 ───────────────</code></pre>
<h3 id="MonoTuple"><code>class MonoTuple:</code></h3>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/json_serialize/util.py#L48-L73">View
Source on GitHub</a></p>
<p>tuple type hint, but for a tuple of any length with all the same
type</p>
<blockquote>
<p>docs for <a
href="https://github.com/mivanit/muutils"><code>muutils</code></a>
v0.8.6</p>
</blockquote>
<h2 id="contents-12">Contents</h2>
<p>utilities for reading and writing jsonlines files, including gzip
support</p>
<h2 id="api-documentation-12">API Documentation</h2>
<ul>
<li><a href="#jsonl_load"><code>jsonl_load</code></a></li>
<li><a href="#jsonl_load_log"><code>jsonl_load_log</code></a></li>
<li><a href="#jsonl_write"><code>jsonl_write</code></a></li>
</ul>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/jsonlines.py">View
Source on GitHub</a></p>
<h1 id="muutils.jsonlines"><code>muutils.jsonlines</code></h1>
<p>utilities for reading and writing jsonlines files, including gzip
support</p>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/jsonlines.py#L0-L76">View
Source on GitHub</a></p>
<h3 id="jsonl_load"><code>def jsonl_load</code></h3>
<div class="sourceCode" id="cb140"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb140-1"><a href="#cb140-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb140-2"><a href="#cb140-2" aria-hidden="true" tabindex="-1"></a>    path: <span class="bu">str</span>,</span>
<span id="cb140-3"><a href="#cb140-3" aria-hidden="true" tabindex="-1"></a>    <span class="op">/</span>,</span>
<span id="cb140-4"><a href="#cb140-4" aria-hidden="true" tabindex="-1"></a>    <span class="op">*</span>,</span>
<span id="cb140-5"><a href="#cb140-5" aria-hidden="true" tabindex="-1"></a>    use_gzip: <span class="bu">bool</span> <span class="op">|</span> <span class="va">None</span> <span class="op">=</span> <span class="va">None</span></span>
<span id="cb140-6"><a href="#cb140-6" aria-hidden="true" tabindex="-1"></a>) <span class="op">-&gt;</span> <span class="bu">list</span>[typing.Union[<span class="bu">bool</span>, <span class="bu">int</span>, <span class="bu">float</span>, <span class="bu">str</span>, NoneType, typing.List[typing.Union[<span class="bu">bool</span>, <span class="bu">int</span>, <span class="bu">float</span>, <span class="bu">str</span>, NoneType, typing.List[typing.Any], typing.Dict[<span class="bu">str</span>, typing.Any]]], typing.Dict[<span class="bu">str</span>, typing.Union[<span class="bu">bool</span>, <span class="bu">int</span>, <span class="bu">float</span>, <span class="bu">str</span>, NoneType, typing.List[typing.Any], typing.Dict[<span class="bu">str</span>, typing.Any]]]]]</span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/jsonlines.py#L30-L43">View
Source on GitHub</a></p>
<h3 id="jsonl_load_log"><code>def jsonl_load_log</code></h3>
<div class="sourceCode" id="cb141"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb141-1"><a href="#cb141-1" aria-hidden="true" tabindex="-1"></a>(path: <span class="bu">str</span>, <span class="op">/</span>, <span class="op">*</span>, use_gzip: <span class="bu">bool</span> <span class="op">|</span> <span class="va">None</span> <span class="op">=</span> <span class="va">None</span>) <span class="op">-&gt;</span> <span class="bu">list</span>[<span class="bu">dict</span>]</span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/jsonlines.py#L46-L60">View
Source on GitHub</a></p>
<h3 id="jsonl_write"><code>def jsonl_write</code></h3>
<div class="sourceCode" id="cb142"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb142-1"><a href="#cb142-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb142-2"><a href="#cb142-2" aria-hidden="true" tabindex="-1"></a>    path: <span class="bu">str</span>,</span>
<span id="cb142-3"><a href="#cb142-3" aria-hidden="true" tabindex="-1"></a>    items: Sequence[Union[<span class="bu">bool</span>, <span class="bu">int</span>, <span class="bu">float</span>, <span class="bu">str</span>, NoneType, List[Union[<span class="bu">bool</span>, <span class="bu">int</span>, <span class="bu">float</span>, <span class="bu">str</span>, NoneType, List[Any], Dict[<span class="bu">str</span>, Any]]], Dict[<span class="bu">str</span>, Union[<span class="bu">bool</span>, <span class="bu">int</span>, <span class="bu">float</span>, <span class="bu">str</span>, NoneType, List[Any], Dict[<span class="bu">str</span>, Any]]]]],</span>
<span id="cb142-4"><a href="#cb142-4" aria-hidden="true" tabindex="-1"></a>    use_gzip: <span class="bu">bool</span> <span class="op">|</span> <span class="va">None</span> <span class="op">=</span> <span class="va">None</span>,</span>
<span id="cb142-5"><a href="#cb142-5" aria-hidden="true" tabindex="-1"></a>    gzip_compresslevel: <span class="bu">int</span> <span class="op">=</span> <span class="dv">2</span></span>
<span id="cb142-6"><a href="#cb142-6" aria-hidden="true" tabindex="-1"></a>) <span class="op">-&gt;</span> <span class="va">None</span></span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/jsonlines.py#L63-L77">View
Source on GitHub</a></p>
<blockquote>
<p>docs for <a
href="https://github.com/mivanit/muutils"><code>muutils</code></a>
v0.8.6</p>
</blockquote>
<h2 id="contents-13">Contents</h2>
<p>anonymous getitem class</p>
<p>util for constructing a class which has a getitem method which just
calls a function</p>
<p>a <code>lambda</code> is an anonymous function: kappa is the letter
before lambda in the greek alphabet, hence the name of this class</p>
<h2 id="api-documentation-13">API Documentation</h2>
<ul>
<li><a href="#Kappa"><code>Kappa</code></a></li>
</ul>
<p><a href="https://github.com/mivanit/muutils/blob/0.8.6/kappa.py">View
Source on GitHub</a></p>
<h1 id="muutils.kappa"><code>muutils.kappa</code></h1>
<p>anonymous getitem class</p>
<p>util for constructing a class which has a getitem method which just
calls a function</p>
<p>a <code>lambda</code> is an anonymous function: kappa is the letter
before lambda in the greek alphabet, hence the name of this class</p>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/kappa.py#L0-L45">View
Source on GitHub</a></p>
<h3
id="Kappa"><code>class Kappa(typing.Mapping[~_kappa_K, ~_kappa_V]):</code></h3>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/kappa.py#L26-L46">View
Source on GitHub</a></p>
<p>A Mapping is a generic container for associating key/value pairs.</p>
<p>This class provides concrete generic implementations of all methods
except for <strong>getitem</strong>, <strong>iter</strong>, and
<strong>len</strong>.</p>
<h3 id="Kappa.__init__"><code>Kappa</code></h3>
<div class="sourceCode" id="cb143"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb143-1"><a href="#cb143-1" aria-hidden="true" tabindex="-1"></a>(func_getitem: Callable[[<span class="op">~</span>_kappa_K], <span class="op">~</span>_kappa_V])</span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/kappa.py#L27-L33">View
Source on GitHub</a></p>
<ul>
<li><p><code>func_getitem</code></p></li>
<li><p><code>doc</code></p></li>
</ul>
<h3 id="inherited-members-14">Inherited Members</h3>
<ul>
<li><a href="#Kappa.get"><code>get</code></a></li>
<li><a href="#Kappa.keys"><code>keys</code></a></li>
<li><a href="#Kappa.items"><code>items</code></a></li>
<li><a href="#Kappa.values"><code>values</code></a></li>
</ul>
<blockquote>
<p>docs for <a
href="https://github.com/mivanit/muutils"><code>muutils</code></a>
v0.8.6</p>
</blockquote>
<h2 id="contents-14">Contents</h2>
<p>(deprecated) experimenting with logging utilities</p>
<h2 id="submodules-2">Submodules</h2>
<ul>
<li><a href="#exception_context"><code>exception_context</code></a></li>
<li><a href="#headerfuncs"><code>headerfuncs</code></a></li>
<li><a href="#log_util"><code>log_util</code></a></li>
<li><a href="#logger"><code>logger</code></a></li>
<li><a href="#loggingstream"><code>loggingstream</code></a></li>
<li><a href="#simplelogger"><code>simplelogger</code></a></li>
<li><a href="#timing"><code>timing</code></a></li>
</ul>
<h2 id="api-documentation-14">API Documentation</h2>
<ul>
<li><a href="#Logger"><code>Logger</code></a></li>
<li><a href="#LoggingStream"><code>LoggingStream</code></a></li>
<li><a href="#SimpleLogger"><code>SimpleLogger</code></a></li>
<li><a href="#TimerContext"><code>TimerContext</code></a></li>
</ul>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/logger/__init__.py">View
Source on GitHub</a></p>
<h1 id="muutils.logger"><code>muutils.logger</code></h1>
<p>(deprecated) experimenting with logging utilities</p>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/logger/__init__.py#L0-L29">View
Source on GitHub</a></p>
<h3
id="Logger"><code>class Logger(muutils.logger.simplelogger.SimpleLogger):</code></h3>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/logger/__init__.py#L40-L306">View
Source on GitHub</a></p>
<p>logger with more features, including log levels and streams</p>
<h3 id="parameters-19">Parameters:</h3>
<pre><code>    - `log_path : str | None`
    default log file path
    (defaults to `None`)
    - `log_file : AnyIO | None`
    default log io, should have a `.write()` method (pass only this or `log_path`, not both)
    (defaults to `None`)
    - `timestamp : bool`
    whether to add timestamps to every log message (under the `_timestamp` key)
    (defaults to `True`)
    - `default_level : int`
    default log level for streams/messages that don&#39;t specify a level
    (defaults to `0`)
    - `console_print_threshold : int`
    log level at which to print to the console, anything greater will not be printed unless overridden by `console_print`
    (defaults to `50`)
    - `level_header : HeaderFunction`
    function for formatting log messages when printing to console
    (defaults to `HEADER_FUNCTIONS[&quot;md&quot;]`)</code></pre>
<ul>
<li><code>keep_last_msg_time : bool</code> whether to keep the last
message time (defaults to <code>True</code>)</li>
</ul>
<h3 id="raises-12">Raises:</h3>
<pre><code>    - `ValueError` : _description_</code></pre>
<h3 id="Logger.__init__"><code>Logger</code></h3>
<div class="sourceCode" id="cb146"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb146-1"><a href="#cb146-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb146-2"><a href="#cb146-2" aria-hidden="true" tabindex="-1"></a>    log_path: <span class="bu">str</span> <span class="op">|</span> <span class="va">None</span> <span class="op">=</span> <span class="va">None</span>,</span>
<span id="cb146-3"><a href="#cb146-3" aria-hidden="true" tabindex="-1"></a>    log_file: Union[TextIO, muutils.logger.simplelogger.NullIO, NoneType] <span class="op">=</span> <span class="va">None</span>,</span>
<span id="cb146-4"><a href="#cb146-4" aria-hidden="true" tabindex="-1"></a>    default_level: <span class="bu">int</span> <span class="op">=</span> <span class="dv">0</span>,</span>
<span id="cb146-5"><a href="#cb146-5" aria-hidden="true" tabindex="-1"></a>    console_print_threshold: <span class="bu">int</span> <span class="op">=</span> <span class="dv">50</span>,</span>
<span id="cb146-6"><a href="#cb146-6" aria-hidden="true" tabindex="-1"></a>    level_header: muutils.logger.headerfuncs.HeaderFunction <span class="op">=</span> <span class="op">&lt;</span>function md_header_function<span class="op">&gt;</span>,</span>
<span id="cb146-7"><a href="#cb146-7" aria-hidden="true" tabindex="-1"></a>    streams: Union[<span class="bu">dict</span>[<span class="bu">str</span> <span class="op">|</span> <span class="va">None</span>, muutils.logger.loggingstream.LoggingStream], Sequence[muutils.logger.loggingstream.LoggingStream]] <span class="op">=</span> (),</span>
<span id="cb146-8"><a href="#cb146-8" aria-hidden="true" tabindex="-1"></a>    keep_last_msg_time: <span class="bu">bool</span> <span class="op">=</span> <span class="va">True</span>,</span>
<span id="cb146-9"><a href="#cb146-9" aria-hidden="true" tabindex="-1"></a>    timestamp: <span class="bu">bool</span> <span class="op">=</span> <span class="va">True</span>,</span>
<span id="cb146-10"><a href="#cb146-10" aria-hidden="true" tabindex="-1"></a>    <span class="op">**</span>kwargs</span>
<span id="cb146-11"><a href="#cb146-11" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/logger/__init__.py#L71-L147">View
Source on GitHub</a></p>
<h3 id="Logger.log"><code>def log</code></h3>
<div class="sourceCode" id="cb147"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb147-1"><a href="#cb147-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb147-2"><a href="#cb147-2" aria-hidden="true" tabindex="-1"></a>    <span class="va">self</span>,</span>
<span id="cb147-3"><a href="#cb147-3" aria-hidden="true" tabindex="-1"></a>    msg: Union[<span class="bu">bool</span>, <span class="bu">int</span>, <span class="bu">float</span>, <span class="bu">str</span>, NoneType, List[Union[<span class="bu">bool</span>, <span class="bu">int</span>, <span class="bu">float</span>, <span class="bu">str</span>, NoneType, List[Any], Dict[<span class="bu">str</span>, Any]]], Dict[<span class="bu">str</span>, Union[<span class="bu">bool</span>, <span class="bu">int</span>, <span class="bu">float</span>, <span class="bu">str</span>, NoneType, List[Any], Dict[<span class="bu">str</span>, Any]]]] <span class="op">=</span> <span class="va">None</span>,</span>
<span id="cb147-4"><a href="#cb147-4" aria-hidden="true" tabindex="-1"></a>    lvl: <span class="bu">int</span> <span class="op">|</span> <span class="va">None</span> <span class="op">=</span> <span class="va">None</span>,</span>
<span id="cb147-5"><a href="#cb147-5" aria-hidden="true" tabindex="-1"></a>    stream: <span class="bu">str</span> <span class="op">|</span> <span class="va">None</span> <span class="op">=</span> <span class="va">None</span>,</span>
<span id="cb147-6"><a href="#cb147-6" aria-hidden="true" tabindex="-1"></a>    console_print: <span class="bu">bool</span> <span class="op">=</span> <span class="va">False</span>,</span>
<span id="cb147-7"><a href="#cb147-7" aria-hidden="true" tabindex="-1"></a>    extra_indent: <span class="bu">str</span> <span class="op">=</span> <span class="st">&#39;&#39;</span>,</span>
<span id="cb147-8"><a href="#cb147-8" aria-hidden="true" tabindex="-1"></a>    <span class="op">**</span>kwargs</span>
<span id="cb147-9"><a href="#cb147-9" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/logger/__init__.py#L158-L267">View
Source on GitHub</a></p>
<p>logging function</p>
<h5 id="parameters-20">Parameters:</h5>
<ul>
<li><code>msg : JSONitem</code> message (usually string or dict) to be
logged</li>
<li><code>lvl : int | None</code> level of message (lower levels are
more important) (defaults to <code>None</code>)</li>
<li><code>console_print : bool</code> override
<code>console_print_threshold</code> setting (defaults to
<code>False</code>)</li>
<li><code>stream : str | None</code> whether to log to a stream
(defaults to <code>None</code>), which logs to the default
<code>None</code> stream (defaults to <code>None</code>)</li>
</ul>
<h3 id="Logger.log_elapsed_last"><code>def log_elapsed_last</code></h3>
<div class="sourceCode" id="cb148"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb148-1"><a href="#cb148-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb148-2"><a href="#cb148-2" aria-hidden="true" tabindex="-1"></a>    <span class="va">self</span>,</span>
<span id="cb148-3"><a href="#cb148-3" aria-hidden="true" tabindex="-1"></a>    lvl: <span class="bu">int</span> <span class="op">|</span> <span class="va">None</span> <span class="op">=</span> <span class="va">None</span>,</span>
<span id="cb148-4"><a href="#cb148-4" aria-hidden="true" tabindex="-1"></a>    stream: <span class="bu">str</span> <span class="op">|</span> <span class="va">None</span> <span class="op">=</span> <span class="va">None</span>,</span>
<span id="cb148-5"><a href="#cb148-5" aria-hidden="true" tabindex="-1"></a>    console_print: <span class="bu">bool</span> <span class="op">=</span> <span class="va">True</span>,</span>
<span id="cb148-6"><a href="#cb148-6" aria-hidden="true" tabindex="-1"></a>    <span class="op">**</span>kwargs</span>
<span id="cb148-7"><a href="#cb148-7" aria-hidden="true" tabindex="-1"></a>) <span class="op">-&gt;</span> <span class="bu">float</span></span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/logger/__init__.py#L269-L286">View
Source on GitHub</a></p>
<p>logs the time elapsed since the last message was printed to the
console (in any stream)</p>
<h3 id="Logger.flush_all"><code>def flush_all</code></h3>
<div class="sourceCode" id="cb149"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb149-1"><a href="#cb149-1" aria-hidden="true" tabindex="-1"></a>(<span class="va">self</span>)</span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/logger/__init__.py#L288-L295">View
Source on GitHub</a></p>
<p>flush all streams</p>
<h3 id="LoggingStream"><code>class LoggingStream:</code></h3>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/logger/__init__.py#L11-L95">View
Source on GitHub</a></p>
<p>properties of a logging stream</p>
<ul>
<li><code>name: str</code> name of the stream</li>
<li><code>aliases: set[str]</code> aliases for the stream (calls to
these names will be redirected to this stream. duplicate alises will
result in errors) TODO: perhaps duplicate alises should result in
duplicate writes?</li>
<li><code>file: str|bool|AnyIO|None</code> file to write to - if
<code>None</code>, will write to standard log - if <code>True</code>,
will write to <code>name + ".log"</code> - if <code>False</code> will
“write” to <code>NullIO</code> (throw it away) - if a string, will write
to that file - if a fileIO type object, will write to that object</li>
<li><code>default_level: int|None</code> default level for this
stream</li>
<li><code>default_contents: dict[str, Callable[[], Any]]</code> default
contents for this stream</li>
<li><code>last_msg: tuple[float, Any]|None</code> last message written
to this stream (timestamp, message)</li>
</ul>
<h3 id="LoggingStream.__init__"><code>LoggingStream</code></h3>
<div class="sourceCode" id="cb150"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb150-1"><a href="#cb150-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb150-2"><a href="#cb150-2" aria-hidden="true" tabindex="-1"></a>    name: <span class="bu">str</span> <span class="op">|</span> <span class="va">None</span>,</span>
<span id="cb150-3"><a href="#cb150-3" aria-hidden="true" tabindex="-1"></a>    aliases: <span class="bu">set</span>[<span class="bu">str</span> <span class="op">|</span> <span class="va">None</span>] <span class="op">=</span> <span class="op">&lt;</span>factory<span class="op">&gt;</span>,</span>
<span id="cb150-4"><a href="#cb150-4" aria-hidden="true" tabindex="-1"></a>    <span class="bu">file</span>: Union[<span class="bu">str</span>, <span class="bu">bool</span>, TextIO, muutils.logger.simplelogger.NullIO, NoneType] <span class="op">=</span> <span class="va">None</span>,</span>
<span id="cb150-5"><a href="#cb150-5" aria-hidden="true" tabindex="-1"></a>    default_level: <span class="bu">int</span> <span class="op">|</span> <span class="va">None</span> <span class="op">=</span> <span class="va">None</span>,</span>
<span id="cb150-6"><a href="#cb150-6" aria-hidden="true" tabindex="-1"></a>    default_contents: <span class="bu">dict</span>[<span class="bu">str</span>, typing.Callable[[], typing.Any]] <span class="op">=</span> <span class="op">&lt;</span>factory<span class="op">&gt;</span>,</span>
<span id="cb150-7"><a href="#cb150-7" aria-hidden="true" tabindex="-1"></a>    handler: Union[TextIO, muutils.logger.simplelogger.NullIO, NoneType] <span class="op">=</span> <span class="va">None</span></span>
<span id="cb150-8"><a href="#cb150-8" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<ul>
<li><p><code>name: str | None</code></p></li>
<li><p><code>aliases: set[str | None]</code></p></li>
<li><p><code>file: Union[str, bool, TextIO, muutils.logger.simplelogger.NullIO, NoneType] = None</code></p></li>
<li><p><code>default_level: int | None = None</code></p></li>
<li><p><code>default_contents: dict[str, typing.Callable[[], typing.Any]]</code></p></li>
<li><p><code>handler: Union[TextIO, muutils.logger.simplelogger.NullIO, NoneType] = None</code></p></li>
</ul>
<h3 id="LoggingStream.make_handler"><code>def make_handler</code></h3>
<div class="sourceCode" id="cb151"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb151-1"><a href="#cb151-1" aria-hidden="true" tabindex="-1"></a>(<span class="va">self</span>) <span class="op">-&gt;</span> Union[TextIO, muutils.logger.simplelogger.NullIO, NoneType]</span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/logger/__init__.py#L40-L76">View
Source on GitHub</a></p>
<h3 id="SimpleLogger"><code>class SimpleLogger:</code></h3>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/logger/__init__.py#L34-L81">View
Source on GitHub</a></p>
<p>logs training data to a jsonl file</p>
<h3 id="SimpleLogger.__init__"><code>SimpleLogger</code></h3>
<div class="sourceCode" id="cb152"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb152-1"><a href="#cb152-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb152-2"><a href="#cb152-2" aria-hidden="true" tabindex="-1"></a>    log_path: <span class="bu">str</span> <span class="op">|</span> <span class="va">None</span> <span class="op">=</span> <span class="va">None</span>,</span>
<span id="cb152-3"><a href="#cb152-3" aria-hidden="true" tabindex="-1"></a>    log_file: Union[TextIO, muutils.logger.simplelogger.NullIO, NoneType] <span class="op">=</span> <span class="va">None</span>,</span>
<span id="cb152-4"><a href="#cb152-4" aria-hidden="true" tabindex="-1"></a>    timestamp: <span class="bu">bool</span> <span class="op">=</span> <span class="va">True</span></span>
<span id="cb152-5"><a href="#cb152-5" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/logger/__init__.py#L37-L65">View
Source on GitHub</a></p>
<h3 id="SimpleLogger.log"><code>def log</code></h3>
<div class="sourceCode" id="cb153"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb153-1"><a href="#cb153-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb153-2"><a href="#cb153-2" aria-hidden="true" tabindex="-1"></a>    <span class="va">self</span>,</span>
<span id="cb153-3"><a href="#cb153-3" aria-hidden="true" tabindex="-1"></a>    msg: Union[<span class="bu">bool</span>, <span class="bu">int</span>, <span class="bu">float</span>, <span class="bu">str</span>, NoneType, List[Union[<span class="bu">bool</span>, <span class="bu">int</span>, <span class="bu">float</span>, <span class="bu">str</span>, NoneType, List[Any], Dict[<span class="bu">str</span>, Any]]], Dict[<span class="bu">str</span>, Union[<span class="bu">bool</span>, <span class="bu">int</span>, <span class="bu">float</span>, <span class="bu">str</span>, NoneType, List[Any], Dict[<span class="bu">str</span>, Any]]]],</span>
<span id="cb153-4"><a href="#cb153-4" aria-hidden="true" tabindex="-1"></a>    console_print: <span class="bu">bool</span> <span class="op">=</span> <span class="va">False</span>,</span>
<span id="cb153-5"><a href="#cb153-5" aria-hidden="true" tabindex="-1"></a>    <span class="op">**</span>kwargs</span>
<span id="cb153-6"><a href="#cb153-6" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/logger/__init__.py#L67-L81">View
Source on GitHub</a></p>
<p>log a message to the log file, and optionally to the console</p>
<h3 id="TimerContext"><code>class TimerContext:</code></h3>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/logger/__init__.py#L7-L22">View
Source on GitHub</a></p>
<p>context manager for timing code</p>
<ul>
<li><p><code>start_time: float</code></p></li>
<li><p><code>end_time: float</code></p></li>
<li><p><code>elapsed_time: float</code></p></li>
</ul>
<blockquote>
<p>docs for <a
href="https://github.com/mivanit/muutils"><code>muutils</code></a>
v0.8.6</p>
</blockquote>
<h2 id="api-documentation-15">API Documentation</h2>
<ul>
<li><a href="#ExceptionContext"><code>ExceptionContext</code></a></li>
</ul>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/logger/exception_context.py">View
Source on GitHub</a></p>
<h1
id="muutils.logger.exception_context"><code>muutils.logger.exception_context</code></h1>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/logger/exception_context.py#L0-L42">View
Source on GitHub</a></p>
<h3 id="ExceptionContext"><code>class ExceptionContext:</code></h3>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/logger/exception_context.py#L6-L43">View
Source on GitHub</a></p>
<p>context manager which catches all exceptions happening while the
context is open, <code>.write()</code> the exception trace to the given
stream, and then raises the exception</p>
<p>for example:</p>
<div class="sourceCode" id="cb154"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb154-1"><a href="#cb154-1" aria-hidden="true" tabindex="-1"></a>errorfile <span class="op">=</span> <span class="bu">open</span>(<span class="st">&#39;error.log&#39;</span>, <span class="st">&#39;w&#39;</span>)</span>
<span id="cb154-2"><a href="#cb154-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb154-3"><a href="#cb154-3" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> ExceptionContext(errorfile):</span>
<span id="cb154-4"><a href="#cb154-4" aria-hidden="true" tabindex="-1"></a>        <span class="co"># do something that might throw an exception</span></span>
<span id="cb154-5"><a href="#cb154-5" aria-hidden="true" tabindex="-1"></a>        <span class="co"># if it does, the exception trace will be written to errorfile</span></span>
<span id="cb154-6"><a href="#cb154-6" aria-hidden="true" tabindex="-1"></a>        <span class="co"># and then the exception will be raised</span></span></code></pre></div>
<h3 id="ExceptionContext.__init__"><code>ExceptionContext</code></h3>
<div class="sourceCode" id="cb155"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb155-1"><a href="#cb155-1" aria-hidden="true" tabindex="-1"></a>(stream)</span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/logger/exception_context.py#L23-L24">View
Source on GitHub</a></p>
<ul>
<li><code>stream</code></li>
</ul>
<blockquote>
<p>docs for <a
href="https://github.com/mivanit/muutils"><code>muutils</code></a>
v0.8.6</p>
</blockquote>
<h2 id="api-documentation-16">API Documentation</h2>
<ul>
<li><a href="#HeaderFunction"><code>HeaderFunction</code></a></li>
<li><a
href="#md_header_function"><code>md_header_function</code></a></li>
<li><a href="#HEADER_FUNCTIONS"><code>HEADER_FUNCTIONS</code></a></li>
</ul>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/logger/headerfuncs.py">View
Source on GitHub</a></p>
<h1
id="muutils.logger.headerfuncs"><code>muutils.logger.headerfuncs</code></h1>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/logger/headerfuncs.py#L0-L67">View
Source on GitHub</a></p>
<h3
id="HeaderFunction"><code>class HeaderFunction(typing.Protocol):</code></h3>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/logger/headerfuncs.py#L12-L13">View
Source on GitHub</a></p>
<p>Base class for protocol classes.</p>
<p>Protocol classes are defined as::</p>
<pre><code>class Proto(Protocol):
    def meth(self) -&gt; int:
        ...</code></pre>
<p>Such classes are primarily used with static type checkers that
recognize structural subtyping (static duck-typing).</p>
<p>For example::</p>
<pre><code>class C:
    def meth(self) -&gt; int:
        return 0

def func(x: Proto) -&gt; int:
    return x.meth()

func(C())  # Passes static type check</code></pre>
<p>See PEP 544 for details. Protocol classes decorated with <span
class="citation"
data-cites="typing.runtime_checkable">@typing.runtime_checkable</span>
act as simple-minded runtime protocols that check only the presence of
given attributes, ignoring their type signatures. Protocol classes can
be generic, they are defined as::</p>
<pre><code>class GenProto[T](Protocol):
    def meth(self) -&gt; T:
        ...</code></pre>
<h3 id="HeaderFunction.__init__"><code>HeaderFunction</code></h3>
<div class="sourceCode" id="cb159"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb159-1"><a href="#cb159-1" aria-hidden="true" tabindex="-1"></a>(<span class="op">*</span>args, <span class="op">**</span>kwargs)</span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/logger/headerfuncs.py#L1766-L1792">View
Source on GitHub</a></p>
<h3 id="md_header_function"><code>def md_header_function</code></h3>
<div class="sourceCode" id="cb160"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb160-1"><a href="#cb160-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb160-2"><a href="#cb160-2" aria-hidden="true" tabindex="-1"></a>    msg: Any,</span>
<span id="cb160-3"><a href="#cb160-3" aria-hidden="true" tabindex="-1"></a>    lvl: <span class="bu">int</span>,</span>
<span id="cb160-4"><a href="#cb160-4" aria-hidden="true" tabindex="-1"></a>    stream: <span class="bu">str</span> <span class="op">|</span> <span class="va">None</span> <span class="op">=</span> <span class="va">None</span>,</span>
<span id="cb160-5"><a href="#cb160-5" aria-hidden="true" tabindex="-1"></a>    indent_lvl: <span class="bu">str</span> <span class="op">=</span> <span class="st">&#39;  &#39;</span>,</span>
<span id="cb160-6"><a href="#cb160-6" aria-hidden="true" tabindex="-1"></a>    extra_indent: <span class="bu">str</span> <span class="op">=</span> <span class="st">&#39;&#39;</span>,</span>
<span id="cb160-7"><a href="#cb160-7" aria-hidden="true" tabindex="-1"></a>    <span class="op">**</span>kwargs</span>
<span id="cb160-8"><a href="#cb160-8" aria-hidden="true" tabindex="-1"></a>) <span class="op">-&gt;</span> <span class="bu">str</span></span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/logger/headerfuncs.py#L16-L63">View
Source on GitHub</a></p>
<p>standard header function. will output</p>
<ul>
<li><p><code># {msg}</code></p>
<pre><code>  for levels in [0, 9]</code></pre></li>
<li><p><code>## {msg}</code></p>
<pre><code>  for levels in [10, 19], and so on</code></pre></li>
<li><p><code>[{stream}] # {msg}</code></p>
<pre><code>  for a non-`None` stream, with level headers as before</code></pre></li>
<li><p><code>!WARNING! [{stream}] {msg}</code></p>
<pre><code>  for level in [-9, -1]</code></pre></li>
<li><p><code>!!WARNING!! [{stream}] {msg}</code></p>
<pre><code>  for level in [-19, -10] and so on</code></pre></li>
<li><p><code>HEADER_FUNCTIONS: dict[str, muutils.logger.headerfuncs.HeaderFunction] = {'md': &lt;function md_header_function&gt;}</code></p></li>
</ul>
<blockquote>
<p>docs for <a
href="https://github.com/mivanit/muutils"><code>muutils</code></a>
v0.8.6</p>
</blockquote>
<h2 id="api-documentation-17">API Documentation</h2>
<ul>
<li><a
href="#get_any_from_stream"><code>get_any_from_stream</code></a></li>
<li><a href="#gather_log"><code>gather_log</code></a></li>
<li><a href="#gather_stream"><code>gather_stream</code></a></li>
<li><a href="#gather_val"><code>gather_val</code></a></li>
</ul>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/logger/log_util.py">View
Source on GitHub</a></p>
<h1
id="muutils.logger.log_util"><code>muutils.logger.log_util</code></h1>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/logger/log_util.py#L0-L79">View
Source on GitHub</a></p>
<h3 id="get_any_from_stream"><code>def get_any_from_stream</code></h3>
<div class="sourceCode" id="cb166"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb166-1"><a href="#cb166-1" aria-hidden="true" tabindex="-1"></a>(stream: <span class="bu">list</span>[<span class="bu">dict</span>], key: <span class="bu">str</span>) <span class="op">-&gt;</span> <span class="va">None</span></span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/logger/log_util.py#L4-L10">View
Source on GitHub</a></p>
<p>get the first value of a key from a stream. errors if not found</p>
<h3 id="gather_log"><code>def gather_log</code></h3>
<div class="sourceCode" id="cb167"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb167-1"><a href="#cb167-1" aria-hidden="true" tabindex="-1"></a>(<span class="bu">file</span>: <span class="bu">str</span>) <span class="op">-&gt;</span> <span class="bu">dict</span>[<span class="bu">str</span>, <span class="bu">list</span>[<span class="bu">dict</span>]]</span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/logger/log_util.py#L13-L24">View
Source on GitHub</a></p>
<p>gathers and sorts all streams from a log</p>
<h3 id="gather_stream"><code>def gather_stream</code></h3>
<div class="sourceCode" id="cb168"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb168-1"><a href="#cb168-1" aria-hidden="true" tabindex="-1"></a>(<span class="bu">file</span>: <span class="bu">str</span>, stream: <span class="bu">str</span>) <span class="op">-&gt;</span> <span class="bu">list</span>[<span class="bu">dict</span>]</span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/logger/log_util.py#L27-L40">View
Source on GitHub</a></p>
<p>gets all entries from a specific stream in a log file</p>
<h3 id="gather_val"><code>def gather_val</code></h3>
<div class="sourceCode" id="cb169"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb169-1"><a href="#cb169-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb169-2"><a href="#cb169-2" aria-hidden="true" tabindex="-1"></a>    <span class="bu">file</span>: <span class="bu">str</span>,</span>
<span id="cb169-3"><a href="#cb169-3" aria-hidden="true" tabindex="-1"></a>    stream: <span class="bu">str</span>,</span>
<span id="cb169-4"><a href="#cb169-4" aria-hidden="true" tabindex="-1"></a>    keys: <span class="bu">tuple</span>[<span class="bu">str</span>],</span>
<span id="cb169-5"><a href="#cb169-5" aria-hidden="true" tabindex="-1"></a>    allow_skip: <span class="bu">bool</span> <span class="op">=</span> <span class="va">True</span></span>
<span id="cb169-6"><a href="#cb169-6" aria-hidden="true" tabindex="-1"></a>) <span class="op">-&gt;</span> <span class="bu">list</span>[<span class="bu">list</span>]</span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/logger/log_util.py#L43-L80">View
Source on GitHub</a></p>
<p>gather specific keys from a specific stream in a log file</p>
<p>example: if “log.jsonl” has contents:</p>
<pre class="jsonl"><code>{&quot;a&quot;: 1, &quot;b&quot;: 2, &quot;c&quot;: 3, &quot;_stream&quot;: &quot;s1&quot;}
{&quot;a&quot;: 4, &quot;b&quot;: 5, &quot;c&quot;: 6, &quot;_stream&quot;: &quot;s1&quot;}
{&quot;a&quot;: 7, &quot;b&quot;: 8, &quot;c&quot;: 9, &quot;_stream&quot;: &quot;s2&quot;}</code></pre>
<p>then <code>gather_val("log.jsonl", "s1", ("a", "b"))</code> will
return</p>
<div class="sourceCode" id="cb171"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb171-1"><a href="#cb171-1" aria-hidden="true" tabindex="-1"></a>[</span>
<span id="cb171-2"><a href="#cb171-2" aria-hidden="true" tabindex="-1"></a>    [<span class="dv">1</span>, <span class="dv">2</span>],</span>
<span id="cb171-3"><a href="#cb171-3" aria-hidden="true" tabindex="-1"></a>    [<span class="dv">4</span>, <span class="dv">5</span>]</span>
<span id="cb171-4"><a href="#cb171-4" aria-hidden="true" tabindex="-1"></a>]</span></code></pre></div>
<blockquote>
<p>docs for <a
href="https://github.com/mivanit/muutils"><code>muutils</code></a>
v0.8.6</p>
</blockquote>
<h2 id="contents-15">Contents</h2>
<p>logger with streams &amp; levels, and a timer context manager</p>
<ul>
<li><code>SimpleLogger</code> is an extremely simple logger that can
write to both console and a file</li>
<li><code>Logger</code> class handles levels in a slightly different way
than default python <code>logging</code>, and also has “streams” which
allow for different sorts of output in the same logger this was mostly
made with training models in mind and storing both metadata and
loss</li>
<li><code>TimerContext</code> is a context manager that can be used to
time the duration of a block of code</li>
</ul>
<h2 id="api-documentation-18">API Documentation</h2>
<ul>
<li><a href="#decode_level"><code>decode_level</code></a></li>
<li><a href="#Logger"><code>Logger</code></a></li>
</ul>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/logger/logger.py">View
Source on GitHub</a></p>
<h1 id="muutils.logger.logger"><code>muutils.logger.logger</code></h1>
<p>logger with streams &amp; levels, and a timer context manager</p>
<ul>
<li><code>SimpleLogger</code> is an extremely simple logger that can
write to both console and a file</li>
<li><code>Logger</code> class handles levels in a slightly different way
than default python <code>logging</code>, and also has “streams” which
allow for different sorts of output in the same logger this was mostly
made with training models in mind and storing both metadata and
loss</li>
<li><code>TimerContext</code> is a context manager that can be used to
time the duration of a block of code</li>
</ul>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/logger/logger.py#L0-L305">View
Source on GitHub</a></p>
<h3 id="decode_level"><code>def decode_level</code></h3>
<div class="sourceCode" id="cb172"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb172-1"><a href="#cb172-1" aria-hidden="true" tabindex="-1"></a>(level: <span class="bu">int</span>) <span class="op">-&gt;</span> <span class="bu">str</span></span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/logger/logger.py#L27-L36">View
Source on GitHub</a></p>
<h3
id="Logger"><code>class Logger(muutils.logger.simplelogger.SimpleLogger):</code></h3>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/logger/logger.py#L40-L306">View
Source on GitHub</a></p>
<p>logger with more features, including log levels and streams</p>
<h3 id="parameters-21">Parameters:</h3>
<pre><code>    - `log_path : str | None`
    default log file path
    (defaults to `None`)
    - `log_file : AnyIO | None`
    default log io, should have a `.write()` method (pass only this or `log_path`, not both)
    (defaults to `None`)
    - `timestamp : bool`
    whether to add timestamps to every log message (under the `_timestamp` key)
    (defaults to `True`)
    - `default_level : int`
    default log level for streams/messages that don&#39;t specify a level
    (defaults to `0`)
    - `console_print_threshold : int`
    log level at which to print to the console, anything greater will not be printed unless overridden by `console_print`
    (defaults to `50`)
    - `level_header : HeaderFunction`
    function for formatting log messages when printing to console
    (defaults to `HEADER_FUNCTIONS[&quot;md&quot;]`)</code></pre>
<ul>
<li><code>keep_last_msg_time : bool</code> whether to keep the last
message time (defaults to <code>True</code>)</li>
</ul>
<h3 id="raises-13">Raises:</h3>
<pre><code>    - `ValueError` : _description_</code></pre>
<h3 id="Logger.__init__"><code>Logger</code></h3>
<div class="sourceCode" id="cb175"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb175-1"><a href="#cb175-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb175-2"><a href="#cb175-2" aria-hidden="true" tabindex="-1"></a>    log_path: <span class="bu">str</span> <span class="op">|</span> <span class="va">None</span> <span class="op">=</span> <span class="va">None</span>,</span>
<span id="cb175-3"><a href="#cb175-3" aria-hidden="true" tabindex="-1"></a>    log_file: Union[TextIO, muutils.logger.simplelogger.NullIO, NoneType] <span class="op">=</span> <span class="va">None</span>,</span>
<span id="cb175-4"><a href="#cb175-4" aria-hidden="true" tabindex="-1"></a>    default_level: <span class="bu">int</span> <span class="op">=</span> <span class="dv">0</span>,</span>
<span id="cb175-5"><a href="#cb175-5" aria-hidden="true" tabindex="-1"></a>    console_print_threshold: <span class="bu">int</span> <span class="op">=</span> <span class="dv">50</span>,</span>
<span id="cb175-6"><a href="#cb175-6" aria-hidden="true" tabindex="-1"></a>    level_header: muutils.logger.headerfuncs.HeaderFunction <span class="op">=</span> <span class="op">&lt;</span>function md_header_function<span class="op">&gt;</span>,</span>
<span id="cb175-7"><a href="#cb175-7" aria-hidden="true" tabindex="-1"></a>    streams: Union[<span class="bu">dict</span>[<span class="bu">str</span> <span class="op">|</span> <span class="va">None</span>, muutils.logger.loggingstream.LoggingStream], Sequence[muutils.logger.loggingstream.LoggingStream]] <span class="op">=</span> (),</span>
<span id="cb175-8"><a href="#cb175-8" aria-hidden="true" tabindex="-1"></a>    keep_last_msg_time: <span class="bu">bool</span> <span class="op">=</span> <span class="va">True</span>,</span>
<span id="cb175-9"><a href="#cb175-9" aria-hidden="true" tabindex="-1"></a>    timestamp: <span class="bu">bool</span> <span class="op">=</span> <span class="va">True</span>,</span>
<span id="cb175-10"><a href="#cb175-10" aria-hidden="true" tabindex="-1"></a>    <span class="op">**</span>kwargs</span>
<span id="cb175-11"><a href="#cb175-11" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/logger/logger.py#L71-L147">View
Source on GitHub</a></p>
<h3 id="Logger.log"><code>def log</code></h3>
<div class="sourceCode" id="cb176"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb176-1"><a href="#cb176-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb176-2"><a href="#cb176-2" aria-hidden="true" tabindex="-1"></a>    <span class="va">self</span>,</span>
<span id="cb176-3"><a href="#cb176-3" aria-hidden="true" tabindex="-1"></a>    msg: Union[<span class="bu">bool</span>, <span class="bu">int</span>, <span class="bu">float</span>, <span class="bu">str</span>, NoneType, List[Union[<span class="bu">bool</span>, <span class="bu">int</span>, <span class="bu">float</span>, <span class="bu">str</span>, NoneType, List[Any], Dict[<span class="bu">str</span>, Any]]], Dict[<span class="bu">str</span>, Union[<span class="bu">bool</span>, <span class="bu">int</span>, <span class="bu">float</span>, <span class="bu">str</span>, NoneType, List[Any], Dict[<span class="bu">str</span>, Any]]]] <span class="op">=</span> <span class="va">None</span>,</span>
<span id="cb176-4"><a href="#cb176-4" aria-hidden="true" tabindex="-1"></a>    lvl: <span class="bu">int</span> <span class="op">|</span> <span class="va">None</span> <span class="op">=</span> <span class="va">None</span>,</span>
<span id="cb176-5"><a href="#cb176-5" aria-hidden="true" tabindex="-1"></a>    stream: <span class="bu">str</span> <span class="op">|</span> <span class="va">None</span> <span class="op">=</span> <span class="va">None</span>,</span>
<span id="cb176-6"><a href="#cb176-6" aria-hidden="true" tabindex="-1"></a>    console_print: <span class="bu">bool</span> <span class="op">=</span> <span class="va">False</span>,</span>
<span id="cb176-7"><a href="#cb176-7" aria-hidden="true" tabindex="-1"></a>    extra_indent: <span class="bu">str</span> <span class="op">=</span> <span class="st">&#39;&#39;</span>,</span>
<span id="cb176-8"><a href="#cb176-8" aria-hidden="true" tabindex="-1"></a>    <span class="op">**</span>kwargs</span>
<span id="cb176-9"><a href="#cb176-9" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/logger/logger.py#L158-L267">View
Source on GitHub</a></p>
<p>logging function</p>
<h5 id="parameters-22">Parameters:</h5>
<ul>
<li><code>msg : JSONitem</code> message (usually string or dict) to be
logged</li>
<li><code>lvl : int | None</code> level of message (lower levels are
more important) (defaults to <code>None</code>)</li>
<li><code>console_print : bool</code> override
<code>console_print_threshold</code> setting (defaults to
<code>False</code>)</li>
<li><code>stream : str | None</code> whether to log to a stream
(defaults to <code>None</code>), which logs to the default
<code>None</code> stream (defaults to <code>None</code>)</li>
</ul>
<h3 id="Logger.log_elapsed_last"><code>def log_elapsed_last</code></h3>
<div class="sourceCode" id="cb177"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb177-1"><a href="#cb177-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb177-2"><a href="#cb177-2" aria-hidden="true" tabindex="-1"></a>    <span class="va">self</span>,</span>
<span id="cb177-3"><a href="#cb177-3" aria-hidden="true" tabindex="-1"></a>    lvl: <span class="bu">int</span> <span class="op">|</span> <span class="va">None</span> <span class="op">=</span> <span class="va">None</span>,</span>
<span id="cb177-4"><a href="#cb177-4" aria-hidden="true" tabindex="-1"></a>    stream: <span class="bu">str</span> <span class="op">|</span> <span class="va">None</span> <span class="op">=</span> <span class="va">None</span>,</span>
<span id="cb177-5"><a href="#cb177-5" aria-hidden="true" tabindex="-1"></a>    console_print: <span class="bu">bool</span> <span class="op">=</span> <span class="va">True</span>,</span>
<span id="cb177-6"><a href="#cb177-6" aria-hidden="true" tabindex="-1"></a>    <span class="op">**</span>kwargs</span>
<span id="cb177-7"><a href="#cb177-7" aria-hidden="true" tabindex="-1"></a>) <span class="op">-&gt;</span> <span class="bu">float</span></span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/logger/logger.py#L269-L286">View
Source on GitHub</a></p>
<p>logs the time elapsed since the last message was printed to the
console (in any stream)</p>
<h3 id="Logger.flush_all"><code>def flush_all</code></h3>
<div class="sourceCode" id="cb178"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb178-1"><a href="#cb178-1" aria-hidden="true" tabindex="-1"></a>(<span class="va">self</span>)</span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/logger/logger.py#L288-L295">View
Source on GitHub</a></p>
<p>flush all streams</p>
<blockquote>
<p>docs for <a
href="https://github.com/mivanit/muutils"><code>muutils</code></a>
v0.8.6</p>
</blockquote>
<h2 id="api-documentation-19">API Documentation</h2>
<ul>
<li><a href="#LoggingStream"><code>LoggingStream</code></a></li>
</ul>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/logger/loggingstream.py">View
Source on GitHub</a></p>
<h1
id="muutils.logger.loggingstream"><code>muutils.logger.loggingstream</code></h1>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/logger/loggingstream.py#L0-L94">View
Source on GitHub</a></p>
<h3 id="LoggingStream"><code>class LoggingStream:</code></h3>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/logger/loggingstream.py#L11-L95">View
Source on GitHub</a></p>
<p>properties of a logging stream</p>
<ul>
<li><code>name: str</code> name of the stream</li>
<li><code>aliases: set[str]</code> aliases for the stream (calls to
these names will be redirected to this stream. duplicate alises will
result in errors) TODO: perhaps duplicate alises should result in
duplicate writes?</li>
<li><code>file: str|bool|AnyIO|None</code> file to write to - if
<code>None</code>, will write to standard log - if <code>True</code>,
will write to <code>name + ".log"</code> - if <code>False</code> will
“write” to <code>NullIO</code> (throw it away) - if a string, will write
to that file - if a fileIO type object, will write to that object</li>
<li><code>default_level: int|None</code> default level for this
stream</li>
<li><code>default_contents: dict[str, Callable[[], Any]]</code> default
contents for this stream</li>
<li><code>last_msg: tuple[float, Any]|None</code> last message written
to this stream (timestamp, message)</li>
</ul>
<h3 id="LoggingStream.__init__"><code>LoggingStream</code></h3>
<div class="sourceCode" id="cb179"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb179-1"><a href="#cb179-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb179-2"><a href="#cb179-2" aria-hidden="true" tabindex="-1"></a>    name: <span class="bu">str</span> <span class="op">|</span> <span class="va">None</span>,</span>
<span id="cb179-3"><a href="#cb179-3" aria-hidden="true" tabindex="-1"></a>    aliases: <span class="bu">set</span>[<span class="bu">str</span> <span class="op">|</span> <span class="va">None</span>] <span class="op">=</span> <span class="op">&lt;</span>factory<span class="op">&gt;</span>,</span>
<span id="cb179-4"><a href="#cb179-4" aria-hidden="true" tabindex="-1"></a>    <span class="bu">file</span>: Union[<span class="bu">str</span>, <span class="bu">bool</span>, TextIO, muutils.logger.simplelogger.NullIO, NoneType] <span class="op">=</span> <span class="va">None</span>,</span>
<span id="cb179-5"><a href="#cb179-5" aria-hidden="true" tabindex="-1"></a>    default_level: <span class="bu">int</span> <span class="op">|</span> <span class="va">None</span> <span class="op">=</span> <span class="va">None</span>,</span>
<span id="cb179-6"><a href="#cb179-6" aria-hidden="true" tabindex="-1"></a>    default_contents: <span class="bu">dict</span>[<span class="bu">str</span>, typing.Callable[[], typing.Any]] <span class="op">=</span> <span class="op">&lt;</span>factory<span class="op">&gt;</span>,</span>
<span id="cb179-7"><a href="#cb179-7" aria-hidden="true" tabindex="-1"></a>    handler: Union[TextIO, muutils.logger.simplelogger.NullIO, NoneType] <span class="op">=</span> <span class="va">None</span></span>
<span id="cb179-8"><a href="#cb179-8" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<ul>
<li><p><code>name: str | None</code></p></li>
<li><p><code>aliases: set[str | None]</code></p></li>
<li><p><code>file: Union[str, bool, TextIO, muutils.logger.simplelogger.NullIO, NoneType] = None</code></p></li>
<li><p><code>default_level: int | None = None</code></p></li>
<li><p><code>default_contents: dict[str, typing.Callable[[], typing.Any]]</code></p></li>
<li><p><code>handler: Union[TextIO, muutils.logger.simplelogger.NullIO, NoneType] = None</code></p></li>
</ul>
<h3 id="LoggingStream.make_handler"><code>def make_handler</code></h3>
<div class="sourceCode" id="cb180"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb180-1"><a href="#cb180-1" aria-hidden="true" tabindex="-1"></a>(<span class="va">self</span>) <span class="op">-&gt;</span> Union[TextIO, muutils.logger.simplelogger.NullIO, NoneType]</span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/logger/loggingstream.py#L40-L76">View
Source on GitHub</a></p>
<blockquote>
<p>docs for <a
href="https://github.com/mivanit/muutils"><code>muutils</code></a>
v0.8.6</p>
</blockquote>
<h2 id="api-documentation-20">API Documentation</h2>
<ul>
<li><a href="#NullIO"><code>NullIO</code></a></li>
<li><a href="#AnyIO"><code>AnyIO</code></a></li>
<li><a href="#SimpleLogger"><code>SimpleLogger</code></a></li>
</ul>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/logger/simplelogger.py">View
Source on GitHub</a></p>
<h1
id="muutils.logger.simplelogger"><code>muutils.logger.simplelogger</code></h1>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/logger/simplelogger.py#L0-L80">View
Source on GitHub</a></p>
<h3 id="NullIO"><code>class NullIO:</code></h3>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/logger/simplelogger.py#L12-L28">View
Source on GitHub</a></p>
<p>null IO class</p>
<h3 id="NullIO.write"><code>def write</code></h3>
<div class="sourceCode" id="cb181"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb181-1"><a href="#cb181-1" aria-hidden="true" tabindex="-1"></a>(<span class="va">self</span>, msg: <span class="bu">str</span>) <span class="op">-&gt;</span> <span class="bu">int</span></span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/logger/simplelogger.py#L18-L20">View
Source on GitHub</a></p>
<p>write to nothing! this throws away the message</p>
<h3 id="NullIO.flush"><code>def flush</code></h3>
<div class="sourceCode" id="cb182"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb182-1"><a href="#cb182-1" aria-hidden="true" tabindex="-1"></a>(<span class="va">self</span>) <span class="op">-&gt;</span> <span class="va">None</span></span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/logger/simplelogger.py#L22-L24">View
Source on GitHub</a></p>
<p>flush nothing! this is a no-op</p>
<h3 id="NullIO.close"><code>def close</code></h3>
<div class="sourceCode" id="cb183"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb183-1"><a href="#cb183-1" aria-hidden="true" tabindex="-1"></a>(<span class="va">self</span>) <span class="op">-&gt;</span> <span class="va">None</span></span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/logger/simplelogger.py#L26-L28">View
Source on GitHub</a></p>
<p>close nothing! this is a no-op</p>
<ul>
<li><code>AnyIO = typing.Union[typing.TextIO, muutils.logger.simplelogger.NullIO]</code></li>
</ul>
<h3 id="SimpleLogger"><code>class SimpleLogger:</code></h3>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/logger/simplelogger.py#L34-L81">View
Source on GitHub</a></p>
<p>logs training data to a jsonl file</p>
<h3 id="SimpleLogger.__init__"><code>SimpleLogger</code></h3>
<div class="sourceCode" id="cb184"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb184-1"><a href="#cb184-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb184-2"><a href="#cb184-2" aria-hidden="true" tabindex="-1"></a>    log_path: <span class="bu">str</span> <span class="op">|</span> <span class="va">None</span> <span class="op">=</span> <span class="va">None</span>,</span>
<span id="cb184-3"><a href="#cb184-3" aria-hidden="true" tabindex="-1"></a>    log_file: Union[TextIO, muutils.logger.simplelogger.NullIO, NoneType] <span class="op">=</span> <span class="va">None</span>,</span>
<span id="cb184-4"><a href="#cb184-4" aria-hidden="true" tabindex="-1"></a>    timestamp: <span class="bu">bool</span> <span class="op">=</span> <span class="va">True</span></span>
<span id="cb184-5"><a href="#cb184-5" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/logger/simplelogger.py#L37-L65">View
Source on GitHub</a></p>
<h3 id="SimpleLogger.log"><code>def log</code></h3>
<div class="sourceCode" id="cb185"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb185-1"><a href="#cb185-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb185-2"><a href="#cb185-2" aria-hidden="true" tabindex="-1"></a>    <span class="va">self</span>,</span>
<span id="cb185-3"><a href="#cb185-3" aria-hidden="true" tabindex="-1"></a>    msg: Union[<span class="bu">bool</span>, <span class="bu">int</span>, <span class="bu">float</span>, <span class="bu">str</span>, NoneType, List[Union[<span class="bu">bool</span>, <span class="bu">int</span>, <span class="bu">float</span>, <span class="bu">str</span>, NoneType, List[Any], Dict[<span class="bu">str</span>, Any]]], Dict[<span class="bu">str</span>, Union[<span class="bu">bool</span>, <span class="bu">int</span>, <span class="bu">float</span>, <span class="bu">str</span>, NoneType, List[Any], Dict[<span class="bu">str</span>, Any]]]],</span>
<span id="cb185-4"><a href="#cb185-4" aria-hidden="true" tabindex="-1"></a>    console_print: <span class="bu">bool</span> <span class="op">=</span> <span class="va">False</span>,</span>
<span id="cb185-5"><a href="#cb185-5" aria-hidden="true" tabindex="-1"></a>    <span class="op">**</span>kwargs</span>
<span id="cb185-6"><a href="#cb185-6" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/logger/simplelogger.py#L67-L81">View
Source on GitHub</a></p>
<p>log a message to the log file, and optionally to the console</p>
<blockquote>
<p>docs for <a
href="https://github.com/mivanit/muutils"><code>muutils</code></a>
v0.8.6</p>
</blockquote>
<h2 id="api-documentation-21">API Documentation</h2>
<ul>
<li><a href="#TimerContext"><code>TimerContext</code></a></li>
<li><a href="#filter_time_str"><code>filter_time_str</code></a></li>
<li><a href="#ProgressEstimator"><code>ProgressEstimator</code></a></li>
</ul>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/logger/timing.py">View
Source on GitHub</a></p>
<h1 id="muutils.logger.timing"><code>muutils.logger.timing</code></h1>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/logger/timing.py#L0-L86">View
Source on GitHub</a></p>
<h3 id="TimerContext"><code>class TimerContext:</code></h3>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/logger/timing.py#L7-L22">View
Source on GitHub</a></p>
<p>context manager for timing code</p>
<ul>
<li><p><code>start_time: float</code></p></li>
<li><p><code>end_time: float</code></p></li>
<li><p><code>elapsed_time: float</code></p></li>
</ul>
<h3 id="filter_time_str"><code>def filter_time_str</code></h3>
<div class="sourceCode" id="cb186"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb186-1"><a href="#cb186-1" aria-hidden="true" tabindex="-1"></a>(time: <span class="bu">str</span>) <span class="op">-&gt;</span> <span class="bu">str</span></span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/logger/timing.py#L25-L30">View
Source on GitHub</a></p>
<p>assuming format <code>h:mm:ss</code>, clips off the hours if its
0</p>
<h3 id="ProgressEstimator"><code>class ProgressEstimator:</code></h3>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/logger/timing.py#L33-L87">View
Source on GitHub</a></p>
<p>estimates progress and can give a progress bar</p>
<h3 id="ProgressEstimator.__init__"><code>ProgressEstimator</code></h3>
<div class="sourceCode" id="cb187"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb187-1"><a href="#cb187-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb187-2"><a href="#cb187-2" aria-hidden="true" tabindex="-1"></a>    n_total: <span class="bu">int</span>,</span>
<span id="cb187-3"><a href="#cb187-3" aria-hidden="true" tabindex="-1"></a>    pbar_fill: <span class="bu">str</span> <span class="op">=</span> <span class="st">&#39;█&#39;</span>,</span>
<span id="cb187-4"><a href="#cb187-4" aria-hidden="true" tabindex="-1"></a>    pbar_empty: <span class="bu">str</span> <span class="op">=</span> <span class="st">&#39; &#39;</span>,</span>
<span id="cb187-5"><a href="#cb187-5" aria-hidden="true" tabindex="-1"></a>    pbar_bounds: <span class="bu">tuple</span>[<span class="bu">str</span>, <span class="bu">str</span>] <span class="op">=</span> (<span class="st">&#39;|&#39;</span>, <span class="st">&#39;|&#39;</span>)</span>
<span id="cb187-6"><a href="#cb187-6" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/logger/timing.py#L36-L48">View
Source on GitHub</a></p>
<ul>
<li><p><code>n_total: int</code></p></li>
<li><p><code>starttime: float</code></p></li>
<li><p><code>pbar_fill: str</code></p></li>
<li><p><code>pbar_empty: str</code></p></li>
<li><p><code>pbar_bounds: tuple[str, str]</code></p></li>
<li><p><code>total_str_len: int</code></p></li>
</ul>
<h3
id="ProgressEstimator.get_timing_raw"><code>def get_timing_raw</code></h3>
<div class="sourceCode" id="cb188"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb188-1"><a href="#cb188-1" aria-hidden="true" tabindex="-1"></a>(<span class="va">self</span>, i: <span class="bu">int</span>) <span class="op">-&gt;</span> <span class="bu">dict</span>[<span class="bu">str</span>, <span class="bu">float</span>]</span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/logger/timing.py#L50-L59">View
Source on GitHub</a></p>
<p>returns dict(elapsed, per_iter, remaining, percent)</p>
<h3 id="ProgressEstimator.get_pbar"><code>def get_pbar</code></h3>
<div class="sourceCode" id="cb189"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb189-1"><a href="#cb189-1" aria-hidden="true" tabindex="-1"></a>(<span class="va">self</span>, i: <span class="bu">int</span>, width: <span class="bu">int</span> <span class="op">=</span> <span class="dv">30</span>) <span class="op">-&gt;</span> <span class="bu">str</span></span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/logger/timing.py#L61-L77">View
Source on GitHub</a></p>
<p>returns a progress bar</p>
<h3
id="ProgressEstimator.get_progress_default"><code>def get_progress_default</code></h3>
<div class="sourceCode" id="cb190"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb190-1"><a href="#cb190-1" aria-hidden="true" tabindex="-1"></a>(<span class="va">self</span>, i: <span class="bu">int</span>) <span class="op">-&gt;</span> <span class="bu">str</span></span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/logger/timing.py#L79-L87">View
Source on GitHub</a></p>
<p>returns a progress string</p>
<blockquote>
<p>docs for <a
href="https://github.com/mivanit/muutils"><code>muutils</code></a>
v0.8.6</p>
</blockquote>
<h2 id="contents-16">Contents</h2>
<p>miscellaneous utilities</p>
<ul>
<li><code>stable_hash</code> for hashing that is stable across runs</li>
<li><code>muutils.misc.sequence</code> for sequence manipulation,
applying mappings, and string-like operations on lists</li>
<li><code>muutils.misc.string</code> for sanitizing things for
filenames, adjusting docstrings, and converting dicts to filenames</li>
<li><code>muutils.misc.numerical</code> for turning numbers into nice
strings and back</li>
<li><code>muutils.misc.freezing</code> for freezing things</li>
<li><code>muutils.misc.classes</code> for some weird class
utilities</li>
</ul>
<h2 id="submodules-3">Submodules</h2>
<ul>
<li><a href="#classes"><code>classes</code></a></li>
<li><a href="#freezing"><code>freezing</code></a></li>
<li><a href="#func"><code>func</code></a></li>
<li><a href="#hashing"><code>hashing</code></a></li>
<li><a href="#numerical"><code>numerical</code></a></li>
<li><a href="#sequence"><code>sequence</code></a></li>
<li><a href="#string"><code>string</code></a></li>
</ul>
<h2 id="api-documentation-22">API Documentation</h2>
<ul>
<li><a href="#stable_hash"><code>stable_hash</code></a></li>
<li><a href="#WhenMissing"><code>WhenMissing</code></a></li>
<li><a
href="#empty_sequence_if_attr_false"><code>empty_sequence_if_attr_false</code></a></li>
<li><a href="#flatten"><code>flatten</code></a></li>
<li><a href="#list_split"><code>list_split</code></a></li>
<li><a href="#list_join"><code>list_join</code></a></li>
<li><a href="#apply_mapping"><code>apply_mapping</code></a></li>
<li><a
href="#apply_mapping_chain"><code>apply_mapping_chain</code></a></li>
<li><a href="#sanitize_name"><code>sanitize_name</code></a></li>
<li><a href="#sanitize_fname"><code>sanitize_fname</code></a></li>
<li><a
href="#sanitize_identifier"><code>sanitize_identifier</code></a></li>
<li><a href="#dict_to_filename"><code>dict_to_filename</code></a></li>
<li><a href="#dynamic_docstring"><code>dynamic_docstring</code></a></li>
<li><a
href="#shorten_numerical_to_str"><code>shorten_numerical_to_str</code></a></li>
<li><a href="#str_to_numeric"><code>str_to_numeric</code></a></li>
<li><a href="#_SHORTEN_MAP"><code>_SHORTEN_MAP</code></a></li>
<li><a href="#FrozenDict"><code>FrozenDict</code></a></li>
<li><a href="#FrozenList"><code>FrozenList</code></a></li>
<li><a href="#freeze"><code>freeze</code></a></li>
<li><a href="#is_abstract"><code>is_abstract</code></a></li>
<li><a
href="#get_all_subclasses"><code>get_all_subclasses</code></a></li>
<li><a
href="#isinstance_by_type_name"><code>isinstance_by_type_name</code></a></li>
<li><a href="#IsDataclass"><code>IsDataclass</code></a></li>
<li><a
href="#get_hashable_eq_attrs"><code>get_hashable_eq_attrs</code></a></li>
<li><a
href="#dataclass_set_equals"><code>dataclass_set_equals</code></a></li>
</ul>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/misc/__init__.py">View
Source on GitHub</a></p>
<h1 id="muutils.misc"><code>muutils.misc</code></h1>
<p>miscellaneous utilities</p>
<ul>
<li><code>stable_hash</code> for hashing that is stable across runs</li>
<li><code>&lt;a href="misc/sequence.html"&gt;muutils.misc.sequence&lt;/a&gt;</code>
for sequence manipulation, applying mappings, and string-like operations
on lists</li>
<li><code>&lt;a href="misc/string.html"&gt;muutils.misc.string&lt;/a&gt;</code>
for sanitizing things for filenames, adjusting docstrings, and
converting dicts to filenames</li>
<li><code>&lt;a href="misc/numerical.html"&gt;muutils.misc.numerical&lt;/a&gt;</code>
for turning numbers into nice strings and back</li>
<li><code>&lt;a href="misc/freezing.html"&gt;muutils.misc.freezing&lt;/a&gt;</code>
for freezing things</li>
<li><code>&lt;a href="misc/classes.html"&gt;muutils.misc.classes&lt;/a&gt;</code>
for some weird class utilities</li>
</ul>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/misc/__init__.py#L0-L82">View
Source on GitHub</a></p>
<h3 id="stable_hash"><code>def stable_hash</code></h3>
<div class="sourceCode" id="cb191"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb191-1"><a href="#cb191-1" aria-hidden="true" tabindex="-1"></a>(s: <span class="bu">str</span> <span class="op">|</span> <span class="bu">bytes</span>) <span class="op">-&gt;</span> <span class="bu">int</span></span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/misc/__init__.py#L8-L18">View
Source on GitHub</a></p>
<p>Returns a stable hash of the given string. not cryptographically
secure, but stable between runs</p>
<ul>
<li><code>WhenMissing = typing.Literal['except', 'skip', 'include']</code></li>
</ul>
<h3
id="empty_sequence_if_attr_false"><code>def empty_sequence_if_attr_false</code></h3>
<div class="sourceCode" id="cb192"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb192-1"><a href="#cb192-1" aria-hidden="true" tabindex="-1"></a>(itr: Iterable[Any], attr_owner: Any, attr_name: <span class="bu">str</span>) <span class="op">-&gt;</span> Iterable[Any]</span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/misc/__init__.py#L21-L42">View
Source on GitHub</a></p>
<p>Returns <code>itr</code> if <code>attr_owner</code> has the attribute
<code>attr_name</code> and it boolean casts to <code>True</code>.
Returns an empty sequence otherwise.</p>
<p>Particularly useful for optionally inserting delimiters into a
sequence depending on an <code>TokenizerElement</code> attribute.</p>
<h3 id="parameters-23">Parameters:</h3>
<ul>
<li><code>itr: Iterable[Any]</code> The iterable to return if the
attribute is <code>True</code>.</li>
<li><code>attr_owner: Any</code> The object to check for the
attribute.</li>
<li><code>attr_name: str</code> The name of the attribute to check.</li>
</ul>
<h3 id="returns-13">Returns:</h3>
<ul>
<li><code>itr: Iterable</code> if <code>attr_owner</code> has the
attribute <code>attr_name</code> and it boolean casts to
<code>True</code>, otherwise an empty sequence.</li>
<li><code>()</code> an empty sequence if the attribute is
<code>False</code> or not present.</li>
</ul>
<h3 id="flatten"><code>def flatten</code></h3>
<div class="sourceCode" id="cb193"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb193-1"><a href="#cb193-1" aria-hidden="true" tabindex="-1"></a>(it: Iterable[Any], levels_to_flatten: <span class="bu">int</span> <span class="op">|</span> <span class="va">None</span> <span class="op">=</span> <span class="va">None</span>) <span class="op">-&gt;</span> Generator</span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/misc/__init__.py#L45-L68">View
Source on GitHub</a></p>
<p>Flattens an arbitrarily nested iterable. Flattens all iterable data
types except for <code>str</code> and <code>bytes</code>.</p>
<h3 id="returns-14">Returns</h3>
<p>Generator over the flattened sequence.</p>
<h3 id="parameters-24">Parameters</h3>
<ul>
<li><code>it</code>: Any arbitrarily nested iterable.</li>
<li><code>levels_to_flatten</code>: Number of levels to flatten by,
starting at the outermost layer. If <code>None</code>, performs full
flattening.</li>
</ul>
<h3 id="list_split"><code>def list_split</code></h3>
<div class="sourceCode" id="cb194"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb194-1"><a href="#cb194-1" aria-hidden="true" tabindex="-1"></a>(lst: <span class="bu">list</span>, val: Any) <span class="op">-&gt;</span> <span class="bu">list</span>[<span class="bu">list</span>]</span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/misc/__init__.py#L75-L103">View
Source on GitHub</a></p>
<p>split a list into sublists by <code>val</code>. similar to
“a_b_c”.split(“_“)</p>
<div class="sourceCode" id="cb195"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb195-1"><a href="#cb195-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> list_split([<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">0</span>,<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">0</span>,<span class="dv">6</span>], <span class="dv">0</span>)</span>
<span id="cb195-2"><a href="#cb195-2" aria-hidden="true" tabindex="-1"></a>[[<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>], [<span class="dv">4</span>, <span class="dv">5</span>], [<span class="dv">6</span>]]</span>
<span id="cb195-3"><a href="#cb195-3" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> list_split([<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>], <span class="dv">0</span>)</span>
<span id="cb195-4"><a href="#cb195-4" aria-hidden="true" tabindex="-1"></a>[[], [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>]]</span>
<span id="cb195-5"><a href="#cb195-5" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> list_split([<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>], <span class="dv">0</span>)</span>
<span id="cb195-6"><a href="#cb195-6" aria-hidden="true" tabindex="-1"></a>[[<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>]]</span>
<span id="cb195-7"><a href="#cb195-7" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> list_split([], <span class="dv">0</span>)</span>
<span id="cb195-8"><a href="#cb195-8" aria-hidden="true" tabindex="-1"></a>[[]]</span></code></pre></div>
<h3 id="list_join"><code>def list_join</code></h3>
<div class="sourceCode" id="cb196"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb196-1"><a href="#cb196-1" aria-hidden="true" tabindex="-1"></a>(lst: <span class="bu">list</span>, factory: Callable) <span class="op">-&gt;</span> <span class="bu">list</span></span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/misc/__init__.py#L106-L128">View
Source on GitHub</a></p>
<p>add a <em>new</em> instance of <code>factory()</code> between each
element of <code>lst</code></p>
<div class="sourceCode" id="cb197"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb197-1"><a href="#cb197-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> list_join([<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>], <span class="kw">lambda</span> : <span class="dv">0</span>)</span>
<span id="cb197-2"><a href="#cb197-2" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">2</span>,<span class="dv">0</span>,<span class="dv">3</span>]</span>
<span id="cb197-3"><a href="#cb197-3" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> list_join([<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>], <span class="kw">lambda</span>: [time.sleep(<span class="fl">0.1</span>), time.time()][<span class="dv">1</span>])</span>
<span id="cb197-4"><a href="#cb197-4" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>, <span class="fl">1600000000.0</span>, <span class="dv">2</span>, <span class="fl">1600000000.1</span>, <span class="dv">3</span>]</span></code></pre></div>
<h3 id="apply_mapping"><code>def apply_mapping</code></h3>
<div class="sourceCode" id="cb198"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb198-1"><a href="#cb198-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb198-2"><a href="#cb198-2" aria-hidden="true" tabindex="-1"></a>    mapping: Mapping[<span class="op">~</span>_AM_K, <span class="op">~</span>_AM_V],</span>
<span id="cb198-3"><a href="#cb198-3" aria-hidden="true" tabindex="-1"></a>    <span class="bu">iter</span>: Iterable[<span class="op">~</span>_AM_K],</span>
<span id="cb198-4"><a href="#cb198-4" aria-hidden="true" tabindex="-1"></a>    when_missing: Literal[<span class="st">&#39;except&#39;</span>, <span class="st">&#39;skip&#39;</span>, <span class="st">&#39;include&#39;</span>] <span class="op">=</span> <span class="st">&#39;skip&#39;</span></span>
<span id="cb198-5"><a href="#cb198-5" aria-hidden="true" tabindex="-1"></a>) <span class="op">-&gt;</span> <span class="bu">list</span>[typing.Union[<span class="op">~</span>_AM_K, <span class="op">~</span>_AM_V]]</span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/misc/__init__.py#L138-L184">View
Source on GitHub</a></p>
<p>Given an iterable and a mapping, apply the mapping to the iterable
with certain options</p>
<p>Gotcha: if <code>when_missing</code> is invalid, this is totally fine
until a missing key is actually encountered.</p>
<p>Note: you can use this with
<code>&lt;a href="kappa.html#Kappa"&gt;muutils.kappa.Kappa&lt;/a&gt;</code>
if you want to pass a function instead of a dict</p>
<h3 id="parameters-25">Parameters:</h3>
<ul>
<li><code>mapping : Mapping[_AM_K, _AM_V]</code> must have
<code>__contains__</code> and <code>__getitem__</code>, both of which
take <code>_AM_K</code> and the latter returns <code>_AM_V</code></li>
<li><code>iter : Iterable[_AM_K]</code> the iterable to apply the
mapping to</li>
<li><code>when_missing : WhenMissing</code> what to do when a key is
missing from the mapping – this is what distinguishes this function from
<code>map</code> you can choose from <code>"skip"</code>,
<code>"include"</code> (without converting), and <code>"except"</code>
(defaults to <code>"skip"</code>)</li>
</ul>
<h3 id="returns-15">Returns:</h3>
<p>return type is one of: - <code>list[_AM_V]</code> if
<code>when_missing</code> is <code>"skip"</code> or
<code>"except"</code> - <code>list[Union[_AM_K, _AM_V]]</code> if
<code>when_missing</code> is <code>"include"</code></p>
<h3 id="raises-14">Raises:</h3>
<ul>
<li><code>KeyError</code> : if the item is missing from the mapping and
<code>when_missing</code> is <code>"except"</code></li>
<li><code>ValueError</code> : if <code>when_missing</code> is
invalid</li>
</ul>
<h3 id="apply_mapping_chain"><code>def apply_mapping_chain</code></h3>
<div class="sourceCode" id="cb199"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb199-1"><a href="#cb199-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb199-2"><a href="#cb199-2" aria-hidden="true" tabindex="-1"></a>    mapping: Mapping[<span class="op">~</span>_AM_K, Iterable[<span class="op">~</span>_AM_V]],</span>
<span id="cb199-3"><a href="#cb199-3" aria-hidden="true" tabindex="-1"></a>    <span class="bu">iter</span>: Iterable[<span class="op">~</span>_AM_K],</span>
<span id="cb199-4"><a href="#cb199-4" aria-hidden="true" tabindex="-1"></a>    when_missing: Literal[<span class="st">&#39;except&#39;</span>, <span class="st">&#39;skip&#39;</span>, <span class="st">&#39;include&#39;</span>] <span class="op">=</span> <span class="st">&#39;skip&#39;</span></span>
<span id="cb199-5"><a href="#cb199-5" aria-hidden="true" tabindex="-1"></a>) <span class="op">-&gt;</span> <span class="bu">list</span>[typing.Union[<span class="op">~</span>_AM_K, <span class="op">~</span>_AM_V]]</span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/misc/__init__.py#L187-L234">View
Source on GitHub</a></p>
<p>Given an iterable and a mapping, chain the mappings together</p>
<p>Gotcha: if <code>when_missing</code> is invalid, this is totally fine
until a missing key is actually encountered.</p>
<p>Note: you can use this with
<code>&lt;a href="kappa.html#Kappa"&gt;muutils.kappa.Kappa&lt;/a&gt;</code>
if you want to pass a function instead of a dict</p>
<h3 id="parameters-26">Parameters:</h3>
<ul>
<li><code>mapping : Mapping[_AM_K, Iterable[_AM_V]]</code> must have
<code>__contains__</code> and <code>__getitem__</code>, both of which
take <code>_AM_K</code> and the latter returns
<code>Iterable[_AM_V]</code></li>
<li><code>iter : Iterable[_AM_K]</code> the iterable to apply the
mapping to</li>
<li><code>when_missing : WhenMissing</code> what to do when a key is
missing from the mapping – this is what distinguishes this function from
<code>map</code> you can choose from <code>"skip"</code>,
<code>"include"</code> (without converting), and <code>"except"</code>
(defaults to <code>"skip"</code>)</li>
</ul>
<h3 id="returns-16">Returns:</h3>
<p>return type is one of: - <code>list[_AM_V]</code> if
<code>when_missing</code> is <code>"skip"</code> or
<code>"except"</code> - <code>list[Union[_AM_K, _AM_V]]</code> if
<code>when_missing</code> is <code>"include"</code></p>
<h3 id="raises-15">Raises:</h3>
<ul>
<li><code>KeyError</code> : if the item is missing from the mapping and
<code>when_missing</code> is <code>"except"</code></li>
<li><code>ValueError</code> : if <code>when_missing</code> is
invalid</li>
</ul>
<h3 id="sanitize_name"><code>def sanitize_name</code></h3>
<div class="sourceCode" id="cb200"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb200-1"><a href="#cb200-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb200-2"><a href="#cb200-2" aria-hidden="true" tabindex="-1"></a>    name: <span class="bu">str</span> <span class="op">|</span> <span class="va">None</span>,</span>
<span id="cb200-3"><a href="#cb200-3" aria-hidden="true" tabindex="-1"></a>    additional_allowed_chars: <span class="bu">str</span> <span class="op">=</span> <span class="st">&#39;&#39;</span>,</span>
<span id="cb200-4"><a href="#cb200-4" aria-hidden="true" tabindex="-1"></a>    replace_invalid: <span class="bu">str</span> <span class="op">=</span> <span class="st">&#39;&#39;</span>,</span>
<span id="cb200-5"><a href="#cb200-5" aria-hidden="true" tabindex="-1"></a>    when_none: <span class="bu">str</span> <span class="op">|</span> <span class="va">None</span> <span class="op">=</span> <span class="st">&#39;_None_&#39;</span>,</span>
<span id="cb200-6"><a href="#cb200-6" aria-hidden="true" tabindex="-1"></a>    leading_digit_prefix: <span class="bu">str</span> <span class="op">=</span> <span class="st">&#39;&#39;</span></span>
<span id="cb200-7"><a href="#cb200-7" aria-hidden="true" tabindex="-1"></a>) <span class="op">-&gt;</span> <span class="bu">str</span></span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/misc/__init__.py#L7-L55">View
Source on GitHub</a></p>
<p>sanitize a string, leaving only alphanumerics and
<code>additional_allowed_chars</code></p>
<h3 id="parameters-27">Parameters:</h3>
<ul>
<li><code>name : str | None</code> input string</li>
<li><code>additional_allowed_chars : str</code> additional characters to
allow, none by default (defaults to <code>""</code>)</li>
<li><code>replace_invalid : str</code> character to replace invalid
characters with (defaults to <code>""</code>)</li>
<li><code>when_none : str | None</code> string to return if
<code>name</code> is <code>None</code>. if <code>None</code>, raises an
exception (defaults to <code>"_None_"</code>)</li>
<li><code>leading_digit_prefix : str</code> character to prefix the
string with if it starts with a digit (defaults to <code>""</code>)</li>
</ul>
<h3 id="returns-17">Returns:</h3>
<ul>
<li><code>str</code> sanitized string</li>
</ul>
<h3 id="sanitize_fname"><code>def sanitize_fname</code></h3>
<div class="sourceCode" id="cb201"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb201-1"><a href="#cb201-1" aria-hidden="true" tabindex="-1"></a>(fname: <span class="bu">str</span> <span class="op">|</span> <span class="va">None</span>, <span class="op">**</span>kwargs) <span class="op">-&gt;</span> <span class="bu">str</span></span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/misc/__init__.py#L58-L63">View
Source on GitHub</a></p>
<p>sanitize a filename to posix standards</p>
<ul>
<li>leave only alphanumerics, <code>_</code> (underscore), ‘-’ (dash)
and <code>.</code> (period)</li>
</ul>
<h3 id="sanitize_identifier"><code>def sanitize_identifier</code></h3>
<div class="sourceCode" id="cb202"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb202-1"><a href="#cb202-1" aria-hidden="true" tabindex="-1"></a>(fname: <span class="bu">str</span> <span class="op">|</span> <span class="va">None</span>, <span class="op">**</span>kwargs) <span class="op">-&gt;</span> <span class="bu">str</span></span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/misc/__init__.py#L66-L74">View
Source on GitHub</a></p>
<p>sanitize an identifier (variable or function name)</p>
<ul>
<li>leave only alphanumerics and <code>_</code> (underscore)</li>
<li>prefix with <code>_</code> if it starts with a digit</li>
</ul>
<h3 id="dict_to_filename"><code>def dict_to_filename</code></h3>
<div class="sourceCode" id="cb203"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb203-1"><a href="#cb203-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb203-2"><a href="#cb203-2" aria-hidden="true" tabindex="-1"></a>    data: <span class="bu">dict</span>,</span>
<span id="cb203-3"><a href="#cb203-3" aria-hidden="true" tabindex="-1"></a>    format_str: <span class="bu">str</span> <span class="op">=</span> <span class="st">&#39;</span><span class="sc">{key}</span><span class="st">_</span><span class="sc">{val}</span><span class="st">&#39;</span>,</span>
<span id="cb203-4"><a href="#cb203-4" aria-hidden="true" tabindex="-1"></a>    separator: <span class="bu">str</span> <span class="op">=</span> <span class="st">&#39;.&#39;</span>,</span>
<span id="cb203-5"><a href="#cb203-5" aria-hidden="true" tabindex="-1"></a>    max_length: <span class="bu">int</span> <span class="op">=</span> <span class="dv">255</span></span>
<span id="cb203-6"><a href="#cb203-6" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/misc/__init__.py#L77-L99">View
Source on GitHub</a></p>
<h3 id="dynamic_docstring"><code>def dynamic_docstring</code></h3>
<div class="sourceCode" id="cb204"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb204-1"><a href="#cb204-1" aria-hidden="true" tabindex="-1"></a>(<span class="op">**</span>doc_params)</span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/misc/__init__.py#L102-L108">View
Source on GitHub</a></p>
<h3
id="shorten_numerical_to_str"><code>def shorten_numerical_to_str</code></h3>
<div class="sourceCode" id="cb205"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb205-1"><a href="#cb205-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb205-2"><a href="#cb205-2" aria-hidden="true" tabindex="-1"></a>    num: <span class="bu">int</span> <span class="op">|</span> <span class="bu">float</span>,</span>
<span id="cb205-3"><a href="#cb205-3" aria-hidden="true" tabindex="-1"></a>    small_as_decimal: <span class="bu">bool</span> <span class="op">=</span> <span class="va">True</span>,</span>
<span id="cb205-4"><a href="#cb205-4" aria-hidden="true" tabindex="-1"></a>    precision: <span class="bu">int</span> <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb205-5"><a href="#cb205-5" aria-hidden="true" tabindex="-1"></a>) <span class="op">-&gt;</span> <span class="bu">str</span></span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/misc/__init__.py#L22-L46">View
Source on GitHub</a></p>
<p>shorten a large numerical value to a string 1234 -&gt; 1K</p>
<p>precision guaranteed to 1 in 10, but can be higher. reverse of
<code>str_to_numeric</code></p>
<h3 id="str_to_numeric"><code>def str_to_numeric</code></h3>
<div class="sourceCode" id="cb206"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb206-1"><a href="#cb206-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb206-2"><a href="#cb206-2" aria-hidden="true" tabindex="-1"></a>    quantity: <span class="bu">str</span>,</span>
<span id="cb206-3"><a href="#cb206-3" aria-hidden="true" tabindex="-1"></a>    mapping: <span class="va">None</span> <span class="op">|</span> <span class="bu">bool</span> <span class="op">|</span> <span class="bu">dict</span>[<span class="bu">str</span>, <span class="bu">int</span> <span class="op">|</span> <span class="bu">float</span>] <span class="op">=</span> <span class="va">True</span></span>
<span id="cb206-4"><a href="#cb206-4" aria-hidden="true" tabindex="-1"></a>) <span class="op">-&gt;</span> <span class="bu">int</span> <span class="op">|</span> <span class="bu">float</span></span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/misc/__init__.py#L49-L165">View
Source on GitHub</a></p>
<p>Convert a string representing a quantity to a numeric value.</p>
<p>The string can represent an integer, python float, fraction, or
shortened via <code>shorten_numerical_to_str</code>.</p>
<h3 id="examples-2">Examples:</h3>
<pre><code>&gt;&gt;&gt; str_to_numeric(&quot;5&quot;)
5
&gt;&gt;&gt; str_to_numeric(&quot;0.1&quot;)
0.1
&gt;&gt;&gt; str_to_numeric(&quot;1/5&quot;)
0.2
&gt;&gt;&gt; str_to_numeric(&quot;-1K&quot;)
-1000.0
&gt;&gt;&gt; str_to_numeric(&quot;1.5M&quot;)
1500000.0
&gt;&gt;&gt; str_to_numeric(&quot;1.2e2&quot;)
120.0</code></pre>
<ul>
<li><code>_SHORTEN_MAP = {1000.0: 'K', 1000000.0: 'M', 1000000000.0: 'B', 1000000000000.0: 't', 1000000000000000.0: 'q', 1e+18: 'Q'}</code></li>
</ul>
<h3 id="FrozenDict"><code>class FrozenDict(builtins.dict):</code></h3>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/misc/__init__.py#L5-L10">View
Source on GitHub</a></p>
<h3 id="inherited-members-15">Inherited Members</h3>
<ul>
<li><a href="#FrozenDict.get"><code>get</code></a></li>
<li><a href="#FrozenDict.setdefault"><code>setdefault</code></a></li>
<li><a href="#FrozenDict.pop"><code>pop</code></a></li>
<li><a href="#FrozenDict.popitem"><code>popitem</code></a></li>
<li><a href="#FrozenDict.keys"><code>keys</code></a></li>
<li><a href="#FrozenDict.items"><code>items</code></a></li>
<li><a href="#FrozenDict.values"><code>values</code></a></li>
<li><a href="#FrozenDict.update"><code>update</code></a></li>
<li><a href="#FrozenDict.fromkeys"><code>fromkeys</code></a></li>
<li><a href="#FrozenDict.clear"><code>clear</code></a></li>
<li><a href="#FrozenDict.copy"><code>copy</code></a></li>
</ul>
<h3 id="FrozenList"><code>class FrozenList(builtins.list):</code></h3>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/misc/__init__.py#L13-L36">View
Source on GitHub</a></p>
<p>Built-in mutable sequence.</p>
<p>If no argument is given, the constructor creates a new empty list.
The argument must be an iterable if specified.</p>
<h3 id="FrozenList.append"><code>def append</code></h3>
<div class="sourceCode" id="cb208"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb208-1"><a href="#cb208-1" aria-hidden="true" tabindex="-1"></a>(<span class="va">self</span>, value)</span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/misc/__init__.py#L20-L21">View
Source on GitHub</a></p>
<p>Append object to the end of the list.</p>
<h3 id="FrozenList.extend"><code>def extend</code></h3>
<div class="sourceCode" id="cb209"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb209-1"><a href="#cb209-1" aria-hidden="true" tabindex="-1"></a>(<span class="va">self</span>, iterable)</span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/misc/__init__.py#L23-L24">View
Source on GitHub</a></p>
<p>Extend list by appending elements from the iterable.</p>
<h3 id="FrozenList.insert"><code>def insert</code></h3>
<div class="sourceCode" id="cb210"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb210-1"><a href="#cb210-1" aria-hidden="true" tabindex="-1"></a>(<span class="va">self</span>, index, value)</span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/misc/__init__.py#L26-L27">View
Source on GitHub</a></p>
<p>Insert object before index.</p>
<h3 id="FrozenList.remove"><code>def remove</code></h3>
<div class="sourceCode" id="cb211"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb211-1"><a href="#cb211-1" aria-hidden="true" tabindex="-1"></a>(<span class="va">self</span>, value)</span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/misc/__init__.py#L29-L30">View
Source on GitHub</a></p>
<p>Remove first occurrence of value.</p>
<p>Raises ValueError if the value is not present.</p>
<h3 id="FrozenList.pop"><code>def pop</code></h3>
<div class="sourceCode" id="cb212"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb212-1"><a href="#cb212-1" aria-hidden="true" tabindex="-1"></a>(<span class="va">self</span>, index<span class="op">=-</span><span class="dv">1</span>)</span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/misc/__init__.py#L32-L33">View
Source on GitHub</a></p>
<p>Remove and return item at index (default last).</p>
<p>Raises IndexError if list is empty or index is out of range.</p>
<h3 id="FrozenList.clear"><code>def clear</code></h3>
<div class="sourceCode" id="cb213"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb213-1"><a href="#cb213-1" aria-hidden="true" tabindex="-1"></a>(<span class="va">self</span>)</span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/misc/__init__.py#L35-L36">View
Source on GitHub</a></p>
<p>Remove all items from list.</p>
<h3 id="inherited-members-16">Inherited Members</h3>
<ul>
<li><a href="#FrozenList.__init__"><code>list</code></a></li>
<li><a href="#FrozenList.copy"><code>copy</code></a></li>
<li><a href="#FrozenList.index"><code>index</code></a></li>
<li><a href="#FrozenList.count"><code>count</code></a></li>
<li><a href="#FrozenList.reverse"><code>reverse</code></a></li>
<li><a href="#FrozenList.sort"><code>sort</code></a></li>
</ul>
<h3 id="freeze"><code>def freeze</code></h3>
<div class="sourceCode" id="cb214"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb214-1"><a href="#cb214-1" aria-hidden="true" tabindex="-1"></a>(instance: Any) <span class="op">-&gt;</span> Any</span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/misc/__init__.py#L52-L121">View
Source on GitHub</a></p>
<p>recursively freeze an object in-place so that its attributes and
elements cannot be changed</p>
<p>messy in the sense that sometimes the object is modified in place,
but you can’t rely on that. always use the return value.</p>
<p>the <a
href="https://github.com/diegojromerolopez/gelidum/">gelidum</a> package
is a more complete implementation of this idea</p>
<h3 id="is_abstract"><code>def is_abstract</code></h3>
<div class="sourceCode" id="cb215"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb215-1"><a href="#cb215-1" aria-hidden="true" tabindex="-1"></a>(cls: <span class="bu">type</span>) <span class="op">-&gt;</span> <span class="bu">bool</span></span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/misc/__init__.py#L14-L23">View
Source on GitHub</a></p>
<p>Returns if a class is abstract.</p>
<h3 id="get_all_subclasses"><code>def get_all_subclasses</code></h3>
<div class="sourceCode" id="cb216"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb216-1"><a href="#cb216-1" aria-hidden="true" tabindex="-1"></a>(class_: <span class="bu">type</span>, include_self<span class="op">=</span><span class="va">False</span>) <span class="op">-&gt;</span> <span class="bu">set</span>[<span class="bu">type</span>]</span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/misc/__init__.py#L26-L48">View
Source on GitHub</a></p>
<p>Returns a set containing all child classes in the subclass graph of
<code>class_</code>. I.e., includes subclasses of subclasses, etc.</p>
<h3 id="parameters-28">Parameters</h3>
<ul>
<li><code>include_self</code>: Whether to include <code>class_</code>
itself in the returned set</li>
<li><code>class_</code>: Superclass</li>
</ul>
<h3 id="development">Development</h3>
<p>Since most class hierarchies are small, the inefficiencies of the
existing recursive implementation aren’t problematic. It might be
valuable to refactor with memoization if the need arises to use this
function on a very large class hierarchy.</p>
<h3
id="isinstance_by_type_name"><code>def isinstance_by_type_name</code></h3>
<div class="sourceCode" id="cb217"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb217-1"><a href="#cb217-1" aria-hidden="true" tabindex="-1"></a>(o: <span class="bu">object</span>, type_name: <span class="bu">str</span>)</span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/misc/__init__.py#L51-L61">View
Source on GitHub</a></p>
<p>Behaves like stdlib <code>isinstance</code> except it accepts a
string representation of the type rather than the type itself. This is a
hacky function intended to circumvent the need to import a type into a
module. It is susceptible to type name collisions.</p>
<h3 id="parameters-29">Parameters</h3>
<p><code>o</code>: Object (not the type itself) whose type to
interrogate <code>type_name</code>: The string returned by
<code>type_.__name__</code>. Generic types are not supported, only types
that would appear in <code>type_.__mro__</code>.</p>
<h3
id="IsDataclass"><code>class IsDataclass(typing.Protocol):</code></h3>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/misc/__init__.py#L68-L72">View
Source on GitHub</a></p>
<p>Base class for protocol classes.</p>
<p>Protocol classes are defined as::</p>
<pre><code>class Proto(Protocol):
    def meth(self) -&gt; int:
        ...</code></pre>
<p>Such classes are primarily used with static type checkers that
recognize structural subtyping (static duck-typing).</p>
<p>For example::</p>
<pre><code>class C:
    def meth(self) -&gt; int:
        return 0

def func(x: Proto) -&gt; int:
    return x.meth()

func(C())  # Passes static type check</code></pre>
<p>See PEP 544 for details. Protocol classes decorated with <span
class="citation"
data-cites="typing.runtime_checkable">@typing.runtime_checkable</span>
act as simple-minded runtime protocols that check only the presence of
given attributes, ignoring their type signatures. Protocol classes can
be generic, they are defined as::</p>
<pre><code>class GenProto[T](Protocol):
    def meth(self) -&gt; T:
        ...</code></pre>
<h3 id="IsDataclass.__init__"><code>IsDataclass</code></h3>
<div class="sourceCode" id="cb221"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb221-1"><a href="#cb221-1" aria-hidden="true" tabindex="-1"></a>(<span class="op">*</span>args, <span class="op">**</span>kwargs)</span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/misc/__init__.py#L1766-L1792">View
Source on GitHub</a></p>
<h3
id="get_hashable_eq_attrs"><code>def get_hashable_eq_attrs</code></h3>
<div class="sourceCode" id="cb222"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb222-1"><a href="#cb222-1" aria-hidden="true" tabindex="-1"></a>(dc: muutils.misc.classes.IsDataclass) <span class="op">-&gt;</span> <span class="bu">tuple</span>[typing.Any]</span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/misc/__init__.py#L75-L83">View
Source on GitHub</a></p>
<p>Returns a tuple of all fields used for equality comparison, including
the type of the dataclass itself. The type is included to preserve the
unequal equality behavior of instances of different dataclasses whose
fields are identical. Essentially used to generate a hashable dataclass
representation for equality comparison even if it’s not frozen.</p>
<h3 id="dataclass_set_equals"><code>def dataclass_set_equals</code></h3>
<div class="sourceCode" id="cb223"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb223-1"><a href="#cb223-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb223-2"><a href="#cb223-2" aria-hidden="true" tabindex="-1"></a>    coll1: Iterable[muutils.misc.classes.IsDataclass],</span>
<span id="cb223-3"><a href="#cb223-3" aria-hidden="true" tabindex="-1"></a>    coll2: Iterable[muutils.misc.classes.IsDataclass]</span>
<span id="cb223-4"><a href="#cb223-4" aria-hidden="true" tabindex="-1"></a>) <span class="op">-&gt;</span> <span class="bu">bool</span></span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/misc/__init__.py#L86-L97">View
Source on GitHub</a></p>
<p>Compares 2 collections of dataclass instances as if they were sets.
Duplicates are ignored in the same manner as a set. Unfrozen dataclasses
can’t be placed in sets since they’re not hashable. Collections of them
may be compared using this function.</p>
<blockquote>
<p>docs for <a
href="https://github.com/mivanit/muutils"><code>muutils</code></a>
v0.8.6</p>
</blockquote>
<h2 id="api-documentation-23">API Documentation</h2>
<ul>
<li><a href="#is_abstract"><code>is_abstract</code></a></li>
<li><a
href="#get_all_subclasses"><code>get_all_subclasses</code></a></li>
<li><a
href="#isinstance_by_type_name"><code>isinstance_by_type_name</code></a></li>
<li><a href="#IsDataclass"><code>IsDataclass</code></a></li>
<li><a
href="#get_hashable_eq_attrs"><code>get_hashable_eq_attrs</code></a></li>
<li><a
href="#dataclass_set_equals"><code>dataclass_set_equals</code></a></li>
</ul>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/misc/classes.py">View
Source on GitHub</a></p>
<h1 id="muutils.misc.classes"><code>muutils.misc.classes</code></h1>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/misc/classes.py#L0-L96">View
Source on GitHub</a></p>
<h3 id="is_abstract"><code>def is_abstract</code></h3>
<div class="sourceCode" id="cb224"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb224-1"><a href="#cb224-1" aria-hidden="true" tabindex="-1"></a>(cls: <span class="bu">type</span>) <span class="op">-&gt;</span> <span class="bu">bool</span></span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/misc/classes.py#L14-L23">View
Source on GitHub</a></p>
<p>Returns if a class is abstract.</p>
<h3 id="get_all_subclasses"><code>def get_all_subclasses</code></h3>
<div class="sourceCode" id="cb225"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb225-1"><a href="#cb225-1" aria-hidden="true" tabindex="-1"></a>(class_: <span class="bu">type</span>, include_self<span class="op">=</span><span class="va">False</span>) <span class="op">-&gt;</span> <span class="bu">set</span>[<span class="bu">type</span>]</span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/misc/classes.py#L26-L48">View
Source on GitHub</a></p>
<p>Returns a set containing all child classes in the subclass graph of
<code>class_</code>. I.e., includes subclasses of subclasses, etc.</p>
<h3 id="parameters-30">Parameters</h3>
<ul>
<li><code>include_self</code>: Whether to include <code>class_</code>
itself in the returned set</li>
<li><code>class_</code>: Superclass</li>
</ul>
<h3 id="development-1">Development</h3>
<p>Since most class hierarchies are small, the inefficiencies of the
existing recursive implementation aren’t problematic. It might be
valuable to refactor with memoization if the need arises to use this
function on a very large class hierarchy.</p>
<h3
id="isinstance_by_type_name"><code>def isinstance_by_type_name</code></h3>
<div class="sourceCode" id="cb226"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb226-1"><a href="#cb226-1" aria-hidden="true" tabindex="-1"></a>(o: <span class="bu">object</span>, type_name: <span class="bu">str</span>)</span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/misc/classes.py#L51-L61">View
Source on GitHub</a></p>
<p>Behaves like stdlib <code>isinstance</code> except it accepts a
string representation of the type rather than the type itself. This is a
hacky function intended to circumvent the need to import a type into a
module. It is susceptible to type name collisions.</p>
<h3 id="parameters-31">Parameters</h3>
<p><code>o</code>: Object (not the type itself) whose type to
interrogate <code>type_name</code>: The string returned by
<code>type_.__name__</code>. Generic types are not supported, only types
that would appear in <code>type_.__mro__</code>.</p>
<h3
id="IsDataclass"><code>class IsDataclass(typing.Protocol):</code></h3>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/misc/classes.py#L68-L72">View
Source on GitHub</a></p>
<p>Base class for protocol classes.</p>
<p>Protocol classes are defined as::</p>
<pre><code>class Proto(Protocol):
    def meth(self) -&gt; int:
        ...</code></pre>
<p>Such classes are primarily used with static type checkers that
recognize structural subtyping (static duck-typing).</p>
<p>For example::</p>
<pre><code>class C:
    def meth(self) -&gt; int:
        return 0

def func(x: Proto) -&gt; int:
    return x.meth()

func(C())  # Passes static type check</code></pre>
<p>See PEP 544 for details. Protocol classes decorated with <span
class="citation"
data-cites="typing.runtime_checkable">@typing.runtime_checkable</span>
act as simple-minded runtime protocols that check only the presence of
given attributes, ignoring their type signatures. Protocol classes can
be generic, they are defined as::</p>
<pre><code>class GenProto[T](Protocol):
    def meth(self) -&gt; T:
        ...</code></pre>
<h3 id="IsDataclass.__init__"><code>IsDataclass</code></h3>
<div class="sourceCode" id="cb230"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb230-1"><a href="#cb230-1" aria-hidden="true" tabindex="-1"></a>(<span class="op">*</span>args, <span class="op">**</span>kwargs)</span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/misc/classes.py#L1766-L1792">View
Source on GitHub</a></p>
<h3
id="get_hashable_eq_attrs"><code>def get_hashable_eq_attrs</code></h3>
<div class="sourceCode" id="cb231"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb231-1"><a href="#cb231-1" aria-hidden="true" tabindex="-1"></a>(dc: muutils.misc.classes.IsDataclass) <span class="op">-&gt;</span> <span class="bu">tuple</span>[typing.Any]</span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/misc/classes.py#L75-L83">View
Source on GitHub</a></p>
<p>Returns a tuple of all fields used for equality comparison, including
the type of the dataclass itself. The type is included to preserve the
unequal equality behavior of instances of different dataclasses whose
fields are identical. Essentially used to generate a hashable dataclass
representation for equality comparison even if it’s not frozen.</p>
<h3 id="dataclass_set_equals"><code>def dataclass_set_equals</code></h3>
<div class="sourceCode" id="cb232"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb232-1"><a href="#cb232-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb232-2"><a href="#cb232-2" aria-hidden="true" tabindex="-1"></a>    coll1: Iterable[muutils.misc.classes.IsDataclass],</span>
<span id="cb232-3"><a href="#cb232-3" aria-hidden="true" tabindex="-1"></a>    coll2: Iterable[muutils.misc.classes.IsDataclass]</span>
<span id="cb232-4"><a href="#cb232-4" aria-hidden="true" tabindex="-1"></a>) <span class="op">-&gt;</span> <span class="bu">bool</span></span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/misc/classes.py#L86-L97">View
Source on GitHub</a></p>
<p>Compares 2 collections of dataclass instances as if they were sets.
Duplicates are ignored in the same manner as a set. Unfrozen dataclasses
can’t be placed in sets since they’re not hashable. Collections of them
may be compared using this function.</p>
<blockquote>
<p>docs for <a
href="https://github.com/mivanit/muutils"><code>muutils</code></a>
v0.8.6</p>
</blockquote>
<h2 id="api-documentation-24">API Documentation</h2>
<ul>
<li><a href="#FrozenDict"><code>FrozenDict</code></a></li>
<li><a href="#FrozenList"><code>FrozenList</code></a></li>
<li><a href="#freeze"><code>freeze</code></a></li>
</ul>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/misc/freezing.py">View
Source on GitHub</a></p>
<h1 id="muutils.misc.freezing"><code>muutils.misc.freezing</code></h1>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/misc/freezing.py#L0-L120">View
Source on GitHub</a></p>
<h3 id="FrozenDict"><code>class FrozenDict(builtins.dict):</code></h3>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/misc/freezing.py#L5-L10">View
Source on GitHub</a></p>
<h3 id="inherited-members-17">Inherited Members</h3>
<ul>
<li><a href="#FrozenDict.get"><code>get</code></a></li>
<li><a href="#FrozenDict.setdefault"><code>setdefault</code></a></li>
<li><a href="#FrozenDict.pop"><code>pop</code></a></li>
<li><a href="#FrozenDict.popitem"><code>popitem</code></a></li>
<li><a href="#FrozenDict.keys"><code>keys</code></a></li>
<li><a href="#FrozenDict.items"><code>items</code></a></li>
<li><a href="#FrozenDict.values"><code>values</code></a></li>
<li><a href="#FrozenDict.update"><code>update</code></a></li>
<li><a href="#FrozenDict.fromkeys"><code>fromkeys</code></a></li>
<li><a href="#FrozenDict.clear"><code>clear</code></a></li>
<li><a href="#FrozenDict.copy"><code>copy</code></a></li>
</ul>
<h3 id="FrozenList"><code>class FrozenList(builtins.list):</code></h3>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/misc/freezing.py#L13-L36">View
Source on GitHub</a></p>
<p>Built-in mutable sequence.</p>
<p>If no argument is given, the constructor creates a new empty list.
The argument must be an iterable if specified.</p>
<h3 id="FrozenList.append"><code>def append</code></h3>
<div class="sourceCode" id="cb233"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb233-1"><a href="#cb233-1" aria-hidden="true" tabindex="-1"></a>(<span class="va">self</span>, value)</span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/misc/freezing.py#L20-L21">View
Source on GitHub</a></p>
<p>Append object to the end of the list.</p>
<h3 id="FrozenList.extend"><code>def extend</code></h3>
<div class="sourceCode" id="cb234"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb234-1"><a href="#cb234-1" aria-hidden="true" tabindex="-1"></a>(<span class="va">self</span>, iterable)</span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/misc/freezing.py#L23-L24">View
Source on GitHub</a></p>
<p>Extend list by appending elements from the iterable.</p>
<h3 id="FrozenList.insert"><code>def insert</code></h3>
<div class="sourceCode" id="cb235"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb235-1"><a href="#cb235-1" aria-hidden="true" tabindex="-1"></a>(<span class="va">self</span>, index, value)</span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/misc/freezing.py#L26-L27">View
Source on GitHub</a></p>
<p>Insert object before index.</p>
<h3 id="FrozenList.remove"><code>def remove</code></h3>
<div class="sourceCode" id="cb236"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb236-1"><a href="#cb236-1" aria-hidden="true" tabindex="-1"></a>(<span class="va">self</span>, value)</span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/misc/freezing.py#L29-L30">View
Source on GitHub</a></p>
<p>Remove first occurrence of value.</p>
<p>Raises ValueError if the value is not present.</p>
<h3 id="FrozenList.pop"><code>def pop</code></h3>
<div class="sourceCode" id="cb237"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb237-1"><a href="#cb237-1" aria-hidden="true" tabindex="-1"></a>(<span class="va">self</span>, index<span class="op">=-</span><span class="dv">1</span>)</span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/misc/freezing.py#L32-L33">View
Source on GitHub</a></p>
<p>Remove and return item at index (default last).</p>
<p>Raises IndexError if list is empty or index is out of range.</p>
<h3 id="FrozenList.clear"><code>def clear</code></h3>
<div class="sourceCode" id="cb238"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb238-1"><a href="#cb238-1" aria-hidden="true" tabindex="-1"></a>(<span class="va">self</span>)</span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/misc/freezing.py#L35-L36">View
Source on GitHub</a></p>
<p>Remove all items from list.</p>
<h3 id="inherited-members-18">Inherited Members</h3>
<ul>
<li><a href="#FrozenList.__init__"><code>list</code></a></li>
<li><a href="#FrozenList.copy"><code>copy</code></a></li>
<li><a href="#FrozenList.index"><code>index</code></a></li>
<li><a href="#FrozenList.count"><code>count</code></a></li>
<li><a href="#FrozenList.reverse"><code>reverse</code></a></li>
<li><a href="#FrozenList.sort"><code>sort</code></a></li>
</ul>
<h3 id="freeze"><code>def freeze</code></h3>
<div class="sourceCode" id="cb239"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb239-1"><a href="#cb239-1" aria-hidden="true" tabindex="-1"></a>(instance: Any) <span class="op">-&gt;</span> Any</span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/misc/freezing.py#L52-L121">View
Source on GitHub</a></p>
<p>recursively freeze an object in-place so that its attributes and
elements cannot be changed</p>
<p>messy in the sense that sometimes the object is modified in place,
but you can’t rely on that. always use the return value.</p>
<p>the <a
href="https://github.com/diegojromerolopez/gelidum/">gelidum</a> package
is a more complete implementation of this idea</p>
<blockquote>
<p>docs for <a
href="https://github.com/mivanit/muutils"><code>muutils</code></a>
v0.8.6</p>
</blockquote>
<h2 id="api-documentation-25">API Documentation</h2>
<ul>
<li><a href="#FuncParams"><code>FuncParams</code></a></li>
<li><a href="#FuncParamsPreWrap"><code>FuncParamsPreWrap</code></a></li>
<li><a href="#process_kwarg"><code>process_kwarg</code></a></li>
<li><a href="#validate_kwarg"><code>validate_kwarg</code></a></li>
<li><a href="#replace_kwarg"><code>replace_kwarg</code></a></li>
<li><a href="#is_none"><code>is_none</code></a></li>
<li><a href="#always_true"><code>always_true</code></a></li>
<li><a href="#always_false"><code>always_false</code></a></li>
<li><a href="#format_docstring"><code>format_docstring</code></a></li>
<li><a href="#LambdaArgs"><code>LambdaArgs</code></a></li>
<li><a href="#typed_lambda"><code>typed_lambda</code></a></li>
</ul>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/misc/func.py">View
Source on GitHub</a></p>
<h1 id="muutils.misc.func"><code>muutils.misc.func</code></h1>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/misc/func.py#L0-L276">View
Source on GitHub</a></p>
<ul>
<li><p><code>FuncParams = ~FuncParams</code></p></li>
<li><p><code>FuncParamsPreWrap = ~FuncParamsPreWrap</code></p></li>
</ul>
<h3 id="process_kwarg"><code>def process_kwarg</code></h3>
<div class="sourceCode" id="cb240"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb240-1"><a href="#cb240-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb240-2"><a href="#cb240-2" aria-hidden="true" tabindex="-1"></a>    kwarg_name: <span class="bu">str</span>,</span>
<span id="cb240-3"><a href="#cb240-3" aria-hidden="true" tabindex="-1"></a>    processor: Callable[[<span class="op">~</span>T_process_in], <span class="op">~</span>T_process_out]</span>
<span id="cb240-4"><a href="#cb240-4" aria-hidden="true" tabindex="-1"></a>) <span class="op">-&gt;</span> Callable[[Callable[<span class="op">~</span>FuncParamsPreWrap, <span class="op">~</span>ReturnType]], Callable[<span class="op">~</span>FuncParams, <span class="op">~</span>ReturnType]]</span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/misc/func.py#L37-L74">View
Source on GitHub</a></p>
<p>Decorator that applies a processor to a keyword argument.</p>
<p>The underlying function is expected to have a keyword argument (with
name <code>kwarg_name</code>) of type <code>T_out</code>, but the caller
provides a value of type <code>T_in</code> that is converted via
<code>processor</code>.</p>
<h3 id="parameters-32">Parameters:</h3>
<ul>
<li><code>kwarg_name : str</code> The name of the keyword argument to
process.</li>
<li><code>processor : Callable[[T_in], T_out]</code> A callable that
converts the input value (<code>T_in</code>) into the type expected by
the function (<code>T_out</code>).</li>
</ul>
<h3 id="returns-18">Returns:</h3>
<ul>
<li>A decorator that converts a function of type
<code>Callable[OutputParams, ReturnType]</code> (expecting
<code>kwarg_name</code> of type <code>T_out</code>) into one of type
<code>Callable[InputParams, ReturnType]</code> (accepting
<code>kwarg_name</code> of type <code>T_in</code>).</li>
</ul>
<h3 id="validate_kwarg"><code>def validate_kwarg</code></h3>
<div class="sourceCode" id="cb241"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb241-1"><a href="#cb241-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb241-2"><a href="#cb241-2" aria-hidden="true" tabindex="-1"></a>    kwarg_name: <span class="bu">str</span>,</span>
<span id="cb241-3"><a href="#cb241-3" aria-hidden="true" tabindex="-1"></a>    validator: Callable[[<span class="op">~</span>T_kwarg], <span class="bu">bool</span>],</span>
<span id="cb241-4"><a href="#cb241-4" aria-hidden="true" tabindex="-1"></a>    description: <span class="bu">str</span> <span class="op">|</span> <span class="va">None</span> <span class="op">=</span> <span class="va">None</span>,</span>
<span id="cb241-5"><a href="#cb241-5" aria-hidden="true" tabindex="-1"></a>    action: muutils.errormode.ErrorMode <span class="op">=</span> ErrorMode.Except</span>
<span id="cb241-6"><a href="#cb241-6" aria-hidden="true" tabindex="-1"></a>) <span class="op">-&gt;</span> Callable[[Callable[<span class="op">~</span>FuncParams, <span class="op">~</span>ReturnType]], Callable[<span class="op">~</span>FuncParams, <span class="op">~</span>ReturnType]]</span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/misc/func.py#L77-L139">View
Source on GitHub</a></p>
<p>Decorator that validates a specific keyword argument.</p>
<h3 id="parameters-33">Parameters:</h3>
<ul>
<li><code>kwarg_name : str</code> The name of the keyword argument to
validate.</li>
<li><code>validator : Callable[[Any], bool]</code> A callable that
returns True if the keyword argument is valid.</li>
<li><code>description : str | None</code> A message template if
validation fails.</li>
<li><code>action : str</code> Either <code>"raise"</code> (default) or
<code>"warn"</code>.</li>
</ul>
<h3 id="returns-19">Returns:</h3>
<ul>
<li><code>Callable[[Callable[FuncParams, ReturnType]], Callable[FuncParams, ReturnType]]</code>
A decorator that validates the keyword argument.</li>
</ul>
<h3 id="modifies">Modifies:</h3>
<ul>
<li>If validation fails and <code>action=="warn"</code>, emits a
warning. Otherwise, raises a ValueError.</li>
</ul>
<h3 id="usage-3">Usage:</h3>
<div class="sourceCode" id="cb242"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb242-1"><a href="#cb242-1" aria-hidden="true" tabindex="-1"></a><span class="at">@validate_kwarg</span>(<span class="st">&quot;x&quot;</span>, <span class="kw">lambda</span> val: val <span class="op">&gt;</span> <span class="dv">0</span>, <span class="st">&quot;Invalid </span><span class="sc">{kwarg_name}</span><span class="st">: </span><span class="sc">{value}</span><span class="st">&quot;</span>)</span>
<span id="cb242-2"><a href="#cb242-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> my_func(x: <span class="bu">int</span>) <span class="op">-&gt;</span> <span class="bu">int</span>:</span>
<span id="cb242-3"><a href="#cb242-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> x</span>
<span id="cb242-4"><a href="#cb242-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb242-5"><a href="#cb242-5" aria-hidden="true" tabindex="-1"></a><span class="cf">assert</span> my_func(x<span class="op">=</span><span class="dv">1</span>) <span class="op">==</span> <span class="dv">1</span></span></code></pre></div>
<h3 id="raises-16">Raises:</h3>
<ul>
<li><code>ValueError</code> if validation fails and
<code>action == "raise"</code>.</li>
</ul>
<h3 id="replace_kwarg"><code>def replace_kwarg</code></h3>
<div class="sourceCode" id="cb243"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb243-1"><a href="#cb243-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb243-2"><a href="#cb243-2" aria-hidden="true" tabindex="-1"></a>    kwarg_name: <span class="bu">str</span>,</span>
<span id="cb243-3"><a href="#cb243-3" aria-hidden="true" tabindex="-1"></a>    check: Callable[[<span class="op">~</span>T_kwarg], <span class="bu">bool</span>],</span>
<span id="cb243-4"><a href="#cb243-4" aria-hidden="true" tabindex="-1"></a>    replacement_value: <span class="op">~</span>T_kwarg,</span>
<span id="cb243-5"><a href="#cb243-5" aria-hidden="true" tabindex="-1"></a>    replace_if_missing: <span class="bu">bool</span> <span class="op">=</span> <span class="va">False</span></span>
<span id="cb243-6"><a href="#cb243-6" aria-hidden="true" tabindex="-1"></a>) <span class="op">-&gt;</span> Callable[[Callable[<span class="op">~</span>FuncParams, <span class="op">~</span>ReturnType]], Callable[<span class="op">~</span>FuncParams, <span class="op">~</span>ReturnType]]</span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/misc/func.py#L142-L193">View
Source on GitHub</a></p>
<p>Decorator that replaces a specific keyword argument value by identity
comparison.</p>
<h3 id="parameters-34">Parameters:</h3>
<ul>
<li><code>kwarg_name : str</code> The name of the keyword argument to
replace.</li>
<li><code>check : Callable[[T_kwarg], bool]</code> A callable that
returns True if the keyword argument should be replaced.</li>
<li><code>replacement_value : T_kwarg</code> The value to replace
with.</li>
<li><code>replace_if_missing : bool</code> If True, replaces the keyword
argument even if it’s missing.</li>
</ul>
<h3 id="returns-20">Returns:</h3>
<ul>
<li><code>Callable[[Callable[FuncParams, ReturnType]], Callable[FuncParams, ReturnType]]</code>
A decorator that replaces the keyword argument value.</li>
</ul>
<h3 id="modifies-1">Modifies:</h3>
<ul>
<li>Updates <code>kwargs[kwarg_name]</code> if its value is
<code>default_value</code>.</li>
</ul>
<h3 id="usage-4">Usage:</h3>
<div class="sourceCode" id="cb244"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb244-1"><a href="#cb244-1" aria-hidden="true" tabindex="-1"></a><span class="at">@replace_kwarg</span>(<span class="st">&quot;x&quot;</span>, <span class="va">None</span>, <span class="st">&quot;default_string&quot;</span>)</span>
<span id="cb244-2"><a href="#cb244-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> my_func(<span class="op">*</span>, x: <span class="bu">str</span> <span class="op">|</span> <span class="va">None</span> <span class="op">=</span> <span class="va">None</span>) <span class="op">-&gt;</span> <span class="bu">str</span>:</span>
<span id="cb244-3"><a href="#cb244-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> x</span>
<span id="cb244-4"><a href="#cb244-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb244-5"><a href="#cb244-5" aria-hidden="true" tabindex="-1"></a><span class="cf">assert</span> my_func(x<span class="op">=</span><span class="va">None</span>) <span class="op">==</span> <span class="st">&quot;default_string&quot;</span></span></code></pre></div>
<h3 id="is_none"><code>def is_none</code></h3>
<div class="sourceCode" id="cb245"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb245-1"><a href="#cb245-1" aria-hidden="true" tabindex="-1"></a>(value: Any) <span class="op">-&gt;</span> <span class="bu">bool</span></span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/misc/func.py#L196-L197">View
Source on GitHub</a></p>
<h3 id="always_true"><code>def always_true</code></h3>
<div class="sourceCode" id="cb246"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb246-1"><a href="#cb246-1" aria-hidden="true" tabindex="-1"></a>(value: Any) <span class="op">-&gt;</span> <span class="bu">bool</span></span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/misc/func.py#L200-L201">View
Source on GitHub</a></p>
<h3 id="always_false"><code>def always_false</code></h3>
<div class="sourceCode" id="cb247"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb247-1"><a href="#cb247-1" aria-hidden="true" tabindex="-1"></a>(value: Any) <span class="op">-&gt;</span> <span class="bu">bool</span></span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/misc/func.py#L204-L205">View
Source on GitHub</a></p>
<h3 id="format_docstring"><code>def format_docstring</code></h3>
<div class="sourceCode" id="cb248"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb248-1"><a href="#cb248-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb248-2"><a href="#cb248-2" aria-hidden="true" tabindex="-1"></a>    <span class="op">**</span>fmt_kwargs: Any</span>
<span id="cb248-3"><a href="#cb248-3" aria-hidden="true" tabindex="-1"></a>) <span class="op">-&gt;</span> Callable[[Callable[<span class="op">~</span>FuncParams, <span class="op">~</span>ReturnType]], Callable[<span class="op">~</span>FuncParams, <span class="op">~</span>ReturnType]]</span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/misc/func.py#L208-L220">View
Source on GitHub</a></p>
<p>Decorator that formats a function’s docstring with the provided
keyword arguments.</p>
<ul>
<li><code>LambdaArgs = LambdaArgs</code></li>
</ul>
<h3 id="typed_lambda"><code>def typed_lambda</code></h3>
<div class="sourceCode" id="cb249"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb249-1"><a href="#cb249-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb249-2"><a href="#cb249-2" aria-hidden="true" tabindex="-1"></a>    fn: Callable[[Unpack[LambdaArgs]], <span class="op">~</span>ReturnType],</span>
<span id="cb249-3"><a href="#cb249-3" aria-hidden="true" tabindex="-1"></a>    in_types: <span class="op">~</span>LambdaArgsTypes,</span>
<span id="cb249-4"><a href="#cb249-4" aria-hidden="true" tabindex="-1"></a>    out_type: <span class="bu">type</span>[<span class="op">~</span>ReturnType]</span>
<span id="cb249-5"><a href="#cb249-5" aria-hidden="true" tabindex="-1"></a>) <span class="op">-&gt;</span> Callable[[Unpack[LambdaArgs]], <span class="op">~</span>ReturnType]</span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/misc/func.py#L228-L277">View
Source on GitHub</a></p>
<p>Wraps a lambda function with type hints.</p>
<h3 id="parameters-35">Parameters:</h3>
<ul>
<li><code>fn : Callable[[Unpack[LambdaArgs]], ReturnType]</code> The
lambda function to wrap.</li>
<li><code>in_types : tuple[type, ...]</code> Tuple of input types.</li>
<li><code>out_type : type[ReturnType]</code> The output type.</li>
</ul>
<h3 id="returns-21">Returns:</h3>
<ul>
<li><code>Callable[..., ReturnType]</code> A new function with
annotations matching the given signature.</li>
</ul>
<h3 id="usage-5">Usage:</h3>
<div class="sourceCode" id="cb250"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb250-1"><a href="#cb250-1" aria-hidden="true" tabindex="-1"></a>add <span class="op">=</span> typed_lambda(<span class="kw">lambda</span> x, y: x <span class="op">+</span> y, (<span class="bu">int</span>, <span class="bu">int</span>), <span class="bu">int</span>)</span>
<span id="cb250-2"><a href="#cb250-2" aria-hidden="true" tabindex="-1"></a><span class="cf">assert</span> add(<span class="dv">1</span>, <span class="dv">2</span>) <span class="op">==</span> <span class="dv">3</span></span></code></pre></div>
<h3 id="raises-17">Raises:</h3>
<ul>
<li><code>ValueError</code> if the number of input types doesn’t match
the lambda’s parameters.</li>
</ul>
<blockquote>
<p>docs for <a
href="https://github.com/mivanit/muutils"><code>muutils</code></a>
v0.8.6</p>
</blockquote>
<h2 id="api-documentation-26">API Documentation</h2>
<ul>
<li><a href="#stable_hash"><code>stable_hash</code></a></li>
<li><a href="#stable_json_dumps"><code>stable_json_dumps</code></a></li>
<li><a href="#base64_hash"><code>base64_hash</code></a></li>
</ul>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/misc/hashing.py">View
Source on GitHub</a></p>
<h1 id="muutils.misc.hashing"><code>muutils.misc.hashing</code></h1>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/misc/hashing.py#L0-L37">View
Source on GitHub</a></p>
<h3 id="stable_hash"><code>def stable_hash</code></h3>
<div class="sourceCode" id="cb251"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb251-1"><a href="#cb251-1" aria-hidden="true" tabindex="-1"></a>(s: <span class="bu">str</span> <span class="op">|</span> <span class="bu">bytes</span>) <span class="op">-&gt;</span> <span class="bu">int</span></span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/misc/hashing.py#L8-L18">View
Source on GitHub</a></p>
<p>Returns a stable hash of the given string. not cryptographically
secure, but stable between runs</p>
<h3 id="stable_json_dumps"><code>def stable_json_dumps</code></h3>
<div class="sourceCode" id="cb252"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb252-1"><a href="#cb252-1" aria-hidden="true" tabindex="-1"></a>(d) <span class="op">-&gt;</span> <span class="bu">str</span></span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/misc/hashing.py#L21-L26">View
Source on GitHub</a></p>
<h3 id="base64_hash"><code>def base64_hash</code></h3>
<div class="sourceCode" id="cb253"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb253-1"><a href="#cb253-1" aria-hidden="true" tabindex="-1"></a>(s: <span class="bu">str</span> <span class="op">|</span> <span class="bu">bytes</span>) <span class="op">-&gt;</span> <span class="bu">str</span></span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/misc/hashing.py#L29-L38">View
Source on GitHub</a></p>
<p>Returns a base64 representation of the hash of the given string. not
cryptographically secure</p>
<blockquote>
<p>docs for <a
href="https://github.com/mivanit/muutils"><code>muutils</code></a>
v0.8.6</p>
</blockquote>
<h2 id="api-documentation-27">API Documentation</h2>
<ul>
<li><a
href="#shorten_numerical_to_str"><code>shorten_numerical_to_str</code></a></li>
<li><a href="#str_to_numeric"><code>str_to_numeric</code></a></li>
</ul>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/misc/numerical.py">View
Source on GitHub</a></p>
<h1 id="muutils.misc.numerical"><code>muutils.misc.numerical</code></h1>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/misc/numerical.py#L0-L164">View
Source on GitHub</a></p>
<h3
id="shorten_numerical_to_str"><code>def shorten_numerical_to_str</code></h3>
<div class="sourceCode" id="cb254"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb254-1"><a href="#cb254-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb254-2"><a href="#cb254-2" aria-hidden="true" tabindex="-1"></a>    num: <span class="bu">int</span> <span class="op">|</span> <span class="bu">float</span>,</span>
<span id="cb254-3"><a href="#cb254-3" aria-hidden="true" tabindex="-1"></a>    small_as_decimal: <span class="bu">bool</span> <span class="op">=</span> <span class="va">True</span>,</span>
<span id="cb254-4"><a href="#cb254-4" aria-hidden="true" tabindex="-1"></a>    precision: <span class="bu">int</span> <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb254-5"><a href="#cb254-5" aria-hidden="true" tabindex="-1"></a>) <span class="op">-&gt;</span> <span class="bu">str</span></span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/misc/numerical.py#L22-L46">View
Source on GitHub</a></p>
<p>shorten a large numerical value to a string 1234 -&gt; 1K</p>
<p>precision guaranteed to 1 in 10, but can be higher. reverse of
<code>str_to_numeric</code></p>
<h3 id="str_to_numeric"><code>def str_to_numeric</code></h3>
<div class="sourceCode" id="cb255"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb255-1"><a href="#cb255-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb255-2"><a href="#cb255-2" aria-hidden="true" tabindex="-1"></a>    quantity: <span class="bu">str</span>,</span>
<span id="cb255-3"><a href="#cb255-3" aria-hidden="true" tabindex="-1"></a>    mapping: <span class="va">None</span> <span class="op">|</span> <span class="bu">bool</span> <span class="op">|</span> <span class="bu">dict</span>[<span class="bu">str</span>, <span class="bu">int</span> <span class="op">|</span> <span class="bu">float</span>] <span class="op">=</span> <span class="va">True</span></span>
<span id="cb255-4"><a href="#cb255-4" aria-hidden="true" tabindex="-1"></a>) <span class="op">-&gt;</span> <span class="bu">int</span> <span class="op">|</span> <span class="bu">float</span></span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/misc/numerical.py#L49-L165">View
Source on GitHub</a></p>
<p>Convert a string representing a quantity to a numeric value.</p>
<p>The string can represent an integer, python float, fraction, or
shortened via <code>shorten_numerical_to_str</code>.</p>
<h3 id="examples-3">Examples:</h3>
<pre><code>&gt;&gt;&gt; str_to_numeric(&quot;5&quot;)
5
&gt;&gt;&gt; str_to_numeric(&quot;0.1&quot;)
0.1
&gt;&gt;&gt; str_to_numeric(&quot;1/5&quot;)
0.2
&gt;&gt;&gt; str_to_numeric(&quot;-1K&quot;)
-1000.0
&gt;&gt;&gt; str_to_numeric(&quot;1.5M&quot;)
1500000.0
&gt;&gt;&gt; str_to_numeric(&quot;1.2e2&quot;)
120.0</code></pre>
<blockquote>
<p>docs for <a
href="https://github.com/mivanit/muutils"><code>muutils</code></a>
v0.8.6</p>
</blockquote>
<h2 id="api-documentation-28">API Documentation</h2>
<ul>
<li><a href="#WhenMissing"><code>WhenMissing</code></a></li>
<li><a
href="#empty_sequence_if_attr_false"><code>empty_sequence_if_attr_false</code></a></li>
<li><a href="#flatten"><code>flatten</code></a></li>
<li><a href="#list_split"><code>list_split</code></a></li>
<li><a href="#list_join"><code>list_join</code></a></li>
<li><a href="#apply_mapping"><code>apply_mapping</code></a></li>
<li><a
href="#apply_mapping_chain"><code>apply_mapping_chain</code></a></li>
</ul>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/misc/sequence.py">View
Source on GitHub</a></p>
<h1 id="muutils.misc.sequence"><code>muutils.misc.sequence</code></h1>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/misc/sequence.py#L0-L233">View
Source on GitHub</a></p>
<ul>
<li><code>WhenMissing = typing.Literal['except', 'skip', 'include']</code></li>
</ul>
<h3
id="empty_sequence_if_attr_false"><code>def empty_sequence_if_attr_false</code></h3>
<div class="sourceCode" id="cb257"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb257-1"><a href="#cb257-1" aria-hidden="true" tabindex="-1"></a>(itr: Iterable[Any], attr_owner: Any, attr_name: <span class="bu">str</span>) <span class="op">-&gt;</span> Iterable[Any]</span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/misc/sequence.py#L21-L42">View
Source on GitHub</a></p>
<p>Returns <code>itr</code> if <code>attr_owner</code> has the attribute
<code>attr_name</code> and it boolean casts to <code>True</code>.
Returns an empty sequence otherwise.</p>
<p>Particularly useful for optionally inserting delimiters into a
sequence depending on an <code>TokenizerElement</code> attribute.</p>
<h3 id="parameters-36">Parameters:</h3>
<ul>
<li><code>itr: Iterable[Any]</code> The iterable to return if the
attribute is <code>True</code>.</li>
<li><code>attr_owner: Any</code> The object to check for the
attribute.</li>
<li><code>attr_name: str</code> The name of the attribute to check.</li>
</ul>
<h3 id="returns-22">Returns:</h3>
<ul>
<li><code>itr: Iterable</code> if <code>attr_owner</code> has the
attribute <code>attr_name</code> and it boolean casts to
<code>True</code>, otherwise an empty sequence.</li>
<li><code>()</code> an empty sequence if the attribute is
<code>False</code> or not present.</li>
</ul>
<h3 id="flatten"><code>def flatten</code></h3>
<div class="sourceCode" id="cb258"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb258-1"><a href="#cb258-1" aria-hidden="true" tabindex="-1"></a>(it: Iterable[Any], levels_to_flatten: <span class="bu">int</span> <span class="op">|</span> <span class="va">None</span> <span class="op">=</span> <span class="va">None</span>) <span class="op">-&gt;</span> Generator</span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/misc/sequence.py#L45-L68">View
Source on GitHub</a></p>
<p>Flattens an arbitrarily nested iterable. Flattens all iterable data
types except for <code>str</code> and <code>bytes</code>.</p>
<h3 id="returns-23">Returns</h3>
<p>Generator over the flattened sequence.</p>
<h3 id="parameters-37">Parameters</h3>
<ul>
<li><code>it</code>: Any arbitrarily nested iterable.</li>
<li><code>levels_to_flatten</code>: Number of levels to flatten by,
starting at the outermost layer. If <code>None</code>, performs full
flattening.</li>
</ul>
<h3 id="list_split"><code>def list_split</code></h3>
<div class="sourceCode" id="cb259"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb259-1"><a href="#cb259-1" aria-hidden="true" tabindex="-1"></a>(lst: <span class="bu">list</span>, val: Any) <span class="op">-&gt;</span> <span class="bu">list</span>[<span class="bu">list</span>]</span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/misc/sequence.py#L75-L103">View
Source on GitHub</a></p>
<p>split a list into sublists by <code>val</code>. similar to
“a_b_c”.split(“_“)</p>
<div class="sourceCode" id="cb260"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb260-1"><a href="#cb260-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> list_split([<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">0</span>,<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">0</span>,<span class="dv">6</span>], <span class="dv">0</span>)</span>
<span id="cb260-2"><a href="#cb260-2" aria-hidden="true" tabindex="-1"></a>[[<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>], [<span class="dv">4</span>, <span class="dv">5</span>], [<span class="dv">6</span>]]</span>
<span id="cb260-3"><a href="#cb260-3" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> list_split([<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>], <span class="dv">0</span>)</span>
<span id="cb260-4"><a href="#cb260-4" aria-hidden="true" tabindex="-1"></a>[[], [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>]]</span>
<span id="cb260-5"><a href="#cb260-5" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> list_split([<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>], <span class="dv">0</span>)</span>
<span id="cb260-6"><a href="#cb260-6" aria-hidden="true" tabindex="-1"></a>[[<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>]]</span>
<span id="cb260-7"><a href="#cb260-7" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> list_split([], <span class="dv">0</span>)</span>
<span id="cb260-8"><a href="#cb260-8" aria-hidden="true" tabindex="-1"></a>[[]]</span></code></pre></div>
<h3 id="list_join"><code>def list_join</code></h3>
<div class="sourceCode" id="cb261"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb261-1"><a href="#cb261-1" aria-hidden="true" tabindex="-1"></a>(lst: <span class="bu">list</span>, factory: Callable) <span class="op">-&gt;</span> <span class="bu">list</span></span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/misc/sequence.py#L106-L128">View
Source on GitHub</a></p>
<p>add a <em>new</em> instance of <code>factory()</code> between each
element of <code>lst</code></p>
<div class="sourceCode" id="cb262"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb262-1"><a href="#cb262-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> list_join([<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>], <span class="kw">lambda</span> : <span class="dv">0</span>)</span>
<span id="cb262-2"><a href="#cb262-2" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">2</span>,<span class="dv">0</span>,<span class="dv">3</span>]</span>
<span id="cb262-3"><a href="#cb262-3" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> list_join([<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>], <span class="kw">lambda</span>: [time.sleep(<span class="fl">0.1</span>), time.time()][<span class="dv">1</span>])</span>
<span id="cb262-4"><a href="#cb262-4" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>, <span class="fl">1600000000.0</span>, <span class="dv">2</span>, <span class="fl">1600000000.1</span>, <span class="dv">3</span>]</span></code></pre></div>
<h3 id="apply_mapping"><code>def apply_mapping</code></h3>
<div class="sourceCode" id="cb263"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb263-1"><a href="#cb263-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb263-2"><a href="#cb263-2" aria-hidden="true" tabindex="-1"></a>    mapping: Mapping[<span class="op">~</span>_AM_K, <span class="op">~</span>_AM_V],</span>
<span id="cb263-3"><a href="#cb263-3" aria-hidden="true" tabindex="-1"></a>    <span class="bu">iter</span>: Iterable[<span class="op">~</span>_AM_K],</span>
<span id="cb263-4"><a href="#cb263-4" aria-hidden="true" tabindex="-1"></a>    when_missing: Literal[<span class="st">&#39;except&#39;</span>, <span class="st">&#39;skip&#39;</span>, <span class="st">&#39;include&#39;</span>] <span class="op">=</span> <span class="st">&#39;skip&#39;</span></span>
<span id="cb263-5"><a href="#cb263-5" aria-hidden="true" tabindex="-1"></a>) <span class="op">-&gt;</span> <span class="bu">list</span>[typing.Union[<span class="op">~</span>_AM_K, <span class="op">~</span>_AM_V]]</span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/misc/sequence.py#L138-L184">View
Source on GitHub</a></p>
<p>Given an iterable and a mapping, apply the mapping to the iterable
with certain options</p>
<p>Gotcha: if <code>when_missing</code> is invalid, this is totally fine
until a missing key is actually encountered.</p>
<p>Note: you can use this with
<code>&lt;a href="../kappa.html#Kappa"&gt;muutils.kappa.Kappa&lt;/a&gt;</code>
if you want to pass a function instead of a dict</p>
<h3 id="parameters-38">Parameters:</h3>
<ul>
<li><code>mapping : Mapping[_AM_K, _AM_V]</code> must have
<code>__contains__</code> and <code>__getitem__</code>, both of which
take <code>_AM_K</code> and the latter returns <code>_AM_V</code></li>
<li><code>iter : Iterable[_AM_K]</code> the iterable to apply the
mapping to</li>
<li><code>when_missing : WhenMissing</code> what to do when a key is
missing from the mapping – this is what distinguishes this function from
<code>map</code> you can choose from <code>"skip"</code>,
<code>"include"</code> (without converting), and <code>"except"</code>
(defaults to <code>"skip"</code>)</li>
</ul>
<h3 id="returns-24">Returns:</h3>
<p>return type is one of: - <code>list[_AM_V]</code> if
<code>when_missing</code> is <code>"skip"</code> or
<code>"except"</code> - <code>list[Union[_AM_K, _AM_V]]</code> if
<code>when_missing</code> is <code>"include"</code></p>
<h3 id="raises-18">Raises:</h3>
<ul>
<li><code>KeyError</code> : if the item is missing from the mapping and
<code>when_missing</code> is <code>"except"</code></li>
<li><code>ValueError</code> : if <code>when_missing</code> is
invalid</li>
</ul>
<h3 id="apply_mapping_chain"><code>def apply_mapping_chain</code></h3>
<div class="sourceCode" id="cb264"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb264-1"><a href="#cb264-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb264-2"><a href="#cb264-2" aria-hidden="true" tabindex="-1"></a>    mapping: Mapping[<span class="op">~</span>_AM_K, Iterable[<span class="op">~</span>_AM_V]],</span>
<span id="cb264-3"><a href="#cb264-3" aria-hidden="true" tabindex="-1"></a>    <span class="bu">iter</span>: Iterable[<span class="op">~</span>_AM_K],</span>
<span id="cb264-4"><a href="#cb264-4" aria-hidden="true" tabindex="-1"></a>    when_missing: Literal[<span class="st">&#39;except&#39;</span>, <span class="st">&#39;skip&#39;</span>, <span class="st">&#39;include&#39;</span>] <span class="op">=</span> <span class="st">&#39;skip&#39;</span></span>
<span id="cb264-5"><a href="#cb264-5" aria-hidden="true" tabindex="-1"></a>) <span class="op">-&gt;</span> <span class="bu">list</span>[typing.Union[<span class="op">~</span>_AM_K, <span class="op">~</span>_AM_V]]</span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/misc/sequence.py#L187-L234">View
Source on GitHub</a></p>
<p>Given an iterable and a mapping, chain the mappings together</p>
<p>Gotcha: if <code>when_missing</code> is invalid, this is totally fine
until a missing key is actually encountered.</p>
<p>Note: you can use this with
<code>&lt;a href="../kappa.html#Kappa"&gt;muutils.kappa.Kappa&lt;/a&gt;</code>
if you want to pass a function instead of a dict</p>
<h3 id="parameters-39">Parameters:</h3>
<ul>
<li><code>mapping : Mapping[_AM_K, Iterable[_AM_V]]</code> must have
<code>__contains__</code> and <code>__getitem__</code>, both of which
take <code>_AM_K</code> and the latter returns
<code>Iterable[_AM_V]</code></li>
<li><code>iter : Iterable[_AM_K]</code> the iterable to apply the
mapping to</li>
<li><code>when_missing : WhenMissing</code> what to do when a key is
missing from the mapping – this is what distinguishes this function from
<code>map</code> you can choose from <code>"skip"</code>,
<code>"include"</code> (without converting), and <code>"except"</code>
(defaults to <code>"skip"</code>)</li>
</ul>
<h3 id="returns-25">Returns:</h3>
<p>return type is one of: - <code>list[_AM_V]</code> if
<code>when_missing</code> is <code>"skip"</code> or
<code>"except"</code> - <code>list[Union[_AM_K, _AM_V]]</code> if
<code>when_missing</code> is <code>"include"</code></p>
<h3 id="raises-19">Raises:</h3>
<ul>
<li><code>KeyError</code> : if the item is missing from the mapping and
<code>when_missing</code> is <code>"except"</code></li>
<li><code>ValueError</code> : if <code>when_missing</code> is
invalid</li>
</ul>
<blockquote>
<p>docs for <a
href="https://github.com/mivanit/muutils"><code>muutils</code></a>
v0.8.6</p>
</blockquote>
<h2 id="api-documentation-29">API Documentation</h2>
<ul>
<li><a href="#sanitize_name"><code>sanitize_name</code></a></li>
<li><a href="#sanitize_fname"><code>sanitize_fname</code></a></li>
<li><a
href="#sanitize_identifier"><code>sanitize_identifier</code></a></li>
<li><a href="#dict_to_filename"><code>dict_to_filename</code></a></li>
<li><a href="#dynamic_docstring"><code>dynamic_docstring</code></a></li>
</ul>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/misc/string.py">View
Source on GitHub</a></p>
<h1 id="muutils.misc.string"><code>muutils.misc.string</code></h1>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/misc/string.py#L0-L107">View
Source on GitHub</a></p>
<h3 id="sanitize_name"><code>def sanitize_name</code></h3>
<div class="sourceCode" id="cb265"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb265-1"><a href="#cb265-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb265-2"><a href="#cb265-2" aria-hidden="true" tabindex="-1"></a>    name: <span class="bu">str</span> <span class="op">|</span> <span class="va">None</span>,</span>
<span id="cb265-3"><a href="#cb265-3" aria-hidden="true" tabindex="-1"></a>    additional_allowed_chars: <span class="bu">str</span> <span class="op">=</span> <span class="st">&#39;&#39;</span>,</span>
<span id="cb265-4"><a href="#cb265-4" aria-hidden="true" tabindex="-1"></a>    replace_invalid: <span class="bu">str</span> <span class="op">=</span> <span class="st">&#39;&#39;</span>,</span>
<span id="cb265-5"><a href="#cb265-5" aria-hidden="true" tabindex="-1"></a>    when_none: <span class="bu">str</span> <span class="op">|</span> <span class="va">None</span> <span class="op">=</span> <span class="st">&#39;_None_&#39;</span>,</span>
<span id="cb265-6"><a href="#cb265-6" aria-hidden="true" tabindex="-1"></a>    leading_digit_prefix: <span class="bu">str</span> <span class="op">=</span> <span class="st">&#39;&#39;</span></span>
<span id="cb265-7"><a href="#cb265-7" aria-hidden="true" tabindex="-1"></a>) <span class="op">-&gt;</span> <span class="bu">str</span></span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/misc/string.py#L7-L55">View
Source on GitHub</a></p>
<p>sanitize a string, leaving only alphanumerics and
<code>additional_allowed_chars</code></p>
<h3 id="parameters-40">Parameters:</h3>
<ul>
<li><code>name : str | None</code> input string</li>
<li><code>additional_allowed_chars : str</code> additional characters to
allow, none by default (defaults to <code>""</code>)</li>
<li><code>replace_invalid : str</code> character to replace invalid
characters with (defaults to <code>""</code>)</li>
<li><code>when_none : str | None</code> string to return if
<code>name</code> is <code>None</code>. if <code>None</code>, raises an
exception (defaults to <code>"_None_"</code>)</li>
<li><code>leading_digit_prefix : str</code> character to prefix the
string with if it starts with a digit (defaults to <code>""</code>)</li>
</ul>
<h3 id="returns-26">Returns:</h3>
<ul>
<li><code>str</code> sanitized string</li>
</ul>
<h3 id="sanitize_fname"><code>def sanitize_fname</code></h3>
<div class="sourceCode" id="cb266"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb266-1"><a href="#cb266-1" aria-hidden="true" tabindex="-1"></a>(fname: <span class="bu">str</span> <span class="op">|</span> <span class="va">None</span>, <span class="op">**</span>kwargs) <span class="op">-&gt;</span> <span class="bu">str</span></span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/misc/string.py#L58-L63">View
Source on GitHub</a></p>
<p>sanitize a filename to posix standards</p>
<ul>
<li>leave only alphanumerics, <code>_</code> (underscore), ‘-’ (dash)
and <code>.</code> (period)</li>
</ul>
<h3 id="sanitize_identifier"><code>def sanitize_identifier</code></h3>
<div class="sourceCode" id="cb267"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb267-1"><a href="#cb267-1" aria-hidden="true" tabindex="-1"></a>(fname: <span class="bu">str</span> <span class="op">|</span> <span class="va">None</span>, <span class="op">**</span>kwargs) <span class="op">-&gt;</span> <span class="bu">str</span></span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/misc/string.py#L66-L74">View
Source on GitHub</a></p>
<p>sanitize an identifier (variable or function name)</p>
<ul>
<li>leave only alphanumerics and <code>_</code> (underscore)</li>
<li>prefix with <code>_</code> if it starts with a digit</li>
</ul>
<h3 id="dict_to_filename"><code>def dict_to_filename</code></h3>
<div class="sourceCode" id="cb268"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb268-1"><a href="#cb268-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb268-2"><a href="#cb268-2" aria-hidden="true" tabindex="-1"></a>    data: <span class="bu">dict</span>,</span>
<span id="cb268-3"><a href="#cb268-3" aria-hidden="true" tabindex="-1"></a>    format_str: <span class="bu">str</span> <span class="op">=</span> <span class="st">&#39;</span><span class="sc">{key}</span><span class="st">_</span><span class="sc">{val}</span><span class="st">&#39;</span>,</span>
<span id="cb268-4"><a href="#cb268-4" aria-hidden="true" tabindex="-1"></a>    separator: <span class="bu">str</span> <span class="op">=</span> <span class="st">&#39;.&#39;</span>,</span>
<span id="cb268-5"><a href="#cb268-5" aria-hidden="true" tabindex="-1"></a>    max_length: <span class="bu">int</span> <span class="op">=</span> <span class="dv">255</span></span>
<span id="cb268-6"><a href="#cb268-6" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/misc/string.py#L77-L99">View
Source on GitHub</a></p>
<h3 id="dynamic_docstring"><code>def dynamic_docstring</code></h3>
<div class="sourceCode" id="cb269"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb269-1"><a href="#cb269-1" aria-hidden="true" tabindex="-1"></a>(<span class="op">**</span>doc_params)</span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/misc/string.py#L102-L108">View
Source on GitHub</a></p>
<blockquote>
<p>docs for <a
href="https://github.com/mivanit/muutils"><code>muutils</code></a>
v0.8.6</p>
</blockquote>
<h2 id="contents-17">Contents</h2>
<p>miscellaneous utilities for ML pipelines</p>
<h2 id="api-documentation-30">API Documentation</h2>
<ul>
<li><a href="#ARRAY_IMPORTS"><code>ARRAY_IMPORTS</code></a></li>
<li><a href="#DEFAULT_SEED"><code>DEFAULT_SEED</code></a></li>
<li><a href="#GLOBAL_SEED"><code>GLOBAL_SEED</code></a></li>
<li><a href="#get_device"><code>get_device</code></a></li>
<li><a
href="#set_reproducibility"><code>set_reproducibility</code></a></li>
<li><a href="#chunks"><code>chunks</code></a></li>
<li><a
href="#get_checkpoint_paths_for_run"><code>get_checkpoint_paths_for_run</code></a></li>
<li><a href="#register_method"><code>register_method</code></a></li>
<li><a href="#pprint_summary"><code>pprint_summary</code></a></li>
</ul>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/mlutils.py">View
Source on GitHub</a></p>
<h1 id="muutils.mlutils"><code>muutils.mlutils</code></h1>
<p>miscellaneous utilities for ML pipelines</p>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/mlutils.py#L0-L164">View
Source on GitHub</a></p>
<ul>
<li><p><code>ARRAY_IMPORTS: bool = True</code></p></li>
<li><p><code>DEFAULT_SEED: int = 42</code></p></li>
<li><p><code>GLOBAL_SEED: int = 42</code></p></li>
</ul>
<h3 id="get_device"><code>def get_device</code></h3>
<div class="sourceCode" id="cb270"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb270-1"><a href="#cb270-1" aria-hidden="true" tabindex="-1"></a>(device: Union[<span class="bu">str</span>, torch.device, NoneType] <span class="op">=</span> <span class="va">None</span>) <span class="op">-&gt;</span> torch.device</span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/mlutils.py#L30-L74">View
Source on GitHub</a></p>
<p>Get the torch.device instance on which <code>torch.Tensor</code>s
should be allocated.</p>
<h3 id="set_reproducibility"><code>def set_reproducibility</code></h3>
<div class="sourceCode" id="cb271"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb271-1"><a href="#cb271-1" aria-hidden="true" tabindex="-1"></a>(seed: <span class="bu">int</span> <span class="op">=</span> <span class="dv">42</span>)</span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/mlutils.py#L77-L97">View
Source on GitHub</a></p>
<p>Improve model reproducibility. See
https://github.com/NVIDIA/framework-determinism for more
information.</p>
<p>Deterministic operations tend to have worse performance than
nondeterministic operations, so this method trades off performance for
reproducibility. Set use_deterministic_algorithms to True to improve
performance.</p>
<h3 id="chunks"><code>def chunks</code></h3>
<div class="sourceCode" id="cb272"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb272-1"><a href="#cb272-1" aria-hidden="true" tabindex="-1"></a>(it, chunk_size)</span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/mlutils.py#L100-L105">View
Source on GitHub</a></p>
<p>Yield successive chunks from an iterator.</p>
<h3
id="get_checkpoint_paths_for_run"><code>def get_checkpoint_paths_for_run</code></h3>
<div class="sourceCode" id="cb273"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb273-1"><a href="#cb273-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb273-2"><a href="#cb273-2" aria-hidden="true" tabindex="-1"></a>    run_path: pathlib.Path,</span>
<span id="cb273-3"><a href="#cb273-3" aria-hidden="true" tabindex="-1"></a>    extension: Literal[<span class="st">&#39;pt&#39;</span>, <span class="st">&#39;zanj&#39;</span>],</span>
<span id="cb273-4"><a href="#cb273-4" aria-hidden="true" tabindex="-1"></a>    checkpoints_format: <span class="bu">str</span> <span class="op">=</span> <span class="st">&#39;checkpoints/model.iter_*.</span><span class="sc">{extension}</span><span class="st">&#39;</span></span>
<span id="cb273-5"><a href="#cb273-5" aria-hidden="true" tabindex="-1"></a>) <span class="op">-&gt;</span> <span class="bu">list</span>[<span class="bu">tuple</span>[<span class="bu">int</span>, pathlib.Path]]</span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/mlutils.py#L108-L127">View
Source on GitHub</a></p>
<p>get checkpoints of the format from the run_path</p>
<p>note that <code>checkpoints_format</code> should contain a glob
pattern with: - unresolved “{extension}” format term for the extension -
a wildcard for the iteration number</p>
<h3 id="register_method"><code>def register_method</code></h3>
<div class="sourceCode" id="cb274"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb274-1"><a href="#cb274-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb274-2"><a href="#cb274-2" aria-hidden="true" tabindex="-1"></a>    method_dict: <span class="bu">dict</span>[<span class="bu">str</span>, typing.Callable[..., typing.Any]],</span>
<span id="cb274-3"><a href="#cb274-3" aria-hidden="true" tabindex="-1"></a>    custom_name: Optional[<span class="bu">str</span>] <span class="op">=</span> <span class="va">None</span></span>
<span id="cb274-4"><a href="#cb274-4" aria-hidden="true" tabindex="-1"></a>) <span class="op">-&gt;</span> Callable[[<span class="op">~</span>F], <span class="op">~</span>F]</span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/mlutils.py#L133-L161">View
Source on GitHub</a></p>
<p>Decorator to add a method to the method_dict</p>
<h3 id="pprint_summary"><code>def pprint_summary</code></h3>
<div class="sourceCode" id="cb275"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb275-1"><a href="#cb275-1" aria-hidden="true" tabindex="-1"></a>(summary: <span class="bu">dict</span>)</span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/mlutils.py#L164-L165">View
Source on GitHub</a></p>
<blockquote>
<p>docs for <a
href="https://github.com/mivanit/muutils"><code>muutils</code></a>
v0.8.6</p>
</blockquote>
<h2 id="contents-18">Contents</h2>
<p>utilities for working with notebooks</p>
<ul>
<li>configuring figures mdoes and torch devices:
<code>configure_notebook</code></li>
<li>converting them to scripts:
<code>convert_ipynb_to_script</code></li>
<li>running them as tests: <code>run_notebook_tests</code></li>
<li>and working with diagrams/LaTeX: <code>mermaid</code>,
<code>print_tex</code></li>
</ul>
<h2 id="submodules-4">Submodules</h2>
<ul>
<li><a
href="#configure_notebook"><code>configure_notebook</code></a></li>
<li><a
href="#convert_ipynb_to_script"><code>convert_ipynb_to_script</code></a></li>
<li><a href="#mermaid"><code>mermaid</code></a></li>
<li><a href="#print_tex"><code>print_tex</code></a></li>
<li><a
href="#run_notebook_tests"><code>run_notebook_tests</code></a></li>
</ul>
<h2 id="api-documentation-31">API Documentation</h2>
<ul>
<li><a href="#mm"><code>mm</code></a></li>
</ul>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/nbutils/__init__.py">View
Source on GitHub</a></p>
<h1 id="muutils.nbutils"><code>muutils.nbutils</code></h1>
<p>utilities for working with notebooks</p>
<ul>
<li>configuring figures mdoes and torch devices:
<code>configure_notebook</code></li>
<li>converting them to scripts:
<code>convert_ipynb_to_script</code></li>
<li>running them as tests: <code>run_notebook_tests</code></li>
<li>and working with diagrams/LaTeX: <code>mermaid</code>,
<code>print_tex</code></li>
</ul>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/nbutils/__init__.py#L0-L20">View
Source on GitHub</a></p>
<h3 id="mm"><code>def mm</code></h3>
<div class="sourceCode" id="cb276"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb276-1"><a href="#cb276-1" aria-hidden="true" tabindex="-1"></a>(graph)</span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/nbutils/__init__.py#L15-L20">View
Source on GitHub</a></p>
<p>for plotting mermaid.js diagrams</p>
<blockquote>
<p>docs for <a
href="https://github.com/mivanit/muutils"><code>muutils</code></a>
v0.8.6</p>
</blockquote>
<h2 id="contents-19">Contents</h2>
<p>shared utilities for setting up a notebook</p>
<h2 id="api-documentation-32">API Documentation</h2>
<ul>
<li><a
href="#PlotlyNotInstalledWarning"><code>PlotlyNotInstalledWarning</code></a></li>
<li><a href="#PLOTLY_IMPORTED"><code>PLOTLY_IMPORTED</code></a></li>
<li><a href="#PlottingMode"><code>PlottingMode</code></a></li>
<li><a href="#PLOT_MODE"><code>PLOT_MODE</code></a></li>
<li><a
href="#CONVERSION_PLOTMODE_OVERRIDE"><code>CONVERSION_PLOTMODE_OVERRIDE</code></a></li>
<li><a href="#FIG_COUNTER"><code>FIG_COUNTER</code></a></li>
<li><a href="#FIG_OUTPUT_FMT"><code>FIG_OUTPUT_FMT</code></a></li>
<li><a
href="#FIG_NUMBERED_FNAME"><code>FIG_NUMBERED_FNAME</code></a></li>
<li><a href="#FIG_CONFIG"><code>FIG_CONFIG</code></a></li>
<li><a href="#FIG_BASEPATH"><code>FIG_BASEPATH</code></a></li>
<li><a
href="#CLOSE_AFTER_PLOTSHOW"><code>CLOSE_AFTER_PLOTSHOW</code></a></li>
<li><a
href="#MATPLOTLIB_FORMATS"><code>MATPLOTLIB_FORMATS</code></a></li>
<li><a
href="#TIKZPLOTLIB_FORMATS"><code>TIKZPLOTLIB_FORMATS</code></a></li>
<li><a
href="#UnknownFigureFormatWarning"><code>UnknownFigureFormatWarning</code></a></li>
<li><a href="#universal_savefig"><code>universal_savefig</code></a></li>
<li><a href="#setup_plots"><code>setup_plots</code></a></li>
<li><a
href="#configure_notebook"><code>configure_notebook</code></a></li>
<li><a href="#plotshow"><code>plotshow</code></a></li>
</ul>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/nbutils/configure_notebook.py">View
Source on GitHub</a></p>
<h1
id="muutils.nbutils.configure_notebook"><code>muutils.nbutils.configure_notebook</code></h1>
<p>shared utilities for setting up a notebook</p>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/nbutils/configure_notebook.py#L0-L319">View
Source on GitHub</a></p>
<h3
id="PlotlyNotInstalledWarning"><code>class PlotlyNotInstalledWarning(builtins.UserWarning):</code></h3>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/nbutils/configure_notebook.py#L12-L13">View
Source on GitHub</a></p>
<p>Base class for warnings generated by user code.</p>
<h3 id="inherited-members-19">Inherited Members</h3>
<ul>
<li><p><a
href="#PlotlyNotInstalledWarning.__init__"><code>UserWarning</code></a></p></li>
<li><p><a
href="#PlotlyNotInstalledWarning.with_traceback"><code>with_traceback</code></a></p></li>
<li><p><a
href="#PlotlyNotInstalledWarning.add_note"><code>add_note</code></a></p></li>
<li><p><a
href="#PlotlyNotInstalledWarning.args"><code>args</code></a></p></li>
<li><p><code>PLOTLY_IMPORTED: bool = True</code></p></li>
<li><p><code>PlottingMode = typing.Literal['ignore', 'inline', 'widget', 'save']</code></p></li>
<li><p><code>PLOT_MODE: Literal['ignore', 'inline', 'widget', 'save'] = 'inline'</code></p></li>
<li><p><code>CONVERSION_PLOTMODE_OVERRIDE: Optional[Literal['ignore', 'inline', 'widget', 'save']] = None</code></p></li>
<li><p><code>FIG_COUNTER: int = 0</code></p></li>
<li><p><code>FIG_OUTPUT_FMT: str | None = None</code></p></li>
<li><p><code>FIG_NUMBERED_FNAME: str = 'figure-{num}'</code></p></li>
<li><p><code>FIG_CONFIG: dict | None = None</code></p></li>
<li><p><code>FIG_BASEPATH: str | None = None</code></p></li>
<li><p><code>CLOSE_AFTER_PLOTSHOW: bool = False</code></p></li>
<li><p><code>MATPLOTLIB_FORMATS = ['pdf', 'png', 'jpg', 'jpeg', 'svg', 'eps', 'ps', 'tif', 'tiff']</code></p></li>
<li><p><code>TIKZPLOTLIB_FORMATS = ['tex', 'tikz']</code></p></li>
</ul>
<h3
id="UnknownFigureFormatWarning"><code>class UnknownFigureFormatWarning(builtins.UserWarning):</code></h3>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/nbutils/configure_notebook.py#L55-L56">View
Source on GitHub</a></p>
<p>Base class for warnings generated by user code.</p>
<h3 id="inherited-members-20">Inherited Members</h3>
<ul>
<li><p><a
href="#UnknownFigureFormatWarning.__init__"><code>UserWarning</code></a></p></li>
<li><p><a
href="#UnknownFigureFormatWarning.with_traceback"><code>with_traceback</code></a></p></li>
<li><p><a
href="#UnknownFigureFormatWarning.add_note"><code>add_note</code></a></p></li>
<li><p><a
href="#UnknownFigureFormatWarning.args"><code>args</code></a></p></li>
</ul>
<h3 id="universal_savefig"><code>def universal_savefig</code></h3>
<div class="sourceCode" id="cb277"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb277-1"><a href="#cb277-1" aria-hidden="true" tabindex="-1"></a>(fname: <span class="bu">str</span>, fmt: <span class="bu">str</span> <span class="op">|</span> <span class="va">None</span> <span class="op">=</span> <span class="va">None</span>) <span class="op">-&gt;</span> <span class="va">None</span></span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/nbutils/configure_notebook.py#L59-L83">View
Source on GitHub</a></p>
<h3 id="setup_plots"><code>def setup_plots</code></h3>
<div class="sourceCode" id="cb278"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb278-1"><a href="#cb278-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb278-2"><a href="#cb278-2" aria-hidden="true" tabindex="-1"></a>    plot_mode: Literal[<span class="st">&#39;ignore&#39;</span>, <span class="st">&#39;inline&#39;</span>, <span class="st">&#39;widget&#39;</span>, <span class="st">&#39;save&#39;</span>] <span class="op">=</span> <span class="st">&#39;inline&#39;</span>,</span>
<span id="cb278-3"><a href="#cb278-3" aria-hidden="true" tabindex="-1"></a>    fig_output_fmt: <span class="bu">str</span> <span class="op">|</span> <span class="va">None</span> <span class="op">=</span> <span class="st">&#39;pdf&#39;</span>,</span>
<span id="cb278-4"><a href="#cb278-4" aria-hidden="true" tabindex="-1"></a>    fig_numbered_fname: <span class="bu">str</span> <span class="op">=</span> <span class="st">&#39;figure-</span><span class="sc">{num}</span><span class="st">&#39;</span>,</span>
<span id="cb278-5"><a href="#cb278-5" aria-hidden="true" tabindex="-1"></a>    fig_config: <span class="bu">dict</span> <span class="op">|</span> <span class="va">None</span> <span class="op">=</span> <span class="va">None</span>,</span>
<span id="cb278-6"><a href="#cb278-6" aria-hidden="true" tabindex="-1"></a>    fig_basepath: <span class="bu">str</span> <span class="op">|</span> <span class="va">None</span> <span class="op">=</span> <span class="va">None</span>,</span>
<span id="cb278-7"><a href="#cb278-7" aria-hidden="true" tabindex="-1"></a>    close_after_plotshow: <span class="bu">bool</span> <span class="op">=</span> <span class="va">False</span></span>
<span id="cb278-8"><a href="#cb278-8" aria-hidden="true" tabindex="-1"></a>) <span class="op">-&gt;</span> <span class="va">None</span></span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/nbutils/configure_notebook.py#L86-L189">View
Source on GitHub</a></p>
<p>Set up plot saving/rendering options</p>
<h3 id="configure_notebook"><code>def configure_notebook</code></h3>
<div class="sourceCode" id="cb279"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb279-1"><a href="#cb279-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb279-2"><a href="#cb279-2" aria-hidden="true" tabindex="-1"></a>    <span class="op">*</span>args,</span>
<span id="cb279-3"><a href="#cb279-3" aria-hidden="true" tabindex="-1"></a>    seed: <span class="bu">int</span> <span class="op">=</span> <span class="dv">42</span>,</span>
<span id="cb279-4"><a href="#cb279-4" aria-hidden="true" tabindex="-1"></a>    device: Any <span class="op">=</span> <span class="va">None</span>,</span>
<span id="cb279-5"><a href="#cb279-5" aria-hidden="true" tabindex="-1"></a>    dark_mode: <span class="bu">bool</span> <span class="op">=</span> <span class="va">True</span>,</span>
<span id="cb279-6"><a href="#cb279-6" aria-hidden="true" tabindex="-1"></a>    plot_mode: Literal[<span class="st">&#39;ignore&#39;</span>, <span class="st">&#39;inline&#39;</span>, <span class="st">&#39;widget&#39;</span>, <span class="st">&#39;save&#39;</span>] <span class="op">=</span> <span class="st">&#39;inline&#39;</span>,</span>
<span id="cb279-7"><a href="#cb279-7" aria-hidden="true" tabindex="-1"></a>    fig_output_fmt: <span class="bu">str</span> <span class="op">|</span> <span class="va">None</span> <span class="op">=</span> <span class="st">&#39;pdf&#39;</span>,</span>
<span id="cb279-8"><a href="#cb279-8" aria-hidden="true" tabindex="-1"></a>    fig_numbered_fname: <span class="bu">str</span> <span class="op">=</span> <span class="st">&#39;figure-</span><span class="sc">{num}</span><span class="st">&#39;</span>,</span>
<span id="cb279-9"><a href="#cb279-9" aria-hidden="true" tabindex="-1"></a>    fig_config: <span class="bu">dict</span> <span class="op">|</span> <span class="va">None</span> <span class="op">=</span> <span class="va">None</span>,</span>
<span id="cb279-10"><a href="#cb279-10" aria-hidden="true" tabindex="-1"></a>    fig_basepath: <span class="bu">str</span> <span class="op">|</span> <span class="va">None</span> <span class="op">=</span> <span class="va">None</span>,</span>
<span id="cb279-11"><a href="#cb279-11" aria-hidden="true" tabindex="-1"></a>    close_after_plotshow: <span class="bu">bool</span> <span class="op">=</span> <span class="va">False</span></span>
<span id="cb279-12"><a href="#cb279-12" aria-hidden="true" tabindex="-1"></a>) <span class="op">-&gt;</span> torch.device <span class="op">|</span> <span class="va">None</span></span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/nbutils/configure_notebook.py#L192-L284">View
Source on GitHub</a></p>
<p>Shared Jupyter notebook setup steps</p>
<ul>
<li>Set random seeds and library reproducibility settings</li>
<li>Set device based on availability</li>
<li>Set module reloading before code execution</li>
<li>Set plot formatting</li>
<li>Set plot saving/rendering options</li>
</ul>
<h3 id="parameters-41">Parameters:</h3>
<ul>
<li><code>seed : int</code> random seed across libraries including
torch, numpy, and random (defaults to <code>42</code>) (defaults to
<code>42</code>)</li>
<li><code>device : typing.Any</code> pytorch device to use (defaults to
<code>None</code>)</li>
<li><code>dark_mode : bool</code> figures in dark mode (defaults to
<code>True</code>)</li>
<li><code>plot_mode : PlottingMode</code> how to display plots, one of
<code>PlottingMode</code> or
<code>["ignore", "inline", "widget", "save"]</code> (defaults to
<code>"inline"</code>)</li>
<li><code>fig_output_fmt : str | None</code> format for saving figures
(defaults to <code>"pdf"</code>)</li>
<li><code>fig_numbered_fname : str</code> format for saving figures with
numbers (if they aren’t named) (defaults to
<code>"figure-{num}"</code>)</li>
<li><code>fig_config : dict | None</code> metadata to save with the
figures (defaults to <code>None</code>)</li>
<li><code>fig_basepath : str | None</code> base path for saving figures
(defaults to <code>None</code>)</li>
<li><code>close_after_plotshow : bool</code> close figures after showing
them (defaults to <code>False</code>)</li>
</ul>
<h3 id="returns-27">Returns:</h3>
<ul>
<li><code>torch.device|None</code> the device set, if torch is
installed</li>
</ul>
<h3 id="plotshow"><code>def plotshow</code></h3>
<div class="sourceCode" id="cb280"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb280-1"><a href="#cb280-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb280-2"><a href="#cb280-2" aria-hidden="true" tabindex="-1"></a>    fname: <span class="bu">str</span> <span class="op">|</span> <span class="va">None</span> <span class="op">=</span> <span class="va">None</span>,</span>
<span id="cb280-3"><a href="#cb280-3" aria-hidden="true" tabindex="-1"></a>    plot_mode: Optional[Literal[<span class="st">&#39;ignore&#39;</span>, <span class="st">&#39;inline&#39;</span>, <span class="st">&#39;widget&#39;</span>, <span class="st">&#39;save&#39;</span>]] <span class="op">=</span> <span class="va">None</span>,</span>
<span id="cb280-4"><a href="#cb280-4" aria-hidden="true" tabindex="-1"></a>    fmt: <span class="bu">str</span> <span class="op">|</span> <span class="va">None</span> <span class="op">=</span> <span class="va">None</span></span>
<span id="cb280-5"><a href="#cb280-5" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/nbutils/configure_notebook.py#L287-L320">View
Source on GitHub</a></p>
<p>Show the active plot, depending on global configs</p>
<blockquote>
<p>docs for <a
href="https://github.com/mivanit/muutils"><code>muutils</code></a>
v0.8.6</p>
</blockquote>
<h2 id="contents-20">Contents</h2>
<p>fast conversion of Jupyter Notebooks to scripts, with some basic and
hacky filtering and formatting.</p>
<h2 id="api-documentation-33">API Documentation</h2>
<ul>
<li><a href="#DISABLE_PLOTS"><code>DISABLE_PLOTS</code></a></li>
<li><a
href="#DISABLE_PLOTS_WARNING"><code>DISABLE_PLOTS_WARNING</code></a></li>
<li><a
href="#disable_plots_in_script"><code>disable_plots_in_script</code></a></li>
<li><a href="#convert_ipynb"><code>convert_ipynb</code></a></li>
<li><a href="#process_file"><code>process_file</code></a></li>
<li><a href="#process_dir"><code>process_dir</code></a></li>
</ul>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/nbutils/convert_ipynb_to_script.py">View
Source on GitHub</a></p>
<h1
id="muutils.nbutils.convert_ipynb_to_script"><code>muutils.nbutils.convert_ipynb_to_script</code></h1>
<p>fast conversion of Jupyter Notebooks to scripts, with some basic and
hacky filtering and formatting.</p>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/nbutils/convert_ipynb_to_script.py#L0-L373">View
Source on GitHub</a></p>
<ul>
<li><p><code>DISABLE_PLOTS: dict[str, list[str]] = {'matplotlib': ['\n# ------------------------------------------------------------\n# Disable matplotlib plots, done during processing by</code>convert_ipynb_to_script.py<code>\nimport matplotlib.pyplot as plt\nplt.show = lambda: None\n# ------------------------------------------------------------\n'], 'circuitsvis': ['\n# ------------------------------------------------------------\n# Disable circuitsvis plots, done during processing by</code>convert_ipynb_to_script.py<code>\nfrom circuitsvis.utils.convert_props import PythonProperty, convert_props\nfrom circuitsvis.utils.render import RenderedHTML, render, render_cdn, render_local\n\ndef new_render(\n    react_element_name: str,\n    **kwargs: PythonProperty\n) -&gt; RenderedHTML:\n    "return a visualization as raw HTML"\n    local_src = render_local(react_element_name, **kwargs)\n    cdn_src = render_cdn(react_element_name, **kwargs)\n    # return as string instead of RenderedHTML for CI\n    return str(RenderedHTML(local_src, cdn_src))\n\nrender = new_render\n# ------------------------------------------------------------\n'], 'muutils': ['import muutils.nbutils.configure_notebook as nb_conf\nnb_conf.CONVERSION_PLOTMODE_OVERRIDE = "ignore"\n']}</code></p></li>
<li><p><code>DISABLE_PLOTS_WARNING: list[str] = ["# ------------------------------------------------------------\n# WARNING: this script is auto-generated by</code>convert_ipynb_to_script.py<code>\n# showing plots has been disabled, so this is presumably in a temp dict for CI or something\n# so don't modify this code, it will be overwritten!\n# ------------------------------------------------------------\n"]</code></p></li>
</ul>
<h3
id="disable_plots_in_script"><code>def disable_plots_in_script</code></h3>
<div class="sourceCode" id="cb281"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb281-1"><a href="#cb281-1" aria-hidden="true" tabindex="-1"></a>(script_lines: <span class="bu">list</span>[<span class="bu">str</span>]) <span class="op">-&gt;</span> <span class="bu">list</span>[<span class="bu">str</span>]</span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/nbutils/convert_ipynb_to_script.py#L64-L148">View
Source on GitHub</a></p>
<p>Disable plots in a script by adding cursed things after the import
statements</p>
<h3 id="convert_ipynb"><code>def convert_ipynb</code></h3>
<div class="sourceCode" id="cb282"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb282-1"><a href="#cb282-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb282-2"><a href="#cb282-2" aria-hidden="true" tabindex="-1"></a>    notebook: <span class="bu">dict</span>,</span>
<span id="cb282-3"><a href="#cb282-3" aria-hidden="true" tabindex="-1"></a>    strip_md_cells: <span class="bu">bool</span> <span class="op">=</span> <span class="va">False</span>,</span>
<span id="cb282-4"><a href="#cb282-4" aria-hidden="true" tabindex="-1"></a>    header_comment: <span class="bu">str</span> <span class="op">=</span> <span class="st">&#39;#</span><span class="sc">%%</span><span class="st">&#39;</span>,</span>
<span id="cb282-5"><a href="#cb282-5" aria-hidden="true" tabindex="-1"></a>    disable_plots: <span class="bu">bool</span> <span class="op">=</span> <span class="va">False</span>,</span>
<span id="cb282-6"><a href="#cb282-6" aria-hidden="true" tabindex="-1"></a>    filter_out_lines: Union[<span class="bu">str</span>, Sequence[<span class="bu">str</span>]] <span class="op">=</span> (<span class="st">&#39;%&#39;</span>, <span class="st">&#39;!&#39;</span>)</span>
<span id="cb282-7"><a href="#cb282-7" aria-hidden="true" tabindex="-1"></a>) <span class="op">-&gt;</span> <span class="bu">str</span></span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/nbutils/convert_ipynb_to_script.py#L151-L208">View
Source on GitHub</a></p>
<p>Convert Jupyter Notebook to a script, doing some basic filtering and
formatting.</p>
<h3 id="arguments-3">Arguments</h3>
<pre><code>- `notebook: dict`: Jupyter Notebook loaded as json.
- `strip_md_cells: bool = False`: Remove markdown cells from the output script.
- `header_comment: str = r&#39;#%%&#39;`: Comment string to separate cells in the output script.
- `disable_plots: bool = False`: Disable plots in the output script.
- `filter_out_lines: str|typing.Sequence[str] = (&#39;%&#39;, &#39;!&#39;)`: comment out lines starting with these strings (in code blocks).
    if a string is passed, it will be split by char and each char will be treated as a separate filter.</code></pre>
<h3 id="returns-28">Returns</h3>
<pre><code>- `str`: Converted script.</code></pre>
<h3 id="process_file"><code>def process_file</code></h3>
<div class="sourceCode" id="cb285"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb285-1"><a href="#cb285-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb285-2"><a href="#cb285-2" aria-hidden="true" tabindex="-1"></a>    in_file: <span class="bu">str</span>,</span>
<span id="cb285-3"><a href="#cb285-3" aria-hidden="true" tabindex="-1"></a>    out_file: <span class="bu">str</span> <span class="op">|</span> <span class="va">None</span> <span class="op">=</span> <span class="va">None</span>,</span>
<span id="cb285-4"><a href="#cb285-4" aria-hidden="true" tabindex="-1"></a>    strip_md_cells: <span class="bu">bool</span> <span class="op">=</span> <span class="va">False</span>,</span>
<span id="cb285-5"><a href="#cb285-5" aria-hidden="true" tabindex="-1"></a>    header_comment: <span class="bu">str</span> <span class="op">=</span> <span class="st">&#39;#</span><span class="sc">%%</span><span class="st">&#39;</span>,</span>
<span id="cb285-6"><a href="#cb285-6" aria-hidden="true" tabindex="-1"></a>    disable_plots: <span class="bu">bool</span> <span class="op">=</span> <span class="va">False</span>,</span>
<span id="cb285-7"><a href="#cb285-7" aria-hidden="true" tabindex="-1"></a>    filter_out_lines: Union[<span class="bu">str</span>, Sequence[<span class="bu">str</span>]] <span class="op">=</span> (<span class="st">&#39;%&#39;</span>, <span class="st">&#39;!&#39;</span>)</span>
<span id="cb285-8"><a href="#cb285-8" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/nbutils/convert_ipynb_to_script.py#L211-L243">View
Source on GitHub</a></p>
<h3 id="process_dir"><code>def process_dir</code></h3>
<div class="sourceCode" id="cb286"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb286-1"><a href="#cb286-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb286-2"><a href="#cb286-2" aria-hidden="true" tabindex="-1"></a>    input_dir: Union[<span class="bu">str</span>, pathlib.Path],</span>
<span id="cb286-3"><a href="#cb286-3" aria-hidden="true" tabindex="-1"></a>    output_dir: Union[<span class="bu">str</span>, pathlib.Path],</span>
<span id="cb286-4"><a href="#cb286-4" aria-hidden="true" tabindex="-1"></a>    strip_md_cells: <span class="bu">bool</span> <span class="op">=</span> <span class="va">False</span>,</span>
<span id="cb286-5"><a href="#cb286-5" aria-hidden="true" tabindex="-1"></a>    header_comment: <span class="bu">str</span> <span class="op">=</span> <span class="st">&#39;#</span><span class="sc">%%</span><span class="st">&#39;</span>,</span>
<span id="cb286-6"><a href="#cb286-6" aria-hidden="true" tabindex="-1"></a>    disable_plots: <span class="bu">bool</span> <span class="op">=</span> <span class="va">False</span>,</span>
<span id="cb286-7"><a href="#cb286-7" aria-hidden="true" tabindex="-1"></a>    filter_out_lines: Union[<span class="bu">str</span>, Sequence[<span class="bu">str</span>]] <span class="op">=</span> (<span class="st">&#39;%&#39;</span>, <span class="st">&#39;!&#39;</span>)</span>
<span id="cb286-8"><a href="#cb286-8" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/nbutils/convert_ipynb_to_script.py#L246-L307">View
Source on GitHub</a></p>
<p>Convert all Jupyter Notebooks in a directory to scripts.</p>
<h3 id="arguments-4">Arguments</h3>
<pre><code>- `input_dir: str`: Input directory.
- `output_dir: str`: Output directory.
- `strip_md_cells: bool = False`: Remove markdown cells from the output script.
- `header_comment: str = r&#39;#%%&#39;`: Comment string to separate cells in the output script.
- `disable_plots: bool = False`: Disable plots in the output script.
- `filter_out_lines: str|typing.Sequence[str] = (&#39;%&#39;, &#39;!&#39;)`: comment out lines starting with these strings (in code blocks).
    if a string is passed, it will be split by char and each char will be treated as a separate filter.</code></pre>
<blockquote>
<p>docs for <a
href="https://github.com/mivanit/muutils"><code>muutils</code></a>
v0.8.6</p>
</blockquote>
<h2 id="contents-21">Contents</h2>
<p>display mermaid.js diagrams in jupyter notebooks by the
<code>mermaid.ink/img</code> service</p>
<h2 id="api-documentation-34">API Documentation</h2>
<ul>
<li><a href="#mm"><code>mm</code></a></li>
</ul>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/nbutils/mermaid.py">View
Source on GitHub</a></p>
<h1
id="muutils.nbutils.mermaid"><code>muutils.nbutils.mermaid</code></h1>
<p>display mermaid.js diagrams in jupyter notebooks by the
<code>mermaid.ink/img</code> service</p>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/nbutils/mermaid.py#L0-L19">View
Source on GitHub</a></p>
<h3 id="mm"><code>def mm</code></h3>
<div class="sourceCode" id="cb288"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb288-1"><a href="#cb288-1" aria-hidden="true" tabindex="-1"></a>(graph)</span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/nbutils/mermaid.py#L15-L20">View
Source on GitHub</a></p>
<p>for plotting mermaid.js diagrams</p>
<blockquote>
<p>docs for <a
href="https://github.com/mivanit/muutils"><code>muutils</code></a>
v0.8.6</p>
</blockquote>
<h2 id="contents-22">Contents</h2>
<p>quickly print a sympy expression in latex</p>
<h2 id="api-documentation-35">API Documentation</h2>
<ul>
<li><a href="#print_tex"><code>print_tex</code></a></li>
</ul>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/nbutils/print_tex.py">View
Source on GitHub</a></p>
<h1
id="muutils.nbutils.print_tex"><code>muutils.nbutils.print_tex</code></h1>
<p>quickly print a sympy expression in latex</p>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/nbutils/print_tex.py#L0-L20">View
Source on GitHub</a></p>
<h3 id="print_tex"><code>def print_tex</code></h3>
<div class="sourceCode" id="cb289"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb289-1"><a href="#cb289-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb289-2"><a href="#cb289-2" aria-hidden="true" tabindex="-1"></a>    expr: sympy.core.expr.Expr,</span>
<span id="cb289-3"><a href="#cb289-3" aria-hidden="true" tabindex="-1"></a>    name: <span class="bu">str</span> <span class="op">|</span> <span class="va">None</span> <span class="op">=</span> <span class="va">None</span>,</span>
<span id="cb289-4"><a href="#cb289-4" aria-hidden="true" tabindex="-1"></a>    plain: <span class="bu">bool</span> <span class="op">=</span> <span class="va">False</span>,</span>
<span id="cb289-5"><a href="#cb289-5" aria-hidden="true" tabindex="-1"></a>    rendered: <span class="bu">bool</span> <span class="op">=</span> <span class="va">True</span></span>
<span id="cb289-6"><a href="#cb289-6" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/nbutils/print_tex.py#L7-L21">View
Source on GitHub</a></p>
<p>function for easily rendering a sympy expression in latex</p>
<blockquote>
<p>docs for <a
href="https://github.com/mivanit/muutils"><code>muutils</code></a>
v0.8.6</p>
</blockquote>
<h2 id="contents-23">Contents</h2>
<p>turn a folder of notebooks into scripts, run them, and make sure they
work.</p>
<p>made to be called as</p>
<div class="sourceCode" id="cb290"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb290-1"><a href="#cb290-1" aria-hidden="true" tabindex="-1"></a><span class="ex">python</span> <span class="at">-m</span> muutils.nbutils.run_notebook_tests <span class="at">--notebooks-dir</span> <span class="op">&lt;</span>notebooks_dir<span class="op">&gt;</span> --converted-notebooks-temp-dir <span class="op">&lt;</span>converted_notebooks_temp_dir<span class="op">&gt;</span></span></code></pre></div>
<h2 id="api-documentation-36">API Documentation</h2>
<ul>
<li><a href="#NotebookTestError"><code>NotebookTestError</code></a></li>
<li><a href="#SUCCESS_STR"><code>SUCCESS_STR</code></a></li>
<li><a href="#FAILURE_STR"><code>FAILURE_STR</code></a></li>
<li><a
href="#run_notebook_tests"><code>run_notebook_tests</code></a></li>
</ul>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/nbutils/run_notebook_tests.py">View
Source on GitHub</a></p>
<h1
id="muutils.nbutils.run_notebook_tests"><code>muutils.nbutils.run_notebook_tests</code></h1>
<p>turn a folder of notebooks into scripts, run them, and make sure they
work.</p>
<p>made to be called as</p>
<div class="sourceCode" id="cb291"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb291-1"><a href="#cb291-1" aria-hidden="true" tabindex="-1"></a><span class="ex">python</span> <span class="at">-m</span> <span class="op">&lt;</span>a href=<span class="st">&quot;&quot;</span><span class="op">&gt;</span>muutils.nbutils.run_notebook_tests<span class="op">&lt;</span>/a<span class="op">&gt;</span> --notebooks-dir <span class="op">&lt;</span>notebooks_dir<span class="op">&gt;</span> --converted-notebooks-temp-dir <span class="op">&lt;</span>converted_notebooks_temp_dir<span class="op">&gt;</span></span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/nbutils/run_notebook_tests.py#L0-L254">View
Source on GitHub</a></p>
<h3
id="NotebookTestError"><code>class NotebookTestError(builtins.Exception):</code></h3>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/nbutils/run_notebook_tests.py#L21-L22">View
Source on GitHub</a></p>
<p>Common base class for all non-exit exceptions.</p>
<h3 id="inherited-members-21">Inherited Members</h3>
<ul>
<li><p><a
href="#NotebookTestError.__init__"><code>Exception</code></a></p></li>
<li><p><a
href="#NotebookTestError.with_traceback"><code>with_traceback</code></a></p></li>
<li><p><a
href="#NotebookTestError.add_note"><code>add_note</code></a></p></li>
<li><p><a href="#NotebookTestError.args"><code>args</code></a></p></li>
<li><p><code>SUCCESS_STR: str = '✅'</code></p></li>
<li><p><code>FAILURE_STR: str = '❌'</code></p></li>
</ul>
<h3 id="run_notebook_tests"><code>def run_notebook_tests</code></h3>
<div class="sourceCode" id="cb292"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb292-1"><a href="#cb292-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb292-2"><a href="#cb292-2" aria-hidden="true" tabindex="-1"></a>    notebooks_dir: pathlib.Path,</span>
<span id="cb292-3"><a href="#cb292-3" aria-hidden="true" tabindex="-1"></a>    converted_notebooks_temp_dir: pathlib.Path,</span>
<span id="cb292-4"><a href="#cb292-4" aria-hidden="true" tabindex="-1"></a>    CI_output_suffix: <span class="bu">str</span> <span class="op">=</span> <span class="st">&#39;.CI-output.txt&#39;</span>,</span>
<span id="cb292-5"><a href="#cb292-5" aria-hidden="true" tabindex="-1"></a>    run_python_cmd: Optional[<span class="bu">str</span>] <span class="op">=</span> <span class="va">None</span>,</span>
<span id="cb292-6"><a href="#cb292-6" aria-hidden="true" tabindex="-1"></a>    run_python_cmd_fmt: <span class="bu">str</span> <span class="op">=</span> <span class="st">&#39;</span><span class="sc">{python_tool}</span><span class="st"> run python&#39;</span>,</span>
<span id="cb292-7"><a href="#cb292-7" aria-hidden="true" tabindex="-1"></a>    python_tool: <span class="bu">str</span> <span class="op">=</span> <span class="st">&#39;poetry&#39;</span>,</span>
<span id="cb292-8"><a href="#cb292-8" aria-hidden="true" tabindex="-1"></a>    exit_on_first_fail: <span class="bu">bool</span> <span class="op">=</span> <span class="va">False</span></span>
<span id="cb292-9"><a href="#cb292-9" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/nbutils/run_notebook_tests.py#L29-L217">View
Source on GitHub</a></p>
<p>Run converted Jupyter notebooks as Python scripts and verify they
execute successfully.</p>
<p>Takes a directory of notebooks and their corresponding converted
Python scripts, executes each script, and captures the output. Failures
are collected and reported, with optional early exit on first
failure.</p>
<h3 id="parameters-42">Parameters:</h3>
<ul>
<li><code>notebooks_dir : Path</code> Directory containing the original
.ipynb notebook files</li>
<li><code>converted_notebooks_temp_dir : Path</code> Directory
containing the corresponding converted .py files</li>
<li><code>CI_output_suffix : str</code> Suffix to append to output files
capturing execution results (defaults to
<code>".CI-output.txt"</code>)</li>
<li><code>run_python_cmd : str | None</code> Custom command to run
Python scripts. Overrides python_tool and run_python_cmd_fmt if provided
(defaults to <code>None</code>)</li>
<li><code>run_python_cmd_fmt : str</code> Format string for constructing
the Python run command (defaults to
<code>"{python_tool} run python"</code>)</li>
<li><code>python_tool : str</code> Tool used to run Python (e.g. poetry,
uv) (defaults to <code>"poetry"</code>)</li>
<li><code>exit_on_first_fail : bool</code> Whether to raise exception
immediately on first notebook failure (defaults to
<code>False</code>)</li>
</ul>
<h3 id="returns-29">Returns:</h3>
<ul>
<li><code>None</code></li>
</ul>
<h3 id="modifies-2">Modifies:</h3>
<ul>
<li>Working directory: Temporarily changes to notebooks_dir during
execution</li>
<li>Filesystem: Creates output files with CI_output_suffix for each
notebook</li>
</ul>
<h3 id="raises-20">Raises:</h3>
<ul>
<li><code>NotebookTestError</code>: If any notebooks fail to execute, or
if input directories are invalid</li>
<li><code>TypeError</code>: If run_python_cmd is provided but not a
string</li>
</ul>
<h3 id="usage-6">Usage:</h3>
<div class="sourceCode" id="cb293"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb293-1"><a href="#cb293-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> run_notebook_tests(</span>
<span id="cb293-2"><a href="#cb293-2" aria-hidden="true" tabindex="-1"></a>...     notebooks_dir<span class="op">=</span>Path(<span class="st">&quot;notebooks&quot;</span>),</span>
<span id="cb293-3"><a href="#cb293-3" aria-hidden="true" tabindex="-1"></a>...     converted_notebooks_temp_dir<span class="op">=</span>Path(<span class="st">&quot;temp/converted&quot;</span>),</span>
<span id="cb293-4"><a href="#cb293-4" aria-hidden="true" tabindex="-1"></a>...     python_tool<span class="op">=</span><span class="st">&quot;poetry&quot;</span></span>
<span id="cb293-5"><a href="#cb293-5" aria-hidden="true" tabindex="-1"></a>... )</span>
<span id="cb293-6"><a href="#cb293-6" aria-hidden="true" tabindex="-1"></a><span class="co">### testing notebooks in &#39;notebooks&#39;</span></span>
<span id="cb293-7"><a href="#cb293-7" aria-hidden="true" tabindex="-1"></a><span class="co">### reading converted notebooks from &#39;temp/converted&#39;</span></span>
<span id="cb293-8"><a href="#cb293-8" aria-hidden="true" tabindex="-1"></a>Running <span class="dv">1</span><span class="op">/</span><span class="dv">2</span>: temp<span class="op">/</span>converted<span class="op">/</span>notebook1.py</span>
<span id="cb293-9"><a href="#cb293-9" aria-hidden="true" tabindex="-1"></a>    Output <span class="kw">in</span> temp<span class="op">/</span>converted<span class="op">/</span>notebook1.CI<span class="op">-</span>output.txt</span>
<span id="cb293-10"><a href="#cb293-10" aria-hidden="true" tabindex="-1"></a>    {SUCCESS_STR} Run completed <span class="cf">with</span> <span class="cf">return</span> code <span class="dv">0</span></span></code></pre></div>
<blockquote>
<p>docs for <a
href="https://github.com/mivanit/muutils"><code>muutils</code></a>
v0.8.6</p>
</blockquote>
<h2 id="api-documentation-37">API Documentation</h2>
<ul>
<li><a
href="#ProgressBarFunction"><code>ProgressBarFunction</code></a></li>
<li><a href="#ProgressBarOption"><code>ProgressBarOption</code></a></li>
<li><a href="#DEFAULT_PBAR_FN"><code>DEFAULT_PBAR_FN</code></a></li>
<li><a href="#spinner_fn_wrap"><code>spinner_fn_wrap</code></a></li>
<li><a
href="#map_kwargs_for_tqdm"><code>map_kwargs_for_tqdm</code></a></li>
<li><a
href="#no_progress_fn_wrap"><code>no_progress_fn_wrap</code></a></li>
<li><a
href="#set_up_progress_bar_fn"><code>set_up_progress_bar_fn</code></a></li>
<li><a
href="#run_maybe_parallel"><code>run_maybe_parallel</code></a></li>
</ul>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/parallel.py">View
Source on GitHub</a></p>
<h1 id="muutils.parallel"><code>muutils.parallel</code></h1>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/parallel.py#L0-L274">View
Source on GitHub</a></p>
<h3
id="ProgressBarFunction"><code>class ProgressBarFunction(typing.Protocol):</code></h3>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/parallel.py#L27-L30">View
Source on GitHub</a></p>
<p>a protocol for a progress bar function</p>
<h3
id="ProgressBarFunction.__init__"><code>ProgressBarFunction</code></h3>
<div class="sourceCode" id="cb294"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb294-1"><a href="#cb294-1" aria-hidden="true" tabindex="-1"></a>(<span class="op">*</span>args, <span class="op">**</span>kwargs)</span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/parallel.py#L1766-L1792">View
Source on GitHub</a></p>
<ul>
<li><p><code>ProgressBarOption = typing.Literal['tqdm', 'spinner', 'none', None]</code></p></li>
<li><p><code>DEFAULT_PBAR_FN: Literal['tqdm', 'spinner', 'none', None] = 'tqdm'</code></p></li>
</ul>
<h3 id="spinner_fn_wrap"><code>def spinner_fn_wrap</code></h3>
<div class="sourceCode" id="cb295"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb295-1"><a href="#cb295-1" aria-hidden="true" tabindex="-1"></a>(x: Iterable, <span class="op">**</span>kwargs) <span class="op">-&gt;</span> List</span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/parallel.py#L51-L68">View
Source on GitHub</a></p>
<p>spinner wrapper</p>
<h3 id="map_kwargs_for_tqdm"><code>def map_kwargs_for_tqdm</code></h3>
<div class="sourceCode" id="cb296"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb296-1"><a href="#cb296-1" aria-hidden="true" tabindex="-1"></a>(kwargs: <span class="bu">dict</span>) <span class="op">-&gt;</span> <span class="bu">dict</span></span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/parallel.py#L71-L82">View
Source on GitHub</a></p>
<p>map kwargs for tqdm, cant wrap because the pbar dissapears?</p>
<h3 id="no_progress_fn_wrap"><code>def no_progress_fn_wrap</code></h3>
<div class="sourceCode" id="cb297"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb297-1"><a href="#cb297-1" aria-hidden="true" tabindex="-1"></a>(x: Iterable, <span class="op">**</span>kwargs) <span class="op">-&gt;</span> Iterable</span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/parallel.py#L85-L87">View
Source on GitHub</a></p>
<p>fallback to no progress bar</p>
<h3
id="set_up_progress_bar_fn"><code>def set_up_progress_bar_fn</code></h3>
<div class="sourceCode" id="cb298"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb298-1"><a href="#cb298-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb298-2"><a href="#cb298-2" aria-hidden="true" tabindex="-1"></a>    pbar: Union[muutils.parallel.ProgressBarFunction, Literal[<span class="st">&#39;tqdm&#39;</span>, <span class="st">&#39;spinner&#39;</span>, <span class="st">&#39;none&#39;</span>, <span class="va">None</span>]],</span>
<span id="cb298-3"><a href="#cb298-3" aria-hidden="true" tabindex="-1"></a>    pbar_kwargs: Optional[Dict[<span class="bu">str</span>, Any]] <span class="op">=</span> <span class="va">None</span>,</span>
<span id="cb298-4"><a href="#cb298-4" aria-hidden="true" tabindex="-1"></a>    <span class="op">**</span>extra_kwargs</span>
<span id="cb298-5"><a href="#cb298-5" aria-hidden="true" tabindex="-1"></a>) <span class="op">-&gt;</span> Tuple[muutils.parallel.ProgressBarFunction, <span class="bu">dict</span>]</span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/parallel.py#L90-L138">View
Source on GitHub</a></p>
<p>set up the progress bar function and its kwargs</p>
<h3 id="parameters-43">Parameters:</h3>
<ul>
<li><code>pbar : Union[ProgressBarFunction, ProgressBarOption]</code>
progress bar function or option. if a function, we return as-is. if a
string, we figure out which progress bar to use</li>
<li><code>pbar_kwargs : Optional[Dict[str, Any]]</code> kwargs passed to
the progress bar function (default to <code>None</code>) (defaults to
<code>None</code>)</li>
</ul>
<h3 id="returns-30">Returns:</h3>
<ul>
<li><code>Tuple[ProgressBarFunction, dict]</code> a tuple of the
progress bar function and its kwargs</li>
</ul>
<h3 id="raises-21">Raises:</h3>
<ul>
<li><code>ValueError</code> : if <code>pbar</code> is not one of the
valid options</li>
</ul>
<h3 id="run_maybe_parallel"><code>def run_maybe_parallel</code></h3>
<div class="sourceCode" id="cb299"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb299-1"><a href="#cb299-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb299-2"><a href="#cb299-2" aria-hidden="true" tabindex="-1"></a>    func: Callable[[<span class="op">~</span>InputType], <span class="op">~</span>OutputType],</span>
<span id="cb299-3"><a href="#cb299-3" aria-hidden="true" tabindex="-1"></a>    iterable: Iterable[<span class="op">~</span>InputType],</span>
<span id="cb299-4"><a href="#cb299-4" aria-hidden="true" tabindex="-1"></a>    parallel: Union[<span class="bu">bool</span>, <span class="bu">int</span>],</span>
<span id="cb299-5"><a href="#cb299-5" aria-hidden="true" tabindex="-1"></a>    pbar_kwargs: Optional[Dict[<span class="bu">str</span>, Any]] <span class="op">=</span> <span class="va">None</span>,</span>
<span id="cb299-6"><a href="#cb299-6" aria-hidden="true" tabindex="-1"></a>    chunksize: Optional[<span class="bu">int</span>] <span class="op">=</span> <span class="va">None</span>,</span>
<span id="cb299-7"><a href="#cb299-7" aria-hidden="true" tabindex="-1"></a>    keep_ordered: <span class="bu">bool</span> <span class="op">=</span> <span class="va">True</span>,</span>
<span id="cb299-8"><a href="#cb299-8" aria-hidden="true" tabindex="-1"></a>    use_multiprocess: <span class="bu">bool</span> <span class="op">=</span> <span class="va">False</span>,</span>
<span id="cb299-9"><a href="#cb299-9" aria-hidden="true" tabindex="-1"></a>    pbar: Union[muutils.parallel.ProgressBarFunction, Literal[<span class="st">&#39;tqdm&#39;</span>, <span class="st">&#39;spinner&#39;</span>, <span class="st">&#39;none&#39;</span>, <span class="va">None</span>]] <span class="op">=</span> <span class="st">&#39;tqdm&#39;</span></span>
<span id="cb299-10"><a href="#cb299-10" aria-hidden="true" tabindex="-1"></a>) <span class="op">-&gt;</span> List[<span class="op">~</span>OutputType]</span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/parallel.py#L142-L275">View
Source on GitHub</a></p>
<p>a function to make it easier to sometimes parallelize an
operation</p>
<ul>
<li>if <code>parallel</code> is <code>False</code>, then the function
will run in serial, running <code>map(func, iterable)</code></li>
<li>if <code>parallel</code> is <code>True</code>, then the function
will run in parallel, running in parallel with the maximum number of
processes</li>
<li>if <code>parallel</code> is an <code>int</code>, it must be greater
than 1, and the function will run in parallel with the number of
processes specified by <code>parallel</code></li>
</ul>
<p>the maximum number of processes is given by the
<code>min(len(iterable), multiprocessing.cpu_count())</code></p>
<h3 id="parameters-44">Parameters:</h3>
<ul>
<li><code>func : Callable[[InputType], OutputType]</code> function
passed to either <code>map</code> or <code>Pool.imap</code></li>
<li><code>iterable : Iterable[InputType]</code> iterable passed to
either <code>map</code> or <code>Pool.imap</code></li>
<li><code>parallel : bool | int</code> whether to run in parallel, and
how many processes to use</li>
<li><code>pbar_kwargs : Dict[str, Any]</code> kwargs passed to the
progress bar function</li>
</ul>
<h3 id="returns-31">Returns:</h3>
<ul>
<li><code>List[OutputType]</code> a list of the output of
<code>func</code> for each element in <code>iterable</code></li>
</ul>
<h3 id="raises-22">Raises:</h3>
<ul>
<li><code>ValueError</code> : if <code>parallel</code> is not a boolean
or an integer greater than 1</li>
<li><code>ValueError</code> : if <code>use_multiprocess=True</code> and
<code>parallel=False</code></li>
<li><code>ImportError</code> : if <code>use_multiprocess=True</code> and
<code>multiprocess</code> is not available</li>
</ul>
<blockquote>
<p>docs for <a
href="https://github.com/mivanit/muutils"><code>muutils</code></a>
v0.8.6</p>
</blockquote>
<h2 id="contents-24">Contents</h2>
<p>decorator <code>spinner_decorator</code> and context manager
<code>SpinnerContext</code> to display a spinner</p>
<p>using the base <code>Spinner</code> class while some code is
running.</p>
<h2 id="api-documentation-38">API Documentation</h2>
<ul>
<li><a href="#DecoratedFunction"><code>DecoratedFunction</code></a></li>
<li><a href="#SpinnerConfig"><code>SpinnerConfig</code></a></li>
<li><a href="#SpinnerConfigArg"><code>SpinnerConfigArg</code></a></li>
<li><a href="#SPINNERS"><code>SPINNERS</code></a></li>
<li><a href="#Spinner"><code>Spinner</code></a></li>
<li><a
href="#NoOpContextManager"><code>NoOpContextManager</code></a></li>
<li><a href="#SpinnerContext"><code>SpinnerContext</code></a></li>
<li><a href="#spinner_decorator"><code>spinner_decorator</code></a></li>
</ul>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/spinner.py">View
Source on GitHub</a></p>
<h1 id="muutils.spinner"><code>muutils.spinner</code></h1>
<p>decorator <code>spinner_decorator</code> and context manager
<code>SpinnerContext</code> to display a spinner</p>
<p>using the base <code>Spinner</code> class while some code is
running.</p>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/spinner.py#L0-L510">View
Source on GitHub</a></p>
<ul>
<li><code>DecoratedFunction = ~DecoratedFunction</code></li>
</ul>
<p>Define a generic type for the decorated function</p>
<h3 id="SpinnerConfig"><code>class SpinnerConfig:</code></h3>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/spinner.py#L31-L80">View
Source on GitHub</a></p>
<h3 id="SpinnerConfig.__init__"><code>SpinnerConfig</code></h3>
<div class="sourceCode" id="cb300"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb300-1"><a href="#cb300-1" aria-hidden="true" tabindex="-1"></a>(working: List[<span class="bu">str</span>] <span class="op">=</span> <span class="op">&lt;</span>factory<span class="op">&gt;</span>, success: <span class="bu">str</span> <span class="op">=</span> <span class="st">&#39;✔️&#39;</span>, fail: <span class="bu">str</span> <span class="op">=</span> <span class="st">&#39;❌&#39;</span>)</span></code></pre></div>
<ul>
<li><p><code>working: List[str]</code></p></li>
<li><p><code>success: str = '✔️'</code></p></li>
<li><p><code>fail: str = '❌'</code></p></li>
</ul>
<h3 id="SpinnerConfig.is_ascii"><code>def is_ascii</code></h3>
<div class="sourceCode" id="cb301"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb301-1"><a href="#cb301-1" aria-hidden="true" tabindex="-1"></a>(<span class="va">self</span>) <span class="op">-&gt;</span> <span class="bu">bool</span></span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/spinner.py#L37-L39">View
Source on GitHub</a></p>
<p>whether all characters are ascii</p>
<h3 id="SpinnerConfig.eq_lens"><code>def eq_lens</code></h3>
<div class="sourceCode" id="cb302"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb302-1"><a href="#cb302-1" aria-hidden="true" tabindex="-1"></a>(<span class="va">self</span>) <span class="op">-&gt;</span> <span class="bu">bool</span></span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/spinner.py#L41-L49">View
Source on GitHub</a></p>
<p>whether all working characters are the same length</p>
<h3 id="SpinnerConfig.is_valid"><code>def is_valid</code></h3>
<div class="sourceCode" id="cb303"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb303-1"><a href="#cb303-1" aria-hidden="true" tabindex="-1"></a>(<span class="va">self</span>) <span class="op">-&gt;</span> <span class="bu">bool</span></span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/spinner.py#L51-L61">View
Source on GitHub</a></p>
<p>whether the spinner config is valid</p>
<h3 id="SpinnerConfig.from_any"><code>def from_any</code></h3>
<div class="sourceCode" id="cb304"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb304-1"><a href="#cb304-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb304-2"><a href="#cb304-2" aria-hidden="true" tabindex="-1"></a>    cls,</span>
<span id="cb304-3"><a href="#cb304-3" aria-hidden="true" tabindex="-1"></a>    arg: Union[<span class="bu">str</span>, List[<span class="bu">str</span>], muutils.spinner.SpinnerConfig, <span class="bu">dict</span>]</span>
<span id="cb304-4"><a href="#cb304-4" aria-hidden="true" tabindex="-1"></a>) <span class="op">-&gt;</span> muutils.spinner.SpinnerConfig</span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/spinner.py#L67-L80">View
Source on GitHub</a></p>
<ul>
<li><p><code>SpinnerConfigArg = typing.Union[str, typing.List[str], muutils.spinner.SpinnerConfig, dict]</code></p></li>
<li><p><code>SPINNERS: Dict[str, muutils.spinner.SpinnerConfig] = {'default': SpinnerConfig(working=['|', '/', '-', '\\'], success='#', fail='X'), 'dots': SpinnerConfig(working=['.  ', '.. ', '...'], success='***', fail='xxx'), 'bars': SpinnerConfig(working=['|  ', '|| ', '|||'], success='|||', fail='///'), 'arrows': SpinnerConfig(working=['&lt;', '^', '&gt;', 'v'], success='►', fail='✖'), 'arrows_2': SpinnerConfig(working=['←', '↖', '↑', '↗', '→', '↘', '↓', '↙'], success='→', fail='↯'), 'bouncing_bar': SpinnerConfig(working=['[    ]', '[=   ]', '[==  ]', '[=== ]', '[ ===]', '[  ==]', '[   =]'], success='[====]', fail='[XXXX]'), 'bar': SpinnerConfig(working=['[  ]', '[- ]', '[--]', '[ -]'], success='[==]', fail='[xx]'), 'bouncing_ball': SpinnerConfig(working=['( ●    )', '(  ●   )', '(   ●  )', '(    ● )', '(     ●)', '(    ● )', '(   ●  )', '(  ●   )', '( ●    )', '(●     )'], success='(●●●●●●)', fail='(  ✖  )'), 'ooo': SpinnerConfig(working=['.', 'o', 'O', 'o'], success='O', fail='x'), 'braille': SpinnerConfig(working=['⠋', '⠙', '⠹', '⠸', '⠼', '⠴', '⠦', '⠧', '⠇', '⠏'], success='⣿', fail='X'), 'clock': SpinnerConfig(working=['🕛', '🕐', '🕑', '🕒', '🕓', '🕔', '🕕', '🕖', '🕗', '🕘', '🕙', '🕚'], success='✔️', fail='❌'), 'hourglass': SpinnerConfig(working=['⏳', '⌛'], success='✔️', fail='❌'), 'square_corners': SpinnerConfig(working=['◰', '◳', '◲', '◱'], success='◼', fail='✖'), 'triangle': SpinnerConfig(working=['◢', '◣', '◤', '◥'], success='◆', fail='✖'), 'square_dot': SpinnerConfig(working=['⣷', '⣯', '⣟', '⡿', '⢿', '⣻', '⣽', '⣾'], success='⣿', fail='❌'), 'box_bounce': SpinnerConfig(working=['▌', '▀', '▐', '▄'], success='■', fail='✖'), 'hamburger': SpinnerConfig(working=['☱', '☲', '☴'], success='☰', fail='✖'), 'earth': SpinnerConfig(working=['🌍', '🌎', '🌏'], success='✔️', fail='❌'), 'growing_dots': SpinnerConfig(working=['⣀', '⣄', '⣤', '⣦', '⣶', '⣷', '⣿'], success='⣿', fail='✖'), 'dice': SpinnerConfig(working=['⚀', '⚁', '⚂', '⚃', '⚄', '⚅'], success='🎲', fail='✖'), 'wifi': SpinnerConfig(working=['▁', '▂', '▃', '▄', '▅', '▆', '▇', '█'], success='✔️', fail='❌'), 'bounce': SpinnerConfig(working=['⠁', '⠂', '⠄', '⠂'], success='⠿', fail='⢿'), 'arc': SpinnerConfig(working=['◜', '◠', '◝', '◞', '◡', '◟'], success='○', fail='✖'), 'toggle': SpinnerConfig(working=['⊶', '⊷'], success='⊷', fail='⊗'), 'toggle2': SpinnerConfig(working=['▫', '▪'], success='▪', fail='✖'), 'toggle3': SpinnerConfig(working=['□', '■'], success='■', fail='✖'), 'toggle4': SpinnerConfig(working=['■', '□', '▪', '▫'], success='■', fail='✖'), 'toggle5': SpinnerConfig(working=['▮', '▯'], success='▮', fail='✖'), 'toggle7': SpinnerConfig(working=['⦾', '⦿'], success='⦿', fail='✖'), 'toggle8': SpinnerConfig(working=['◍', '◌'], success='◍', fail='✖'), 'toggle9': SpinnerConfig(working=['◉', '◎'], success='◉', fail='✖'), 'arrow2': SpinnerConfig(working=['⬆️ ', '↗️ ', '➡️ ', '↘️ ', '⬇️ ', '↙️ ', '⬅️ ', '↖️ '], success='➡️', fail='❌'), 'point': SpinnerConfig(working=['∙∙∙', '●∙∙', '∙●∙', '∙∙●', '∙∙∙'], success='●●●', fail='xxx'), 'layer': SpinnerConfig(working=['-', '=', '≡'], success='≡', fail='✖'), 'speaker': SpinnerConfig(working=['🔈 ', '🔉 ', '🔊 ', '🔉 '], success='🔊', fail='🔇'), 'orangePulse': SpinnerConfig(working=['🔸 ', '🔶 ', '🟠 ', '🟠 ', '🔷 '], success='🟠', fail='❌'), 'bluePulse': SpinnerConfig(working=['🔹 ', '🔷 ', '🔵 ', '🔵 ', '🔷 '], success='🔵', fail='❌'), 'satellite_signal': SpinnerConfig(working=['📡   ', '📡·  ', '📡·· ', '📡···', '📡 ··', '📡  ·'], success='📡 ✔️ ', fail='📡 ❌ '), 'rocket_orbit': SpinnerConfig(working=['🌍🚀  ', '🌏 🚀 ', '🌎  🚀'], success='🌍  ✨', fail='🌍  💥'), 'ogham': SpinnerConfig(working=['ᚁ ', 'ᚂ ', 'ᚃ ', 'ᚄ', 'ᚅ'], success='᚛᚜', fail='✖'), 'eth': SpinnerConfig(working=['᛫', '፡', '፥', '፤', '፧', '።', '፨'], success='፠', fail='✖')}</code></p></li>
</ul>
<h3 id="Spinner"><code>class Spinner:</code></h3>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/spinner.py#L201-L410">View
Source on GitHub</a></p>
<p>displays a spinner, and optionally elapsed time and a mutable value
while a function is running.</p>
<h3 id="parameters-45">Parameters:</h3>
<ul>
<li><code>update_interval : float</code> how often to update the spinner
display in seconds (defaults to <code>0.1</code>)</li>
<li><code>initial_value : str</code> initial value to display with the
spinner (defaults to <code>""</code>)</li>
<li><code>message : str</code> message to display with the spinner
(defaults to <code>""</code>)</li>
<li><code>format_string : str</code> string to format the spinner with.
must have <code>"\r"</code> prepended to clear the line. allowed keys
are <code>spinner</code>, <code>elapsed_time</code>,
<code>message</code>, and <code>value</code> (defaults to
<code>"\r{spinner} ({elapsed_time:.2f}s) {message}{value}"</code>)</li>
<li><code>output_stream : TextIO</code> stream to write the spinner to
(defaults to <code>sys.stdout</code>)</li>
<li><code>format_string_when_updated : Union[bool,str]</code> whether to
use a different format string when the value is updated. if
<code>True</code>, use the default format string with a newline
appended. if a string, use that string. this is useful if you want
update_value to print to console and be preserved. (defaults to
<code>False</code>)</li>
</ul>
<h3 id="deprecated-parameters">Deprecated Parameters:</h3>
<ul>
<li><code>spinner_chars : Union[str, Sequence[str]]</code> sequence of
strings, or key to look up in <code>SPINNER_CHARS</code>, to use as the
spinner characters (defaults to <code>"default"</code>)</li>
<li><code>spinner_complete : str</code> string to display when the
spinner is complete (defaults to looking up <code>spinner_chars</code>
in <code>SPINNER_COMPLETE</code> or <code>"#"</code>)</li>
</ul>
<h3 id="methods">Methods:</h3>
<ul>
<li><code>update_value(value: Any) -&gt; None</code> update the current
value displayed by the spinner</li>
</ul>
<h3 id="usage-7">Usage:</h3>
<h4 id="as-a-context-manager">As a context manager:</h4>
<div class="sourceCode" id="cb305"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb305-1"><a href="#cb305-1" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> SpinnerContext() <span class="im">as</span> sp:</span>
<span id="cb305-2"><a href="#cb305-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">1</span>):</span>
<span id="cb305-3"><a href="#cb305-3" aria-hidden="true" tabindex="-1"></a>        time.sleep(<span class="fl">0.1</span>)</span>
<span id="cb305-4"><a href="#cb305-4" aria-hidden="true" tabindex="-1"></a>        spinner.update_value(<span class="ss">f&quot;Step </span><span class="sc">{</span>i<span class="op">+</span><span class="dv">1</span><span class="sc">}</span><span class="ss">&quot;</span>)</span></code></pre></div>
<h4 id="as-a-decorator">As a decorator:</h4>
<div class="sourceCode" id="cb306"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb306-1"><a href="#cb306-1" aria-hidden="true" tabindex="-1"></a><span class="at">@spinner_decorator</span></span>
<span id="cb306-2"><a href="#cb306-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> long_running_function():</span>
<span id="cb306-3"><a href="#cb306-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">1</span>):</span>
<span id="cb306-4"><a href="#cb306-4" aria-hidden="true" tabindex="-1"></a>        time.sleep(<span class="fl">0.1</span>)</span>
<span id="cb306-5"><a href="#cb306-5" aria-hidden="true" tabindex="-1"></a>        spinner.update_value(<span class="ss">f&quot;Step </span><span class="sc">{</span>i<span class="op">+</span><span class="dv">1</span><span class="sc">}</span><span class="ss">&quot;</span>)</span>
<span id="cb306-6"><a href="#cb306-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="st">&quot;Function completed&quot;</span></span></code></pre></div>
<h3 id="Spinner.__init__"><code>Spinner</code></h3>
<div class="sourceCode" id="cb307"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb307-1"><a href="#cb307-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb307-2"><a href="#cb307-2" aria-hidden="true" tabindex="-1"></a>    <span class="op">*</span>args,</span>
<span id="cb307-3"><a href="#cb307-3" aria-hidden="true" tabindex="-1"></a>    config: Union[<span class="bu">str</span>, List[<span class="bu">str</span>], muutils.spinner.SpinnerConfig, <span class="bu">dict</span>] <span class="op">=</span> <span class="st">&#39;default&#39;</span>,</span>
<span id="cb307-4"><a href="#cb307-4" aria-hidden="true" tabindex="-1"></a>    update_interval: <span class="bu">float</span> <span class="op">=</span> <span class="fl">0.1</span>,</span>
<span id="cb307-5"><a href="#cb307-5" aria-hidden="true" tabindex="-1"></a>    initial_value: <span class="bu">str</span> <span class="op">=</span> <span class="st">&#39;&#39;</span>,</span>
<span id="cb307-6"><a href="#cb307-6" aria-hidden="true" tabindex="-1"></a>    message: <span class="bu">str</span> <span class="op">=</span> <span class="st">&#39;&#39;</span>,</span>
<span id="cb307-7"><a href="#cb307-7" aria-hidden="true" tabindex="-1"></a>    format_string: <span class="bu">str</span> <span class="op">=</span> <span class="st">&#39;</span><span class="ch">\r</span><span class="sc">{spinner}</span><span class="st"> (</span><span class="sc">{elapsed_time:.2f}</span><span class="st">s) </span><span class="sc">{message}{value}</span><span class="st">&#39;</span>,</span>
<span id="cb307-8"><a href="#cb307-8" aria-hidden="true" tabindex="-1"></a>    output_stream: <span class="op">&lt;</span><span class="kw">class</span> <span class="st">&#39;TextIO&#39;</span><span class="op">&gt;</span> <span class="op">=</span> <span class="op">&lt;</span>_io.StringIO <span class="bu">object</span><span class="op">&gt;</span>,</span>
<span id="cb307-9"><a href="#cb307-9" aria-hidden="true" tabindex="-1"></a>    format_string_when_updated: Union[<span class="bu">str</span>, <span class="bu">bool</span>] <span class="op">=</span> <span class="va">False</span>,</span>
<span id="cb307-10"><a href="#cb307-10" aria-hidden="true" tabindex="-1"></a>    spinner_chars: Union[<span class="bu">str</span>, Sequence[<span class="bu">str</span>], NoneType] <span class="op">=</span> <span class="va">None</span>,</span>
<span id="cb307-11"><a href="#cb307-11" aria-hidden="true" tabindex="-1"></a>    spinner_complete: Optional[<span class="bu">str</span>] <span class="op">=</span> <span class="va">None</span>,</span>
<span id="cb307-12"><a href="#cb307-12" aria-hidden="true" tabindex="-1"></a>    <span class="op">**</span>kwargs: Any</span>
<span id="cb307-13"><a href="#cb307-13" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/spinner.py#L262-L350">View
Source on GitHub</a></p>
<ul>
<li><p><code>config: muutils.spinner.SpinnerConfig</code></p></li>
<li><p><code>format_string_when_updated: Optional[str]</code></p></li>
</ul>
<p>format string to use when the value is updated</p>
<ul>
<li><p><code>update_interval: float</code></p></li>
<li><p><code>message: str</code></p></li>
<li><p><code>current_value: Any</code></p></li>
<li><p><code>format_string: str</code></p></li>
<li><p><code>output_stream: &lt;class 'TextIO'&gt;</code></p></li>
<li><p><code>start_time: float</code></p></li>
</ul>
<p>for measuring elapsed time</p>
<ul>
<li><code>stop_spinner: threading.Event</code></li>
</ul>
<p>to stop the spinner</p>
<ul>
<li><code>spinner_thread: Optional[threading.Thread]</code></li>
</ul>
<p>the thread running the spinner</p>
<ul>
<li><code>value_changed: bool</code></li>
</ul>
<p>whether the value has been updated since the last display</p>
<ul>
<li><code>term_width: int</code></li>
</ul>
<p>width of the terminal, for padding with spaces</p>
<ul>
<li><code>state: Literal['initialized', 'running', 'success', 'fail']</code></li>
</ul>
<h3 id="Spinner.spin"><code>def spin</code></h3>
<div class="sourceCode" id="cb308"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb308-1"><a href="#cb308-1" aria-hidden="true" tabindex="-1"></a>(<span class="va">self</span>) <span class="op">-&gt;</span> <span class="va">None</span></span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/spinner.py#L352-L380">View
Source on GitHub</a></p>
<p>Function to run in a separate thread, displaying the spinner and
optional information</p>
<h3 id="Spinner.update_value"><code>def update_value</code></h3>
<div class="sourceCode" id="cb309"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb309-1"><a href="#cb309-1" aria-hidden="true" tabindex="-1"></a>(<span class="va">self</span>, value: Any) <span class="op">-&gt;</span> <span class="va">None</span></span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/spinner.py#L382-L385">View
Source on GitHub</a></p>
<p>Update the current value displayed by the spinner</p>
<h3 id="Spinner.start"><code>def start</code></h3>
<div class="sourceCode" id="cb310"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb310-1"><a href="#cb310-1" aria-hidden="true" tabindex="-1"></a>(<span class="va">self</span>) <span class="op">-&gt;</span> <span class="va">None</span></span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/spinner.py#L387-L392">View
Source on GitHub</a></p>
<p>Start the spinner</p>
<h3 id="Spinner.stop"><code>def stop</code></h3>
<div class="sourceCode" id="cb311"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb311-1"><a href="#cb311-1" aria-hidden="true" tabindex="-1"></a>(<span class="va">self</span>, failed: <span class="bu">bool</span> <span class="op">=</span> <span class="va">False</span>) <span class="op">-&gt;</span> <span class="va">None</span></span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/spinner.py#L394-L410">View
Source on GitHub</a></p>
<p>Stop the spinner</p>
<h3
id="NoOpContextManager"><code>class NoOpContextManager(typing.ContextManager):</code></h3>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/spinner.py#L413-L423">View
Source on GitHub</a></p>
<p>A context manager that does nothing.</p>
<h3
id="NoOpContextManager.__init__"><code>NoOpContextManager</code></h3>
<div class="sourceCode" id="cb312"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb312-1"><a href="#cb312-1" aria-hidden="true" tabindex="-1"></a>(<span class="op">*</span>args, <span class="op">**</span>kwargs)</span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/spinner.py#L416-L417">View
Source on GitHub</a></p>
<h3
id="SpinnerContext"><code>class SpinnerContext(Spinner, typing.ContextManager):</code></h3>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/spinner.py#L426-L434">View
Source on GitHub</a></p>
<p>displays a spinner, and optionally elapsed time and a mutable value
while a function is running.</p>
<h3 id="parameters-46">Parameters:</h3>
<ul>
<li><code>update_interval : float</code> how often to update the spinner
display in seconds (defaults to <code>0.1</code>)</li>
<li><code>initial_value : str</code> initial value to display with the
spinner (defaults to <code>""</code>)</li>
<li><code>message : str</code> message to display with the spinner
(defaults to <code>""</code>)</li>
<li><code>format_string : str</code> string to format the spinner with.
must have <code>"\r"</code> prepended to clear the line. allowed keys
are <code>spinner</code>, <code>elapsed_time</code>,
<code>message</code>, and <code>value</code> (defaults to
<code>"\r{spinner} ({elapsed_time:.2f}s) {message}{value}"</code>)</li>
<li><code>output_stream : TextIO</code> stream to write the spinner to
(defaults to <code>sys.stdout</code>)</li>
<li><code>format_string_when_updated : Union[bool,str]</code> whether to
use a different format string when the value is updated. if
<code>True</code>, use the default format string with a newline
appended. if a string, use that string. this is useful if you want
update_value to print to console and be preserved. (defaults to
<code>False</code>)</li>
</ul>
<h3 id="deprecated-parameters-1">Deprecated Parameters:</h3>
<ul>
<li><code>spinner_chars : Union[str, Sequence[str]]</code> sequence of
strings, or key to look up in <code>SPINNER_CHARS</code>, to use as the
spinner characters (defaults to <code>"default"</code>)</li>
<li><code>spinner_complete : str</code> string to display when the
spinner is complete (defaults to looking up <code>spinner_chars</code>
in <code>SPINNER_COMPLETE</code> or <code>"#"</code>)</li>
</ul>
<h3 id="methods-1">Methods:</h3>
<ul>
<li><code>update_value(value: Any) -&gt; None</code> update the current
value displayed by the spinner</li>
</ul>
<h3 id="usage-8">Usage:</h3>
<h4 id="as-a-context-manager-1">As a context manager:</h4>
<div class="sourceCode" id="cb313"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb313-1"><a href="#cb313-1" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> SpinnerContext() <span class="im">as</span> sp:</span>
<span id="cb313-2"><a href="#cb313-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">1</span>):</span>
<span id="cb313-3"><a href="#cb313-3" aria-hidden="true" tabindex="-1"></a>        time.sleep(<span class="fl">0.1</span>)</span>
<span id="cb313-4"><a href="#cb313-4" aria-hidden="true" tabindex="-1"></a>        spinner.update_value(<span class="ss">f&quot;Step </span><span class="sc">{</span>i<span class="op">+</span><span class="dv">1</span><span class="sc">}</span><span class="ss">&quot;</span>)</span></code></pre></div>
<h4 id="as-a-decorator-1">As a decorator:</h4>
<div class="sourceCode" id="cb314"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb314-1"><a href="#cb314-1" aria-hidden="true" tabindex="-1"></a><span class="at">@spinner_decorator</span></span>
<span id="cb314-2"><a href="#cb314-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> long_running_function():</span>
<span id="cb314-3"><a href="#cb314-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">1</span>):</span>
<span id="cb314-4"><a href="#cb314-4" aria-hidden="true" tabindex="-1"></a>        time.sleep(<span class="fl">0.1</span>)</span>
<span id="cb314-5"><a href="#cb314-5" aria-hidden="true" tabindex="-1"></a>        spinner.update_value(<span class="ss">f&quot;Step </span><span class="sc">{</span>i<span class="op">+</span><span class="dv">1</span><span class="sc">}</span><span class="ss">&quot;</span>)</span>
<span id="cb314-6"><a href="#cb314-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="st">&quot;Function completed&quot;</span></span></code></pre></div>
<h3 id="inherited-members-22">Inherited Members</h3>
<ul>
<li><a href="#SpinnerContext.__init__"><code>Spinner</code></a></li>
<li><a href="#SpinnerContext.config"><code>config</code></a></li>
<li><a
href="#SpinnerContext.format_string_when_updated"><code>format_string_when_updated</code></a></li>
<li><a
href="#SpinnerContext.update_interval"><code>update_interval</code></a></li>
<li><a href="#SpinnerContext.message"><code>message</code></a></li>
<li><a
href="#SpinnerContext.current_value"><code>current_value</code></a></li>
<li><a
href="#SpinnerContext.format_string"><code>format_string</code></a></li>
<li><a
href="#SpinnerContext.output_stream"><code>output_stream</code></a></li>
<li><a
href="#SpinnerContext.start_time"><code>start_time</code></a></li>
<li><a
href="#SpinnerContext.stop_spinner"><code>stop_spinner</code></a></li>
<li><a
href="#SpinnerContext.spinner_thread"><code>spinner_thread</code></a></li>
<li><a
href="#SpinnerContext.value_changed"><code>value_changed</code></a></li>
<li><a
href="#SpinnerContext.term_width"><code>term_width</code></a></li>
<li><a href="#SpinnerContext.state"><code>state</code></a></li>
<li><a href="#SpinnerContext.spin"><code>spin</code></a></li>
<li><a
href="#SpinnerContext.update_value"><code>update_value</code></a></li>
<li><a href="#SpinnerContext.start"><code>start</code></a></li>
<li><a href="#SpinnerContext.stop"><code>stop</code></a></li>
</ul>
<h3 id="spinner_decorator"><code>def spinner_decorator</code></h3>
<div class="sourceCode" id="cb315"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb315-1"><a href="#cb315-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb315-2"><a href="#cb315-2" aria-hidden="true" tabindex="-1"></a>    <span class="op">*</span>args,</span>
<span id="cb315-3"><a href="#cb315-3" aria-hidden="true" tabindex="-1"></a>    config: Union[<span class="bu">str</span>, List[<span class="bu">str</span>], muutils.spinner.SpinnerConfig, <span class="bu">dict</span>] <span class="op">=</span> <span class="st">&#39;default&#39;</span>,</span>
<span id="cb315-4"><a href="#cb315-4" aria-hidden="true" tabindex="-1"></a>    update_interval: <span class="bu">float</span> <span class="op">=</span> <span class="fl">0.1</span>,</span>
<span id="cb315-5"><a href="#cb315-5" aria-hidden="true" tabindex="-1"></a>    initial_value: <span class="bu">str</span> <span class="op">=</span> <span class="st">&#39;&#39;</span>,</span>
<span id="cb315-6"><a href="#cb315-6" aria-hidden="true" tabindex="-1"></a>    message: <span class="bu">str</span> <span class="op">=</span> <span class="st">&#39;&#39;</span>,</span>
<span id="cb315-7"><a href="#cb315-7" aria-hidden="true" tabindex="-1"></a>    format_string: <span class="bu">str</span> <span class="op">=</span> <span class="st">&#39;</span><span class="sc">{spinner}</span><span class="st"> (</span><span class="sc">{elapsed_time:.2f}</span><span class="st">s) </span><span class="sc">{message}{value}</span><span class="st">&#39;</span>,</span>
<span id="cb315-8"><a href="#cb315-8" aria-hidden="true" tabindex="-1"></a>    output_stream: <span class="op">&lt;</span><span class="kw">class</span> <span class="st">&#39;TextIO&#39;</span><span class="op">&gt;</span> <span class="op">=</span> <span class="op">&lt;</span>_io.StringIO <span class="bu">object</span><span class="op">&gt;</span>,</span>
<span id="cb315-9"><a href="#cb315-9" aria-hidden="true" tabindex="-1"></a>    mutable_kwarg_key: Optional[<span class="bu">str</span>] <span class="op">=</span> <span class="va">None</span>,</span>
<span id="cb315-10"><a href="#cb315-10" aria-hidden="true" tabindex="-1"></a>    spinner_chars: Union[<span class="bu">str</span>, Sequence[<span class="bu">str</span>], NoneType] <span class="op">=</span> <span class="va">None</span>,</span>
<span id="cb315-11"><a href="#cb315-11" aria-hidden="true" tabindex="-1"></a>    spinner_complete: Optional[<span class="bu">str</span>] <span class="op">=</span> <span class="va">None</span>,</span>
<span id="cb315-12"><a href="#cb315-12" aria-hidden="true" tabindex="-1"></a>    <span class="op">**</span>kwargs</span>
<span id="cb315-13"><a href="#cb315-13" aria-hidden="true" tabindex="-1"></a>) <span class="op">-&gt;</span> Callable[[<span class="op">~</span>DecoratedFunction], <span class="op">~</span>DecoratedFunction]</span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/spinner.py#L441-L508">View
Source on GitHub</a></p>
<p>displays a spinner, and optionally elapsed time and a mutable value
while a function is running.</p>
<h3 id="parameters-47">Parameters:</h3>
<ul>
<li><code>update_interval : float</code> how often to update the spinner
display in seconds (defaults to <code>0.1</code>)</li>
<li><code>initial_value : str</code> initial value to display with the
spinner (defaults to <code>""</code>)</li>
<li><code>message : str</code> message to display with the spinner
(defaults to <code>""</code>)</li>
<li><code>format_string : str</code> string to format the spinner with.
must have <code>"\r"</code> prepended to clear the line. allowed keys
are <code>spinner</code>, <code>elapsed_time</code>,
<code>message</code>, and <code>value</code> (defaults to
<code>"\r{spinner} ({elapsed_time:.2f}s) {message}{value}"</code>)</li>
<li><code>output_stream : TextIO</code> stream to write the spinner to
(defaults to <code>sys.stdout</code>)</li>
<li><code>format_string_when_updated : Union[bool,str]</code> whether to
use a different format string when the value is updated. if
<code>True</code>, use the default format string with a newline
appended. if a string, use that string. this is useful if you want
update_value to print to console and be preserved. (defaults to
<code>False</code>)</li>
</ul>
<h3 id="deprecated-parameters-2">Deprecated Parameters:</h3>
<ul>
<li><code>spinner_chars : Union[str, Sequence[str]]</code> sequence of
strings, or key to look up in <code>SPINNER_CHARS</code>, to use as the
spinner characters (defaults to <code>"default"</code>)</li>
<li><code>spinner_complete : str</code> string to display when the
spinner is complete (defaults to looking up <code>spinner_chars</code>
in <code>SPINNER_COMPLETE</code> or <code>"#"</code>)</li>
</ul>
<h3 id="methods-2">Methods:</h3>
<ul>
<li><code>update_value(value: Any) -&gt; None</code> update the current
value displayed by the spinner</li>
</ul>
<h3 id="usage-9">Usage:</h3>
<h4 id="as-a-context-manager-2">As a context manager:</h4>
<div class="sourceCode" id="cb316"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb316-1"><a href="#cb316-1" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> SpinnerContext() <span class="im">as</span> sp:</span>
<span id="cb316-2"><a href="#cb316-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">1</span>):</span>
<span id="cb316-3"><a href="#cb316-3" aria-hidden="true" tabindex="-1"></a>        time.sleep(<span class="fl">0.1</span>)</span>
<span id="cb316-4"><a href="#cb316-4" aria-hidden="true" tabindex="-1"></a>        spinner.update_value(<span class="ss">f&quot;Step </span><span class="sc">{</span>i<span class="op">+</span><span class="dv">1</span><span class="sc">}</span><span class="ss">&quot;</span>)</span></code></pre></div>
<h4 id="as-a-decorator-2">As a decorator:</h4>
<div class="sourceCode" id="cb317"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb317-1"><a href="#cb317-1" aria-hidden="true" tabindex="-1"></a><span class="at">@spinner_decorator</span></span>
<span id="cb317-2"><a href="#cb317-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> long_running_function():</span>
<span id="cb317-3"><a href="#cb317-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">1</span>):</span>
<span id="cb317-4"><a href="#cb317-4" aria-hidden="true" tabindex="-1"></a>        time.sleep(<span class="fl">0.1</span>)</span>
<span id="cb317-5"><a href="#cb317-5" aria-hidden="true" tabindex="-1"></a>        spinner.update_value(<span class="ss">f&quot;Step </span><span class="sc">{</span>i<span class="op">+</span><span class="dv">1</span><span class="sc">}</span><span class="ss">&quot;</span>)</span>
<span id="cb317-6"><a href="#cb317-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="st">&quot;Function completed&quot;</span></span></code></pre></div>
<blockquote>
<p>docs for <a
href="https://github.com/mivanit/muutils"><code>muutils</code></a>
v0.8.6</p>
</blockquote>
<h2 id="contents-25">Contents</h2>
<p><code>StatCounter</code> class for counting and calculating
statistics on numbers</p>
<p>cleaner and more efficient than just using a <code>Counter</code> or
array</p>
<h2 id="api-documentation-39">API Documentation</h2>
<ul>
<li><a href="#NumericSequence"><code>NumericSequence</code></a></li>
<li><a href="#universal_flatten"><code>universal_flatten</code></a></li>
<li><a href="#StatCounter"><code>StatCounter</code></a></li>
</ul>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/statcounter.py">View
Source on GitHub</a></p>
<h1 id="muutils.statcounter"><code>muutils.statcounter</code></h1>
<p><code>StatCounter</code> class for counting and calculating
statistics on numbers</p>
<p>cleaner and more efficient than just using a <code>Counter</code> or
array</p>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/statcounter.py#L0-L230">View
Source on GitHub</a></p>
<ul>
<li><code>NumericSequence = typing.Sequence[typing.Union[float, int, ForwardRef('NumericSequence')]]</code></li>
</ul>
<h3 id="universal_flatten"><code>def universal_flatten</code></h3>
<div class="sourceCode" id="cb318"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb318-1"><a href="#cb318-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb318-2"><a href="#cb318-2" aria-hidden="true" tabindex="-1"></a>    arr: Union[Sequence[Union[<span class="bu">float</span>, <span class="bu">int</span>, Sequence[Union[<span class="bu">float</span>, <span class="bu">int</span>, ForwardRef(<span class="st">&#39;NumericSequence&#39;</span>)]]]], <span class="bu">float</span>, <span class="bu">int</span>],</span>
<span id="cb318-3"><a href="#cb318-3" aria-hidden="true" tabindex="-1"></a>    require_rectangular: <span class="bu">bool</span> <span class="op">=</span> <span class="va">True</span></span>
<span id="cb318-4"><a href="#cb318-4" aria-hidden="true" tabindex="-1"></a>) <span class="op">-&gt;</span> Sequence[Union[<span class="bu">float</span>, <span class="bu">int</span>, ForwardRef(<span class="st">&#39;NumericSequence&#39;</span>)]]</span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/statcounter.py#L24-L41">View
Source on GitHub</a></p>
<p>flattens any iterable</p>
<h3
id="StatCounter"><code>class StatCounter(collections.Counter):</code></h3>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/statcounter.py#L48-L231">View
Source on GitHub</a></p>
<p><code>Counter</code>, but with some stat calculation methods which
assume the keys are numerical</p>
<p>works best when the keys are <code>int</code>s</p>
<h3 id="StatCounter.validate"><code>def validate</code></h3>
<div class="sourceCode" id="cb319"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb319-1"><a href="#cb319-1" aria-hidden="true" tabindex="-1"></a>(<span class="va">self</span>) <span class="op">-&gt;</span> <span class="bu">bool</span></span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/statcounter.py#L54-L56">View
Source on GitHub</a></p>
<p>validate the counter as being all floats or ints</p>
<h3 id="StatCounter.min"><code>def min</code></h3>
<div class="sourceCode" id="cb320"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb320-1"><a href="#cb320-1" aria-hidden="true" tabindex="-1"></a>(<span class="va">self</span>)</span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/statcounter.py#L58-L60">View
Source on GitHub</a></p>
<p>minimum value</p>
<h3 id="StatCounter.max"><code>def max</code></h3>
<div class="sourceCode" id="cb321"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb321-1"><a href="#cb321-1" aria-hidden="true" tabindex="-1"></a>(<span class="va">self</span>)</span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/statcounter.py#L62-L64">View
Source on GitHub</a></p>
<p>maximum value</p>
<h3 id="StatCounter.total"><code>def total</code></h3>
<div class="sourceCode" id="cb322"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb322-1"><a href="#cb322-1" aria-hidden="true" tabindex="-1"></a>(<span class="va">self</span>)</span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/statcounter.py#L66-L68">View
Source on GitHub</a></p>
<p>Sum of the counts</p>
<ul>
<li><code>keys_sorted: list</code></li>
</ul>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/statcounter.py#L70-L73">View
Source on GitHub</a></p>
<p>return the keys</p>
<h3 id="StatCounter.percentile"><code>def percentile</code></h3>
<div class="sourceCode" id="cb323"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb323-1"><a href="#cb323-1" aria-hidden="true" tabindex="-1"></a>(<span class="va">self</span>, p: <span class="bu">float</span>)</span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/statcounter.py#L75-L122">View
Source on GitHub</a></p>
<p>return the value at the given percentile</p>
<p>this could be log time if we did binary search, but that would be a
lot of added complexity</p>
<h3 id="StatCounter.median"><code>def median</code></h3>
<div class="sourceCode" id="cb324"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb324-1"><a href="#cb324-1" aria-hidden="true" tabindex="-1"></a>(<span class="va">self</span>) <span class="op">-&gt;</span> <span class="bu">float</span></span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/statcounter.py#L124-L125">View
Source on GitHub</a></p>
<h3 id="StatCounter.mean"><code>def mean</code></h3>
<div class="sourceCode" id="cb325"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb325-1"><a href="#cb325-1" aria-hidden="true" tabindex="-1"></a>(<span class="va">self</span>) <span class="op">-&gt;</span> <span class="bu">float</span></span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/statcounter.py#L127-L129">View
Source on GitHub</a></p>
<p>return the mean of the values</p>
<h3 id="StatCounter.mode"><code>def mode</code></h3>
<div class="sourceCode" id="cb326"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb326-1"><a href="#cb326-1" aria-hidden="true" tabindex="-1"></a>(<span class="va">self</span>) <span class="op">-&gt;</span> <span class="bu">float</span></span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/statcounter.py#L131-L132">View
Source on GitHub</a></p>
<h3 id="StatCounter.std"><code>def std</code></h3>
<div class="sourceCode" id="cb327"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb327-1"><a href="#cb327-1" aria-hidden="true" tabindex="-1"></a>(<span class="va">self</span>) <span class="op">-&gt;</span> <span class="bu">float</span></span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/statcounter.py#L134-L139">View
Source on GitHub</a></p>
<p>return the standard deviation of the values</p>
<h3 id="StatCounter.summary"><code>def summary</code></h3>
<div class="sourceCode" id="cb328"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb328-1"><a href="#cb328-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb328-2"><a href="#cb328-2" aria-hidden="true" tabindex="-1"></a>    <span class="va">self</span>,</span>
<span id="cb328-3"><a href="#cb328-3" aria-hidden="true" tabindex="-1"></a>    typecast: Callable <span class="op">=</span> <span class="op">&lt;</span>function StatCounter.<span class="op">&lt;</span><span class="kw">lambda</span><span class="op">&gt;&gt;</span>,</span>
<span id="cb328-4"><a href="#cb328-4" aria-hidden="true" tabindex="-1"></a>    <span class="op">*</span>,</span>
<span id="cb328-5"><a href="#cb328-5" aria-hidden="true" tabindex="-1"></a>    extra_percentiles: Optional[<span class="bu">list</span>[<span class="bu">float</span>]] <span class="op">=</span> <span class="va">None</span></span>
<span id="cb328-6"><a href="#cb328-6" aria-hidden="true" tabindex="-1"></a>) <span class="op">-&gt;</span> <span class="bu">dict</span>[<span class="bu">str</span>, typing.Union[<span class="bu">float</span>, <span class="bu">int</span>]]</span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/statcounter.py#L141-L179">View
Source on GitHub</a></p>
<p>return a summary of the stats, without the raw data. human readable
and small</p>
<h3 id="StatCounter.serialize"><code>def serialize</code></h3>
<div class="sourceCode" id="cb329"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb329-1"><a href="#cb329-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb329-2"><a href="#cb329-2" aria-hidden="true" tabindex="-1"></a>    <span class="va">self</span>,</span>
<span id="cb329-3"><a href="#cb329-3" aria-hidden="true" tabindex="-1"></a>    typecast: Callable <span class="op">=</span> <span class="op">&lt;</span>function StatCounter.<span class="op">&lt;</span><span class="kw">lambda</span><span class="op">&gt;&gt;</span>,</span>
<span id="cb329-4"><a href="#cb329-4" aria-hidden="true" tabindex="-1"></a>    <span class="op">*</span>,</span>
<span id="cb329-5"><a href="#cb329-5" aria-hidden="true" tabindex="-1"></a>    extra_percentiles: Optional[<span class="bu">list</span>[<span class="bu">float</span>]] <span class="op">=</span> <span class="va">None</span></span>
<span id="cb329-6"><a href="#cb329-6" aria-hidden="true" tabindex="-1"></a>) <span class="op">-&gt;</span> <span class="bu">dict</span></span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/statcounter.py#L181-L205">View
Source on GitHub</a></p>
<p>return a json-serializable version of the counter</p>
<p>includes both the output of <code>summary</code> and the raw
data:</p>
<div class="sourceCode" id="cb330"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb330-1"><a href="#cb330-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb330-2"><a href="#cb330-2" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;StatCounter&quot;</span><span class="fu">:</span> <span class="fu">{</span> <span class="er">&lt;keys</span><span class="fu">,</span> <span class="er">values</span> <span class="er">from</span> <span class="er">raw</span> <span class="er">data&gt;</span> <span class="fu">},</span></span>
<span id="cb330-3"><a href="#cb330-3" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;summary&quot;</span><span class="fu">:</span> <span class="er">self.summary(typecast</span><span class="fu">,</span> <span class="er">extra_percentiles=extra_percentiles)</span><span class="fu">,</span></span>
<span id="cb330-4"><a href="#cb330-4" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span>
<span id="cb330-5"><a href="#cb330-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb330-6"><a href="#cb330-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb330-7"><a href="#cb330-7" aria-hidden="true" tabindex="-1"></a><span class="er">###</span> <span class="er">`def</span> <span class="er">load`</span> <span class="fu">{</span> <span class="er">#StatCounter.load</span> <span class="fu">}</span></span>
<span id="cb330-8"><a href="#cb330-8" aria-hidden="true" tabindex="-1"></a><span class="er">```python</span></span>
<span id="cb330-9"><a href="#cb330-9" aria-hidden="true" tabindex="-1"></a><span class="er">(cls,</span> <span class="er">data:</span> <span class="er">dict)</span> <span class="er">-&gt;</span> <span class="er">muutils.statcounter.StatCounter</span></span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/statcounter.py#L214-L222">View
Source on GitHub</a></p>
<p>load from a the output of
<code>&lt;a href="#StatCounter.serialize"&gt;StatCounter.serialize&lt;/a&gt;</code></p>
<h3
id="StatCounter.from_list_arrays"><code>def from_list_arrays</code></h3>
<div class="sourceCode" id="cb331"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb331-1"><a href="#cb331-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb331-2"><a href="#cb331-2" aria-hidden="true" tabindex="-1"></a>    cls,</span>
<span id="cb331-3"><a href="#cb331-3" aria-hidden="true" tabindex="-1"></a>    arr,</span>
<span id="cb331-4"><a href="#cb331-4" aria-hidden="true" tabindex="-1"></a>    map_func: Callable <span class="op">=</span> <span class="op">&lt;</span><span class="kw">class</span> <span class="st">&#39;float&#39;</span><span class="op">&gt;</span></span>
<span id="cb331-5"><a href="#cb331-5" aria-hidden="true" tabindex="-1"></a>) <span class="op">-&gt;</span> muutils.statcounter.StatCounter</span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/statcounter.py#L224-L231">View
Source on GitHub</a></p>
<p>calls <code>map_func</code> on each element of
<code>universal_flatten(arr)</code></p>
<h3 id="inherited-members-23">Inherited Members</h3>
<ul>
<li><p><a href="#StatCounter.__init__"><code>Counter</code></a></p></li>
<li><p><a
href="#StatCounter.most_common"><code>most_common</code></a></p></li>
<li><p><a
href="#StatCounter.elements"><code>elements</code></a></p></li>
<li><p><a
href="#StatCounter.fromkeys"><code>fromkeys</code></a></p></li>
<li><p><a href="#StatCounter.update"><code>update</code></a></p></li>
<li><p><a
href="#StatCounter.subtract"><code>subtract</code></a></p></li>
<li><p><a href="#StatCounter.copy"><code>copy</code></a></p></li>
<li><p><a href="#StatCounter.get"><code>get</code></a></p></li>
<li><p><a
href="#StatCounter.setdefault"><code>setdefault</code></a></p></li>
<li><p><a href="#StatCounter.pop"><code>pop</code></a></p></li>
<li><p><a href="#StatCounter.popitem"><code>popitem</code></a></p></li>
<li><p><a href="#StatCounter.keys"><code>keys</code></a></p></li>
<li><p><a href="#StatCounter.items"><code>items</code></a></p></li>
<li><p><a href="#StatCounter.values"><code>values</code></a></p></li>
<li><p><a href="#StatCounter.clear"><code>clear</code></a></p></li>
</ul>
<blockquote>
<p>docs for <a
href="https://github.com/mivanit/muutils"><code>muutils</code></a>
v0.8.6</p>
</blockquote>
<h2 id="contents-26">Contents</h2>
<p>utilities for getting information about the system, see
<code>SysInfo</code> class</p>
<h2 id="api-documentation-40">API Documentation</h2>
<ul>
<li><a href="#SysInfo"><code>SysInfo</code></a></li>
</ul>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/sysinfo.py">View
Source on GitHub</a></p>
<h1 id="muutils.sysinfo"><code>muutils.sysinfo</code></h1>
<p>utilities for getting information about the system, see
<code>SysInfo</code> class</p>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/sysinfo.py#L0-L198">View
Source on GitHub</a></p>
<h3 id="SysInfo"><code>class SysInfo:</code></h3>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/sysinfo.py#L34-L193">View
Source on GitHub</a></p>
<p>getters for various information about the system</p>
<h3 id="SysInfo.python"><code>def python</code></h3>
<div class="sourceCode" id="cb332"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb332-1"><a href="#cb332-1" aria-hidden="true" tabindex="-1"></a>() <span class="op">-&gt;</span> <span class="bu">dict</span></span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/sysinfo.py#L37-L49">View
Source on GitHub</a></p>
<p>details about python version</p>
<h3 id="SysInfo.pip"><code>def pip</code></h3>
<div class="sourceCode" id="cb333"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb333-1"><a href="#cb333-1" aria-hidden="true" tabindex="-1"></a>() <span class="op">-&gt;</span> <span class="bu">dict</span></span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/sysinfo.py#L51-L59">View
Source on GitHub</a></p>
<p>installed packages info</p>
<h3 id="SysInfo.pytorch"><code>def pytorch</code></h3>
<div class="sourceCode" id="cb334"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb334-1"><a href="#cb334-1" aria-hidden="true" tabindex="-1"></a>() <span class="op">-&gt;</span> <span class="bu">dict</span></span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/sysinfo.py#L61-L123">View
Source on GitHub</a></p>
<p>pytorch and cuda information</p>
<h3 id="SysInfo.platform"><code>def platform</code></h3>
<div class="sourceCode" id="cb335"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb335-1"><a href="#cb335-1" aria-hidden="true" tabindex="-1"></a>() <span class="op">-&gt;</span> <span class="bu">dict</span></span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/sysinfo.py#L125-L144">View
Source on GitHub</a></p>
<h3 id="SysInfo.git_info"><code>def git_info</code></h3>
<div class="sourceCode" id="cb336"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb336-1"><a href="#cb336-1" aria-hidden="true" tabindex="-1"></a>(with_log: <span class="bu">bool</span> <span class="op">=</span> <span class="va">False</span>) <span class="op">-&gt;</span> <span class="bu">dict</span></span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/sysinfo.py#L146-L167">View
Source on GitHub</a></p>
<h3 id="SysInfo.get_all"><code>def get_all</code></h3>
<div class="sourceCode" id="cb337"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb337-1"><a href="#cb337-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb337-2"><a href="#cb337-2" aria-hidden="true" tabindex="-1"></a>    cls,</span>
<span id="cb337-3"><a href="#cb337-3" aria-hidden="true" tabindex="-1"></a>    include: Optional[<span class="bu">tuple</span>[<span class="bu">str</span>, ...]] <span class="op">=</span> <span class="va">None</span>,</span>
<span id="cb337-4"><a href="#cb337-4" aria-hidden="true" tabindex="-1"></a>    exclude: <span class="bu">tuple</span>[<span class="bu">str</span>, ...] <span class="op">=</span> ()</span>
<span id="cb337-5"><a href="#cb337-5" aria-hidden="true" tabindex="-1"></a>) <span class="op">-&gt;</span> <span class="bu">dict</span></span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/sysinfo.py#L169-L193">View
Source on GitHub</a></p>
<blockquote>
<p>docs for <a
href="https://github.com/mivanit/muutils"><code>muutils</code></a>
v0.8.6</p>
</blockquote>
<h2 id="api-documentation-41">API Documentation</h2>
<ul>
<li><a href="#COLORS"><code>COLORS</code></a></li>
<li><a href="#OutputFormat"><code>OutputFormat</code></a></li>
<li><a href="#SYMBOLS"><code>SYMBOLS</code></a></li>
<li><a href="#SPARK_CHARS"><code>SPARK_CHARS</code></a></li>
<li><a href="#array_info"><code>array_info</code></a></li>
<li><a
href="#generate_sparkline"><code>generate_sparkline</code></a></li>
<li><a href="#DEFAULT_SETTINGS"><code>DEFAULT_SETTINGS</code></a></li>
<li><a href="#array_summary"><code>array_summary</code></a></li>
</ul>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/tensor_info.py">View
Source on GitHub</a></p>
<h1 id="muutils.tensor_info"><code>muutils.tensor_info</code></h1>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/tensor_info.py#L0-L517">View
Source on GitHub</a></p>
<ul>
<li><p><code>COLORS: Dict[str, Dict[str, str]] = {'latex': {'range': '\\textcolor{purple}', 'mean': '\\textcolor{teal}', 'std': '\\textcolor{orange}', 'median': '\\textcolor{green}', 'warning': '\\textcolor{red}', 'shape': '\\textcolor{magenta}', 'dtype': '\\textcolor{gray}', 'device': '\\textcolor{gray}', 'requires_grad': '\\textcolor{gray}', 'sparkline': '\\textcolor{blue}', 'reset': ''}, 'terminal': {'range': '\x1b[35m', 'mean': '\x1b[36m', 'std': '\x1b[33m', 'median': '\x1b[32m', 'warning': '\x1b[31m', 'shape': '\x1b[95m', 'dtype': '\x1b[90m', 'device': '\x1b[90m', 'requires_grad': '\x1b[90m', 'sparkline': '\x1b[34m', 'reset': '\x1b[0m'}, 'none': {'range': '', 'mean': '', 'std': '', 'median': '', 'warning': '', 'shape': '', 'dtype': '', 'device': '', 'requires_grad': '', 'sparkline': '', 'reset': ''}}</code></p></li>
<li><p><code>OutputFormat = typing.Literal['unicode', 'latex', 'ascii']</code></p></li>
<li><p><code>SYMBOLS: Dict[Literal['unicode', 'latex', 'ascii'], Dict[str, str]] = {'latex': {'range': '\\mathcal{R}', 'mean': '\\mu', 'std': '\\sigma', 'median': '\\tilde{x}', 'distribution': '\\mathbb{P}', 'nan_values': '\\text{NANvals}', 'warning': '!!!', 'requires_grad': '\\nabla', 'true': '\\checkmark', 'false': '\\times'}, 'unicode': {'range': 'R', 'mean': 'μ', 'std': 'σ', 'median': 'x̃', 'distribution': 'ℙ', 'nan_values': 'NANvals', 'warning': '🚨', 'requires_grad': '∇', 'true': '✓', 'false': '✗'}, 'ascii': {'range': 'range', 'mean': 'mean', 'std': 'std', 'median': 'med', 'distribution': 'dist', 'nan_values': 'NANvals', 'warning': '!!!', 'requires_grad': 'requires_grad', 'true': '1', 'false': '0'}}</code></p></li>
</ul>
<p>Symbols for different formats</p>
<ul>
<li><code>SPARK_CHARS: Dict[Literal['unicode', 'latex', 'ascii'], List[str]] = {'unicode': [' ', '▁', '▂', '▃', '▄', '▅', '▆', '▇', '█'], 'ascii': [' ', '_', '.', '-', '~', '=', '#'], 'latex': [' ', '▁', '▂', '▃', '▄', '▅', '▆', '▇', '█']}</code></li>
</ul>
<p>characters for sparklines in different formats</p>
<h3 id="array_info"><code>def array_info</code></h3>
<div class="sourceCode" id="cb338"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb338-1"><a href="#cb338-1" aria-hidden="true" tabindex="-1"></a>(A: Any, hist_bins: <span class="bu">int</span> <span class="op">=</span> <span class="dv">5</span>) <span class="op">-&gt;</span> Dict[<span class="bu">str</span>, Any]</span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/tensor_info.py#L97-L248">View
Source on GitHub</a></p>
<p>Extract statistical information from an array-like object.</p>
<h3 id="parameters-48">Parameters:</h3>
<ul>
<li><code>A : array-like</code> Array to analyze (numpy array or torch
tensor)</li>
</ul>
<h3 id="returns-32">Returns:</h3>
<ul>
<li><code>Dict[str, Any]</code> Dictionary containing raw statistical
information with numeric values</li>
</ul>
<h3 id="generate_sparkline"><code>def generate_sparkline</code></h3>
<div class="sourceCode" id="cb339"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb339-1"><a href="#cb339-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb339-2"><a href="#cb339-2" aria-hidden="true" tabindex="-1"></a>    histogram: numpy.ndarray,</span>
<span id="cb339-3"><a href="#cb339-3" aria-hidden="true" tabindex="-1"></a>    <span class="bu">format</span>: Literal[<span class="st">&#39;unicode&#39;</span>, <span class="st">&#39;latex&#39;</span>, <span class="st">&#39;ascii&#39;</span>] <span class="op">=</span> <span class="st">&#39;unicode&#39;</span>,</span>
<span id="cb339-4"><a href="#cb339-4" aria-hidden="true" tabindex="-1"></a>    log_y: <span class="bu">bool</span> <span class="op">=</span> <span class="va">False</span></span>
<span id="cb339-5"><a href="#cb339-5" aria-hidden="true" tabindex="-1"></a>) <span class="op">-&gt;</span> <span class="bu">str</span></span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/tensor_info.py#L251-L298">View
Source on GitHub</a></p>
<p>Generate a sparkline visualization of the histogram.</p>
<h3 id="parameters-49">Parameters:</h3>
<ul>
<li><code>histogram : np.ndarray</code> Histogram data</li>
<li><code>format : Literal["unicode", "latex", "ascii"]</code> Output
format (defaults to <code>"unicode"</code>)</li>
<li><code>log_y : bool</code> Whether to use logarithmic y-scale
(defaults to <code>False</code>)</li>
</ul>
<h3 id="returns-33">Returns:</h3>
<ul>
<li><p><code>str</code> Sparkline visualization</p></li>
<li><p><code>DEFAULT_SETTINGS: Dict[str, Any] = {'fmt': 'unicode', 'precision': 2, 'stats': True, 'shape': True, 'dtype': True, 'device': True, 'requires_grad': True, 'sparkline': False, 'sparkline_bins': 5, 'sparkline_logy': False, 'colored': False, 'as_list': False, 'eq_char': '='}</code></p></li>
</ul>
<h3 id="array_summary"><code>def array_summary</code></h3>
<div class="sourceCode" id="cb340"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb340-1"><a href="#cb340-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb340-2"><a href="#cb340-2" aria-hidden="true" tabindex="-1"></a>    array,</span>
<span id="cb340-3"><a href="#cb340-3" aria-hidden="true" tabindex="-1"></a>    fmt: Literal[<span class="st">&#39;unicode&#39;</span>, <span class="st">&#39;latex&#39;</span>, <span class="st">&#39;ascii&#39;</span>] <span class="op">=</span> <span class="op">&lt;</span>muutils.tensor_info._UseDefaultType <span class="bu">object</span><span class="op">&gt;</span>,</span>
<span id="cb340-4"><a href="#cb340-4" aria-hidden="true" tabindex="-1"></a>    precision: <span class="bu">int</span> <span class="op">=</span> <span class="op">&lt;</span>muutils.tensor_info._UseDefaultType <span class="bu">object</span><span class="op">&gt;</span>,</span>
<span id="cb340-5"><a href="#cb340-5" aria-hidden="true" tabindex="-1"></a>    stats: <span class="bu">bool</span> <span class="op">=</span> <span class="op">&lt;</span>muutils.tensor_info._UseDefaultType <span class="bu">object</span><span class="op">&gt;</span>,</span>
<span id="cb340-6"><a href="#cb340-6" aria-hidden="true" tabindex="-1"></a>    shape: <span class="bu">bool</span> <span class="op">=</span> <span class="op">&lt;</span>muutils.tensor_info._UseDefaultType <span class="bu">object</span><span class="op">&gt;</span>,</span>
<span id="cb340-7"><a href="#cb340-7" aria-hidden="true" tabindex="-1"></a>    dtype: <span class="bu">bool</span> <span class="op">=</span> <span class="op">&lt;</span>muutils.tensor_info._UseDefaultType <span class="bu">object</span><span class="op">&gt;</span>,</span>
<span id="cb340-8"><a href="#cb340-8" aria-hidden="true" tabindex="-1"></a>    device: <span class="bu">bool</span> <span class="op">=</span> <span class="op">&lt;</span>muutils.tensor_info._UseDefaultType <span class="bu">object</span><span class="op">&gt;</span>,</span>
<span id="cb340-9"><a href="#cb340-9" aria-hidden="true" tabindex="-1"></a>    requires_grad: <span class="bu">bool</span> <span class="op">=</span> <span class="op">&lt;</span>muutils.tensor_info._UseDefaultType <span class="bu">object</span><span class="op">&gt;</span>,</span>
<span id="cb340-10"><a href="#cb340-10" aria-hidden="true" tabindex="-1"></a>    sparkline: <span class="bu">bool</span> <span class="op">=</span> <span class="op">&lt;</span>muutils.tensor_info._UseDefaultType <span class="bu">object</span><span class="op">&gt;</span>,</span>
<span id="cb340-11"><a href="#cb340-11" aria-hidden="true" tabindex="-1"></a>    sparkline_bins: <span class="bu">int</span> <span class="op">=</span> <span class="op">&lt;</span>muutils.tensor_info._UseDefaultType <span class="bu">object</span><span class="op">&gt;</span>,</span>
<span id="cb340-12"><a href="#cb340-12" aria-hidden="true" tabindex="-1"></a>    sparkline_logy: <span class="bu">bool</span> <span class="op">=</span> <span class="op">&lt;</span>muutils.tensor_info._UseDefaultType <span class="bu">object</span><span class="op">&gt;</span>,</span>
<span id="cb340-13"><a href="#cb340-13" aria-hidden="true" tabindex="-1"></a>    colored: <span class="bu">bool</span> <span class="op">=</span> <span class="op">&lt;</span>muutils.tensor_info._UseDefaultType <span class="bu">object</span><span class="op">&gt;</span>,</span>
<span id="cb340-14"><a href="#cb340-14" aria-hidden="true" tabindex="-1"></a>    eq_char: <span class="bu">str</span> <span class="op">=</span> <span class="op">&lt;</span>muutils.tensor_info._UseDefaultType <span class="bu">object</span><span class="op">&gt;</span>,</span>
<span id="cb340-15"><a href="#cb340-15" aria-hidden="true" tabindex="-1"></a>    as_list: <span class="bu">bool</span> <span class="op">=</span> <span class="op">&lt;</span>muutils.tensor_info._UseDefaultType <span class="bu">object</span><span class="op">&gt;</span></span>
<span id="cb340-16"><a href="#cb340-16" aria-hidden="true" tabindex="-1"></a>) <span class="op">-&gt;</span> Union[<span class="bu">str</span>, List[<span class="bu">str</span>]]</span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/tensor_info.py#L335-L518">View
Source on GitHub</a></p>
<p>Format array information into a readable summary.</p>
<h3 id="parameters-50">Parameters:</h3>
<ul>
<li><code>array</code> array-like object (numpy array or torch
tensor)</li>
<li><code>precision : int</code> Decimal places (defaults to
<code>2</code>)</li>
<li><code>format : Literal["unicode", "latex", "ascii"]</code> Output
format (defaults to <code>{default_fmt}</code>)</li>
<li><code>stats : bool</code> Whether to include statistical info (μ, σ,
x̃) (defaults to <code>True</code>)</li>
<li><code>shape : bool</code> Whether to include shape info (defaults to
<code>True</code>)</li>
<li><code>dtype : bool</code> Whether to include dtype info (defaults to
<code>True</code>)</li>
<li><code>device : bool</code> Whether to include device info for torch
tensors (defaults to <code>True</code>)</li>
<li><code>requires_grad : bool</code> Whether to include requires_grad
info for torch tensors (defaults to <code>True</code>)</li>
<li><code>sparkline : bool</code> Whether to include a sparkline
visualization (defaults to <code>False</code>)</li>
<li><code>sparkline_width : int</code> Width of the sparkline (defaults
to <code>20</code>)</li>
<li><code>sparkline_logy : bool</code> Whether to use logarithmic
y-scale for sparkline (defaults to <code>False</code>)</li>
<li><code>colored : bool</code> Whether to add color to output (defaults
to <code>False</code>)</li>
<li><code>as_list : bool</code> Whether to return as list of strings
instead of joined string (defaults to <code>False</code>)</li>
</ul>
<h3 id="returns-34">Returns:</h3>
<ul>
<li><code>Union[str, List[str]]</code> Formatted statistical summary,
either as string or list of strings</li>
</ul>
<blockquote>
<p>docs for <a
href="https://github.com/mivanit/muutils"><code>muutils</code></a>
v0.8.6</p>
</blockquote>
<h2 id="contents-27">Contents</h2>
<p>utilities for working with tensors and arrays.</p>
<p>notably:</p>
<ul>
<li><code>TYPE_TO_JAX_DTYPE</code> : a mapping from python, numpy, and
torch types to <code>jaxtyping</code> types</li>
<li><code>DTYPE_MAP</code> mapping string representations of types to
their type</li>
<li><code>TORCH_DTYPE_MAP</code> mapping string representations of types
to torch types</li>
<li><code>compare_state_dicts</code> for comparing two state dicts and
giving a detailed error message on whether if was keys, shapes, or
values that didn’t match</li>
</ul>
<h2 id="api-documentation-42">API Documentation</h2>
<ul>
<li><a href="#TYPE_TO_JAX_DTYPE"><code>TYPE_TO_JAX_DTYPE</code></a></li>
<li><a href="#jaxtype_factory"><code>jaxtype_factory</code></a></li>
<li><a href="#ATensor"><code>ATensor</code></a></li>
<li><a href="#NDArray"><code>NDArray</code></a></li>
<li><a
href="#numpy_to_torch_dtype"><code>numpy_to_torch_dtype</code></a></li>
<li><a href="#DTYPE_LIST"><code>DTYPE_LIST</code></a></li>
<li><a href="#DTYPE_MAP"><code>DTYPE_MAP</code></a></li>
<li><a href="#TORCH_DTYPE_MAP"><code>TORCH_DTYPE_MAP</code></a></li>
<li><a
href="#TORCH_OPTIMIZERS_MAP"><code>TORCH_OPTIMIZERS_MAP</code></a></li>
<li><a href="#pad_tensor"><code>pad_tensor</code></a></li>
<li><a href="#lpad_tensor"><code>lpad_tensor</code></a></li>
<li><a href="#rpad_tensor"><code>rpad_tensor</code></a></li>
<li><a href="#pad_array"><code>pad_array</code></a></li>
<li><a href="#lpad_array"><code>lpad_array</code></a></li>
<li><a href="#rpad_array"><code>rpad_array</code></a></li>
<li><a href="#get_dict_shapes"><code>get_dict_shapes</code></a></li>
<li><a
href="#string_dict_shapes"><code>string_dict_shapes</code></a></li>
<li><a
href="#StateDictCompareError"><code>StateDictCompareError</code></a></li>
<li><a
href="#StateDictKeysError"><code>StateDictKeysError</code></a></li>
<li><a
href="#StateDictShapeError"><code>StateDictShapeError</code></a></li>
<li><a
href="#StateDictValueError"><code>StateDictValueError</code></a></li>
<li><a
href="#compare_state_dicts"><code>compare_state_dicts</code></a></li>
</ul>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/tensor_utils.py">View
Source on GitHub</a></p>
<h1 id="muutils.tensor_utils"><code>muutils.tensor_utils</code></h1>
<p>utilities for working with tensors and arrays.</p>
<p>notably:</p>
<ul>
<li><code>TYPE_TO_JAX_DTYPE</code> : a mapping from python, numpy, and
torch types to <code>jaxtyping</code> types</li>
<li><code>DTYPE_MAP</code> mapping string representations of types to
their type</li>
<li><code>TORCH_DTYPE_MAP</code> mapping string representations of types
to torch types</li>
<li><code>compare_state_dicts</code> for comparing two state dicts and
giving a detailed error message on whether if was keys, shapes, or
values that didn’t match</li>
</ul>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/tensor_utils.py#L0-L494">View
Source on GitHub</a></p>
<ul>
<li><code>TYPE_TO_JAX_DTYPE: dict = {&lt;class 'float'&gt;: &lt;class 'jaxtyping.Float'&gt;, &lt;class 'int'&gt;: &lt;class 'jaxtyping.Int'&gt;, &lt;class 'jaxtyping.Float'&gt;: &lt;class 'jaxtyping.Float'&gt;, &lt;class 'jaxtyping.Int'&gt;: &lt;class 'jaxtyping.Int'&gt;, &lt;class 'bool'&gt;: &lt;class 'jaxtyping.Bool'&gt;, &lt;class 'jaxtyping.Bool'&gt;: &lt;class 'jaxtyping.Bool'&gt;, &lt;class 'numpy.bool_'&gt;: &lt;class 'jaxtyping.Bool'&gt;, torch.bool: &lt;class 'jaxtyping.Bool'&gt;, &lt;class 'numpy.float16'&gt;: &lt;class 'jaxtyping.Float'&gt;, &lt;class 'numpy.float32'&gt;: &lt;class 'jaxtyping.Float'&gt;, &lt;class 'numpy.float64'&gt;: &lt;class 'jaxtyping.Float'&gt;, &lt;class 'numpy.int8'&gt;: &lt;class 'jaxtyping.Int'&gt;, &lt;class 'numpy.int16'&gt;: &lt;class 'jaxtyping.Int'&gt;, &lt;class 'numpy.int32'&gt;: &lt;class 'jaxtyping.Int'&gt;, &lt;class 'numpy.int64'&gt;: &lt;class 'jaxtyping.Int'&gt;, &lt;class 'numpy.longlong'&gt;: &lt;class 'jaxtyping.Int'&gt;, &lt;class 'numpy.uint8'&gt;: &lt;class 'jaxtyping.Int'&gt;, torch.float32: &lt;class 'jaxtyping.Float'&gt;, torch.float16: &lt;class 'jaxtyping.Float'&gt;, torch.float64: &lt;class 'jaxtyping.Float'&gt;, torch.bfloat16: &lt;class 'jaxtyping.Float'&gt;, torch.int32: &lt;class 'jaxtyping.Int'&gt;, torch.int8: &lt;class 'jaxtyping.Int'&gt;, torch.int16: &lt;class 'jaxtyping.Int'&gt;, torch.int64: &lt;class 'jaxtyping.Int'&gt;}</code></li>
</ul>
<p>dict mapping python, numpy, and torch types to <code>jaxtyping</code>
types</p>
<h3 id="jaxtype_factory"><code>def jaxtype_factory</code></h3>
<div class="sourceCode" id="cb341"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb341-1"><a href="#cb341-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb341-2"><a href="#cb341-2" aria-hidden="true" tabindex="-1"></a>    name: <span class="bu">str</span>,</span>
<span id="cb341-3"><a href="#cb341-3" aria-hidden="true" tabindex="-1"></a>    array_type: <span class="bu">type</span>,</span>
<span id="cb341-4"><a href="#cb341-4" aria-hidden="true" tabindex="-1"></a>    default_jax_dtype<span class="op">=&lt;</span><span class="kw">class</span> <span class="st">&#39;jaxtyping.Float&#39;</span><span class="op">&gt;</span>,</span>
<span id="cb341-5"><a href="#cb341-5" aria-hidden="true" tabindex="-1"></a>    legacy_mode: Union[muutils.errormode.ErrorMode, <span class="bu">str</span>] <span class="op">=</span> ErrorMode.Warn</span>
<span id="cb341-6"><a href="#cb341-6" aria-hidden="true" tabindex="-1"></a>) <span class="op">-&gt;</span> <span class="bu">type</span></span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/tensor_utils.py#L78-L172">View
Source on GitHub</a></p>
<p>usage:</p>
<pre><code>ATensor = jaxtype_factory(&quot;ATensor&quot;, torch.Tensor, jaxtyping.Float)
x: ATensor[&quot;dim1 dim2&quot;, np.float32]</code></pre>
<ul>
<li><p><code>ATensor = &lt;class 'muutils.tensor_utils.jaxtype_factory.&lt;locals&gt;._BaseArray'&gt;</code></p></li>
<li><p><code>NDArray = &lt;class 'muutils.tensor_utils.jaxtype_factory.&lt;locals&gt;._BaseArray'&gt;</code></p></li>
</ul>
<h3 id="numpy_to_torch_dtype"><code>def numpy_to_torch_dtype</code></h3>
<div class="sourceCode" id="cb343"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb343-1"><a href="#cb343-1" aria-hidden="true" tabindex="-1"></a>(dtype: Union[numpy.dtype, torch.dtype]) <span class="op">-&gt;</span> torch.dtype</span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/tensor_utils.py#L195-L200">View
Source on GitHub</a></p>
<p>convert numpy dtype to torch dtype</p>
<ul>
<li><code>DTYPE_LIST: list = [&lt;class 'bool'&gt;, &lt;class 'int'&gt;, &lt;class 'float'&gt;, torch.float32, torch.float32, torch.float64, torch.float16, torch.float64, torch.bfloat16, torch.complex64, torch.complex128, torch.int32, torch.int8, torch.int16, torch.int32, torch.int64, torch.int64, torch.int16, torch.uint8, torch.bool, &lt;class 'numpy.float16'&gt;, &lt;class 'numpy.float32'&gt;, &lt;class 'numpy.float64'&gt;, &lt;class 'numpy.float16'&gt;, &lt;class 'numpy.float32'&gt;, &lt;class 'numpy.float64'&gt;, &lt;class 'numpy.complex64'&gt;, &lt;class 'numpy.complex128'&gt;, &lt;class 'numpy.int8'&gt;, &lt;class 'numpy.int16'&gt;, &lt;class 'numpy.int32'&gt;, &lt;class 'numpy.int64'&gt;, &lt;class 'numpy.longlong'&gt;, &lt;class 'numpy.int16'&gt;, &lt;class 'numpy.uint8'&gt;, &lt;class 'numpy.bool_'&gt;, &lt;class 'numpy.float64'&gt;, &lt;class 'numpy.int64'&gt;]</code></li>
</ul>
<p>list of all the python, numpy, and torch numerical types I could
think of</p>
<ul>
<li><code>DTYPE_MAP: dict = {"&lt;class 'bool'&gt;": &lt;class 'bool'&gt;, "&lt;class 'int'&gt;": &lt;class 'int'&gt;, "&lt;class 'float'&gt;": &lt;class 'float'&gt;, 'torch.float32': torch.float32, 'torch.float64': torch.float64, 'torch.float16': torch.float16, 'torch.bfloat16': torch.bfloat16, 'torch.complex64': torch.complex64, 'torch.complex128': torch.complex128, 'torch.int32': torch.int32, 'torch.int8': torch.int8, 'torch.int16': torch.int16, 'torch.int64': torch.int64, 'torch.uint8': torch.uint8, 'torch.bool': torch.bool, "&lt;class 'numpy.float16'&gt;": &lt;class 'numpy.float16'&gt;, "&lt;class 'numpy.float32'&gt;": &lt;class 'numpy.float32'&gt;, "&lt;class 'numpy.float64'&gt;": &lt;class 'numpy.float64'&gt;, "&lt;class 'numpy.complex64'&gt;": &lt;class 'numpy.complex64'&gt;, "&lt;class 'numpy.complex128'&gt;": &lt;class 'numpy.complex128'&gt;, "&lt;class 'numpy.int8'&gt;": &lt;class 'numpy.int8'&gt;, "&lt;class 'numpy.int16'&gt;": &lt;class 'numpy.int16'&gt;, "&lt;class 'numpy.int32'&gt;": &lt;class 'numpy.int32'&gt;, "&lt;class 'numpy.int64'&gt;": &lt;class 'numpy.int64'&gt;, "&lt;class 'numpy.longlong'&gt;": &lt;class 'numpy.longlong'&gt;, "&lt;class 'numpy.uint8'&gt;": &lt;class 'numpy.uint8'&gt;, "&lt;class 'numpy.bool_'&gt;": &lt;class 'numpy.bool_'&gt;, 'float16': &lt;class 'numpy.float16'&gt;, 'float32': &lt;class 'numpy.float32'&gt;, 'float64': &lt;class 'numpy.float64'&gt;, 'complex64': &lt;class 'numpy.complex64'&gt;, 'complex128': &lt;class 'numpy.complex128'&gt;, 'int8': &lt;class 'numpy.int8'&gt;, 'int16': &lt;class 'numpy.int16'&gt;, 'int32': &lt;class 'numpy.int32'&gt;, 'int64': &lt;class 'numpy.int64'&gt;, 'longlong': &lt;class 'numpy.longlong'&gt;, 'uint8': &lt;class 'numpy.uint8'&gt;, 'bool_': &lt;class 'numpy.bool_'&gt;, 'bool': &lt;class 'numpy.bool_'&gt;}</code></li>
</ul>
<p>mapping from string representations of types to their type</p>
<ul>
<li><code>TORCH_DTYPE_MAP: dict = {"&lt;class 'bool'&gt;": torch.bool, "&lt;class 'int'&gt;": torch.int64, "&lt;class 'float'&gt;": torch.float64, 'torch.float32': torch.float32, 'torch.float64': torch.float64, 'torch.float16': torch.float16, 'torch.bfloat16': torch.bfloat16, 'torch.complex64': torch.complex64, 'torch.complex128': torch.complex128, 'torch.int32': torch.int32, 'torch.int8': torch.int8, 'torch.int16': torch.int16, 'torch.int64': torch.int64, 'torch.uint8': torch.uint8, 'torch.bool': torch.bool, "&lt;class 'numpy.float16'&gt;": torch.float16, "&lt;class 'numpy.float32'&gt;": torch.float32, "&lt;class 'numpy.float64'&gt;": torch.float64, "&lt;class 'numpy.complex64'&gt;": torch.complex64, "&lt;class 'numpy.complex128'&gt;": torch.complex128, "&lt;class 'numpy.int8'&gt;": torch.int8, "&lt;class 'numpy.int16'&gt;": torch.int16, "&lt;class 'numpy.int32'&gt;": torch.int32, "&lt;class 'numpy.int64'&gt;": torch.int64, "&lt;class 'numpy.longlong'&gt;": torch.int64, "&lt;class 'numpy.uint8'&gt;": torch.uint8, "&lt;class 'numpy.bool_'&gt;": torch.bool, 'float16': torch.float16, 'float32': torch.float32, 'float64': torch.float64, 'complex64': torch.complex64, 'complex128': torch.complex128, 'int8': torch.int8, 'int16': torch.int16, 'int32': torch.int32, 'int64': torch.int64, 'longlong': torch.int64, 'uint8': torch.uint8, 'bool_': torch.bool, 'bool': torch.bool}</code></li>
</ul>
<p>mapping from string representations of types to specifically torch
types</p>
<ul>
<li><code>TORCH_OPTIMIZERS_MAP: dict[str, typing.Type[torch.optim.optimizer.Optimizer]] = {'Adagrad': &lt;class 'torch.optim.adagrad.Adagrad'&gt;, 'Adam': &lt;class 'torch.optim.adam.Adam'&gt;, 'AdamW': &lt;class 'torch.optim.adamw.AdamW'&gt;, 'SparseAdam': &lt;class 'torch.optim.sparse_adam.SparseAdam'&gt;, 'Adamax': &lt;class 'torch.optim.adamax.Adamax'&gt;, 'ASGD': &lt;class 'torch.optim.asgd.ASGD'&gt;, 'LBFGS': &lt;class 'torch.optim.lbfgs.LBFGS'&gt;, 'NAdam': &lt;class 'torch.optim.nadam.NAdam'&gt;, 'RAdam': &lt;class 'torch.optim.radam.RAdam'&gt;, 'RMSprop': &lt;class 'torch.optim.rmsprop.RMSprop'&gt;, 'Rprop': &lt;class 'torch.optim.rprop.Rprop'&gt;, 'SGD': &lt;class 'torch.optim.sgd.SGD'&gt;}</code></li>
</ul>
<h3 id="pad_tensor"><code>def pad_tensor</code></h3>
<div class="sourceCode" id="cb344"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb344-1"><a href="#cb344-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb344-2"><a href="#cb344-2" aria-hidden="true" tabindex="-1"></a>    tensor: jaxtyping.Shaped[Tensor, <span class="st">&#39;dim1&#39;</span>],</span>
<span id="cb344-3"><a href="#cb344-3" aria-hidden="true" tabindex="-1"></a>    padded_length: <span class="bu">int</span>,</span>
<span id="cb344-4"><a href="#cb344-4" aria-hidden="true" tabindex="-1"></a>    pad_value: <span class="bu">float</span> <span class="op">=</span> <span class="fl">0.0</span>,</span>
<span id="cb344-5"><a href="#cb344-5" aria-hidden="true" tabindex="-1"></a>    rpad: <span class="bu">bool</span> <span class="op">=</span> <span class="va">False</span></span>
<span id="cb344-6"><a href="#cb344-6" aria-hidden="true" tabindex="-1"></a>) <span class="op">-&gt;</span> jaxtyping.Shaped[Tensor, <span class="st">&#39;padded_length&#39;</span>]</span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/tensor_utils.py#L298-L321">View
Source on GitHub</a></p>
<p>pad a 1-d tensor on the left with pad_value to length
<code>padded_length</code></p>
<p>set <code>rpad = True</code> to pad on the right instead</p>
<h3 id="lpad_tensor"><code>def lpad_tensor</code></h3>
<div class="sourceCode" id="cb345"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb345-1"><a href="#cb345-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb345-2"><a href="#cb345-2" aria-hidden="true" tabindex="-1"></a>    tensor: torch.Tensor,</span>
<span id="cb345-3"><a href="#cb345-3" aria-hidden="true" tabindex="-1"></a>    padded_length: <span class="bu">int</span>,</span>
<span id="cb345-4"><a href="#cb345-4" aria-hidden="true" tabindex="-1"></a>    pad_value: <span class="bu">float</span> <span class="op">=</span> <span class="fl">0.0</span></span>
<span id="cb345-5"><a href="#cb345-5" aria-hidden="true" tabindex="-1"></a>) <span class="op">-&gt;</span> torch.Tensor</span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/tensor_utils.py#L324-L328">View
Source on GitHub</a></p>
<p>pad a 1-d tensor on the left with pad_value to length
<code>padded_length</code></p>
<h3 id="rpad_tensor"><code>def rpad_tensor</code></h3>
<div class="sourceCode" id="cb346"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb346-1"><a href="#cb346-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb346-2"><a href="#cb346-2" aria-hidden="true" tabindex="-1"></a>    tensor: torch.Tensor,</span>
<span id="cb346-3"><a href="#cb346-3" aria-hidden="true" tabindex="-1"></a>    pad_length: <span class="bu">int</span>,</span>
<span id="cb346-4"><a href="#cb346-4" aria-hidden="true" tabindex="-1"></a>    pad_value: <span class="bu">float</span> <span class="op">=</span> <span class="fl">0.0</span></span>
<span id="cb346-5"><a href="#cb346-5" aria-hidden="true" tabindex="-1"></a>) <span class="op">-&gt;</span> torch.Tensor</span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/tensor_utils.py#L331-L335">View
Source on GitHub</a></p>
<p>pad a 1-d tensor on the right with pad_value to length
<code>pad_length</code></p>
<h3 id="pad_array"><code>def pad_array</code></h3>
<div class="sourceCode" id="cb347"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb347-1"><a href="#cb347-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb347-2"><a href="#cb347-2" aria-hidden="true" tabindex="-1"></a>    array: jaxtyping.Shaped[ndarray, <span class="st">&#39;dim1&#39;</span>],</span>
<span id="cb347-3"><a href="#cb347-3" aria-hidden="true" tabindex="-1"></a>    padded_length: <span class="bu">int</span>,</span>
<span id="cb347-4"><a href="#cb347-4" aria-hidden="true" tabindex="-1"></a>    pad_value: <span class="bu">float</span> <span class="op">=</span> <span class="fl">0.0</span>,</span>
<span id="cb347-5"><a href="#cb347-5" aria-hidden="true" tabindex="-1"></a>    rpad: <span class="bu">bool</span> <span class="op">=</span> <span class="va">False</span></span>
<span id="cb347-6"><a href="#cb347-6" aria-hidden="true" tabindex="-1"></a>) <span class="op">-&gt;</span> jaxtyping.Shaped[ndarray, <span class="st">&#39;padded_length&#39;</span>]</span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/tensor_utils.py#L338-L360">View
Source on GitHub</a></p>
<p>pad a 1-d array on the left with pad_value to length
<code>padded_length</code></p>
<p>set <code>rpad = True</code> to pad on the right instead</p>
<h3 id="lpad_array"><code>def lpad_array</code></h3>
<div class="sourceCode" id="cb348"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb348-1"><a href="#cb348-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb348-2"><a href="#cb348-2" aria-hidden="true" tabindex="-1"></a>    array: numpy.ndarray,</span>
<span id="cb348-3"><a href="#cb348-3" aria-hidden="true" tabindex="-1"></a>    padded_length: <span class="bu">int</span>,</span>
<span id="cb348-4"><a href="#cb348-4" aria-hidden="true" tabindex="-1"></a>    pad_value: <span class="bu">float</span> <span class="op">=</span> <span class="fl">0.0</span></span>
<span id="cb348-5"><a href="#cb348-5" aria-hidden="true" tabindex="-1"></a>) <span class="op">-&gt;</span> numpy.ndarray</span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/tensor_utils.py#L363-L367">View
Source on GitHub</a></p>
<p>pad a 1-d array on the left with pad_value to length
<code>padded_length</code></p>
<h3 id="rpad_array"><code>def rpad_array</code></h3>
<div class="sourceCode" id="cb349"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb349-1"><a href="#cb349-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb349-2"><a href="#cb349-2" aria-hidden="true" tabindex="-1"></a>    array: numpy.ndarray,</span>
<span id="cb349-3"><a href="#cb349-3" aria-hidden="true" tabindex="-1"></a>    pad_length: <span class="bu">int</span>,</span>
<span id="cb349-4"><a href="#cb349-4" aria-hidden="true" tabindex="-1"></a>    pad_value: <span class="bu">float</span> <span class="op">=</span> <span class="fl">0.0</span></span>
<span id="cb349-5"><a href="#cb349-5" aria-hidden="true" tabindex="-1"></a>) <span class="op">-&gt;</span> numpy.ndarray</span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/tensor_utils.py#L370-L374">View
Source on GitHub</a></p>
<p>pad a 1-d array on the right with pad_value to length
<code>pad_length</code></p>
<h3 id="get_dict_shapes"><code>def get_dict_shapes</code></h3>
<div class="sourceCode" id="cb350"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb350-1"><a href="#cb350-1" aria-hidden="true" tabindex="-1"></a>(d: <span class="bu">dict</span>[<span class="bu">str</span>, torch.Tensor]) <span class="op">-&gt;</span> <span class="bu">dict</span>[<span class="bu">str</span>, <span class="bu">tuple</span>[<span class="bu">int</span>, ...]]</span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/tensor_utils.py#L377-L379">View
Source on GitHub</a></p>
<p>given a state dict or cache dict, compute the shapes and put them in
a nested dict</p>
<h3 id="string_dict_shapes"><code>def string_dict_shapes</code></h3>
<div class="sourceCode" id="cb351"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb351-1"><a href="#cb351-1" aria-hidden="true" tabindex="-1"></a>(d: <span class="bu">dict</span>[<span class="bu">str</span>, torch.Tensor]) <span class="op">-&gt;</span> <span class="bu">str</span></span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/tensor_utils.py#L382-L394">View
Source on GitHub</a></p>
<p>printable version of get_dict_shapes</p>
<h3
id="StateDictCompareError"><code>class StateDictCompareError(builtins.AssertionError):</code></h3>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/tensor_utils.py#L397-L400">View
Source on GitHub</a></p>
<p>raised when state dicts don’t match</p>
<h3 id="inherited-members-24">Inherited Members</h3>
<ul>
<li><p><a
href="#StateDictCompareError.__init__"><code>AssertionError</code></a></p></li>
<li><p><a
href="#StateDictCompareError.with_traceback"><code>with_traceback</code></a></p></li>
<li><p><a
href="#StateDictCompareError.add_note"><code>add_note</code></a></p></li>
<li><p><a
href="#StateDictCompareError.args"><code>args</code></a></p></li>
</ul>
<h3
id="StateDictKeysError"><code>class StateDictKeysError(StateDictCompareError):</code></h3>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/tensor_utils.py#L403-L406">View
Source on GitHub</a></p>
<p>raised when state dict keys don’t match</p>
<h3 id="inherited-members-25">Inherited Members</h3>
<ul>
<li><p><a
href="#StateDictKeysError.__init__"><code>AssertionError</code></a></p></li>
<li><p><a
href="#StateDictKeysError.with_traceback"><code>with_traceback</code></a></p></li>
<li><p><a
href="#StateDictKeysError.add_note"><code>add_note</code></a></p></li>
<li><p><a href="#StateDictKeysError.args"><code>args</code></a></p></li>
</ul>
<h3
id="StateDictShapeError"><code>class StateDictShapeError(StateDictCompareError):</code></h3>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/tensor_utils.py#L409-L412">View
Source on GitHub</a></p>
<p>raised when state dict shapes don’t match</p>
<h3 id="inherited-members-26">Inherited Members</h3>
<ul>
<li><p><a
href="#StateDictShapeError.__init__"><code>AssertionError</code></a></p></li>
<li><p><a
href="#StateDictShapeError.with_traceback"><code>with_traceback</code></a></p></li>
<li><p><a
href="#StateDictShapeError.add_note"><code>add_note</code></a></p></li>
<li><p><a
href="#StateDictShapeError.args"><code>args</code></a></p></li>
</ul>
<h3
id="StateDictValueError"><code>class StateDictValueError(StateDictCompareError):</code></h3>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/tensor_utils.py#L415-L418">View
Source on GitHub</a></p>
<p>raised when state dict values don’t match</p>
<h3 id="inherited-members-27">Inherited Members</h3>
<ul>
<li><p><a
href="#StateDictValueError.__init__"><code>AssertionError</code></a></p></li>
<li><p><a
href="#StateDictValueError.with_traceback"><code>with_traceback</code></a></p></li>
<li><p><a
href="#StateDictValueError.add_note"><code>add_note</code></a></p></li>
<li><p><a
href="#StateDictValueError.args"><code>args</code></a></p></li>
</ul>
<h3 id="compare_state_dicts"><code>def compare_state_dicts</code></h3>
<div class="sourceCode" id="cb352"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb352-1"><a href="#cb352-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb352-2"><a href="#cb352-2" aria-hidden="true" tabindex="-1"></a>    d1: <span class="bu">dict</span>,</span>
<span id="cb352-3"><a href="#cb352-3" aria-hidden="true" tabindex="-1"></a>    d2: <span class="bu">dict</span>,</span>
<span id="cb352-4"><a href="#cb352-4" aria-hidden="true" tabindex="-1"></a>    rtol: <span class="bu">float</span> <span class="op">=</span> <span class="fl">1e-05</span>,</span>
<span id="cb352-5"><a href="#cb352-5" aria-hidden="true" tabindex="-1"></a>    atol: <span class="bu">float</span> <span class="op">=</span> <span class="fl">1e-08</span>,</span>
<span id="cb352-6"><a href="#cb352-6" aria-hidden="true" tabindex="-1"></a>    verbose: <span class="bu">bool</span> <span class="op">=</span> <span class="va">True</span></span>
<span id="cb352-7"><a href="#cb352-7" aria-hidden="true" tabindex="-1"></a>) <span class="op">-&gt;</span> <span class="va">None</span></span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/tensor_utils.py#L421-L495">View
Source on GitHub</a></p>
<p>compare two dicts of tensors</p>
<h3 id="parameters-51">Parameters:</h3>
<ul>
<li><code>d1 : dict</code></li>
<li><code>d2 : dict</code></li>
<li><code>rtol : float</code> (defaults to <code>1e-5</code>)</li>
<li><code>atol : float</code> (defaults to <code>1e-8</code>)</li>
<li><code>verbose : bool</code> (defaults to <code>True</code>)</li>
</ul>
<h3 id="raises-23">Raises:</h3>
<ul>
<li><code>StateDictKeysError</code> : keys don’t match</li>
<li><code>StateDictShapeError</code> : shapes don’t match (but keys
do)</li>
<li><code>StateDictValueError</code> : values don’t match (but keys and
shapes do)</li>
</ul>
<blockquote>
<p>docs for <a
href="https://github.com/mivanit/muutils"><code>muutils</code></a>
v0.8.6</p>
</blockquote>
<h2 id="contents-28">Contents</h2>
<p><code>timeit_fancy</code> is just a fancier version of timeit with
more options</p>
<h2 id="api-documentation-43">API Documentation</h2>
<ul>
<li><a href="#FancyTimeitResult"><code>FancyTimeitResult</code></a></li>
<li><a href="#timeit_fancy"><code>timeit_fancy</code></a></li>
</ul>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/timeit_fancy.py">View
Source on GitHub</a></p>
<h1 id="muutils.timeit_fancy"><code>muutils.timeit_fancy</code></h1>
<p><code>timeit_fancy</code> is just a fancier version of timeit with
more options</p>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/timeit_fancy.py#L0-L100">View
Source on GitHub</a></p>
<h3
id="FancyTimeitResult"><code>class FancyTimeitResult(typing.NamedTuple):</code></h3>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/timeit_fancy.py#L16-L21">View
Source on GitHub</a></p>
<p>return type of <code>timeit_fancy</code></p>
<h3 id="FancyTimeitResult.__init__"><code>FancyTimeitResult</code></h3>
<div class="sourceCode" id="cb353"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb353-1"><a href="#cb353-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb353-2"><a href="#cb353-2" aria-hidden="true" tabindex="-1"></a>    timings: ForwardRef(<span class="st">&#39;StatCounter&#39;</span>),</span>
<span id="cb353-3"><a href="#cb353-3" aria-hidden="true" tabindex="-1"></a>    return_value: ForwardRef(<span class="st">&#39;T&#39;</span>),</span>
<span id="cb353-4"><a href="#cb353-4" aria-hidden="true" tabindex="-1"></a>    profile: ForwardRef(<span class="st">&#39;Union[pstats.Stats, None]&#39;</span>)</span>
<span id="cb353-5"><a href="#cb353-5" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p>Create new instance of FancyTimeitResult(timings, return_value,
profile)</p>
<ul>
<li><code>timings: muutils.statcounter.StatCounter</code></li>
</ul>
<p>Alias for field number 0</p>
<ul>
<li><code>return_value: ~T</code></li>
</ul>
<p>Alias for field number 1</p>
<ul>
<li><code>profile: Optional[pstats.Stats]</code></li>
</ul>
<p>Alias for field number 2</p>
<h3 id="inherited-members-28">Inherited Members</h3>
<ul>
<li><a href="#FancyTimeitResult.index"><code>index</code></a></li>
<li><a href="#FancyTimeitResult.count"><code>count</code></a></li>
</ul>
<h3 id="timeit_fancy"><code>def timeit_fancy</code></h3>
<div class="sourceCode" id="cb354"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb354-1"><a href="#cb354-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb354-2"><a href="#cb354-2" aria-hidden="true" tabindex="-1"></a>    cmd: Union[Callable[[], <span class="op">~</span>T], <span class="bu">str</span>],</span>
<span id="cb354-3"><a href="#cb354-3" aria-hidden="true" tabindex="-1"></a>    setup: Union[<span class="bu">str</span>, Callable[[], Any]] <span class="op">=</span> <span class="op">&lt;</span>function <span class="op">&lt;</span><span class="kw">lambda</span><span class="op">&gt;&gt;</span>,</span>
<span id="cb354-4"><a href="#cb354-4" aria-hidden="true" tabindex="-1"></a>    repeats: <span class="bu">int</span> <span class="op">=</span> <span class="dv">5</span>,</span>
<span id="cb354-5"><a href="#cb354-5" aria-hidden="true" tabindex="-1"></a>    namespace: Optional[<span class="bu">dict</span>[<span class="bu">str</span>, Any]] <span class="op">=</span> <span class="va">None</span>,</span>
<span id="cb354-6"><a href="#cb354-6" aria-hidden="true" tabindex="-1"></a>    get_return: <span class="bu">bool</span> <span class="op">=</span> <span class="va">True</span>,</span>
<span id="cb354-7"><a href="#cb354-7" aria-hidden="true" tabindex="-1"></a>    do_profiling: <span class="bu">bool</span> <span class="op">=</span> <span class="va">False</span></span>
<span id="cb354-8"><a href="#cb354-8" aria-hidden="true" tabindex="-1"></a>) <span class="op">-&gt;</span> muutils.timeit_fancy.FancyTimeitResult</span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/timeit_fancy.py#L24-L101">View
Source on GitHub</a></p>
<p>Wrapper for <code>timeit</code> to get the fastest run of a callable
with more customization options.</p>
<p>Approximates the functionality of the %timeit magic or command line
interface in a Python callable.</p>
<h3 id="parameters-52">Parameters</h3>
<ul>
<li><code>cmd: Callable[[], T] | str</code> The callable to time. If a
string, it will be passed to <code>timeit.Timer</code> as the
<code>stmt</code> argument.</li>
<li><code>setup: str</code> The setup code to run before
<code>cmd</code>. If a string, it will be passed to
<code>timeit.Timer</code> as the <code>setup</code> argument.</li>
<li><code>repeats: int</code> The number of times to run
<code>cmd</code> to get a reliable measurement.</li>
<li><code>namespace: dict[str, Any]</code> Passed to
<code>timeit.Timer</code> constructor. If <code>cmd</code> or
<code>setup</code> use local or global variables, they must be passed
here. See <code>timeit</code> documentation for details.</li>
<li><code>get_return: bool</code> Whether to pass the value returned
from <code>cmd</code>. If True, the return value will be appended in a
tuple with execution time. This is for speed and convenience so that
<code>cmd</code> doesn’t need to be run again in the calling scope if
the return values are needed. (default: <code>False</code>)</li>
<li><code>do_profiling: bool</code> Whether to return a
<code>pstats.Stats</code> object in addition to the time and return
value. (default: <code>False</code>)</li>
</ul>
<h3 id="returns-35">Returns</h3>
<p><code>FancyTimeitResult</code>, which is a NamedTuple with the
following fields:</p>
<ul>
<li><code>time: float</code> The time in seconds it took to run
<code>cmd</code> the minimum number of times to get a reliable
measurement.</li>
<li><code>return_value: T|None</code> The return value of
<code>cmd</code> if <code>get_return</code> is <code>True</code>,
otherwise <code>None</code>.</li>
<li><code>profile: pstats.Stats|None</code> A <code>pstats.Stats</code>
object if <code>do_profiling</code> is <code>True</code>, otherwise
<code>None</code>.</li>
</ul>
<blockquote>
<p>docs for <a
href="https://github.com/mivanit/muutils"><code>muutils</code></a>
v0.8.6</p>
</blockquote>
<h2 id="contents-29">Contents</h2>
<p>experimental utility for validating types in python, see
<code>validate_type</code></p>
<h2 id="api-documentation-44">API Documentation</h2>
<ul>
<li><a href="#GenericAliasTypes"><code>GenericAliasTypes</code></a></li>
<li><a
href="#IncorrectTypeException"><code>IncorrectTypeException</code></a></li>
<li><a
href="#TypeHintNotImplementedError"><code>TypeHintNotImplementedError</code></a></li>
<li><a
href="#InvalidGenericAliasError"><code>InvalidGenericAliasError</code></a></li>
<li><a href="#validate_type"><code>validate_type</code></a></li>
<li><a
href="#get_fn_allowed_kwargs"><code>get_fn_allowed_kwargs</code></a></li>
</ul>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/validate_type.py">View
Source on GitHub</a></p>
<h1 id="muutils.validate_type"><code>muutils.validate_type</code></h1>
<p>experimental utility for validating types in python, see
<code>validate_type</code></p>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/validate_type.py#L0-L236">View
Source on GitHub</a></p>
<ul>
<li><code>GenericAliasTypes: tuple = (&lt;class 'types.GenericAlias'&gt;, &lt;class 'typing._GenericAlias'&gt;, &lt;class 'typing._UnionGenericAlias'&gt;, &lt;class 'typing._BaseGenericAlias'&gt;)</code></li>
</ul>
<h3
id="IncorrectTypeException"><code>class IncorrectTypeException(builtins.TypeError):</code></h3>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/validate_type.py#L25-L26">View
Source on GitHub</a></p>
<p>Inappropriate argument type.</p>
<h3 id="inherited-members-29">Inherited Members</h3>
<ul>
<li><p><a
href="#IncorrectTypeException.__init__"><code>TypeError</code></a></p></li>
<li><p><a
href="#IncorrectTypeException.with_traceback"><code>with_traceback</code></a></p></li>
<li><p><a
href="#IncorrectTypeException.add_note"><code>add_note</code></a></p></li>
<li><p><a
href="#IncorrectTypeException.args"><code>args</code></a></p></li>
</ul>
<h3
id="TypeHintNotImplementedError"><code>class TypeHintNotImplementedError(builtins.NotImplementedError):</code></h3>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/validate_type.py#L29-L30">View
Source on GitHub</a></p>
<p>Method or function hasn’t been implemented yet.</p>
<h3 id="inherited-members-30">Inherited Members</h3>
<ul>
<li><p><a
href="#TypeHintNotImplementedError.__init__"><code>NotImplementedError</code></a></p></li>
<li><p><a
href="#TypeHintNotImplementedError.with_traceback"><code>with_traceback</code></a></p></li>
<li><p><a
href="#TypeHintNotImplementedError.add_note"><code>add_note</code></a></p></li>
<li><p><a
href="#TypeHintNotImplementedError.args"><code>args</code></a></p></li>
</ul>
<h3
id="InvalidGenericAliasError"><code>class InvalidGenericAliasError(builtins.TypeError):</code></h3>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/validate_type.py#L33-L34">View
Source on GitHub</a></p>
<p>Inappropriate argument type.</p>
<h3 id="inherited-members-31">Inherited Members</h3>
<ul>
<li><p><a
href="#InvalidGenericAliasError.__init__"><code>TypeError</code></a></p></li>
<li><p><a
href="#InvalidGenericAliasError.with_traceback"><code>with_traceback</code></a></p></li>
<li><p><a
href="#InvalidGenericAliasError.add_note"><code>add_note</code></a></p></li>
<li><p><a
href="#InvalidGenericAliasError.args"><code>args</code></a></p></li>
</ul>
<h3 id="validate_type"><code>def validate_type</code></h3>
<div class="sourceCode" id="cb355"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb355-1"><a href="#cb355-1" aria-hidden="true" tabindex="-1"></a>(value: Any, expected_type: Any, do_except: <span class="bu">bool</span> <span class="op">=</span> <span class="va">False</span>) <span class="op">-&gt;</span> <span class="bu">bool</span></span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/validate_type.py#L58-L220">View
Source on GitHub</a></p>
<p>Validate that a <code>value</code> is of the
<code>expected_type</code></p>
<h3 id="parameters-53">Parameters</h3>
<ul>
<li><code>value</code>: the value to check the type of</li>
<li><code>expected_type</code>: the type to check against. Not all types
are supported</li>
<li><code>do_except</code>: if <code>True</code>, raise an exception if
the type is incorrect (instead of returning <code>False</code>)
(default: <code>False</code>)</li>
</ul>
<h3 id="returns-36">Returns</h3>
<ul>
<li><code>bool</code>: <code>True</code> if the value is of the expected
type, <code>False</code> otherwise.</li>
</ul>
<h3 id="raises-24">Raises</h3>
<ul>
<li><code>IncorrectTypeException(TypeError)</code>: if the type is
incorrect and <code>do_except</code> is <code>True</code></li>
<li><code>TypeHintNotImplementedError(NotImplementedError)</code>: if
the type hint is not implemented</li>
<li><code>InvalidGenericAliasError(TypeError)</code>: if the generic
alias is invalid</li>
</ul>
<p>use <code>typeguard</code> for a more robust solution:
https://github.com/agronholm/typeguard</p>
<h3
id="get_fn_allowed_kwargs"><code>def get_fn_allowed_kwargs</code></h3>
<div class="sourceCode" id="cb356"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb356-1"><a href="#cb356-1" aria-hidden="true" tabindex="-1"></a>(fn: Callable) <span class="op">-&gt;</span> Set[<span class="bu">str</span>]</span></code></pre></div>
<p><a
href="https://github.com/mivanit/muutils/blob/0.8.6/validate_type.py#L223-L237">View
Source on GitHub</a></p>
<p>Get the allowed kwargs for a function, raising an exception if the
signature cannot be determined.</p>
